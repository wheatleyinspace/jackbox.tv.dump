const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browserAll-B3t-XKkh.js","assets/webworkerAll-DUzZPZ4s.js"])))=>i.map(i=>d[i]);
var MW=Object.defineProperty;var NW=(t,e,r)=>e in t?MW(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Be=(t,e,r)=>NW(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function q1(t){const e=Object.create(null);for(const r of t.split(","))e[r]=1;return r=>r in e}const Er={},wu=[],As=()=>{},FW=()=>!1,Od=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),X1=t=>t.startsWith("onUpdate:"),mn=Object.assign,z1=(t,e)=>{const r=t.indexOf(e);r>-1&&t.splice(r,1)},GW=Object.prototype.hasOwnProperty,pr=(t,e)=>GW.call(t,e),Lt=Array.isArray,Lu=t=>Wc(t)==="[object Map]",Dd=t=>Wc(t)==="[object Set]",DC=t=>Wc(t)==="[object Date]",Kt=t=>typeof t=="function",qr=t=>typeof t=="string",os=t=>typeof t=="symbol",Tr=t=>t!==null&&typeof t=="object",MU=t=>(Tr(t)||Kt(t))&&Kt(t.then)&&Kt(t.catch),NU=Object.prototype.toString,Wc=t=>NU.call(t),KW=t=>Wc(t).slice(8,-1),FU=t=>Wc(t)==="[object Object]",W1=t=>qr(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ic=q1(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),kd=t=>{const e=Object.create(null);return r=>e[r]||(e[r]=t(r))},VW=/-(\w)/g,$i=kd(t=>t.replace(VW,(e,r)=>r?r.toUpperCase():"")),$W=/\B([A-Z])/g,$a=kd(t=>t.replace($W,"-$1").toLowerCase()),Ud=kd(t=>t.charAt(0).toUpperCase()+t.slice(1)),um=kd(t=>t?`on${Ud(t)}`:""),Na=(t,e)=>!Object.is(t,e),Gh=(t,...e)=>{for(let r=0;r<t.length;r++)t[r](...e)},GU=(t,e,r,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:r})},gy=t=>{const e=parseFloat(t);return isNaN(e)?t:e},HW=t=>{const e=qr(t)?Number(t):NaN;return isNaN(e)?t:e};let kC;const Md=()=>kC||(kC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ko(t){if(Lt(t)){const e={};for(let r=0;r<t.length;r++){const i=t[r],s=qr(i)?WW(i):ko(i);if(s)for(const a in s)e[a]=s[a]}return e}else if(qr(t)||Tr(t))return t}const qW=/;(?![^(]*\))/g,XW=/:([^]+)/,zW=/\/\*[^]*?\*\//g;function WW(t){const e={};return t.replace(zW,"").split(qW).forEach(r=>{if(r){const i=r.split(XW);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function kt(t){let e="";if(qr(t))e=t;else if(Lt(t))for(let r=0;r<t.length;r++){const i=kt(t[r]);i&&(e+=i+" ")}else if(Tr(t))for(const r in t)t[r]&&(e+=r+" ");return e.trim()}function jW(t){if(!t)return null;let{class:e,style:r}=t;return e&&!qr(e)&&(t.class=kt(e)),r&&(t.style=ko(r)),t}const YW="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ZW=q1(YW);function KU(t){return!!t||t===""}function QW(t,e){if(t.length!==e.length)return!1;let r=!0;for(let i=0;r&&i<t.length;i++)r=Nd(t[i],e[i]);return r}function Nd(t,e){if(t===e)return!0;let r=DC(t),i=DC(e);if(r||i)return r&&i?t.getTime()===e.getTime():!1;if(r=os(t),i=os(e),r||i)return t===e;if(r=Lt(t),i=Lt(e),r||i)return r&&i?QW(t,e):!1;if(r=Tr(t),i=Tr(e),r||i){if(!r||!i)return!1;const s=Object.keys(t).length,a=Object.keys(e).length;if(s!==a)return!1;for(const n in t){const o=t.hasOwnProperty(n),u=e.hasOwnProperty(n);if(o&&!u||!o&&u||!Nd(t[n],e[n]))return!1}}return String(t)===String(e)}function VU(t,e){return t.findIndex(r=>Nd(r,e))}const $U=t=>!!(t&&t.__v_isRef===!0),xt=t=>qr(t)?t:t==null?"":Lt(t)||Tr(t)&&(t.toString===NU||!Kt(t.toString))?$U(t)?xt(t.value):JSON.stringify(t,HU,2):String(t),HU=(t,e)=>$U(e)?HU(t,e.value):Lu(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((r,[i,s],a)=>(r[lm(i,a)+" =>"]=s,r),{})}:Dd(e)?{[`Set(${e.size})`]:[...e.values()].map(r=>lm(r))}:os(e)?lm(e):Tr(e)&&!Lt(e)&&!FU(e)?String(e):e,lm=(t,e="")=>{var r;return os(t)?`Symbol(${(r=t.description)!=null?r:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xi;class qU{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=xi,!e&&xi&&(this.index=(xi.scopes||(xi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].pause();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,r;if(this.scopes)for(e=0,r=this.scopes.length;e<r;e++)this.scopes[e].resume();for(e=0,r=this.effects.length;e<r;e++)this.effects[e].resume()}}run(e){if(this._active){const r=xi;try{return xi=this,e()}finally{xi=r}}}on(){xi=this}off(){xi=this.parent}stop(e){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function JW(t){return new qU(t)}function ej(){return xi}let Rr;const cm=new WeakSet;class XU{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,xi&&xi.active&&xi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cm.has(this)&&(cm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||WU(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,UC(this),jU(this);const e=Rr,r=as;Rr=this,as=!0;try{return this.fn()}finally{YU(this),Rr=e,as=r,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Z1(e);this.deps=this.depsTail=void 0,UC(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){my(this)&&this.run()}get dirty(){return my(this)}}let zU=0,sc,ac;function WU(t,e=!1){if(t.flags|=8,e){t.next=ac,ac=t;return}t.next=sc,sc=t}function j1(){zU++}function Y1(){if(--zU>0)return;if(ac){let e=ac;for(ac=void 0;e;){const r=e.next;e.next=void 0,e.flags&=-9,e=r}}let t;for(;sc;){let e=sc;for(sc=void 0;e;){const r=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){t||(t=i)}e=r}}if(t)throw t}function jU(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function YU(t){let e,r=t.depsTail,i=r;for(;i;){const s=i.prevDep;i.version===-1?(i===r&&(r=s),Z1(i),tj(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}t.deps=e,t.depsTail=r}function my(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ZU(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ZU(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===yc))return;t.globalVersion=yc;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!my(t)){t.flags&=-3;return}const r=Rr,i=as;Rr=t,as=!0;try{jU(t);const s=t.fn(t._value);(e.version===0||Na(s,t._value))&&(t._value=s,e.version++)}catch(s){throw e.version++,s}finally{Rr=r,as=i,YU(t),t.flags&=-3}}function Z1(t,e=!1){const{dep:r,prevSub:i,nextSub:s}=t;if(i&&(i.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=i,t.nextSub=void 0),r.subs===t&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let a=r.computed.deps;a;a=a.nextDep)Z1(a,!0)}!e&&!--r.sc&&r.map&&r.map.delete(r.key)}function tj(t){const{prevDep:e,nextDep:r}=t;e&&(e.nextDep=r,t.prevDep=void 0),r&&(r.prevDep=e,t.nextDep=void 0)}let as=!0;const QU=[];function Ha(){QU.push(as),as=!1}function qa(){const t=QU.pop();as=t===void 0?!0:t}function UC(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const r=Rr;Rr=void 0;try{e()}finally{Rr=r}}}let yc=0;class rj{constructor(e,r){this.sub=e,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Q1{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Rr||!as||Rr===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==Rr)r=this.activeLink=new rj(Rr,this),Rr.deps?(r.prevDep=Rr.depsTail,Rr.depsTail.nextDep=r,Rr.depsTail=r):Rr.deps=Rr.depsTail=r,JU(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=Rr.depsTail,r.nextDep=void 0,Rr.depsTail.nextDep=r,Rr.depsTail=r,Rr.deps===r&&(Rr.deps=i)}return r}trigger(e){this.version++,yc++,this.notify(e)}notify(e){j1();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{Y1()}}}function JU(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)JU(i)}const r=t.dep.subs;r!==t&&(t.prevSub=r,r&&(r.nextSub=t)),t.dep.subs=t}}const _y=new WeakMap,Oo=Symbol(""),by=Symbol(""),Tc=Symbol("");function Ln(t,e,r){if(as&&Rr){let i=_y.get(t);i||_y.set(t,i=new Map);let s=i.get(r);s||(i.set(r,s=new Q1),s.map=i,s.key=r),s.track()}}function ea(t,e,r,i,s,a){const n=_y.get(t);if(!n){yc++;return}const o=u=>{u&&u.trigger()};if(j1(),e==="clear")n.forEach(o);else{const u=Lt(t),c=u&&W1(r);if(u&&r==="length"){const f=Number(i);n.forEach((h,p)=>{(p==="length"||p===Tc||!os(p)&&p>=f)&&o(h)})}else switch((r!==void 0||n.has(void 0))&&o(n.get(r)),c&&o(n.get(Tc)),e){case"add":u?c&&o(n.get("length")):(o(n.get(Oo)),Lu(t)&&o(n.get(by)));break;case"delete":u||(o(n.get(Oo)),Lu(t)&&o(n.get(by)));break;case"set":Lu(t)&&o(n.get(Oo));break}}Y1()}function uu(t){const e=hr(t);return e===t?e:(Ln(e,"iterate",Tc),Ki(t)?e:e.map(In))}function Fd(t){return Ln(t=hr(t),"iterate",Tc),t}const nj={__proto__:null,[Symbol.iterator](){return fm(this,Symbol.iterator,In)},concat(...t){return uu(this).concat(...t.map(e=>Lt(e)?uu(e):e))},entries(){return fm(this,"entries",t=>(t[1]=In(t[1]),t))},every(t,e){return qs(this,"every",t,e,void 0,arguments)},filter(t,e){return qs(this,"filter",t,e,r=>r.map(In),arguments)},find(t,e){return qs(this,"find",t,e,In,arguments)},findIndex(t,e){return qs(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return qs(this,"findLast",t,e,In,arguments)},findLastIndex(t,e){return qs(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return qs(this,"forEach",t,e,void 0,arguments)},includes(...t){return hm(this,"includes",t)},indexOf(...t){return hm(this,"indexOf",t)},join(t){return uu(this).join(t)},lastIndexOf(...t){return hm(this,"lastIndexOf",t)},map(t,e){return qs(this,"map",t,e,void 0,arguments)},pop(){return Bl(this,"pop")},push(...t){return Bl(this,"push",t)},reduce(t,...e){return MC(this,"reduce",t,e)},reduceRight(t,...e){return MC(this,"reduceRight",t,e)},shift(){return Bl(this,"shift")},some(t,e){return qs(this,"some",t,e,void 0,arguments)},splice(...t){return Bl(this,"splice",t)},toReversed(){return uu(this).toReversed()},toSorted(t){return uu(this).toSorted(t)},toSpliced(...t){return uu(this).toSpliced(...t)},unshift(...t){return Bl(this,"unshift",t)},values(){return fm(this,"values",In)}};function fm(t,e,r){const i=Fd(t),s=i[e]();return i!==t&&!Ki(t)&&(s._next=s.next,s.next=()=>{const a=s._next();return a.value&&(a.value=r(a.value)),a}),s}const ij=Array.prototype;function qs(t,e,r,i,s,a){const n=Fd(t),o=n!==t&&!Ki(t),u=n[e];if(u!==ij[e]){const h=u.apply(t,a);return o?In(h):h}let c=r;n!==t&&(o?c=function(h,p){return r.call(this,In(h),p,t)}:r.length>2&&(c=function(h,p){return r.call(this,h,p,t)}));const f=u.call(n,c,i);return o&&s?s(f):f}function MC(t,e,r,i){const s=Fd(t);let a=r;return s!==t&&(Ki(t)?r.length>3&&(a=function(n,o,u){return r.call(this,n,o,u,t)}):a=function(n,o,u){return r.call(this,n,In(o),u,t)}),s[e](a,...i)}function hm(t,e,r){const i=hr(t);Ln(i,"iterate",Tc);const s=i[e](...r);return(s===-1||s===!1)&&tT(r[0])?(r[0]=hr(r[0]),i[e](...r)):s}function Bl(t,e,r=[]){Ha(),j1();const i=hr(t)[e].apply(t,r);return Y1(),qa(),i}const sj=q1("__proto__,__v_isRef,__isVue"),eM=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(os));function aj(t){os(t)||(t=String(t));const e=hr(this);return Ln(e,"has",t),e.hasOwnProperty(t)}class tM{constructor(e=!1,r=!1){this._isReadonly=e,this._isShallow=r}get(e,r,i){if(r==="__v_skip")return e.__v_skip;const s=this._isReadonly,a=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return a;if(r==="__v_raw")return i===(s?a?mj:sM:a?iM:nM).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const n=Lt(e);if(!s){let u;if(n&&(u=nj[r]))return u;if(r==="hasOwnProperty")return aj}const o=Reflect.get(e,r,Rn(e)?e:i);return(os(r)?eM.has(r):sj(r))||(s||Ln(e,"get",r),a)?o:Rn(o)?n&&W1(r)?o:o.value:Tr(o)?s?aM(o):Uo(o):o}}class rM extends tM{constructor(e=!1){super(!1,e)}set(e,r,i,s){let a=e[r];if(!this._isShallow){const u=Mo(a);if(!Ki(i)&&!Mo(i)&&(a=hr(a),i=hr(i)),!Lt(e)&&Rn(a)&&!Rn(i))return u?!1:(a.value=i,!0)}const n=Lt(e)&&W1(r)?Number(r)<e.length:pr(e,r),o=Reflect.set(e,r,i,Rn(e)?e:s);return e===hr(s)&&(n?Na(i,a)&&ea(e,"set",r,i):ea(e,"add",r,i)),o}deleteProperty(e,r){const i=pr(e,r);e[r];const s=Reflect.deleteProperty(e,r);return s&&i&&ea(e,"delete",r,void 0),s}has(e,r){const i=Reflect.has(e,r);return(!os(r)||!eM.has(r))&&Ln(e,"has",r),i}ownKeys(e){return Ln(e,"iterate",Lt(e)?"length":Oo),Reflect.ownKeys(e)}}class oj extends tM{constructor(e=!1){super(!0,e)}set(e,r){return!0}deleteProperty(e,r){return!0}}const uj=new rM,lj=new oj,cj=new rM(!0);const xy=t=>t,rh=t=>Reflect.getPrototypeOf(t);function fj(t,e,r){return function(...i){const s=this.__v_raw,a=hr(s),n=Lu(a),o=t==="entries"||t===Symbol.iterator&&n,u=t==="keys"&&n,c=s[t](...i),f=r?xy:e?vy:In;return!e&&Ln(a,"iterate",u?by:Oo),{next(){const{value:h,done:p}=c.next();return p?{value:h,done:p}:{value:o?[f(h[0]),f(h[1])]:f(h),done:p}},[Symbol.iterator](){return this}}}}function nh(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function hj(t,e){const r={get(s){const a=this.__v_raw,n=hr(a),o=hr(s);t||(Na(s,o)&&Ln(n,"get",s),Ln(n,"get",o));const{has:u}=rh(n),c=e?xy:t?vy:In;if(u.call(n,s))return c(a.get(s));if(u.call(n,o))return c(a.get(o));a!==n&&a.get(s)},get size(){const s=this.__v_raw;return!t&&Ln(hr(s),"iterate",Oo),Reflect.get(s,"size",s)},has(s){const a=this.__v_raw,n=hr(a),o=hr(s);return t||(Na(s,o)&&Ln(n,"has",s),Ln(n,"has",o)),s===o?a.has(s):a.has(s)||a.has(o)},forEach(s,a){const n=this,o=n.__v_raw,u=hr(o),c=e?xy:t?vy:In;return!t&&Ln(u,"iterate",Oo),o.forEach((f,h)=>s.call(a,c(f),c(h),n))}};return mn(r,t?{add:nh("add"),set:nh("set"),delete:nh("delete"),clear:nh("clear")}:{add(s){!e&&!Ki(s)&&!Mo(s)&&(s=hr(s));const a=hr(this);return rh(a).has.call(a,s)||(a.add(s),ea(a,"add",s,s)),this},set(s,a){!e&&!Ki(a)&&!Mo(a)&&(a=hr(a));const n=hr(this),{has:o,get:u}=rh(n);let c=o.call(n,s);c||(s=hr(s),c=o.call(n,s));const f=u.call(n,s);return n.set(s,a),c?Na(a,f)&&ea(n,"set",s,a):ea(n,"add",s,a),this},delete(s){const a=hr(this),{has:n,get:o}=rh(a);let u=n.call(a,s);u||(s=hr(s),u=n.call(a,s)),o&&o.call(a,s);const c=a.delete(s);return u&&ea(a,"delete",s,void 0),c},clear(){const s=hr(this),a=s.size!==0,n=s.clear();return a&&ea(s,"clear",void 0,void 0),n}}),["keys","values","entries",Symbol.iterator].forEach(s=>{r[s]=fj(s,t,e)}),r}function J1(t,e){const r=hj(t,e);return(i,s,a)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(pr(r,s)&&s in i?r:i,s,a)}const dj={get:J1(!1,!1)},pj={get:J1(!1,!0)},gj={get:J1(!0,!1)};const nM=new WeakMap,iM=new WeakMap,sM=new WeakMap,mj=new WeakMap;function _j(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function bj(t){return t.__v_skip||!Object.isExtensible(t)?0:_j(KW(t))}function Uo(t){return Mo(t)?t:eT(t,!1,uj,dj,nM)}function xj(t){return eT(t,!1,cj,pj,iM)}function aM(t){return eT(t,!0,lj,gj,sM)}function eT(t,e,r,i,s){if(!Tr(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const a=s.get(t);if(a)return a;const n=bj(t);if(n===0)return t;const o=new Proxy(t,n===2?i:r);return s.set(t,o),o}function Iu(t){return Mo(t)?Iu(t.__v_raw):!!(t&&t.__v_isReactive)}function Mo(t){return!!(t&&t.__v_isReadonly)}function Ki(t){return!!(t&&t.__v_isShallow)}function tT(t){return t?!!t.__v_raw:!1}function hr(t){const e=t&&t.__v_raw;return e?hr(e):t}function Bu(t){return!pr(t,"__v_skip")&&Object.isExtensible(t)&&GU(t,"__v_skip",!0),t}const In=t=>Tr(t)?Uo(t):t,vy=t=>Tr(t)?aM(t):t;function Rn(t){return t?t.__v_isRef===!0:!1}function Lo(t){return uM(t,!1)}function oM(t){return uM(t,!0)}function uM(t,e){return Rn(t)?t:new vj(t,e)}class vj{constructor(e,r){this.dep=new Q1,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?e:hr(e),this._value=r?e:In(e),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(e){const r=this._rawValue,i=this.__v_isShallow||Ki(e)||Mo(e);e=i?e:hr(e),Na(e,r)&&(this._rawValue=e,this._value=i?e:In(e),this.dep.trigger())}}function Ej(t){return Rn(t)?t.value:t}const yj={get:(t,e,r)=>e==="__v_raw"?t:Ej(Reflect.get(t,e,r)),set:(t,e,r,i)=>{const s=t[e];return Rn(s)&&!Rn(r)?(s.value=r,!0):Reflect.set(t,e,r,i)}};function lM(t){return Iu(t)?t:new Proxy(t,yj)}class Tj{constructor(e,r,i){this.fn=e,this.setter=r,this._value=void 0,this.dep=new Q1(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=yc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Rr!==this)return WU(this,!0),!0}get value(){const e=this.dep.track();return ZU(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Aj(t,e,r=!1){let i,s;return Kt(t)?i=t:(i=t.get,s=t.set),new Tj(i,s,r)}const ih={},td=new WeakMap;let To;function Sj(t,e=!1,r=To){if(r){let i=td.get(r);i||td.set(r,i=[]),i.push(t)}}function Rj(t,e,r=Er){const{immediate:i,deep:s,once:a,scheduler:n,augmentJob:o,call:u}=r,c=A=>s?A:Ki(A)||s===!1||s===0?ta(A,1):ta(A);let f,h,p,g,m=!1,T=!1;if(Rn(t)?(h=()=>t.value,m=Ki(t)):Iu(t)?(h=()=>c(t),m=!0):Lt(t)?(T=!0,m=t.some(A=>Iu(A)||Ki(A)),h=()=>t.map(A=>{if(Rn(A))return A.value;if(Iu(A))return c(A);if(Kt(A))return u?u(A,2):A()})):Kt(t)?e?h=u?()=>u(t,2):t:h=()=>{if(p){Ha();try{p()}finally{qa()}}const A=To;To=f;try{return u?u(t,3,[g]):t(g)}finally{To=A}}:h=As,e&&s){const A=h,k=s===!0?1/0:s;h=()=>ta(A(),k)}const x=ej(),v=()=>{f.stop(),x&&x.active&&z1(x.effects,f)};if(a&&e){const A=e;e=(...k)=>{A(...k),v()}}let y=T?new Array(t.length).fill(ih):ih;const R=A=>{if(!(!(f.flags&1)||!f.dirty&&!A))if(e){const k=f.run();if(s||m||(T?k.some((b,C)=>Na(b,y[C])):Na(k,y))){p&&p();const b=To;To=f;try{const C=[k,y===ih?void 0:T&&y[0]===ih?[]:y,g];u?u(e,3,C):e(...C),y=k}finally{To=b}}}else f.run()};return o&&o(R),f=new XU(h),f.scheduler=n?()=>n(R,!1):R,g=A=>Sj(A,!1,f),p=f.onStop=()=>{const A=td.get(f);if(A){if(u)u(A,4);else for(const k of A)k();td.delete(f)}},e?i?R(!0):y=f.run():n?n(R.bind(null,!0),!0):f.run(),v.pause=f.pause.bind(f),v.resume=f.resume.bind(f),v.stop=v,v}function ta(t,e=1/0,r){if(e<=0||!Tr(t)||t.__v_skip||(r=r||new Set,r.has(t)))return t;if(r.add(t),e--,Rn(t))ta(t.value,e,r);else if(Lt(t))for(let i=0;i<t.length;i++)ta(t[i],e,r);else if(Dd(t)||Lu(t))t.forEach(i=>{ta(i,e,r)});else if(FU(t)){for(const i in t)ta(t[i],e,r);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&ta(t[i],e,r)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function jc(t,e,r,i){try{return i?t(...i):t()}catch(s){Gd(s,e,r)}}function us(t,e,r,i){if(Kt(t)){const s=jc(t,e,r,i);return s&&MU(s)&&s.catch(a=>{Gd(a,e,r)}),s}if(Lt(t)){const s=[];for(let a=0;a<t.length;a++)s.push(us(t[a],e,r,i));return s}}function Gd(t,e,r,i=!0){const s=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:n}=e&&e.appContext.config||Er;if(e){let o=e.parent;const u=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const f=o.ec;if(f){for(let h=0;h<f.length;h++)if(f[h](t,u,c)===!1)return}o=o.parent}if(a){Ha(),jc(a,null,10,[t,u,c]),qa();return}}Cj(t,r,s,i,n)}function Cj(t,e,r,i=!0,s=!1){if(s)throw t;console.error(t)}const Fn=[];let vs=-1;const Pu=[];let Ia=null,xu=0;const cM=Promise.resolve();let rd=null;function wj(t){const e=rd||cM;return t?e.then(this?t.bind(this):t):e}function Lj(t){let e=vs+1,r=Fn.length;for(;e<r;){const i=e+r>>>1,s=Fn[i],a=Ac(s);a<t||a===t&&s.flags&2?e=i+1:r=i}return e}function rT(t){if(!(t.flags&1)){const e=Ac(t),r=Fn[Fn.length-1];!r||!(t.flags&2)&&e>=Ac(r)?Fn.push(t):Fn.splice(Lj(e),0,t),t.flags|=1,fM()}}function fM(){rd||(rd=cM.then(dM))}function Ij(t){Lt(t)?Pu.push(...t):Ia&&t.id===-1?Ia.splice(xu+1,0,t):t.flags&1||(Pu.push(t),t.flags|=1),fM()}function NC(t,e,r=vs+1){for(;r<Fn.length;r++){const i=Fn[r];if(i&&i.flags&2){if(t&&i.id!==t.uid)continue;Fn.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function hM(t){if(Pu.length){const e=[...new Set(Pu)].sort((r,i)=>Ac(r)-Ac(i));if(Pu.length=0,Ia){Ia.push(...e);return}for(Ia=e,xu=0;xu<Ia.length;xu++){const r=Ia[xu];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Ia=null,xu=0}}const Ac=t=>t.id==null?t.flags&2?-1:1/0:t.id;function dM(t){try{for(vs=0;vs<Fn.length;vs++){const e=Fn[vs];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),jc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;vs<Fn.length;vs++){const e=Fn[vs];e&&(e.flags&=-2)}vs=-1,Fn.length=0,hM(),rd=null,(Fn.length||Pu.length)&&dM()}}let dn=null,pM=null;function nd(t){const e=dn;return dn=t,pM=t&&t.type.__scopeId||null,e}function Kd(t,e=dn,r){if(!e||t._n)return t;const i=(...s)=>{i._d&&jC(-1);const a=nd(e);let n;try{n=t(...s)}finally{nd(a),i._d&&jC(1)}return n};return i._n=!0,i._c=!0,i._d=!0,i}function gr(t,e){if(dn===null)return t;const r=zd(dn),i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[a,n,o,u=Er]=e[s];a&&(Kt(a)&&(a={mounted:a,updated:a}),a.deep&&ta(n),i.push({dir:a,instance:r,value:n,oldValue:void 0,arg:o,modifiers:u}))}return t}function fo(t,e,r,i){const s=t.dirs,a=e&&e.dirs;for(let n=0;n<s.length;n++){const o=s[n];a&&(o.oldValue=a[n].value);let u=o.dir[i];u&&(Ha(),us(u,r,8,[t.el,o,t,e]),qa())}}const Bj=Symbol("_vte"),gM=t=>t.__isTeleport,Ba=Symbol("_leaveCb"),sh=Symbol("_enterCb");function Pj(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return nT(()=>{t.isMounted=!0}),AM(()=>{t.isUnmounting=!0}),t}const Ui=[Function,Array],mM={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ui,onEnter:Ui,onAfterEnter:Ui,onEnterCancelled:Ui,onBeforeLeave:Ui,onLeave:Ui,onAfterLeave:Ui,onLeaveCancelled:Ui,onBeforeAppear:Ui,onAppear:Ui,onAfterAppear:Ui,onAppearCancelled:Ui},_M=t=>{const e=t.subTree;return e.component?_M(e.component):e},Oj={name:"BaseTransition",props:mM,setup(t,{slots:e}){const r=No(),i=Pj();return()=>{const s=e.default&&vM(e.default(),!0);if(!s||!s.length)return;const a=bM(s),n=hr(t),{mode:o}=n;if(i.isLeaving)return dm(a);const u=FC(a);if(!u)return dm(a);let c=Ey(u,n,i,r,h=>c=h);u.type!==Kn&&Sc(u,c);let f=r.subTree&&FC(r.subTree);if(f&&f.type!==Kn&&!Io(u,f)&&_M(r).type!==Kn){let h=Ey(f,n,i,r);if(Sc(f,h),o==="out-in"&&u.type!==Kn)return i.isLeaving=!0,h.afterLeave=()=>{i.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,f=void 0},dm(a);o==="in-out"&&u.type!==Kn?h.delayLeave=(p,g,m)=>{const T=xM(i,f);T[String(f.key)]=f,p[Ba]=()=>{g(),p[Ba]=void 0,delete c.delayedLeave,f=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return a}}};function bM(t){let e=t[0];if(t.length>1){for(const r of t)if(r.type!==Kn){e=r;break}}return e}const Dj=Oj;function xM(t,e){const{leavingVNodes:r}=t;let i=r.get(e.type);return i||(i=Object.create(null),r.set(e.type,i)),i}function Ey(t,e,r,i,s){const{appear:a,mode:n,persisted:o=!1,onBeforeEnter:u,onEnter:c,onAfterEnter:f,onEnterCancelled:h,onBeforeLeave:p,onLeave:g,onAfterLeave:m,onLeaveCancelled:T,onBeforeAppear:x,onAppear:v,onAfterAppear:y,onAppearCancelled:R}=e,A=String(t.key),k=xM(r,t),b=(O,M)=>{O&&us(O,i,9,M)},C=(O,M)=>{const $=M[1];b(O,M),Lt(O)?O.every(G=>G.length<=1)&&$():O.length<=1&&$()},w={mode:n,persisted:o,beforeEnter(O){let M=u;if(!r.isMounted)if(a)M=x||u;else return;O[Ba]&&O[Ba](!0);const $=k[A];$&&Io(t,$)&&$.el[Ba]&&$.el[Ba](),b(M,[O])},enter(O){let M=c,$=f,G=h;if(!r.isMounted)if(a)M=v||c,$=y||f,G=R||h;else return;let Z=!1;const ce=O[sh]=Y=>{Z||(Z=!0,Y?b(G,[O]):b($,[O]),w.delayedLeave&&w.delayedLeave(),O[sh]=void 0)};M?C(M,[O,ce]):ce()},leave(O,M){const $=String(t.key);if(O[sh]&&O[sh](!0),r.isUnmounting)return M();b(p,[O]);let G=!1;const Z=O[Ba]=ce=>{G||(G=!0,M(),ce?b(T,[O]):b(m,[O]),O[Ba]=void 0,k[$]===t&&delete k[$])};k[$]=t,g?C(g,[O,Z]):Z()},clone(O){const M=Ey(O,e,r,i,s);return s&&s(M),M}};return w}function dm(t){if(Vd(t))return t=Ga(t),t.children=null,t}function FC(t){if(!Vd(t))return gM(t.type)&&t.children?bM(t.children):t;const{shapeFlag:e,children:r}=t;if(r){if(e&16)return r[0];if(e&32&&Kt(r.default))return r.default()}}function Sc(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Sc(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vM(t,e=!1,r){let i=[],s=0;for(let a=0;a<t.length;a++){let n=t[a];const o=r==null?n.key:String(r)+String(n.key!=null?n.key:a);n.type===Wt?(n.patchFlag&128&&s++,i=i.concat(vM(n.children,e,o))):(e||n.type!==Kn)&&i.push(o!=null?Ga(n,{key:o}):n)}if(s>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function or(t,e){return Kt(t)?mn({name:t.name},e,{setup:t}):t}function EM(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function id(t,e,r,i,s=!1){if(Lt(t)){t.forEach((m,T)=>id(m,e&&(Lt(e)?e[T]:e),r,i,s));return}if(Ou(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&id(t,e,r,i.component.subTree);return}const a=i.shapeFlag&4?zd(i.component):i.el,n=s?null:a,{i:o,r:u}=t,c=e&&e.r,f=o.refs===Er?o.refs={}:o.refs,h=o.setupState,p=hr(h),g=h===Er?()=>!1:m=>pr(p,m);if(c!=null&&c!==u&&(qr(c)?(f[c]=null,g(c)&&(h[c]=null)):Rn(c)&&(c.value=null)),Kt(u))jc(u,o,12,[n,f]);else{const m=qr(u),T=Rn(u);if(m||T){const x=()=>{if(t.f){const v=m?g(u)?h[u]:f[u]:u.value;s?Lt(v)&&z1(v,a):Lt(v)?v.includes(a)||v.push(a):m?(f[u]=[a],g(u)&&(h[u]=f[u])):(u.value=[a],t.k&&(f[t.k]=u.value))}else m?(f[u]=n,g(u)&&(h[u]=n)):T&&(u.value=n,t.k&&(f[t.k]=n))};n?(x.id=-1,bi(x,r)):x()}}}Md().requestIdleCallback;Md().cancelIdleCallback;const Ou=t=>!!t.type.__asyncLoader,Vd=t=>t.type.__isKeepAlive;function kj(t,e){yM(t,"a",e)}function Uj(t,e){yM(t,"da",e)}function yM(t,e,r=Tn){const i=t.__wdc||(t.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if($d(e,i,r),r){let s=r.parent;for(;s&&s.parent;)Vd(s.parent.vnode)&&Mj(i,e,r,s),s=s.parent}}function Mj(t,e,r,i){const s=$d(e,t,i,!0);iT(()=>{z1(i[e],s)},r)}function $d(t,e,r=Tn,i=!1){if(r){const s=r[t]||(r[t]=[]),a=e.__weh||(e.__weh=(...n)=>{Ha();const o=Qc(r),u=us(e,r,t,n);return o(),qa(),u});return i?s.unshift(a):s.push(a),a}}const fa=t=>(e,r=Tn)=>{(!wc||t==="sp")&&$d(t,(...i)=>e(...i),r)},TM=fa("bm"),nT=fa("m"),Nj=fa("bu"),Fj=fa("u"),AM=fa("bum"),iT=fa("um"),Gj=fa("sp"),Kj=fa("rtg"),Vj=fa("rtc");function $j(t,e=Tn){$d("ec",t,e)}const sT="components",Hj="directives";function wr(t,e){return aT(sT,t,!0,e)||t}const SM=Symbol.for("v-ndc");function Hd(t){return qr(t)?aT(sT,t,!1)||t:t||SM}function ls(t){return aT(Hj,t)}function aT(t,e,r=!0,i=!1){const s=dn||Tn;if(s){const a=s.type;if(t===sT){const o=IY(a,!1);if(o&&(o===e||o===$i(e)||o===Ud($i(e))))return a}const n=GC(s[t]||a[t],e)||GC(s.appContext[t],e);return!n&&i?a:n}}function GC(t,e){return t&&(t[e]||t[$i(e)]||t[Ud($i(e))])}function Vn(t,e,r,i){let s;const a=r,n=Lt(t);if(n||qr(t)){const o=n&&Iu(t);let u=!1;o&&(u=!Ki(t),t=Fd(t)),s=new Array(t.length);for(let c=0,f=t.length;c<f;c++)s[c]=e(u?In(t[c]):t[c],c,void 0,a)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,a)}else if(Tr(t))if(t[Symbol.iterator])s=Array.from(t,(o,u)=>e(o,u,void 0,a));else{const o=Object.keys(t);s=new Array(o.length);for(let u=0,c=o.length;u<c;u++){const f=o[u];s[u]=e(t[f],f,u,a)}}else s=[];return s}function Kh(t,e,r={},i,s){if(dn.ce||dn.parent&&Ou(dn.parent)&&dn.parent.ce)return e!=="default"&&(r.name=e),Pe(),$n(Wt,null,[Zt("slot",r,i)],64);let a=t[e];a&&a._c&&(a._d=!1),Pe();const n=a&&RM(a(r)),o=r.key||n&&n.key,u=$n(Wt,{key:(o&&!os(o)?o:`_${e}`)+""},n||[],n&&t._===1?64:-2);return!s&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),a&&a._c&&(a._d=!0),u}function RM(t){return t.some(e=>Cc(e)?!(e.type===Kn||e.type===Wt&&!RM(e.children)):!0)?t:null}const yy=t=>t?zM(t)?zd(t):yy(t.parent):null,oc=mn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>yy(t.parent),$root:t=>yy(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>wM(t),$forceUpdate:t=>t.f||(t.f=()=>{rT(t.update)}),$nextTick:t=>t.n||(t.n=wj.bind(t.proxy)),$watch:t=>hY.bind(t)}),pm=(t,e)=>t!==Er&&!t.__isScriptSetup&&pr(t,e),qj={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:r,setupState:i,data:s,props:a,accessCache:n,type:o,appContext:u}=t;let c;if(e[0]!=="$"){const g=n[e];if(g!==void 0)switch(g){case 1:return i[e];case 2:return s[e];case 4:return r[e];case 3:return a[e]}else{if(pm(i,e))return n[e]=1,i[e];if(s!==Er&&pr(s,e))return n[e]=2,s[e];if((c=t.propsOptions[0])&&pr(c,e))return n[e]=3,a[e];if(r!==Er&&pr(r,e))return n[e]=4,r[e];Ty&&(n[e]=0)}}const f=oc[e];let h,p;if(f)return e==="$attrs"&&Ln(t.attrs,"get",""),f(t);if((h=o.__cssModules)&&(h=h[e]))return h;if(r!==Er&&pr(r,e))return n[e]=4,r[e];if(p=u.config.globalProperties,pr(p,e))return p[e]},set({_:t},e,r){const{data:i,setupState:s,ctx:a}=t;return pm(s,e)?(s[e]=r,!0):i!==Er&&pr(i,e)?(i[e]=r,!0):pr(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(a[e]=r,!0)},has({_:{data:t,setupState:e,accessCache:r,ctx:i,appContext:s,propsOptions:a}},n){let o;return!!r[n]||t!==Er&&pr(t,n)||pm(e,n)||(o=a[0])&&pr(o,n)||pr(i,n)||pr(oc,n)||pr(s.config.globalProperties,n)},defineProperty(t,e,r){return r.get!=null?t._.accessCache[e]=0:pr(r,"value")&&this.set(t,e,r.value,null),Reflect.defineProperty(t,e,r)}};function KC(t){return Lt(t)?t.reduce((e,r)=>(e[r]=null,e),{}):t}let Ty=!0;function Xj(t){const e=wM(t),r=t.proxy,i=t.ctx;Ty=!1,e.beforeCreate&&VC(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:n,watch:o,provide:u,inject:c,created:f,beforeMount:h,mounted:p,beforeUpdate:g,updated:m,activated:T,deactivated:x,beforeDestroy:v,beforeUnmount:y,destroyed:R,unmounted:A,render:k,renderTracked:b,renderTriggered:C,errorCaptured:w,serverPrefetch:O,expose:M,inheritAttrs:$,components:G,directives:Z,filters:ce}=e;if(c&&zj(c,i,null),n)for(const ie in n){const le=n[ie];Kt(le)&&(i[ie]=le.bind(r))}if(s){const ie=s.call(r,r);Tr(ie)&&(t.data=Uo(ie))}if(Ty=!0,a)for(const ie in a){const le=a[ie],Te=Kt(le)?le.bind(r,r):Kt(le.get)?le.get.bind(r,r):As,Me=!Kt(le)&&Kt(le.set)?le.set.bind(r):As,Ee=vi({get:Te,set:Me});Object.defineProperty(i,ie,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:se=>Ee.value=se})}if(o)for(const ie in o)CM(o[ie],i,r,ie);if(u){const ie=Kt(u)?u.call(r):u;Reflect.ownKeys(ie).forEach(le=>{Jj(le,ie[le])})}f&&VC(f,t,"c");function J(ie,le){Lt(le)?le.forEach(Te=>ie(Te.bind(r))):le&&ie(le.bind(r))}if(J(TM,h),J(nT,p),J(Nj,g),J(Fj,m),J(kj,T),J(Uj,x),J($j,w),J(Vj,b),J(Kj,C),J(AM,y),J(iT,A),J(Gj,O),Lt(M))if(M.length){const ie=t.exposed||(t.exposed={});M.forEach(le=>{Object.defineProperty(ie,le,{get:()=>r[le],set:Te=>r[le]=Te})})}else t.exposed||(t.exposed={});k&&t.render===As&&(t.render=k),$!=null&&(t.inheritAttrs=$),G&&(t.components=G),Z&&(t.directives=Z),O&&EM(t)}function zj(t,e,r=As){Lt(t)&&(t=Ay(t));for(const i in t){const s=t[i];let a;Tr(s)?"default"in s?a=ia(s.from||i,s.default,!0):a=ia(s.from||i):a=ia(s),Rn(a)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:n=>a.value=n}):e[i]=a}}function VC(t,e,r){us(Lt(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,r)}function CM(t,e,r,i){let s=i.includes(".")?VM(r,i):()=>r[i];if(qr(t)){const a=e[t];Kt(a)&&Do(s,a)}else if(Kt(t))Do(s,t.bind(r));else if(Tr(t))if(Lt(t))t.forEach(a=>CM(a,e,r,i));else{const a=Kt(t.handler)?t.handler.bind(r):e[t.handler];Kt(a)&&Do(s,a,t)}}function wM(t){const e=t.type,{mixins:r,extends:i}=e,{mixins:s,optionsCache:a,config:{optionMergeStrategies:n}}=t.appContext,o=a.get(e);let u;return o?u=o:!s.length&&!r&&!i?u=e:(u={},s.length&&s.forEach(c=>sd(u,c,n,!0)),sd(u,e,n)),Tr(e)&&a.set(e,u),u}function sd(t,e,r,i=!1){const{mixins:s,extends:a}=e;a&&sd(t,a,r,!0),s&&s.forEach(n=>sd(t,n,r,!0));for(const n in e)if(!(i&&n==="expose")){const o=Wj[n]||r&&r[n];t[n]=o?o(t[n],e[n]):e[n]}return t}const Wj={data:$C,props:HC,emits:HC,methods:zl,computed:zl,beforeCreate:Mn,created:Mn,beforeMount:Mn,mounted:Mn,beforeUpdate:Mn,updated:Mn,beforeDestroy:Mn,beforeUnmount:Mn,destroyed:Mn,unmounted:Mn,activated:Mn,deactivated:Mn,errorCaptured:Mn,serverPrefetch:Mn,components:zl,directives:zl,watch:Yj,provide:$C,inject:jj};function $C(t,e){return e?t?function(){return mn(Kt(t)?t.call(this,this):t,Kt(e)?e.call(this,this):e)}:e:t}function jj(t,e){return zl(Ay(t),Ay(e))}function Ay(t){if(Lt(t)){const e={};for(let r=0;r<t.length;r++)e[t[r]]=t[r];return e}return t}function Mn(t,e){return t?[...new Set([].concat(t,e))]:e}function zl(t,e){return t?mn(Object.create(null),t,e):e}function HC(t,e){return t?Lt(t)&&Lt(e)?[...new Set([...t,...e])]:mn(Object.create(null),KC(t),KC(e??{})):e}function Yj(t,e){if(!t)return e;if(!e)return t;const r=mn(Object.create(null),t);for(const i in e)r[i]=Mn(t[i],e[i]);return r}function LM(){return{app:null,config:{isNativeTag:FW,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zj=0;function Qj(t,e){return function(i,s=null){Kt(i)||(i=mn({},i)),s!=null&&!Tr(s)&&(s=null);const a=LM(),n=new WeakSet,o=[];let u=!1;const c=a.app={_uid:Zj++,_component:i,_props:s,_container:null,_context:a,_instance:null,version:PY,get config(){return a.config},set config(f){},use(f,...h){return n.has(f)||(f&&Kt(f.install)?(n.add(f),f.install(c,...h)):Kt(f)&&(n.add(f),f(c,...h))),c},mixin(f){return a.mixins.includes(f)||a.mixins.push(f),c},component(f,h){return h?(a.components[f]=h,c):a.components[f]},directive(f,h){return h?(a.directives[f]=h,c):a.directives[f]},mount(f,h,p){if(!u){const g=c._ceVNode||Zt(i,s);return g.appContext=a,p===!0?p="svg":p===!1&&(p=void 0),t(g,f,p),u=!0,c._container=f,f.__vue_app__=c,zd(g.component)}},onUnmount(f){o.push(f)},unmount(){u&&(us(o,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(f,h){return a.provides[f]=h,c},runWithContext(f){const h=Du;Du=c;try{return f()}finally{Du=h}}};return c}}let Du=null;function Jj(t,e){if(Tn){let r=Tn.provides;const i=Tn.parent&&Tn.parent.provides;i===r&&(r=Tn.provides=Object.create(i)),r[t]=e}}function ia(t,e,r=!1){const i=Tn||dn;if(i||Du){const s=Du?Du._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return r&&Kt(e)?e.call(i&&i.proxy):e}}const IM={},BM=()=>Object.create(IM),PM=t=>Object.getPrototypeOf(t)===IM;function eY(t,e,r,i=!1){const s={},a=BM();t.propsDefaults=Object.create(null),OM(t,e,s,a);for(const n in t.propsOptions[0])n in s||(s[n]=void 0);r?t.props=i?s:xj(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function tY(t,e,r,i){const{props:s,attrs:a,vnode:{patchFlag:n}}=t,o=hr(s),[u]=t.propsOptions;let c=!1;if((i||n>0)&&!(n&16)){if(n&8){const f=t.vnode.dynamicProps;for(let h=0;h<f.length;h++){let p=f[h];if(qd(t.emitsOptions,p))continue;const g=e[p];if(u)if(pr(a,p))g!==a[p]&&(a[p]=g,c=!0);else{const m=$i(p);s[m]=Sy(u,o,m,g,t,!1)}else g!==a[p]&&(a[p]=g,c=!0)}}}else{OM(t,e,s,a)&&(c=!0);let f;for(const h in o)(!e||!pr(e,h)&&((f=$a(h))===h||!pr(e,f)))&&(u?r&&(r[h]!==void 0||r[f]!==void 0)&&(s[h]=Sy(u,o,h,void 0,t,!0)):delete s[h]);if(a!==o)for(const h in a)(!e||!pr(e,h))&&(delete a[h],c=!0)}c&&ea(t.attrs,"set","")}function OM(t,e,r,i){const[s,a]=t.propsOptions;let n=!1,o;if(e)for(let u in e){if(ic(u))continue;const c=e[u];let f;s&&pr(s,f=$i(u))?!a||!a.includes(f)?r[f]=c:(o||(o={}))[f]=c:qd(t.emitsOptions,u)||(!(u in i)||c!==i[u])&&(i[u]=c,n=!0)}if(a){const u=hr(r),c=o||Er;for(let f=0;f<a.length;f++){const h=a[f];r[h]=Sy(s,u,h,c[h],t,!pr(c,h))}}return n}function Sy(t,e,r,i,s,a){const n=t[r];if(n!=null){const o=pr(n,"default");if(o&&i===void 0){const u=n.default;if(n.type!==Function&&!n.skipFactory&&Kt(u)){const{propsDefaults:c}=s;if(r in c)i=c[r];else{const f=Qc(s);i=c[r]=u.call(null,e),f()}}else i=u;s.ce&&s.ce._setProp(r,i)}n[0]&&(a&&!o?i=!1:n[1]&&(i===""||i===$a(r))&&(i=!0))}return i}const rY=new WeakMap;function DM(t,e,r=!1){const i=r?rY:e.propsCache,s=i.get(t);if(s)return s;const a=t.props,n={},o=[];let u=!1;if(!Kt(t)){const f=h=>{u=!0;const[p,g]=DM(h,e,!0);mn(n,p),g&&o.push(...g)};!r&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!a&&!u)return Tr(t)&&i.set(t,wu),wu;if(Lt(a))for(let f=0;f<a.length;f++){const h=$i(a[f]);qC(h)&&(n[h]=Er)}else if(a)for(const f in a){const h=$i(f);if(qC(h)){const p=a[f],g=n[h]=Lt(p)||Kt(p)?{type:p}:mn({},p),m=g.type;let T=!1,x=!0;if(Lt(m))for(let v=0;v<m.length;++v){const y=m[v],R=Kt(y)&&y.name;if(R==="Boolean"){T=!0;break}else R==="String"&&(x=!1)}else T=Kt(m)&&m.name==="Boolean";g[0]=T,g[1]=x,(T||pr(g,"default"))&&o.push(h)}}const c=[n,o];return Tr(t)&&i.set(t,c),c}function qC(t){return t[0]!=="$"&&!ic(t)}const kM=t=>t[0]==="_"||t==="$stable",oT=t=>Lt(t)?t.map(Es):[Es(t)],nY=(t,e,r)=>{if(e._n)return e;const i=Kd((...s)=>oT(e(...s)),r);return i._c=!1,i},UM=(t,e,r)=>{const i=t._ctx;for(const s in t){if(kM(s))continue;const a=t[s];if(Kt(a))e[s]=nY(s,a,i);else if(a!=null){const n=oT(a);e[s]=()=>n}}},MM=(t,e)=>{const r=oT(e);t.slots.default=()=>r},NM=(t,e,r)=>{for(const i in e)(r||i!=="_")&&(t[i]=e[i])},iY=(t,e,r)=>{const i=t.slots=BM();if(t.vnode.shapeFlag&32){const s=e._;s?(NM(i,e,r),r&&GU(i,"_",s,!0)):UM(e,i)}else e&&MM(t,e)},sY=(t,e,r)=>{const{vnode:i,slots:s}=t;let a=!0,n=Er;if(i.shapeFlag&32){const o=e._;o?r&&o===1?a=!1:NM(s,e,r):(a=!e.$stable,UM(e,s)),n=e}else e&&(MM(t,e),n={default:1});if(a)for(const o in s)!kM(o)&&n[o]==null&&delete s[o]},bi=xY;function aY(t){return oY(t)}function oY(t,e){const r=Md();r.__VUE__=!0;const{insert:i,remove:s,patchProp:a,createElement:n,createText:o,createComment:u,setText:c,setElementText:f,parentNode:h,nextSibling:p,setScopeId:g=As,insertStaticContent:m}=t,T=(j,ue,oe,be=null,Le=null,ye=null,De=void 0,ke=null,z=!!ue.dynamicChildren)=>{if(j===ue)return;j&&!Io(j,ue)&&(be=pt(j),se(j,Le,ye,!0),j=null),ue.patchFlag===-2&&(z=!1,ue.dynamicChildren=null);const{type:X,ref:_e,shapeFlag:Ie}=ue;switch(X){case Yc:x(j,ue,oe,be);break;case Kn:v(j,ue,oe,be);break;case Vh:j==null&&y(ue,oe,be,De);break;case Wt:G(j,ue,oe,be,Le,ye,De,ke,z);break;default:Ie&1?k(j,ue,oe,be,Le,ye,De,ke,z):Ie&6?Z(j,ue,oe,be,Le,ye,De,ke,z):(Ie&64||Ie&128)&&X.process(j,ue,oe,be,Le,ye,De,ke,z,at)}_e!=null&&Le&&id(_e,j&&j.ref,ye,ue||j,!ue)},x=(j,ue,oe,be)=>{if(j==null)i(ue.el=o(ue.children),oe,be);else{const Le=ue.el=j.el;ue.children!==j.children&&c(Le,ue.children)}},v=(j,ue,oe,be)=>{j==null?i(ue.el=u(ue.children||""),oe,be):ue.el=j.el},y=(j,ue,oe,be)=>{[j.el,j.anchor]=m(j.children,ue,oe,be,j.el,j.anchor)},R=({el:j,anchor:ue},oe,be)=>{let Le;for(;j&&j!==ue;)Le=p(j),i(j,oe,be),j=Le;i(ue,oe,be)},A=({el:j,anchor:ue})=>{let oe;for(;j&&j!==ue;)oe=p(j),s(j),j=oe;s(ue)},k=(j,ue,oe,be,Le,ye,De,ke,z)=>{ue.type==="svg"?De="svg":ue.type==="math"&&(De="mathml"),j==null?b(ue,oe,be,Le,ye,De,ke,z):O(j,ue,Le,ye,De,ke,z)},b=(j,ue,oe,be,Le,ye,De,ke)=>{let z,X;const{props:_e,shapeFlag:Ie,transition:Ze,dirs:Ve}=j;if(z=j.el=n(j.type,ye,_e&&_e.is,_e),Ie&8?f(z,j.children):Ie&16&&w(j.children,z,null,be,Le,gm(j,ye),De,ke),Ve&&fo(j,null,be,"created"),C(z,j,j.scopeId,De,be),_e){for(const Oe in _e)Oe!=="value"&&!ic(Oe)&&a(z,Oe,null,_e[Oe],ye,be);"value"in _e&&a(z,"value",null,_e.value,ye),(X=_e.onVnodeBeforeMount)&&_s(X,be,j)}Ve&&fo(j,null,be,"beforeMount");const Ce=uY(Le,Ze);Ce&&Ze.beforeEnter(z),i(z,ue,oe),((X=_e&&_e.onVnodeMounted)||Ce||Ve)&&bi(()=>{X&&_s(X,be,j),Ce&&Ze.enter(z),Ve&&fo(j,null,be,"mounted")},Le)},C=(j,ue,oe,be,Le)=>{if(oe&&g(j,oe),be)for(let ye=0;ye<be.length;ye++)g(j,be[ye]);if(Le){let ye=Le.subTree;if(ue===ye||HM(ye.type)&&(ye.ssContent===ue||ye.ssFallback===ue)){const De=Le.vnode;C(j,De,De.scopeId,De.slotScopeIds,Le.parent)}}},w=(j,ue,oe,be,Le,ye,De,ke,z=0)=>{for(let X=z;X<j.length;X++){const _e=j[X]=ke?Pa(j[X]):Es(j[X]);T(null,_e,ue,oe,be,Le,ye,De,ke)}},O=(j,ue,oe,be,Le,ye,De)=>{const ke=ue.el=j.el;let{patchFlag:z,dynamicChildren:X,dirs:_e}=ue;z|=j.patchFlag&16;const Ie=j.props||Er,Ze=ue.props||Er;let Ve;if(oe&&ho(oe,!1),(Ve=Ze.onVnodeBeforeUpdate)&&_s(Ve,oe,ue,j),_e&&fo(ue,j,oe,"beforeUpdate"),oe&&ho(oe,!0),(Ie.innerHTML&&Ze.innerHTML==null||Ie.textContent&&Ze.textContent==null)&&f(ke,""),X?M(j.dynamicChildren,X,ke,oe,be,gm(ue,Le),ye):De||le(j,ue,ke,null,oe,be,gm(ue,Le),ye,!1),z>0){if(z&16)$(ke,Ie,Ze,oe,Le);else if(z&2&&Ie.class!==Ze.class&&a(ke,"class",null,Ze.class,Le),z&4&&a(ke,"style",Ie.style,Ze.style,Le),z&8){const Ce=ue.dynamicProps;for(let Oe=0;Oe<Ce.length;Oe++){const st=Ce[Oe],ae=Ie[st],ne=Ze[st];(ne!==ae||st==="value")&&a(ke,st,ae,ne,Le,oe)}}z&1&&j.children!==ue.children&&f(ke,ue.children)}else!De&&X==null&&$(ke,Ie,Ze,oe,Le);((Ve=Ze.onVnodeUpdated)||_e)&&bi(()=>{Ve&&_s(Ve,oe,ue,j),_e&&fo(ue,j,oe,"updated")},be)},M=(j,ue,oe,be,Le,ye,De)=>{for(let ke=0;ke<ue.length;ke++){const z=j[ke],X=ue[ke],_e=z.el&&(z.type===Wt||!Io(z,X)||z.shapeFlag&70)?h(z.el):oe;T(z,X,_e,null,be,Le,ye,De,!0)}},$=(j,ue,oe,be,Le)=>{if(ue!==oe){if(ue!==Er)for(const ye in ue)!ic(ye)&&!(ye in oe)&&a(j,ye,ue[ye],null,Le,be);for(const ye in oe){if(ic(ye))continue;const De=oe[ye],ke=ue[ye];De!==ke&&ye!=="value"&&a(j,ye,ke,De,Le,be)}"value"in oe&&a(j,"value",ue.value,oe.value,Le)}},G=(j,ue,oe,be,Le,ye,De,ke,z)=>{const X=ue.el=j?j.el:o(""),_e=ue.anchor=j?j.anchor:o("");let{patchFlag:Ie,dynamicChildren:Ze,slotScopeIds:Ve}=ue;Ve&&(ke=ke?ke.concat(Ve):Ve),j==null?(i(X,oe,be),i(_e,oe,be),w(ue.children||[],oe,_e,Le,ye,De,ke,z)):Ie>0&&Ie&64&&Ze&&j.dynamicChildren?(M(j.dynamicChildren,Ze,oe,Le,ye,De,ke),(ue.key!=null||Le&&ue===Le.subTree)&&FM(j,ue,!0)):le(j,ue,oe,_e,Le,ye,De,ke,z)},Z=(j,ue,oe,be,Le,ye,De,ke,z)=>{ue.slotScopeIds=ke,j==null?ue.shapeFlag&512?Le.ctx.activate(ue,oe,be,De,z):ce(ue,oe,be,Le,ye,De,z):Y(j,ue,z)},ce=(j,ue,oe,be,Le,ye,De)=>{const ke=j.component=SY(j,be,Le);if(Vd(j)&&(ke.ctx.renderer=at),RY(ke,!1,De),ke.asyncDep){if(Le&&Le.registerDep(ke,J,De),!j.el){const z=ke.subTree=Zt(Kn);v(null,z,ue,oe)}}else J(ke,j,ue,oe,Le,ye,De)},Y=(j,ue,oe)=>{const be=ue.component=j.component;if(_Y(j,ue,oe))if(be.asyncDep&&!be.asyncResolved){ie(be,ue,oe);return}else be.next=ue,be.update();else ue.el=j.el,be.vnode=ue},J=(j,ue,oe,be,Le,ye,De)=>{const ke=()=>{if(j.isMounted){let{next:Ie,bu:Ze,u:Ve,parent:Ce,vnode:Oe}=j;{const K=GM(j);if(K){Ie&&(Ie.el=Oe.el,ie(j,Ie,De)),K.asyncDep.then(()=>{j.isUnmounted||ke()});return}}let st=Ie,ae;ho(j,!1),Ie?(Ie.el=Oe.el,ie(j,Ie,De)):Ie=Oe,Ze&&Gh(Ze),(ae=Ie.props&&Ie.props.onVnodeBeforeUpdate)&&_s(ae,Ce,Ie,Oe),ho(j,!0);const ne=zC(j),U=j.subTree;j.subTree=ne,T(U,ne,h(U.el),pt(U),j,Le,ye),Ie.el=ne.el,st===null&&bY(j,ne.el),Ve&&bi(Ve,Le),(ae=Ie.props&&Ie.props.onVnodeUpdated)&&bi(()=>_s(ae,Ce,Ie,Oe),Le)}else{let Ie;const{el:Ze,props:Ve}=ue,{bm:Ce,m:Oe,parent:st,root:ae,type:ne}=j,U=Ou(ue);ho(j,!1),Ce&&Gh(Ce),!U&&(Ie=Ve&&Ve.onVnodeBeforeMount)&&_s(Ie,st,ue),ho(j,!0);{ae.ce&&ae.ce._injectChildStyle(ne);const K=j.subTree=zC(j);T(null,K,oe,be,j,Le,ye),ue.el=K.el}if(Oe&&bi(Oe,Le),!U&&(Ie=Ve&&Ve.onVnodeMounted)){const K=ue;bi(()=>_s(Ie,st,K),Le)}(ue.shapeFlag&256||st&&Ou(st.vnode)&&st.vnode.shapeFlag&256)&&j.a&&bi(j.a,Le),j.isMounted=!0,ue=oe=be=null}};j.scope.on();const z=j.effect=new XU(ke);j.scope.off();const X=j.update=z.run.bind(z),_e=j.job=z.runIfDirty.bind(z);_e.i=j,_e.id=j.uid,z.scheduler=()=>rT(_e),ho(j,!0),X()},ie=(j,ue,oe)=>{ue.component=j;const be=j.vnode.props;j.vnode=ue,j.next=null,tY(j,ue.props,be,oe),sY(j,ue.children,oe),Ha(),NC(j),qa()},le=(j,ue,oe,be,Le,ye,De,ke,z=!1)=>{const X=j&&j.children,_e=j?j.shapeFlag:0,Ie=ue.children,{patchFlag:Ze,shapeFlag:Ve}=ue;if(Ze>0){if(Ze&128){Me(X,Ie,oe,be,Le,ye,De,ke,z);return}else if(Ze&256){Te(X,Ie,oe,be,Le,ye,De,ke,z);return}}Ve&8?(_e&16&&ot(X,Le,ye),Ie!==X&&f(oe,Ie)):_e&16?Ve&16?Me(X,Ie,oe,be,Le,ye,De,ke,z):ot(X,Le,ye,!0):(_e&8&&f(oe,""),Ve&16&&w(Ie,oe,be,Le,ye,De,ke,z))},Te=(j,ue,oe,be,Le,ye,De,ke,z)=>{j=j||wu,ue=ue||wu;const X=j.length,_e=ue.length,Ie=Math.min(X,_e);let Ze;for(Ze=0;Ze<Ie;Ze++){const Ve=ue[Ze]=z?Pa(ue[Ze]):Es(ue[Ze]);T(j[Ze],Ve,oe,null,Le,ye,De,ke,z)}X>_e?ot(j,Le,ye,!0,!1,Ie):w(ue,oe,be,Le,ye,De,ke,z,Ie)},Me=(j,ue,oe,be,Le,ye,De,ke,z)=>{let X=0;const _e=ue.length;let Ie=j.length-1,Ze=_e-1;for(;X<=Ie&&X<=Ze;){const Ve=j[X],Ce=ue[X]=z?Pa(ue[X]):Es(ue[X]);if(Io(Ve,Ce))T(Ve,Ce,oe,null,Le,ye,De,ke,z);else break;X++}for(;X<=Ie&&X<=Ze;){const Ve=j[Ie],Ce=ue[Ze]=z?Pa(ue[Ze]):Es(ue[Ze]);if(Io(Ve,Ce))T(Ve,Ce,oe,null,Le,ye,De,ke,z);else break;Ie--,Ze--}if(X>Ie){if(X<=Ze){const Ve=Ze+1,Ce=Ve<_e?ue[Ve].el:be;for(;X<=Ze;)T(null,ue[X]=z?Pa(ue[X]):Es(ue[X]),oe,Ce,Le,ye,De,ke,z),X++}}else if(X>Ze)for(;X<=Ie;)se(j[X],Le,ye,!0),X++;else{const Ve=X,Ce=X,Oe=new Map;for(X=Ce;X<=Ze;X++){const re=ue[X]=z?Pa(ue[X]):Es(ue[X]);re.key!=null&&Oe.set(re.key,X)}let st,ae=0;const ne=Ze-Ce+1;let U=!1,K=0;const te=new Array(ne);for(X=0;X<ne;X++)te[X]=0;for(X=Ve;X<=Ie;X++){const re=j[X];if(ae>=ne){se(re,Le,ye,!0);continue}let H;if(re.key!=null)H=Oe.get(re.key);else for(st=Ce;st<=Ze;st++)if(te[st-Ce]===0&&Io(re,ue[st])){H=st;break}H===void 0?se(re,Le,ye,!0):(te[H-Ce]=X+1,H>=K?K=H:U=!0,T(re,ue[H],oe,null,Le,ye,De,ke,z),ae++)}const ge=U?lY(te):wu;for(st=ge.length-1,X=ne-1;X>=0;X--){const re=Ce+X,H=ue[re],P=re+1<_e?ue[re+1].el:be;te[X]===0?T(null,H,oe,P,Le,ye,De,ke,z):U&&(st<0||X!==ge[st]?Ee(H,oe,P,2):st--)}}},Ee=(j,ue,oe,be,Le=null)=>{const{el:ye,type:De,transition:ke,children:z,shapeFlag:X}=j;if(X&6){Ee(j.component.subTree,ue,oe,be);return}if(X&128){j.suspense.move(ue,oe,be);return}if(X&64){De.move(j,ue,oe,at);return}if(De===Wt){i(ye,ue,oe);for(let Ie=0;Ie<z.length;Ie++)Ee(z[Ie],ue,oe,be);i(j.anchor,ue,oe);return}if(De===Vh){R(j,ue,oe);return}if(be!==2&&X&1&&ke)if(be===0)ke.beforeEnter(ye),i(ye,ue,oe),bi(()=>ke.enter(ye),Le);else{const{leave:Ie,delayLeave:Ze,afterLeave:Ve}=ke,Ce=()=>i(ye,ue,oe),Oe=()=>{Ie(ye,()=>{Ce(),Ve&&Ve()})};Ze?Ze(ye,Ce,Oe):Oe()}else i(ye,ue,oe)},se=(j,ue,oe,be=!1,Le=!1)=>{const{type:ye,props:De,ref:ke,children:z,dynamicChildren:X,shapeFlag:_e,patchFlag:Ie,dirs:Ze,cacheIndex:Ve}=j;if(Ie===-2&&(Le=!1),ke!=null&&id(ke,null,oe,j,!0),Ve!=null&&(ue.renderCache[Ve]=void 0),_e&256){ue.ctx.deactivate(j);return}const Ce=_e&1&&Ze,Oe=!Ou(j);let st;if(Oe&&(st=De&&De.onVnodeBeforeUnmount)&&_s(st,ue,j),_e&6)nt(j.component,oe,be);else{if(_e&128){j.suspense.unmount(oe,be);return}Ce&&fo(j,null,ue,"beforeUnmount"),_e&64?j.type.remove(j,ue,oe,at,be):X&&!X.hasOnce&&(ye!==Wt||Ie>0&&Ie&64)?ot(X,ue,oe,!1,!0):(ye===Wt&&Ie&384||!Le&&_e&16)&&ot(z,ue,oe),be&&me(j)}(Oe&&(st=De&&De.onVnodeUnmounted)||Ce)&&bi(()=>{st&&_s(st,ue,j),Ce&&fo(j,null,ue,"unmounted")},oe)},me=j=>{const{type:ue,el:oe,anchor:be,transition:Le}=j;if(ue===Wt){Xe(oe,be);return}if(ue===Vh){A(j);return}const ye=()=>{s(oe),Le&&!Le.persisted&&Le.afterLeave&&Le.afterLeave()};if(j.shapeFlag&1&&Le&&!Le.persisted){const{leave:De,delayLeave:ke}=Le,z=()=>De(oe,ye);ke?ke(j.el,ye,z):z()}else ye()},Xe=(j,ue)=>{let oe;for(;j!==ue;)oe=p(j),s(j),j=oe;s(ue)},nt=(j,ue,oe)=>{const{bum:be,scope:Le,job:ye,subTree:De,um:ke,m:z,a:X}=j;XC(z),XC(X),be&&Gh(be),Le.stop(),ye&&(ye.flags|=8,se(De,j,ue,oe)),ke&&bi(ke,ue),bi(()=>{j.isUnmounted=!0},ue),ue&&ue.pendingBranch&&!ue.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===ue.pendingId&&(ue.deps--,ue.deps===0&&ue.resolve())},ot=(j,ue,oe,be=!1,Le=!1,ye=0)=>{for(let De=ye;De<j.length;De++)se(j[De],ue,oe,be,Le)},pt=j=>{if(j.shapeFlag&6)return pt(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const ue=p(j.anchor||j.el),oe=ue&&ue[Bj];return oe?p(oe):ue};let qe=!1;const Ye=(j,ue,oe)=>{j==null?ue._vnode&&se(ue._vnode,null,null,!0):T(ue._vnode||null,j,ue,null,null,null,oe),ue._vnode=j,qe||(qe=!0,NC(),hM(),qe=!1)},at={p:T,um:se,m:Ee,r:me,mt:ce,mc:w,pc:le,pbc:M,n:pt,o:t};return{render:Ye,hydrate:void 0,createApp:Qj(Ye)}}function gm({type:t,props:e},r){return r==="svg"&&t==="foreignObject"||r==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:r}function ho({effect:t,job:e},r){r?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function uY(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function FM(t,e,r=!1){const i=t.children,s=e.children;if(Lt(i)&&Lt(s))for(let a=0;a<i.length;a++){const n=i[a];let o=s[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=s[a]=Pa(s[a]),o.el=n.el),!r&&o.patchFlag!==-2&&FM(n,o)),o.type===Yc&&(o.el=n.el)}}function lY(t){const e=t.slice(),r=[0];let i,s,a,n,o;const u=t.length;for(i=0;i<u;i++){const c=t[i];if(c!==0){if(s=r[r.length-1],t[s]<c){e[i]=s,r.push(i);continue}for(a=0,n=r.length-1;a<n;)o=a+n>>1,t[r[o]]<c?a=o+1:n=o;c<t[r[a]]&&(a>0&&(e[i]=r[a-1]),r[a]=i)}}for(a=r.length,n=r[a-1];a-- >0;)r[a]=n,n=e[n];return r}function GM(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:GM(e)}function XC(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const cY=Symbol.for("v-scx"),fY=()=>ia(cY);function Do(t,e,r){return KM(t,e,r)}function KM(t,e,r=Er){const{immediate:i,deep:s,flush:a,once:n}=r,o=mn({},r),u=e&&i||!e&&a!=="post";let c;if(wc){if(a==="sync"){const g=fY();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!u){const g=()=>{};return g.stop=As,g.resume=As,g.pause=As,g}}const f=Tn;o.call=(g,m,T)=>us(g,f,m,T);let h=!1;a==="post"?o.scheduler=g=>{bi(g,f&&f.suspense)}:a!=="sync"&&(h=!0,o.scheduler=(g,m)=>{m?g():rT(g)}),o.augmentJob=g=>{e&&(g.flags|=4),h&&(g.flags|=2,f&&(g.id=f.uid,g.i=f))};const p=Rj(t,e,o);return wc&&(c?c.push(p):u&&p()),p}function hY(t,e,r){const i=this.proxy,s=qr(t)?t.includes(".")?VM(i,t):()=>i[t]:t.bind(i,i);let a;Kt(e)?a=e:(a=e.handler,r=e);const n=Qc(this),o=KM(s,a.bind(i),r);return n(),o}function VM(t,e){const r=e.split(".");return()=>{let i=t;for(let s=0;s<r.length&&i;s++)i=i[r[s]];return i}}const dY=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${$i(e)}Modifiers`]||t[`${$a(e)}Modifiers`];function pY(t,e,...r){if(t.isUnmounted)return;const i=t.vnode.props||Er;let s=r;const a=e.startsWith("update:"),n=a&&dY(i,e.slice(7));n&&(n.trim&&(s=r.map(f=>qr(f)?f.trim():f)),n.number&&(s=r.map(gy)));let o,u=i[o=um(e)]||i[o=um($i(e))];!u&&a&&(u=i[o=um($a(e))]),u&&us(u,t,6,s);const c=i[o+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[o])return;t.emitted[o]=!0,us(c,t,6,s)}}function $M(t,e,r=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const a=t.emits;let n={},o=!1;if(!Kt(t)){const u=c=>{const f=$M(c,e,!0);f&&(o=!0,mn(n,f))};!r&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!a&&!o?(Tr(t)&&i.set(t,null),null):(Lt(a)?a.forEach(u=>n[u]=null):mn(n,a),Tr(t)&&i.set(t,n),n)}function qd(t,e){return!t||!Od(e)?!1:(e=e.slice(2).replace(/Once$/,""),pr(t,e[0].toLowerCase()+e.slice(1))||pr(t,$a(e))||pr(t,e))}function zC(t){const{type:e,vnode:r,proxy:i,withProxy:s,propsOptions:[a],slots:n,attrs:o,emit:u,render:c,renderCache:f,props:h,data:p,setupState:g,ctx:m,inheritAttrs:T}=t,x=nd(t);let v,y;try{if(r.shapeFlag&4){const A=s||i,k=A;v=Es(c.call(k,A,f,h,g,p,m)),y=o}else{const A=e;v=Es(A.length>1?A(h,{attrs:o,slots:n,emit:u}):A(h,null)),y=e.props?o:gY(o)}}catch(A){uc.length=0,Gd(A,t,1),v=Zt(Kn)}let R=v;if(y&&T!==!1){const A=Object.keys(y),{shapeFlag:k}=R;A.length&&k&7&&(a&&A.some(X1)&&(y=mY(y,a)),R=Ga(R,y,!1,!0))}return r.dirs&&(R=Ga(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(r.dirs):r.dirs),r.transition&&Sc(R,r.transition),v=R,nd(x),v}const gY=t=>{let e;for(const r in t)(r==="class"||r==="style"||Od(r))&&((e||(e={}))[r]=t[r]);return e},mY=(t,e)=>{const r={};for(const i in t)(!X1(i)||!(i.slice(9)in e))&&(r[i]=t[i]);return r};function _Y(t,e,r){const{props:i,children:s,component:a}=t,{props:n,children:o,patchFlag:u}=e,c=a.emitsOptions;if(e.dirs||e.transition)return!0;if(r&&u>=0){if(u&1024)return!0;if(u&16)return i?WC(i,n,c):!!n;if(u&8){const f=e.dynamicProps;for(let h=0;h<f.length;h++){const p=f[h];if(n[p]!==i[p]&&!qd(c,p))return!0}}}else return(s||o)&&(!o||!o.$stable)?!0:i===n?!1:i?n?WC(i,n,c):!0:!!n;return!1}function WC(t,e,r){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const a=i[s];if(e[a]!==t[a]&&!qd(r,a))return!0}return!1}function bY({vnode:t,parent:e},r){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=r,e=e.parent;else break}}const HM=t=>t.__isSuspense;function xY(t,e){e&&e.pendingBranch?Lt(t)?e.effects.push(...t):e.effects.push(t):Ij(t)}const Wt=Symbol.for("v-fgt"),Yc=Symbol.for("v-txt"),Kn=Symbol.for("v-cmt"),Vh=Symbol.for("v-stc"),uc=[];let Ei=null;function Pe(t=!1){uc.push(Ei=t?null:[])}function vY(){uc.pop(),Ei=uc[uc.length-1]||null}let Rc=1;function jC(t,e=!1){Rc+=t,t<0&&Ei&&e&&(Ei.hasOnce=!0)}function qM(t){return t.dynamicChildren=Rc>0?Ei||wu:null,vY(),Rc>0&&Ei&&Ei.push(t),t}function Ge(t,e,r,i,s,a){return qM(Se(t,e,r,i,s,a,!0))}function $n(t,e,r,i,s){return qM(Zt(t,e,r,i,s,!0))}function Cc(t){return t?t.__v_isVNode===!0:!1}function Io(t,e){return t.type===e.type&&t.key===e.key}const XM=({key:t})=>t??null,$h=({ref:t,ref_key:e,ref_for:r})=>(typeof t=="number"&&(t=""+t),t!=null?qr(t)||Rn(t)||Kt(t)?{i:dn,r:t,k:e,f:!!r}:t:null);function Se(t,e=null,r=null,i=0,s=null,a=t===Wt?0:1,n=!1,o=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&XM(e),ref:e&&$h(e),scopeId:pM,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:dn};return o?(uT(u,r),a&128&&t.normalize(u)):r&&(u.shapeFlag|=qr(r)?8:16),Rc>0&&!n&&Ei&&(u.patchFlag>0||a&6)&&u.patchFlag!==32&&Ei.push(u),u}const Zt=EY;function EY(t,e=null,r=null,i=0,s=null,a=!1){if((!t||t===SM)&&(t=Kn),Cc(t)){const o=Ga(t,e,!0);return r&&uT(o,r),Rc>0&&!a&&Ei&&(o.shapeFlag&6?Ei[Ei.indexOf(t)]=o:Ei.push(o)),o.patchFlag=-2,o}if(BY(t)&&(t=t.__vccOpts),e){e=yY(e);let{class:o,style:u}=e;o&&!qr(o)&&(e.class=kt(o)),Tr(u)&&(tT(u)&&!Lt(u)&&(u=mn({},u)),e.style=ko(u))}const n=qr(t)?1:HM(t)?128:gM(t)?64:Tr(t)?4:Kt(t)?2:0;return Se(t,e,r,i,s,n,a,!0)}function yY(t){return t?tT(t)||PM(t)?mn({},t):t:null}function Ga(t,e,r=!1,i=!1){const{props:s,ref:a,patchFlag:n,children:o,transition:u}=t,c=e?Zc(s||{},e):s,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&XM(c),ref:e&&e.ref?r&&a?Lt(a)?a.concat($h(e)):[a,$h(e)]:$h(e):a,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Wt?n===-1?16:n|16:n,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ga(t.ssContent),ssFallback:t.ssFallback&&Ga(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&i&&Sc(f,u.clone(f)),f}function ys(t=" ",e=0){return Zt(Yc,null,t,e)}function Xd(t,e){const r=Zt(Vh,null,t);return r.staticCount=e,r}function Ot(t="",e=!1){return e?(Pe(),$n(Kn,null,t)):Zt(Kn,null,t)}function Es(t){return t==null||typeof t=="boolean"?Zt(Kn):Lt(t)?Zt(Wt,null,t.slice()):Cc(t)?Pa(t):Zt(Yc,null,String(t))}function Pa(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ga(t)}function uT(t,e){let r=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(Lt(e))r=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),uT(t,s()),s._c&&(s._d=!0));return}else{r=32;const s=e._;!s&&!PM(e)?e._ctx=dn:s===3&&dn&&(dn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Kt(e)?(e={default:e,_ctx:dn},r=32):(e=String(e),i&64?(r=16,e=[ys(e)]):r=8);t.children=e,t.shapeFlag|=r}function Zc(...t){const e={};for(let r=0;r<t.length;r++){const i=t[r];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=kt([e.class,i.class]));else if(s==="style")e.style=ko([e.style,i.style]);else if(Od(s)){const a=e[s],n=i[s];n&&a!==n&&!(Lt(a)&&a.includes(n))&&(e[s]=a?[].concat(a,n):n)}else s!==""&&(e[s]=i[s])}return e}function _s(t,e,r,i=null){us(t,e,7,[r,i])}const TY=LM();let AY=0;function SY(t,e,r){const i=t.type,s=(e?e.appContext:t.appContext)||TY,a={uid:AY++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qU(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:DM(i,s),emitsOptions:$M(i,s),emit:null,emitted:null,propsDefaults:Er,inheritAttrs:i.inheritAttrs,ctx:Er,data:Er,props:Er,attrs:Er,slots:Er,refs:Er,setupState:Er,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=pY.bind(null,a),t.ce&&t.ce(a),a}let Tn=null;const No=()=>Tn||dn;let ad,Ry;{const t=Md(),e=(r,i)=>{let s;return(s=t[r])||(s=t[r]=[]),s.push(i),a=>{s.length>1?s.forEach(n=>n(a)):s[0](a)}};ad=e("__VUE_INSTANCE_SETTERS__",r=>Tn=r),Ry=e("__VUE_SSR_SETTERS__",r=>wc=r)}const Qc=t=>{const e=Tn;return ad(t),t.scope.on(),()=>{t.scope.off(),ad(e)}},YC=()=>{Tn&&Tn.scope.off(),ad(null)};function zM(t){return t.vnode.shapeFlag&4}let wc=!1;function RY(t,e=!1,r=!1){e&&Ry(e);const{props:i,children:s}=t.vnode,a=zM(t);eY(t,i,a,e),iY(t,s,r);const n=a?CY(t,e):void 0;return e&&Ry(!1),n}function CY(t,e){const r=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,qj);const{setup:i}=r;if(i){Ha();const s=t.setupContext=i.length>1?LY(t):null,a=Qc(t),n=jc(i,t,0,[t.props,s]),o=MU(n);if(qa(),a(),(o||t.sp)&&!Ou(t)&&EM(t),o){if(n.then(YC,YC),e)return n.then(u=>{ZC(t,u)}).catch(u=>{Gd(u,t,0)});t.asyncDep=n}else ZC(t,n)}else WM(t)}function ZC(t,e,r){Kt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Tr(e)&&(t.setupState=lM(e)),WM(t)}function WM(t,e,r){const i=t.type;t.render||(t.render=i.render||As);{const s=Qc(t);Ha();try{Xj(t)}finally{qa(),s()}}}const wY={get(t,e){return Ln(t,"get",""),t[e]}};function LY(t){const e=r=>{t.exposed=r||{}};return{attrs:new Proxy(t.attrs,wY),slots:t.slots,emit:t.emit,expose:e}}function zd(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(lM(Bu(t.exposed)),{get(e,r){if(r in e)return e[r];if(r in oc)return oc[r](t)},has(e,r){return r in e||r in oc}})):t.proxy}function IY(t,e=!0){return Kt(t)?t.displayName||t.name:t.name||e&&t.__name}function BY(t){return Kt(t)&&"__vccOpts"in t}const vi=(t,e)=>Aj(t,e,wc);function lT(t,e,r){const i=arguments.length;return i===2?Tr(e)&&!Lt(e)?Cc(e)?Zt(t,null,[e]):Zt(t,e):Zt(t,null,e):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Cc(r)&&(r=[r]),Zt(t,e,r))}const PY="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Cy;const QC=typeof window<"u"&&window.trustedTypes;if(QC)try{Cy=QC.createPolicy("vue",{createHTML:t=>t})}catch{}const jM=Cy?t=>Cy.createHTML(t):t=>t,OY="http://www.w3.org/2000/svg",DY="http://www.w3.org/1998/Math/MathML",Qs=typeof document<"u"?document:null,JC=Qs&&Qs.createElement("template"),kY={insert:(t,e,r)=>{e.insertBefore(t,r||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,r,i)=>{const s=e==="svg"?Qs.createElementNS(OY,t):e==="mathml"?Qs.createElementNS(DY,t):r?Qs.createElement(t,{is:r}):Qs.createElement(t);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>Qs.createTextNode(t),createComment:t=>Qs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,r,i,s,a){const n=r?r.previousSibling:e.lastChild;if(s&&(s===a||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),r),!(s===a||!(s=s.nextSibling)););else{JC.innerHTML=jM(i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t);const o=JC.content;if(i==="svg"||i==="mathml"){const u=o.firstChild;for(;u.firstChild;)o.appendChild(u.firstChild);o.removeChild(u)}e.insertBefore(o,r)}return[n?n.nextSibling:e.firstChild,r?r.previousSibling:e.lastChild]}},Ra="transition",Pl="animation",Lc=Symbol("_vtc"),YM={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},UY=mn({},mM,YM),MY=t=>(t.displayName="Transition",t.props=UY,t),ZM=MY((t,{slots:e})=>lT(Dj,NY(t),e)),po=(t,e=[])=>{Lt(t)?t.forEach(r=>r(...e)):t&&t(...e)},ew=t=>t?Lt(t)?t.some(e=>e.length>1):t.length>1:!1;function NY(t){const e={};for(const G in t)G in YM||(e[G]=t[G]);if(t.css===!1)return e;const{name:r="v",type:i,duration:s,enterFromClass:a=`${r}-enter-from`,enterActiveClass:n=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:u=a,appearActiveClass:c=n,appearToClass:f=o,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:p=`${r}-leave-active`,leaveToClass:g=`${r}-leave-to`}=t,m=FY(s),T=m&&m[0],x=m&&m[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:R,onLeave:A,onLeaveCancelled:k,onBeforeAppear:b=v,onAppear:C=y,onAppearCancelled:w=R}=e,O=(G,Z,ce,Y)=>{G._enterCancelled=Y,go(G,Z?f:o),go(G,Z?c:n),ce&&ce()},M=(G,Z)=>{G._isLeaving=!1,go(G,h),go(G,g),go(G,p),Z&&Z()},$=G=>(Z,ce)=>{const Y=G?C:y,J=()=>O(Z,G,ce);po(Y,[Z,J]),tw(()=>{go(Z,G?u:a),Xs(Z,G?f:o),ew(Y)||rw(Z,i,T,J)})};return mn(e,{onBeforeEnter(G){po(v,[G]),Xs(G,a),Xs(G,n)},onBeforeAppear(G){po(b,[G]),Xs(G,u),Xs(G,c)},onEnter:$(!1),onAppear:$(!0),onLeave(G,Z){G._isLeaving=!0;const ce=()=>M(G,Z);Xs(G,h),G._enterCancelled?(Xs(G,p),sw()):(sw(),Xs(G,p)),tw(()=>{G._isLeaving&&(go(G,h),Xs(G,g),ew(A)||rw(G,i,x,ce))}),po(A,[G,ce])},onEnterCancelled(G){O(G,!1,void 0,!0),po(R,[G])},onAppearCancelled(G){O(G,!0,void 0,!0),po(w,[G])},onLeaveCancelled(G){M(G),po(k,[G])}})}function FY(t){if(t==null)return null;if(Tr(t))return[mm(t.enter),mm(t.leave)];{const e=mm(t);return[e,e]}}function mm(t){return HW(t)}function Xs(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.add(r)),(t[Lc]||(t[Lc]=new Set)).add(e)}function go(t,e){e.split(/\s+/).forEach(i=>i&&t.classList.remove(i));const r=t[Lc];r&&(r.delete(e),r.size||(t[Lc]=void 0))}function tw(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let GY=0;function rw(t,e,r,i){const s=t._endId=++GY,a=()=>{s===t._endId&&i()};if(r!=null)return setTimeout(a,r);const{type:n,timeout:o,propCount:u}=KY(t,e);if(!n)return i();const c=n+"end";let f=0;const h=()=>{t.removeEventListener(c,p),a()},p=g=>{g.target===t&&++f>=u&&h()};setTimeout(()=>{f<u&&h()},o+1),t.addEventListener(c,p)}function KY(t,e){const r=window.getComputedStyle(t),i=m=>(r[m]||"").split(", "),s=i(`${Ra}Delay`),a=i(`${Ra}Duration`),n=nw(s,a),o=i(`${Pl}Delay`),u=i(`${Pl}Duration`),c=nw(o,u);let f=null,h=0,p=0;e===Ra?n>0&&(f=Ra,h=n,p=a.length):e===Pl?c>0&&(f=Pl,h=c,p=u.length):(h=Math.max(n,c),f=h>0?n>c?Ra:Pl:null,p=f?f===Ra?a.length:u.length:0);const g=f===Ra&&/\b(transform|all)(,|$)/.test(i(`${Ra}Property`).toString());return{type:f,timeout:h,propCount:p,hasTransform:g}}function nw(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((r,i)=>iw(r)+iw(t[i])))}function iw(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function sw(){return document.body.offsetHeight}function VY(t,e,r){const i=t[Lc];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):r?t.setAttribute("class",e):t.className=e}const aw=Symbol("_vod"),$Y=Symbol("_vsh"),HY=Symbol(""),qY=/(^|;)\s*display\s*:/;function XY(t,e,r){const i=t.style,s=qr(r);let a=!1;if(r&&!s){if(e)if(qr(e))for(const n of e.split(";")){const o=n.slice(0,n.indexOf(":")).trim();r[o]==null&&Hh(i,o,"")}else for(const n in e)r[n]==null&&Hh(i,n,"");for(const n in r)n==="display"&&(a=!0),Hh(i,n,r[n])}else if(s){if(e!==r){const n=i[HY];n&&(r+=";"+n),i.cssText=r,a=qY.test(r)}}else e&&t.removeAttribute("style");aw in t&&(t[aw]=a?i.display:"",t[$Y]&&(i.display="none"))}const ow=/\s*!important$/;function Hh(t,e,r){if(Lt(r))r.forEach(i=>Hh(t,e,i));else if(r==null&&(r=""),e.startsWith("--"))t.setProperty(e,r);else{const i=zY(t,e);ow.test(r)?t.setProperty($a(i),r.replace(ow,""),"important"):t[i]=r}}const uw=["Webkit","Moz","ms"],_m={};function zY(t,e){const r=_m[e];if(r)return r;let i=$i(e);if(i!=="filter"&&i in t)return _m[e]=i;i=Ud(i);for(let s=0;s<uw.length;s++){const a=uw[s]+i;if(a in t)return _m[e]=a}return e}const lw="http://www.w3.org/1999/xlink";function cw(t,e,r,i,s,a=ZW(e)){i&&e.startsWith("xlink:")?r==null?t.removeAttributeNS(lw,e.slice(6,e.length)):t.setAttributeNS(lw,e,r):r==null||a&&!KU(r)?t.removeAttribute(e):t.setAttribute(e,a?"":os(r)?String(r):r)}function fw(t,e,r,i,s){if(e==="innerHTML"||e==="textContent"){r!=null&&(t[e]=e==="innerHTML"?jM(r):r);return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const o=a==="OPTION"?t.getAttribute("value")||"":t.value,u=r==null?t.type==="checkbox"?"on":"":String(r);(o!==u||!("_value"in t))&&(t.value=u),r==null&&t.removeAttribute(e),t._value=r;return}let n=!1;if(r===""||r==null){const o=typeof t[e];o==="boolean"?r=KU(r):r==null&&o==="string"?(r="",n=!0):o==="number"&&(r=0,n=!0)}try{t[e]=r}catch{}n&&t.removeAttribute(s||e)}function Bo(t,e,r,i){t.addEventListener(e,r,i)}function WY(t,e,r,i){t.removeEventListener(e,r,i)}const hw=Symbol("_vei");function jY(t,e,r,i,s=null){const a=t[hw]||(t[hw]={}),n=a[e];if(i&&n)n.value=i;else{const[o,u]=YY(e);if(i){const c=a[e]=JY(i,s);Bo(t,o,c,u)}else n&&(WY(t,o,n,u),a[e]=void 0)}}const dw=/(?:Once|Passive|Capture)$/;function YY(t){let e;if(dw.test(t)){e={};let i;for(;i=t.match(dw);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):$a(t.slice(2)),e]}let bm=0;const ZY=Promise.resolve(),QY=()=>bm||(ZY.then(()=>bm=0),bm=Date.now());function JY(t,e){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;us(eZ(i,r.value),e,5,[i])};return r.value=t,r.attached=QY(),r}function eZ(t,e){if(Lt(e)){const r=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{r.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const pw=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,tZ=(t,e,r,i,s,a)=>{const n=s==="svg";e==="class"?VY(t,i,n):e==="style"?XY(t,r,i):Od(e)?X1(e)||jY(t,e,r,i,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):rZ(t,e,i,n))?(fw(t,e,i),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&cw(t,e,i,n,a,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!qr(i))?fw(t,$i(e),i,a,e):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),cw(t,e,i,n))};function rZ(t,e,r,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&pw(e)&&Kt(r));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return pw(e)&&qr(r)?!1:e in t}const od=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Lt(e)?r=>Gh(e,r):e};function nZ(t){t.target.composing=!0}function gw(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ku=Symbol("_assign"),wy={created(t,{modifiers:{lazy:e,trim:r,number:i}},s){t[ku]=od(s);const a=i||s.props&&s.props.type==="number";Bo(t,e?"change":"input",n=>{if(n.target.composing)return;let o=t.value;r&&(o=o.trim()),a&&(o=gy(o)),t[ku](o)}),r&&Bo(t,"change",()=>{t.value=t.value.trim()}),e||(Bo(t,"compositionstart",nZ),Bo(t,"compositionend",gw),Bo(t,"change",gw))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:r,modifiers:{lazy:i,trim:s,number:a}},n){if(t[ku]=od(n),t.composing)return;const o=(a||t.type==="number")&&!/^0\d/.test(t.value)?gy(t.value):t.value,u=e??"";o!==u&&(document.activeElement===t&&t.type!=="range"&&(i&&e===r||s&&t.value.trim()===u)||(t.value=u))}},iZ={deep:!0,created(t,e,r){t[ku]=od(r),Bo(t,"change",()=>{const i=t._modelValue,s=sZ(t),a=t.checked,n=t[ku];if(Lt(i)){const o=VU(i,s),u=o!==-1;if(a&&!u)n(i.concat(s));else if(!a&&u){const c=[...i];c.splice(o,1),n(c)}}else if(Dd(i)){const o=new Set(i);a?o.add(s):o.delete(s),n(o)}else n(QM(t,a))})},mounted:mw,beforeUpdate(t,e,r){t[ku]=od(r),mw(t,e,r)}};function mw(t,{value:e,oldValue:r},i){t._modelValue=e;let s;if(Lt(e))s=VU(e,i.props.value)>-1;else if(Dd(e))s=e.has(i.props.value);else{if(e===r)return;s=Nd(e,QM(t,!0))}t.checked!==s&&(t.checked=s)}function sZ(t){return"_value"in t?t._value:t.value}function QM(t,e){const r=e?"_trueValue":"_falseValue";return r in t?t[r]:e}const aZ=["ctrl","shift","alt","meta"],oZ={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>aZ.some(r=>t[`${r}Key`]&&!e.includes(r))},Fa=(t,e)=>{const r=t._withMods||(t._withMods={}),i=e.join(".");return r[i]||(r[i]=(s,...a)=>{for(let n=0;n<e.length;n++){const o=oZ[e[n]];if(o&&o(s,e))return}return t(s,...a)})},uZ={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},cT=(t,e)=>{const r=t._withKeys||(t._withKeys={}),i=e.join(".");return r[i]||(r[i]=s=>{if(!("key"in s))return;const a=$a(s.key);if(e.some(n=>n===a||uZ[n]===a))return t(s)})},lZ=mn({patchProp:tZ},kY);let _w;function cZ(){return _w||(_w=aY(lZ))}const fT=(...t)=>{const e=cZ().createApp(...t),{mount:r}=e;return e.mount=i=>{const s=hZ(i);if(!s)return;const a=e._component;!Kt(a)&&!a.render&&!a.template&&(a.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const n=r(s,!1,fZ(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),n},e};function fZ(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function hZ(t){return qr(t)?document.querySelector(t):t}const er=(t,e)=>{const r=t.__vccOpts||t;for(const[i,s]of e)r[i]=s;return r};var $r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function dZ(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}),r}var xm={exports:{}},bw;function pZ(){return bw||(bw=1,function(t){(function(){function e(o,u){var c=o.x-u.x,f=o.y-u.y;return c*c+f*f}function r(o,u,c){var f=u.x,h=u.y,p=c.x-f,g=c.y-h;if(p!==0||g!==0){var m=((o.x-f)*p+(o.y-h)*g)/(p*p+g*g);m>1?(f=c.x,h=c.y):m>0&&(f+=p*m,h+=g*m)}return p=o.x-f,g=o.y-h,p*p+g*g}function i(o,u){for(var c=o[0],f=[c],h,p=1,g=o.length;p<g;p++)h=o[p],e(h,c)>u&&(f.push(h),c=h);return c!==h&&f.push(h),f}function s(o,u,c,f,h){for(var p=f,g,m=u+1;m<c;m++){var T=r(o[m],o[u],o[c]);T>p&&(g=m,p=T)}p>f&&(g-u>1&&s(o,u,g,f,h),h.push(o[g]),c-g>1&&s(o,g,c,f,h))}function a(o,u){var c=o.length-1,f=[o[0]];return s(o,0,c,u,f),f.push(o[c]),f}function n(o,u,c){if(o.length<=2)return o;var f=u!==void 0?u*u:1;return o=c?o:i(o,f),o=a(o,f),o}t.exports=n,t.exports.default=n})()}(xm)),xm.exports}pZ();var vm,xw;function gZ(){if(xw)return vm;xw=1;var t={DEBUG:!1,LIB_VERSION:"2.53.0"},e;if(typeof window>"u"){var r={hostname:""};e={navigator:{userAgent:""},document:{location:r,referrer:""},screen:{width:0,height:0},location:r}}else e=window;var i=24*60*60*1e3,s=Array.prototype,a=Function.prototype,n=Object.prototype,o=s.slice,u=n.toString,c=n.hasOwnProperty,f=e.console,h=e.navigator,p=e.document,g=e.opera,m=e.screen,T=h.userAgent,x=a.bind,v=s.forEach,y=s.indexOf,R=s.map,A=Array.isArray,k={},b={trim:function(E){return E.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},C={log:function(){if(t.DEBUG&&!b.isUndefined(f)&&f)try{f.log.apply(f,arguments)}catch{b.each(arguments,function(B){f.log(B)})}},warn:function(){if(t.DEBUG&&!b.isUndefined(f)&&f){var E=["Mixpanel warning:"].concat(b.toArray(arguments));try{f.warn.apply(f,E)}catch{b.each(E,function(V){f.warn(V)})}}},error:function(){if(t.DEBUG&&!b.isUndefined(f)&&f){var E=["Mixpanel error:"].concat(b.toArray(arguments));try{f.error.apply(f,E)}catch{b.each(E,function(V){f.error(V)})}}},critical:function(){if(!b.isUndefined(f)&&f){var E=["Mixpanel error:"].concat(b.toArray(arguments));try{f.error.apply(f,E)}catch{b.each(E,function(V){f.error(V)})}}}},w=function(E,B){return function(){return arguments[0]="["+B+"] "+arguments[0],E.apply(C,arguments)}},O=function(E){return{log:w(C.log,E),error:w(C.error,E),critical:w(C.critical,E)}};b.bind=function(E,B){var V,Q;if(x&&E.bind===x)return x.apply(E,o.call(arguments,1));if(!b.isFunction(E))throw new TypeError;return V=o.call(arguments,2),Q=function(){if(!(this instanceof Q))return E.apply(B,V.concat(o.call(arguments)));var de={};de.prototype=E.prototype;var ve=new de;de.prototype=null;var Ue=E.apply(ve,V.concat(o.call(arguments)));return Object(Ue)===Ue?Ue:ve},Q},b.each=function(E,B,V){if(E!=null){if(v&&E.forEach===v)E.forEach(B,V);else if(E.length===+E.length){for(var Q=0,de=E.length;Q<de;Q++)if(Q in E&&B.call(V,E[Q],Q,E)===k)return}else for(var ve in E)if(c.call(E,ve)&&B.call(V,E[ve],ve,E)===k)return}},b.extend=function(E){return b.each(o.call(arguments,1),function(B){for(var V in B)B[V]!==void 0&&(E[V]=B[V])}),E},b.isArray=A||function(E){return u.call(E)==="[object Array]"},b.isFunction=function(E){try{return/^\s*\bfunction\b/.test(E)}catch{return!1}},b.isArguments=function(E){return!!(E&&c.call(E,"callee"))},b.toArray=function(E){return E?E.toArray?E.toArray():b.isArray(E)||b.isArguments(E)?o.call(E):b.values(E):[]},b.map=function(E,B,V){if(R&&E.map===R)return E.map(B,V);var Q=[];return b.each(E,function(de){Q.push(B.call(V,de))}),Q},b.keys=function(E){var B=[];return E===null||b.each(E,function(V,Q){B[B.length]=Q}),B},b.values=function(E){var B=[];return E===null||b.each(E,function(V){B[B.length]=V}),B},b.include=function(E,B){var V=!1;return E===null?V:y&&E.indexOf===y?E.indexOf(B)!=-1:(b.each(E,function(Q){if(V||(V=Q===B))return k}),V)},b.includes=function(E,B){return E.indexOf(B)!==-1},b.inherit=function(E,B){return E.prototype=new B,E.prototype.constructor=E,E.superclass=B.prototype,E},b.isObject=function(E){return E===Object(E)&&!b.isArray(E)},b.isEmptyObject=function(E){if(b.isObject(E)){for(var B in E)if(c.call(E,B))return!1;return!0}return!1},b.isUndefined=function(E){return E===void 0},b.isString=function(E){return u.call(E)=="[object String]"},b.isDate=function(E){return u.call(E)=="[object Date]"},b.isNumber=function(E){return u.call(E)=="[object Number]"},b.isElement=function(E){return!!(E&&E.nodeType===1)},b.encodeDates=function(E){return b.each(E,function(B,V){b.isDate(B)?E[V]=b.formatDate(B):b.isObject(B)&&(E[V]=b.encodeDates(B))}),E},b.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},b.formatDate=function(E){function B(V){return V<10?"0"+V:V}return E.getUTCFullYear()+"-"+B(E.getUTCMonth()+1)+"-"+B(E.getUTCDate())+"T"+B(E.getUTCHours())+":"+B(E.getUTCMinutes())+":"+B(E.getUTCSeconds())},b.strip_empty_properties=function(E){var B={};return b.each(E,function(V,Q){b.isString(V)&&V.length>0&&(B[Q]=V)}),B},b.truncate=function(E,B){var V;return typeof E=="string"?V=E.slice(0,B):b.isArray(E)?(V=[],b.each(E,function(Q){V.push(b.truncate(Q,B))})):b.isObject(E)?(V={},b.each(E,function(Q,de){V[de]=b.truncate(Q,B)})):V=E,V},b.JSONEncode=function(){return function(E){var B=E,V=function(de){var ve=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,Ue={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return ve.lastIndex=0,ve.test(de)?'"'+de.replace(ve,function(tt){var $e=Ue[tt];return typeof $e=="string"?$e:"\\u"+("0000"+tt.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+de+'"'},Q=function(de,ve){var Ue="",tt="    ",$e=0,et="",ut="",bt=0,Je=Ue,gt=[],mt=ve[de];switch(mt&&typeof mt=="object"&&typeof mt.toJSON=="function"&&(mt=mt.toJSON(de)),typeof mt){case"string":return V(mt);case"number":return isFinite(mt)?String(mt):"null";case"boolean":case"null":return String(mt);case"object":if(!mt)return"null";if(Ue+=tt,gt=[],u.apply(mt)==="[object Array]"){for(bt=mt.length,$e=0;$e<bt;$e+=1)gt[$e]=Q($e,mt)||"null";return ut=gt.length===0?"[]":Ue?`[
`+Ue+gt.join(`,
`+Ue)+`
`+Je+"]":"["+gt.join(",")+"]",Ue=Je,ut}for(et in mt)c.call(mt,et)&&(ut=Q(et,mt),ut&&gt.push(V(et)+(Ue?": ":":")+ut));return ut=gt.length===0?"{}":Ue?"{"+gt.join(",")+Je+"}":"{"+gt.join(",")+"}",Ue=Je,ut}};return Q("",{"":B})}}(),b.JSONDecode=function(){var E,B,V={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},Q,de=function(gt){var mt=new SyntaxError(gt);throw mt.at=E,mt.text=Q,mt},ve=function(gt){return gt&&gt!==B&&de("Expected '"+gt+"' instead of '"+B+"'"),B=Q.charAt(E),E+=1,B},Ue=function(){var gt,mt="";for(B==="-"&&(mt="-",ve("-"));B>="0"&&B<="9";)mt+=B,ve();if(B===".")for(mt+=".";ve()&&B>="0"&&B<="9";)mt+=B;if(B==="e"||B==="E")for(mt+=B,ve(),(B==="-"||B==="+")&&(mt+=B,ve());B>="0"&&B<="9";)mt+=B,ve();if(gt=+mt,!isFinite(gt))de("Bad number");else return gt},tt=function(){var gt,mt,tr="",Mt;if(B==='"')for(;ve();){if(B==='"')return ve(),tr;if(B==="\\")if(ve(),B==="u"){for(Mt=0,mt=0;mt<4&&(gt=parseInt(ve(),16),!!isFinite(gt));mt+=1)Mt=Mt*16+gt;tr+=String.fromCharCode(Mt)}else if(typeof V[B]=="string")tr+=V[B];else break;else tr+=B}de("Bad string")},$e=function(){for(;B&&B<=" ";)ve()},et=function(){switch(B){case"t":return ve("t"),ve("r"),ve("u"),ve("e"),!0;case"f":return ve("f"),ve("a"),ve("l"),ve("s"),ve("e"),!1;case"n":return ve("n"),ve("u"),ve("l"),ve("l"),null}de('Unexpected "'+B+'"')},ut,bt=function(){var gt=[];if(B==="["){if(ve("["),$e(),B==="]")return ve("]"),gt;for(;B;){if(gt.push(ut()),$e(),B==="]")return ve("]"),gt;ve(","),$e()}}de("Bad array")},Je=function(){var gt,mt={};if(B==="{"){if(ve("{"),$e(),B==="}")return ve("}"),mt;for(;B;){if(gt=tt(),$e(),ve(":"),Object.hasOwnProperty.call(mt,gt)&&de('Duplicate key "'+gt+'"'),mt[gt]=ut(),$e(),B==="}")return ve("}"),mt;ve(","),$e()}}de("Bad object")};return ut=function(){switch($e(),B){case"{":return Je();case"[":return bt();case'"':return tt();case"-":return Ue();default:return B>="0"&&B<="9"?Ue():et()}},function(gt){var mt;return Q=gt,E=0,B=" ",mt=ut(),$e(),B&&de("Syntax error"),mt}}(),b.base64Encode=function(E){var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",V,Q,de,ve,Ue,tt,$e,et,ut=0,bt=0,Je="",gt=[];if(!E)return E;E=b.utf8Encode(E);do V=E.charCodeAt(ut++),Q=E.charCodeAt(ut++),de=E.charCodeAt(ut++),et=V<<16|Q<<8|de,ve=et>>18&63,Ue=et>>12&63,tt=et>>6&63,$e=et&63,gt[bt++]=B.charAt(ve)+B.charAt(Ue)+B.charAt(tt)+B.charAt($e);while(ut<E.length);switch(Je=gt.join(""),E.length%3){case 1:Je=Je.slice(0,-2)+"==";break;case 2:Je=Je.slice(0,-1)+"=";break}return Je},b.utf8Encode=function(E){E=(E+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`);var B="",V,Q,de=0,ve;for(V=Q=0,de=E.length,ve=0;ve<de;ve++){var Ue=E.charCodeAt(ve),tt=null;Ue<128?Q++:Ue>127&&Ue<2048?tt=String.fromCharCode(Ue>>6|192,Ue&63|128):tt=String.fromCharCode(Ue>>12|224,Ue>>6&63|128,Ue&63|128),tt!==null&&(Q>V&&(B+=E.substring(V,Q)),B+=tt,V=Q=ve+1)}return Q>V&&(B+=E.substring(V,E.length)),B},b.UUID=function(){var E=function(){var Q=1*new Date,de;if(e.performance&&e.performance.now)de=e.performance.now();else for(de=0;Q==1*new Date;)de++;return Q.toString(16)+Math.floor(de).toString(16)},B=function(){return Math.random().toString(16).replace(".","")},V=function(){var Q=T,de,ve,Ue=[],tt=0;function $e(et,ut){var bt,Je=0;for(bt=0;bt<ut.length;bt++)Je|=Ue[bt]<<bt*8;return et^Je}for(de=0;de<Q.length;de++)ve=Q.charCodeAt(de),Ue.unshift(ve&255),Ue.length>=4&&(tt=$e(tt,Ue),Ue=[]);return Ue.length>0&&(tt=$e(tt,Ue)),tt.toString(16)};return function(){var Q=(m.height*m.width).toString(16);return E()+"-"+B()+"-"+V()+"-"+Q+"-"+E()}}();var M=["ahrefsbot","ahrefssiteaudit","baiduspider","bingbot","bingpreview","chrome-lighthouse","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];b.isBlockedUA=function(E){var B;for(E=E.toLowerCase(),B=0;B<M.length;B++)if(E.indexOf(M[B])!==-1)return!0;return!1},b.HTTPBuildQuery=function(E,B){var V,Q,de=[];return b.isUndefined(B)&&(B="&"),b.each(E,function(ve,Ue){V=encodeURIComponent(ve.toString()),Q=encodeURIComponent(Ue),de[de.length]=Q+"="+V}),de.join(B)},b.getQueryParam=function(E,B){B=B.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var V="[\\?&]"+B+"=([^&#]*)",Q=new RegExp(V),de=Q.exec(E);if(de===null||de&&typeof de[1]!="string"&&de[1].length)return"";var ve=de[1];try{ve=decodeURIComponent(ve)}catch{C.error("Skipping decoding for malformed query param: "+ve)}return ve.replace(/\+/g," ")},b.cookie={get:function(E){for(var B=E+"=",V=p.cookie.split(";"),Q=0;Q<V.length;Q++){for(var de=V[Q];de.charAt(0)==" ";)de=de.substring(1,de.length);if(de.indexOf(B)===0)return decodeURIComponent(de.substring(B.length,de.length))}return null},parse:function(E){var B;try{B=b.JSONDecode(b.cookie.get(E))||{}}catch{}return B},set_seconds:function(E,B,V,Q,de,ve,Ue){var tt="",$e="",et="";if(Ue)tt="; domain="+Ue;else if(Q){var ut=Te(p.location.hostname);tt=ut?"; domain=."+ut:""}if(V){var bt=new Date;bt.setTime(bt.getTime()+V*1e3),$e="; expires="+bt.toGMTString()}ve&&(de=!0,et="; SameSite=None"),de&&(et+="; secure"),p.cookie=E+"="+encodeURIComponent(B)+$e+"; path=/"+tt+et},set:function(E,B,V,Q,de,ve,Ue){var tt="",$e="",et="";if(Ue)tt="; domain="+Ue;else if(Q){var ut=Te(p.location.hostname);tt=ut?"; domain=."+ut:""}if(V){var bt=new Date;bt.setTime(bt.getTime()+V*24*60*60*1e3),$e="; expires="+bt.toGMTString()}ve&&(de=!0,et="; SameSite=None"),de&&(et+="; secure");var Je=E+"="+encodeURIComponent(B)+$e+"; path=/"+tt+et;return p.cookie=Je,Je},remove:function(E,B,V){b.cookie.set(E,"",-1,B,!1,!1,V)}};var $=null,G=function(E,B){if($!==null&&!B)return $;var V=!0;try{E=E||window.localStorage;var Q="__mplss_"+J(8),de="xyz";E.setItem(Q,de),E.getItem(Q)!==de&&(V=!1),E.removeItem(Q)}catch{V=!1}return $=V,V};b.localStorage={is_supported:function(E){var B=G(null,E);return B||C.error("localStorage unsupported; falling back to cookie store"),B},error:function(E){C.error("localStorage error: "+E)},get:function(E){try{return window.localStorage.getItem(E)}catch(B){b.localStorage.error(B)}return null},parse:function(E){try{return b.JSONDecode(b.localStorage.get(E))||{}}catch{}return null},set:function(E,B){try{window.localStorage.setItem(E,B)}catch(V){b.localStorage.error(V)}},remove:function(E){try{window.localStorage.removeItem(E)}catch(B){b.localStorage.error(B)}}},b.register_event=function(){var E=function(Q,de,ve,Ue,tt){if(!Q){C.error("No valid element provided to register_event");return}if(Q.addEventListener&&!Ue)Q.addEventListener(de,ve,!!tt);else{var $e="on"+de,et=Q[$e];Q[$e]=B(Q,ve,et)}};function B(Q,de,ve){var Ue=function(tt){if(tt=tt||V(window.event),!!tt){var $e=!0,et,ut;return b.isFunction(ve)&&(et=ve(tt)),ut=de.call(Q,tt),(et===!1||ut===!1)&&($e=!1),$e}};return Ue}function V(Q){return Q&&(Q.preventDefault=V.preventDefault,Q.stopPropagation=V.stopPropagation),Q}return V.preventDefault=function(){this.returnValue=!1},V.stopPropagation=function(){this.cancelBubble=!0},E}();var Z=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');b.dom_query=function(){function E(de){return de.all?de.all:de.getElementsByTagName("*")}var B=/[\t\r\n]/g;function V(de,ve){var Ue=" "+ve+" ";return(" "+de.className+" ").replace(B," ").indexOf(Ue)>=0}function Q(de){if(!p.getElementsByTagName)return[];var ve=de.split(" "),Ue,tt,$e,et,ut,bt,Je,gt,mt,tr,Mt=[p];for(bt=0;bt<ve.length;bt++){if(Ue=ve[bt].replace(/^\s+/,"").replace(/\s+$/,""),Ue.indexOf("#")>-1){tt=Ue.split("#"),$e=tt[0];var Fr=tt[1],Ar=p.getElementById(Fr);if(!Ar||$e&&Ar.nodeName.toLowerCase()!=$e)return[];Mt=[Ar];continue}if(Ue.indexOf(".")>-1){tt=Ue.split("."),$e=tt[0];var Ri=tt[1];for($e||($e="*"),et=[],ut=0,Je=0;Je<Mt.length;Je++)for($e=="*"?mt=E(Mt[Je]):mt=Mt[Je].getElementsByTagName($e),gt=0;gt<mt.length;gt++)et[ut++]=mt[gt];for(Mt=[],tr=0,Je=0;Je<et.length;Je++)et[Je].className&&b.isString(et[Je].className)&&V(et[Je],Ri)&&(Mt[tr++]=et[Je]);continue}var Ci=Ue.match(Z);if(Ci){$e=Ci[1];var Wi=Ci[2],mf=Ci[3],ks=Ci[4];for($e||($e="*"),et=[],ut=0,Je=0;Je<Mt.length;Je++)for($e=="*"?mt=E(Mt[Je]):mt=Mt[Je].getElementsByTagName($e),gt=0;gt<mt.length;gt++)et[ut++]=mt[gt];Mt=[],tr=0;var ji;switch(mf){case"=":ji=function(xn){return xn.getAttribute(Wi)==ks};break;case"~":ji=function(xn){return xn.getAttribute(Wi).match(new RegExp("\\b"+ks+"\\b"))};break;case"|":ji=function(xn){return xn.getAttribute(Wi).match(new RegExp("^"+ks+"-?"))};break;case"^":ji=function(xn){return xn.getAttribute(Wi).indexOf(ks)===0};break;case"$":ji=function(xn){return xn.getAttribute(Wi).lastIndexOf(ks)==xn.getAttribute(Wi).length-ks.length};break;case"*":ji=function(xn){return xn.getAttribute(Wi).indexOf(ks)>-1};break;default:ji=function(xn){return xn.getAttribute(Wi)}}for(Mt=[],tr=0,Je=0;Je<et.length;Je++)ji(et[Je])&&(Mt[tr++]=et[Je]);continue}for($e=Ue,et=[],ut=0,Je=0;Je<Mt.length;Je++)for(mt=Mt[Je].getElementsByTagName($e),gt=0;gt<mt.length;gt++)et[ut++]=mt[gt];Mt=et}return Mt}return function(de){return b.isElement(de)?[de]:b.isObject(de)&&!b.isUndefined(de.length)?de:Q.call(this,de)}}();var ce=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],Y=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","ttclid","twclid","wbraid"];b.info={campaignParams:function(E){var B="",V={};return b.each(ce,function(Q){B=b.getQueryParam(p.URL,Q),B.length?V[Q]=B:E!==void 0&&(V[Q]=E)}),V},clickParams:function(){var E="",B={};return b.each(Y,function(V){E=b.getQueryParam(p.URL,V),E.length&&(B[V]=E)}),B},marketingParams:function(){return b.extend(b.info.campaignParams(),b.info.clickParams())},searchEngine:function(E){return E.search("https?://(.*)google.([^/?]*)")===0?"google":E.search("https?://(.*)bing.com")===0?"bing":E.search("https?://(.*)yahoo.com")===0?"yahoo":E.search("https?://(.*)duckduckgo.com")===0?"duckduckgo":null},searchInfo:function(E){var B=b.info.searchEngine(E),V=B!="yahoo"?"q":"p",Q={};if(B!==null){Q.$search_engine=B;var de=b.getQueryParam(E,V);de.length&&(Q.mp_keyword=de)}return Q},browser:function(E,B,V){return B=B||"",V||b.includes(E," OPR/")?b.includes(E,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(E)?"BlackBerry":b.includes(E,"IEMobile")||b.includes(E,"WPDesktop")?"Internet Explorer Mobile":b.includes(E,"SamsungBrowser/")?"Samsung Internet":b.includes(E,"Edge")||b.includes(E,"Edg/")?"Microsoft Edge":b.includes(E,"FBIOS")?"Facebook Mobile":b.includes(E,"Chrome")?"Chrome":b.includes(E,"CriOS")?"Chrome iOS":b.includes(E,"UCWEB")||b.includes(E,"UCBrowser")?"UC Browser":b.includes(E,"FxiOS")?"Firefox iOS":b.includes(B,"Apple")?b.includes(E,"Mobile")?"Mobile Safari":"Safari":b.includes(E,"Android")?"Android Mobile":b.includes(E,"Konqueror")?"Konqueror":b.includes(E,"Firefox")?"Firefox":b.includes(E,"MSIE")||b.includes(E,"Trident/")?"Internet Explorer":b.includes(E,"Gecko")?"Mozilla":""},browserVersion:function(E,B,V){var Q=b.info.browser(E,B,V),de={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/},ve=de[Q];if(ve===void 0)return null;var Ue=E.match(ve);return Ue?parseFloat(Ue[Ue.length-2]):null},os:function(){var E=T;return/Windows/i.test(E)?/Phone/.test(E)||/WPDesktop/.test(E)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(E)?"iOS":/Android/.test(E)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(E)?"BlackBerry":/Mac/i.test(E)?"Mac OS X":/Linux/.test(E)?"Linux":/CrOS/.test(E)?"Chrome OS":""},device:function(E){return/Windows Phone/i.test(E)||/WPDesktop/.test(E)?"Windows Phone":/iPad/.test(E)?"iPad":/iPod/.test(E)?"iPod Touch":/iPhone/.test(E)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(E)?"BlackBerry":/Android/.test(E)?"Android":""},referringDomain:function(E){var B=E.split("/");return B.length>=3?B[2]:""},currentUrl:function(){return e.location.href},properties:function(E){return typeof E!="object"&&(E={}),b.extend(b.strip_empty_properties({$os:b.info.os(),$browser:b.info.browser(T,h.vendor,g),$referrer:p.referrer,$referring_domain:b.info.referringDomain(p.referrer),$device:b.info.device(T)}),{$current_url:b.info.currentUrl(),$browser_version:b.info.browserVersion(T,h.vendor,g),$screen_height:m.height,$screen_width:m.width,mp_lib:"web",$lib_version:t.LIB_VERSION,$insert_id:J(),time:b.timestamp()/1e3},b.strip_empty_properties(E))},people_properties:function(){return b.extend(b.strip_empty_properties({$os:b.info.os(),$browser:b.info.browser(T,h.vendor,g)}),{$browser_version:b.info.browserVersion(T,h.vendor,g)})},mpPageViewProperties:function(){return b.strip_empty_properties({current_page_title:p.title,current_domain:e.location.hostname,current_url_path:e.location.pathname,current_url_protocol:e.location.protocol,current_url_search:e.location.search})}};var J=function(E){var B=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return E?B.substring(0,E):B},ie=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,le=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,Te=function(E){var B=le,V=E.split("."),Q=V[V.length-1];(Q.length>4||Q==="com"||Q==="org")&&(B=ie);var de=E.match(B);return de?de[0]:""},Me=null,Ee=null;typeof JSON<"u"&&(Me=JSON.stringify,Ee=JSON.parse),Me=Me||b.JSONEncode,Ee=Ee||b.JSONDecode,b.toArray=b.toArray,b.isObject=b.isObject,b.JSONEncode=b.JSONEncode,b.JSONDecode=b.JSONDecode,b.isBlockedUA=b.isBlockedUA,b.isEmptyObject=b.isEmptyObject,b.info=b.info,b.info.device=b.info.device,b.info.browser=b.info.browser,b.info.browserVersion=b.info.browserVersion,b.info.properties=b.info.properties;var se=function(){};se.prototype.create_properties=function(){},se.prototype.event_handler=function(){},se.prototype.after_track_handler=function(){},se.prototype.init=function(E){return this.mp=E,this},se.prototype.track=function(E,B,V,Q){var de=this,ve=b.dom_query(E);if(ve.length===0){C.error("The DOM query ("+E+") returned 0 elements");return}return b.each(ve,function(Ue){b.register_event(Ue,this.override_event,function(tt){var $e={},et=de.create_properties(V,this),ut=de.mp.get_config("track_links_timeout");de.event_handler(tt,this,$e),window.setTimeout(de.track_callback(Q,et,$e,!0),ut),de.mp.track(B,et,de.track_callback(Q,et,$e))})},this),!0},se.prototype.track_callback=function(E,B,V,Q){Q=Q||!1;var de=this;return function(){V.callback_fired||(V.callback_fired=!0,!(E&&E(Q,B)===!1)&&de.after_track_handler(B,V,Q))}},se.prototype.create_properties=function(E,B){var V;return typeof E=="function"?V=E(B):V=b.extend({},E),V};var me=function(){this.override_event="click"};b.inherit(me,se),me.prototype.create_properties=function(E,B){var V=me.superclass.create_properties.apply(this,arguments);return B.href&&(V.url=B.href),V},me.prototype.event_handler=function(E,B,V){V.new_tab=E.which===2||E.metaKey||E.ctrlKey||B.target==="_blank",V.href=B.href,V.new_tab||E.preventDefault()},me.prototype.after_track_handler=function(E,B){B.new_tab||setTimeout(function(){window.location=B.href},0)};var Xe=function(){this.override_event="submit"};b.inherit(Xe,se),Xe.prototype.event_handler=function(E,B,V){V.element=B,E.preventDefault()},Xe.prototype.after_track_handler=function(E,B){setTimeout(function(){B.element.submit()},0)};var nt=O("lock"),ot=function(E,B){B=B||{},this.storageKey=E,this.storage=B.storage||window.localStorage,this.pollIntervalMS=B.pollIntervalMS||100,this.timeoutMS=B.timeoutMS||2e3};ot.prototype.withLock=function(E,B,V){!V&&typeof B!="function"&&(V=B,B=null);var Q=V||new Date().getTime()+"|"+Math.random(),de=new Date().getTime(),ve=this.storageKey,Ue=this.pollIntervalMS,tt=this.timeoutMS,$e=this.storage,et=ve+":X",ut=ve+":Y",bt=ve+":Z",Je=function(Ar){B&&B(Ar)},gt=function(Ar){if(new Date().getTime()-de>tt){nt.error("Timeout waiting for mutex on "+ve+"; clearing lock. ["+Q+"]"),$e.removeItem(bt),$e.removeItem(ut),Mt();return}setTimeout(function(){try{Ar()}catch(Ri){Je(Ri)}},Ue*(Math.random()+.1))},mt=function(Ar,Ri){Ar()?Ri():gt(function(){mt(Ar,Ri)})},tr=function(){var Ar=$e.getItem(ut);if(Ar&&Ar!==Q)return!1;if($e.setItem(ut,Q),$e.getItem(ut)===Q)return!0;if(!G($e,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},Mt=function(){$e.setItem(et,Q),mt(tr,function(){if($e.getItem(et)===Q){Fr();return}gt(function(){if($e.getItem(ut)!==Q){Mt();return}mt(function(){return!$e.getItem(bt)},Fr)})})},Fr=function(){$e.setItem(bt,"1");try{E()}finally{$e.removeItem(bt),$e.getItem(ut)===Q&&$e.removeItem(ut),$e.getItem(et)===Q&&$e.removeItem(et)}};try{if(G($e,!0))Mt();else throw new Error("localStorage support check failed")}catch(Ar){Je(Ar)}};var pt=O("batch"),qe=function(E,B){B=B||{},this.storageKey=E,this.storage=B.storage||window.localStorage,this.reportError=B.errorReporter||b.bind(pt.error,pt),this.lock=new ot(E,{storage:this.storage}),this.pid=B.pid||null,this.memQueue=[]};qe.prototype.enqueue=function(E,B,V){var Q={id:J(),flushAfter:new Date().getTime()+B*2,payload:E};this.lock.withLock(b.bind(function(){var ve;try{var Ue=this.readFromStorage();Ue.push(Q),ve=this.saveToStorage(Ue),ve&&this.memQueue.push(Q)}catch{this.reportError("Error enqueueing item",E),ve=!1}V&&V(ve)},this),b.bind(function(ve){this.reportError("Error acquiring storage lock",ve),V&&V(!1)},this),this.pid)},qe.prototype.fillBatch=function(E){var B=this.memQueue.slice(0,E);if(B.length<E){var V=this.readFromStorage();if(V.length){var Q={};b.each(B,function(Ue){Q[Ue.id]=!0});for(var de=0;de<V.length;de++){var ve=V[de];if(new Date().getTime()>ve.flushAfter&&!Q[ve.id]&&(ve.orphaned=!0,B.push(ve),B.length>=E))break}}}return B};var Ye=function(E,B){var V=[];return b.each(E,function(Q){Q.id&&!B[Q.id]&&V.push(Q)}),V};qe.prototype.removeItemsByID=function(E,B){var V={};b.each(E,function(de){V[de]=!0}),this.memQueue=Ye(this.memQueue,V);var Q=b.bind(function(){var de;try{var ve=this.readFromStorage();if(ve=Ye(ve,V),de=this.saveToStorage(ve),de){ve=this.readFromStorage();for(var Ue=0;Ue<ve.length;Ue++){var tt=ve[Ue];if(tt.id&&V[tt.id])return this.reportError("Item not removed from storage"),!1}}}catch{this.reportError("Error removing items",E),de=!1}return de},this);this.lock.withLock(function(){var ve=Q();B&&B(ve)},b.bind(function(ve){var Ue=!1;if(this.reportError("Error acquiring storage lock",ve),!G(this.storage,!0)&&(Ue=Q(),!Ue))try{this.storage.removeItem(this.storageKey)}catch(tt){this.reportError("Error clearing queue",tt)}B&&B(Ue)},this),this.pid)};var at=function(E,B){var V=[];return b.each(E,function(Q){var de=Q.id;if(de in B){var ve=B[de];ve!==null&&(Q.payload=ve,V.push(Q))}else V.push(Q)}),V};qe.prototype.updatePayloads=function(E,B){this.memQueue=at(this.memQueue,E),this.lock.withLock(b.bind(function(){var Q;try{var de=this.readFromStorage();de=at(de,E),Q=this.saveToStorage(de)}catch{this.reportError("Error updating items",E),Q=!1}B&&B(Q)},this),b.bind(function(Q){this.reportError("Error acquiring storage lock",Q),B&&B(!1)},this),this.pid)},qe.prototype.readFromStorage=function(){var E;try{E=this.storage.getItem(this.storageKey),E&&(E=Ee(E),b.isArray(E)||(this.reportError("Invalid storage entry:",E),E=null))}catch(B){this.reportError("Error retrieving queue",B),E=null}return E||[]},qe.prototype.saveToStorage=function(E){try{return this.storage.setItem(this.storageKey,Me(E)),!0}catch(B){return this.reportError("Error saving queue",B),!1}},qe.prototype.clear=function(){this.memQueue=[],this.storage.removeItem(this.storageKey)};var lt=10*60*1e3,j=O("batch"),ue=function(E,B){this.errorReporter=B.errorReporter,this.queue=new qe(E,{errorReporter:b.bind(this.reportError,this),storage:B.storage}),this.libConfig=B.libConfig,this.sendRequest=B.sendRequestFunc,this.beforeSendHook=B.beforeSendHook,this.stopAllBatching=B.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={}};ue.prototype.enqueue=function(E,B){this.queue.enqueue(E,this.flushInterval,B)},ue.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()},ue.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},ue.prototype.clear=function(){this.queue.clear()},ue.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},ue.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},ue.prototype.scheduleFlush=function(E){this.flushInterval=E,this.stopped||(this.timeoutID=setTimeout(b.bind(this.flush,this),this.flushInterval))},ue.prototype.flush=function(E){try{if(this.requestInProgress){j.log("Flush: Request already in progress");return}E=E||{};var B=this.libConfig.batch_request_timeout_ms,V=new Date().getTime(),Q=this.batchSize,de=this.queue.fillBatch(Q),ve=[],Ue={};if(b.each(de,function(et){var ut=et.payload;if(this.beforeSendHook&&!et.orphaned&&(ut=this.beforeSendHook(ut)),ut){ut.event&&ut.properties&&(ut.properties=b.extend({},ut.properties,{mp_sent_by_lib_version:t.LIB_VERSION}));var bt=!0,Je=et.id;Je?(this.itemIdsSentSuccessfully[Je]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:et,batchSize:de.length,timesSent:this.itemIdsSentSuccessfully[Je]}),bt=!1):this.reportError("[dupe] found item with no ID",{item:et}),bt&&ve.push(ut)}Ue[et.id]=ut},this),ve.length<1){this.resetFlush();return}this.requestInProgress=!0;var tt=b.bind(function(et){this.requestInProgress=!1;try{var ut=!1;if(E.unloading)this.queue.updatePayloads(Ue);else if(b.isObject(et)&&et.error==="timeout"&&new Date().getTime()-V>=B)this.reportError("Network timeout; retrying"),this.flush();else if(b.isObject(et)&&et.xhr_req&&(et.xhr_req.status>=500||et.xhr_req.status===429||et.error==="timeout")){var bt=this.flushInterval*2,Je=et.xhr_req.responseHeaders;if(Je){var gt=Je["Retry-After"];gt&&(bt=parseInt(gt,10)*1e3||bt)}bt=Math.min(lt,bt),this.reportError("Error; retry in "+bt+" ms"),this.scheduleFlush(bt)}else if(b.isObject(et)&&et.xhr_req&&et.xhr_req.status===413)if(de.length>1){var mt=Math.max(1,Math.floor(Q/2));this.batchSize=Math.min(this.batchSize,mt,de.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",de),this.resetBatchSize(),ut=!0;else ut=!0;ut&&(this.queue.removeItemsByID(b.map(de,function(tr){return tr.id}),b.bind(function(tr){tr?(this.consecutiveRemovalFailures=0,this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())},this)),b.each(de,b.bind(function(tr){var Mt=tr.id;Mt?(this.itemIdsSentSuccessfully[Mt]=this.itemIdsSentSuccessfully[Mt]||0,this.itemIdsSentSuccessfully[Mt]++,this.itemIdsSentSuccessfully[Mt]>5&&this.reportError("[dupe] item ID sent too many times",{item:tr,batchSize:de.length,timesSent:this.itemIdsSentSuccessfully[Mt]})):this.reportError("[dupe] found item with no ID while removing",{item:tr})},this)))}catch(tr){this.reportError("Error handling API response",tr),this.resetFlush()}},this),$e={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:B};E.unloading&&($e.transport="sendBeacon"),j.log("MIXPANEL REQUEST:",ve),this.sendRequest(ve,$e,tt)}catch(et){this.reportError("Error flushing request queue",et),this.resetFlush()}},ue.prototype.reportError=function(E,B){if(j.error.apply(j.error,arguments),this.errorReporter)try{B instanceof Error||(B=new Error(E)),this.errorReporter(E,B)}catch(V){j.error(V)}};var oe="__mp_opt_in_out_";function be(E,B){Oe(!0,E,B)}function Le(E,B){Oe(!1,E,B)}function ye(E,B){return Ve(E,B)==="1"}function De(E,B){if(Ce(B))return C.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var V=Ve(E,B)==="0";return V&&C.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),V}function ke(E){return st(E,function(B){return this.get_config(B)})}function z(E){return st(E,function(B){return this._get_config(B)})}function X(E){return st(E,function(B){return this._get_config(B)})}function _e(E,B){B=B||{},Ie(B).remove(Ze(E,B),!!B.crossSubdomainCookie,B.cookieDomain)}function Ie(E){return E=E||{},E.persistenceType==="localStorage"?b.localStorage:b.cookie}function Ze(E,B){return B=B||{},(B.persistencePrefix||oe)+E}function Ve(E,B){return Ie(B).get(Ze(E,B))}function Ce(E){if(E&&E.ignoreDnt)return!1;var B=E&&E.window||e,V=B.navigator||{},Q=!1;return b.each([V.doNotTrack,V.msDoNotTrack,B.doNotTrack],function(de){b.includes([!0,1,"1","yes"],de)&&(Q=!0)}),Q}function Oe(E,B,V){if(!b.isString(B)||!B.length){C.error("gdpr."+(E?"optIn":"optOut")+" called with an invalid token");return}V=V||{},Ie(V).set(Ze(B,V),E?1:0,b.isNumber(V.cookieExpiration)?V.cookieExpiration:null,!!V.crossSubdomainCookie,!!V.secureCookie,!!V.crossSiteCookie,V.cookieDomain),V.track&&E&&V.track(V.trackEventName||"$opt_in",V.trackProperties,{send_immediately:!0})}function st(E,B){return function(){var V=!1;try{var Q=B.call(this,"token"),de=B.call(this,"ignore_dnt"),ve=B.call(this,"opt_out_tracking_persistence_type"),Ue=B.call(this,"opt_out_tracking_cookie_prefix"),tt=B.call(this,"window");Q&&(V=De(Q,{ignoreDnt:de,persistenceType:ve,persistencePrefix:Ue,window:tt}))}catch(et){C.error("Unexpected error when checking tracking opt-out status: "+et)}if(!V)return E.apply(this,arguments);var $e=arguments[arguments.length-1];typeof $e=="function"&&$e(0)}}var ae="$set",ne="$set_once",U="$unset",K="$add",te="$append",ge="$union",re="$remove",H="$delete",P={set_action:function(E,B){var V={},Q={};return b.isObject(E)?b.each(E,function(de,ve){this._is_reserved_property(ve)||(Q[ve]=de)},this):Q[E]=B,V[ae]=Q,V},unset_action:function(E){var B={},V=[];return b.isArray(E)||(E=[E]),b.each(E,function(Q){this._is_reserved_property(Q)||V.push(Q)},this),B[U]=V,B},set_once_action:function(E,B){var V={},Q={};return b.isObject(E)?b.each(E,function(de,ve){this._is_reserved_property(ve)||(Q[ve]=de)},this):Q[E]=B,V[ne]=Q,V},union_action:function(E,B){var V={},Q={};return b.isObject(E)?b.each(E,function(de,ve){this._is_reserved_property(ve)||(Q[ve]=b.isArray(de)?de:[de])},this):Q[E]=b.isArray(B)?B:[B],V[ge]=Q,V},append_action:function(E,B){var V={},Q={};return b.isObject(E)?b.each(E,function(de,ve){this._is_reserved_property(ve)||(Q[ve]=de)},this):Q[E]=B,V[te]=Q,V},remove_action:function(E,B){var V={},Q={};return b.isObject(E)?b.each(E,function(de,ve){this._is_reserved_property(ve)||(Q[ve]=de)},this):Q[E]=B,V[re]=Q,V},delete_action:function(){var E={};return E[H]="",E}},Ae=function(){};b.extend(Ae.prototype,P),Ae.prototype._init=function(E,B,V){this._mixpanel=E,this._group_key=B,this._group_id=V},Ae.prototype.set=X(function(E,B,V){var Q=this.set_action(E,B);return b.isObject(E)&&(V=B),this._send_request(Q,V)}),Ae.prototype.set_once=X(function(E,B,V){var Q=this.set_once_action(E,B);return b.isObject(E)&&(V=B),this._send_request(Q,V)}),Ae.prototype.unset=X(function(E,B){var V=this.unset_action(E);return this._send_request(V,B)}),Ae.prototype.union=X(function(E,B,V){b.isObject(E)&&(V=B);var Q=this.union_action(E,B);return this._send_request(Q,V)}),Ae.prototype.delete=X(function(E){var B=this.delete_action();return this._send_request(B,E)}),Ae.prototype.remove=X(function(E,B,V){var Q=this.remove_action(E,B);return this._send_request(Q,V)}),Ae.prototype._send_request=function(E,B){E.$group_key=this._group_key,E.$group_id=this._group_id,E.$token=this._get_config("token");var V=b.encodeDates(E);return this._mixpanel._track_or_batch({type:"groups",data:V,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").groups,batcher:this._mixpanel.request_batchers.groups},B)},Ae.prototype._is_reserved_property=function(E){return E==="$group_key"||E==="$group_id"},Ae.prototype._get_config=function(E){return this._mixpanel.get_config(E)},Ae.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},Ae.prototype.remove=Ae.prototype.remove,Ae.prototype.set=Ae.prototype.set,Ae.prototype.set_once=Ae.prototype.set_once,Ae.prototype.union=Ae.prototype.union,Ae.prototype.unset=Ae.prototype.unset,Ae.prototype.toString=Ae.prototype.toString;var Ne=function(){};b.extend(Ne.prototype,P),Ne.prototype._init=function(E){this._mixpanel=E},Ne.prototype.set=z(function(E,B,V){var Q=this.set_action(E,B);return b.isObject(E)&&(V=B),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),Q[ae]=b.extend({},b.info.people_properties(),Q[ae]),this._send_request(Q,V)}),Ne.prototype.set_once=z(function(E,B,V){var Q=this.set_once_action(E,B);return b.isObject(E)&&(V=B),this._send_request(Q,V)}),Ne.prototype.unset=z(function(E,B){var V=this.unset_action(E);return this._send_request(V,B)}),Ne.prototype.increment=z(function(E,B,V){var Q={},de={};return b.isObject(E)?(b.each(E,function(ve,Ue){if(!this._is_reserved_property(Ue))if(isNaN(parseFloat(ve))){C.error("Invalid increment value passed to mixpanel.people.increment - must be a number");return}else de[Ue]=ve},this),V=B):(b.isUndefined(B)&&(B=1),de[E]=B),Q[K]=de,this._send_request(Q,V)}),Ne.prototype.append=z(function(E,B,V){b.isObject(E)&&(V=B);var Q=this.append_action(E,B);return this._send_request(Q,V)}),Ne.prototype.remove=z(function(E,B,V){b.isObject(E)&&(V=B);var Q=this.remove_action(E,B);return this._send_request(Q,V)}),Ne.prototype.union=z(function(E,B,V){b.isObject(E)&&(V=B);var Q=this.union_action(E,B);return this._send_request(Q,V)}),Ne.prototype.track_charge=z(function(E,B,V){if(!b.isNumber(E)&&(E=parseFloat(E),isNaN(E))){C.error("Invalid value passed to mixpanel.people.track_charge - must be a number");return}return this.append("$transactions",b.extend({$amount:E},B),V)}),Ne.prototype.clear_charges=function(E){return this.set("$transactions",[],E)},Ne.prototype.delete_user=function(){if(!this._identify_called()){C.error("mixpanel.people.delete_user() requires you to call identify() first");return}var E={$delete:this._mixpanel.get_distinct_id()};return this._send_request(E)},Ne.prototype.toString=function(){return this._mixpanel.toString()+".people"},Ne.prototype._send_request=function(E,B){E.$token=this._get_config("token"),E.$distinct_id=this._mixpanel.get_distinct_id();var V=this._mixpanel.get_property("$device_id"),Q=this._mixpanel.get_property("$user_id"),de=this._mixpanel.get_property("$had_persisted_distinct_id");V&&(E.$device_id=V),Q&&(E.$user_id=Q),de&&(E.$had_persisted_distinct_id=de);var ve=b.encodeDates(E);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:ve,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").engage,batcher:this._mixpanel.request_batchers.people},B):(this._enqueue(E),b.isUndefined(B)||(this._get_config("verbose")?B({status:-1,error:null}):B(-1)),b.truncate(ve,255))},Ne.prototype._get_config=function(E){return this._mixpanel.get_config(E)},Ne.prototype._identify_called=function(){return this._mixpanel._flags.identify_called===!0},Ne.prototype._enqueue=function(E){ae in E?this._mixpanel.persistence._add_to_people_queue(ae,E):ne in E?this._mixpanel.persistence._add_to_people_queue(ne,E):U in E?this._mixpanel.persistence._add_to_people_queue(U,E):K in E?this._mixpanel.persistence._add_to_people_queue(K,E):te in E?this._mixpanel.persistence._add_to_people_queue(te,E):re in E?this._mixpanel.persistence._add_to_people_queue(re,E):ge in E?this._mixpanel.persistence._add_to_people_queue(ge,E):C.error("Invalid call to _enqueue():",E)},Ne.prototype._flush_one_queue=function(E,B,V,Q){var de=this,ve=b.extend({},this._mixpanel.persistence.load_queue(E)),Ue=ve;!b.isUndefined(ve)&&b.isObject(ve)&&!b.isEmptyObject(ve)&&(de._mixpanel.persistence._pop_from_people_queue(E,ve),de._mixpanel.persistence.save(),Q&&(Ue=Q(ve)),B.call(de,Ue,function(tt,$e){tt===0&&de._mixpanel.persistence._add_to_people_queue(E,ve),b.isUndefined(V)||V(tt,$e)}))},Ne.prototype._flush=function(E,B,V,Q,de,ve,Ue){var tt=this;this._flush_one_queue(ae,this.set,E),this._flush_one_queue(ne,this.set_once,Q),this._flush_one_queue(U,this.unset,ve,function(Mt){return b.keys(Mt)}),this._flush_one_queue(K,this.increment,B),this._flush_one_queue(ge,this.union,de);var $e=this._mixpanel.persistence.load_queue(te);if(!b.isUndefined($e)&&b.isArray($e)&&$e.length)for(var et,ut=function(Mt,Fr){Mt===0&&tt._mixpanel.persistence._add_to_people_queue(te,et),b.isUndefined(V)||V(Mt,Fr)},bt=$e.length-1;bt>=0;bt--)$e=this._mixpanel.persistence.load_queue(te),et=$e.pop(),tt._mixpanel.persistence.save(),b.isEmptyObject(et)||tt.append(et,ut);var Je=this._mixpanel.persistence.load_queue(re);if(!b.isUndefined(Je)&&b.isArray(Je)&&Je.length)for(var gt,mt=function(Mt,Fr){Mt===0&&tt._mixpanel.persistence._add_to_people_queue(re,gt),b.isUndefined(Ue)||Ue(Mt,Fr)},tr=Je.length-1;tr>=0;tr--)Je=this._mixpanel.persistence.load_queue(re),gt=Je.pop(),tt._mixpanel.persistence.save(),b.isEmptyObject(gt)||tt.remove(gt,mt)},Ne.prototype._is_reserved_property=function(E){return E==="$distinct_id"||E==="$token"||E==="$device_id"||E==="$user_id"||E==="$had_persisted_distinct_id"},Ne.prototype.set=Ne.prototype.set,Ne.prototype.set_once=Ne.prototype.set_once,Ne.prototype.unset=Ne.prototype.unset,Ne.prototype.increment=Ne.prototype.increment,Ne.prototype.append=Ne.prototype.append,Ne.prototype.remove=Ne.prototype.remove,Ne.prototype.union=Ne.prototype.union,Ne.prototype.track_charge=Ne.prototype.track_charge,Ne.prototype.clear_charges=Ne.prototype.clear_charges,Ne.prototype.delete_user=Ne.prototype.delete_user,Ne.prototype.toString=Ne.prototype.toString;var S="__mps",D="__mpso",N="__mpus",I="__mpa",q="__mpap",fe="__mpr",ze="__mpu",Qe="$people_distinct_id",it="__alias",At="__timers",Br=[S,D,N,I,q,fe,ze,Qe,it,At],ft=function(E){this.props={},this.campaign_params_saved=!1,E.persistence_name?this.name="mp_"+E.persistence_name:this.name="mp_"+E.token+"_mixpanel";var B=E.persistence;B!=="cookie"&&B!=="localStorage"&&(C.critical("Unknown persistence type "+B+"; falling back to cookie"),B=E.persistence="cookie"),B==="localStorage"&&b.localStorage.is_supported()?this.storage=b.localStorage:this.storage=b.cookie,this.load(),this.update_config(E),this.upgrade(),this.save()};ft.prototype.properties=function(){var E={};return this.load(),b.each(this.props,function(B,V){b.include(Br,V)||(E[V]=B)}),E},ft.prototype.load=function(){if(!this.disabled){var E=this.storage.parse(this.name);E&&(this.props=b.extend({},E))}},ft.prototype.upgrade=function(){var E,B;this.storage===b.localStorage?(E=b.cookie.parse(this.name),b.cookie.remove(this.name),b.cookie.remove(this.name,!0),E&&this.register_once(E)):this.storage===b.cookie&&(B=b.localStorage.parse(this.name),b.localStorage.remove(this.name),B&&this.register_once(B))},ft.prototype.save=function(){this.disabled||this.storage.set(this.name,b.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)},ft.prototype.load_prop=function(E){return this.load(),this.props[E]},ft.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},ft.prototype.clear=function(){this.remove(),this.props={}},ft.prototype.register_once=function(E,B,V){return b.isObject(E)?(typeof B>"u"&&(B="None"),this.expire_days=typeof V>"u"?this.default_expiry:V,this.load(),b.each(E,function(Q,de){(!this.props.hasOwnProperty(de)||this.props[de]===B)&&(this.props[de]=Q)},this),this.save(),!0):!1},ft.prototype.register=function(E,B){return b.isObject(E)?(this.expire_days=typeof B>"u"?this.default_expiry:B,this.load(),b.extend(this.props,E),this.save(),!0):!1},ft.prototype.unregister=function(E){this.load(),E in this.props&&(delete this.props[E],this.save())},ft.prototype.update_search_keyword=function(E){this.register(b.info.searchInfo(E))},ft.prototype.update_referrer_info=function(E){this.register_once({$initial_referrer:E||"$direct",$initial_referring_domain:b.info.referringDomain(E)||"$direct"},"")},ft.prototype.get_referrer_info=function(){return b.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},ft.prototype.update_config=function(E){this.default_expiry=this.expire_days=E.cookie_expiration,this.set_disabled(E.disable_persistence),this.set_cookie_domain(E.cookie_domain),this.set_cross_site(E.cross_site_cookie),this.set_cross_subdomain(E.cross_subdomain_cookie),this.set_secure(E.secure_cookie)},ft.prototype.set_disabled=function(E){this.disabled=E,this.disabled?this.remove():this.save()},ft.prototype.set_cookie_domain=function(E){E!==this.cookie_domain&&(this.remove(),this.cookie_domain=E,this.save())},ft.prototype.set_cross_site=function(E){E!==this.cross_site&&(this.cross_site=E,this.remove(),this.save())},ft.prototype.set_cross_subdomain=function(E){E!==this.cross_subdomain&&(this.cross_subdomain=E,this.remove(),this.save())},ft.prototype.get_cross_subdomain=function(){return this.cross_subdomain},ft.prototype.set_secure=function(E){E!==this.secure&&(this.secure=!!E,this.remove(),this.save())},ft.prototype._add_to_people_queue=function(E,B){var V=this._get_queue_key(E),Q=B[E],de=this._get_or_create_queue(ae),ve=this._get_or_create_queue(ne),Ue=this._get_or_create_queue(U),tt=this._get_or_create_queue(K),$e=this._get_or_create_queue(ge),et=this._get_or_create_queue(re,[]),ut=this._get_or_create_queue(te,[]);V===S?(b.extend(de,Q),this._pop_from_people_queue(K,Q),this._pop_from_people_queue(ge,Q),this._pop_from_people_queue(U,Q)):V===D?(b.each(Q,function(bt,Je){Je in ve||(ve[Je]=bt)}),this._pop_from_people_queue(U,Q)):V===N?b.each(Q,function(bt){b.each([de,ve,tt,$e],function(Je){bt in Je&&delete Je[bt]}),b.each(ut,function(Je){bt in Je&&delete Je[bt]}),Ue[bt]=!0}):V===I?(b.each(Q,function(bt,Je){Je in de?de[Je]+=bt:(Je in tt||(tt[Je]=0),tt[Je]+=bt)},this),this._pop_from_people_queue(U,Q)):V===ze?(b.each(Q,function(bt,Je){b.isArray(bt)&&(Je in $e||($e[Je]=[]),$e[Je]=$e[Je].concat(bt))}),this._pop_from_people_queue(U,Q)):V===fe?(et.push(Q),this._pop_from_people_queue(te,Q)):V===q&&(ut.push(Q),this._pop_from_people_queue(U,Q)),C.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),C.log(B),this.save()},ft.prototype._pop_from_people_queue=function(E,B){var V=this.props[this._get_queue_key(E)];b.isUndefined(V)||b.each(B,function(Q,de){E===te||E===re?b.each(V,function(ve){ve[de]===Q&&delete ve[de]}):delete V[de]},this)},ft.prototype.load_queue=function(E){return this.load_prop(this._get_queue_key(E))},ft.prototype._get_queue_key=function(E){if(E===ae)return S;if(E===ne)return D;if(E===U)return N;if(E===K)return I;if(E===te)return q;if(E===re)return fe;if(E===ge)return ze;C.error("Invalid queue:",E)},ft.prototype._get_or_create_queue=function(E,B){var V=this._get_queue_key(E);return B=b.isUndefined(B)?{}:B,this.props[V]||(this.props[V]=B)},ft.prototype.set_event_timer=function(E,B){var V=this.load_prop(At)||{};V[E]=B,this.props[At]=V,this.save()},ft.prototype.remove_event_timer=function(E){var B=this.load_prop(At)||{},V=B[E];return b.isUndefined(V)||(delete this.props[At][E],this.save()),V};var Ct,wt,ir=0,sr=1,nn=function(E){return E},Qr=function(){},St="mixpanel",kr="base64",cr="json",Xr="$device:",Nr=e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,Os=!Nr&&T.indexOf("MSIE")===-1&&T.indexOf("Mozilla")===-1,ds=null;h.sendBeacon&&(ds=function(){return h.sendBeacon.apply(h,arguments)});var zi={track:"track/",engage:"engage/",groups:"groups/",record:"record/"},Ds={api_host:"https://api-js.mixpanel.com",api_routes:zi,api_method:"POST",api_transport:"XHR",api_payload_format:kr,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:Qr,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:Qr,mp_loader:null,track_marketing:!0,track_pageview:!1,skip_first_touch_marketing:!1,store_google:!0,stop_utm_persistence:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{},record_block_class:new RegExp("^(mp-block|fs-exclude|amp-block|rr-block|ph-no-capture)$"),record_block_selector:"img, video",record_idle_timeout_ms:30*60*1e3,record_mask_text_class:new RegExp("^(mp-mask|fs-mask|amp-mask|rr-mask|ph-mask)$"),record_mask_text_selector:"*",record_max_ms:i,record_sessions_percent:0,recorder_src:"https://cdn.mxpnl.com/libs/mixpanel-recorder.min.js"},Wo=!1,Ke=function(){},pa=function(E,B,V){var Q,de=V===St?wt:wt[V];if(de&&Ct===ir)Q=de;else{if(de&&!b.isArray(de)){C.error("You have already initialized "+V);return}Q=new Ke}if(Q._cached_groups={},Q._init(E,B,V),Q.people=new Ne,Q.people._init(Q),!Q.get_config("skip_first_touch_marketing")){var ve=b.info.campaignParams(null),Ue={},tt=!1;b.each(ve,function($e,et){Ue["initial_"+et]=$e,$e&&(tt=!0)}),tt&&Q.people.set_once(Ue)}return t.DEBUG=t.DEBUG||Q.get_config("debug"),!b.isUndefined(de)&&b.isArray(de)&&(Q._execute_array.call(Q.people,de.people),Q._execute_array(de)),Q};Ke.prototype.init=function(E,B,V){if(b.isUndefined(V)){this.report_error("You must name your new library: init(token, config, name)");return}if(V===St){this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet");return}var Q=pa(E,B,V);return wt[V]=Q,Q._loaded(),Q},Ke.prototype._init=function(E,B,V){B=B||{},this.__loaded=!0,this.config={};var Q={};if(!("api_payload_format"in B)){var de=B.api_host||Ds.api_host;de.match(/\.mixpanel\.com/)&&(Q.api_payload_format=cr)}if(this.set_config(b.extend({},Ds,Q,B,{name:V,token:E,callback_fn:(V===St?V:St+"."+V)+"._jsc"})),this._jsc=Qr,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests){if(!b.localStorage.is_supported(!0)||!Nr)this._batch_requests=!1,C.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"),b.each(this.get_batcher_configs(),function($e){C.log("Clearing batch queue "+$e.queue_key),b.localStorage.remove($e.queue_key)});else if(this.init_batchers(),ds&&e.addEventListener){var ve=b.bind(function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})},this);e.addEventListener("pagehide",function($e){$e.persisted&&ve()}),e.addEventListener("visibilitychange",function(){p.visibilityState==="hidden"&&ve()})}}this.persistence=this.cookie=new ft(this.config),this.unpersisted_superprops={},this._gdpr_init();var Ue=b.UUID();this.get_distinct_id()||this.register_once({distinct_id:Xr+Ue,$device_id:Ue},"");var tt=this.get_config("track_pageview");tt&&this._init_url_change_tracking(tt),this.get_config("record_sessions_percent")>0&&Math.random()*100<=this.get_config("record_sessions_percent")&&this.start_session_recording()},Ke.prototype.start_session_recording=ke(function(){if(!e.MutationObserver){C.critical("Browser does not support MutationObserver; skipping session recording");return}var E=b.bind(function(){this._recorder=this._recorder||new e.__mp_recorder(this),this._recorder.startRecording()},this);if(b.isUndefined(e.__mp_recorder)){var B=p.createElement("script");B.type="text/javascript",B.async=!0,B.onload=E,B.src=this.get_config("recorder_src"),p.head.appendChild(B)}else E()}),Ke.prototype.stop_session_recording=function(){this._recorder?this._recorder.stopRecording():C.critical("Session recorder module not loaded")},Ke.prototype.get_session_recording_properties=function(){var E={};if(this._recorder){var B=this._recorder.replayId;B&&(E.$mp_replay_id=B)}return E},Ke.prototype._loaded=function(){if(this.get_config("loaded")(this),this._set_default_superprops(),this.people.set_once(this.persistence.get_referrer_info()),this.get_config("store_google")&&this.get_config("stop_utm_persistence")){var E=b.info.campaignParams(null);b.each(E,(function(B,V){this.unregister(V)}).bind(this))}},Ke.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(p.referrer),this.get_config("store_google")&&!this.get_config("stop_utm_persistence")&&this.register(b.info.campaignParams()),this.get_config("save_referrer")&&this.persistence.update_referrer_info(p.referrer)},Ke.prototype._dom_loaded=function(){b.each(this.__dom_loaded_queue,function(E){this._track_dom.apply(this,E)},this),this.has_opted_out_tracking()||b.each(this.__request_queue,function(E){this._send_request.apply(this,E)},this),delete this.__dom_loaded_queue,delete this.__request_queue},Ke.prototype._track_dom=function(E,B){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!Wo)return this.__dom_loaded_queue.push([E,B]),!1;var V=new E().init(this);return V.track.apply(V,B)},Ke.prototype._init_url_change_tracking=function(E){var B="",V=this.track_pageview();if(V&&(B=b.info.currentUrl()),b.include(["full-url","url-with-path-and-query-string","url-with-path"],E)){e.addEventListener("popstate",function(){e.dispatchEvent(new Event("mp_locationchange"))}),e.addEventListener("hashchange",function(){e.dispatchEvent(new Event("mp_locationchange"))});var Q=e.history.pushState;typeof Q=="function"&&(e.history.pushState=function(ve,Ue,tt){Q.call(e.history,ve,Ue,tt),e.dispatchEvent(new Event("mp_locationchange"))});var de=e.history.replaceState;typeof de=="function"&&(e.history.replaceState=function(ve,Ue,tt){de.call(e.history,ve,Ue,tt),e.dispatchEvent(new Event("mp_locationchange"))}),e.addEventListener("mp_locationchange",(function(){var ve=b.info.currentUrl(),Ue=!1;if(E==="full-url"?Ue=ve!==B:E==="url-with-path-and-query-string"?Ue=ve.split("#")[0]!==B.split("#")[0]:E==="url-with-path"&&(Ue=ve.split("#")[0].split("?")[0]!==B.split("#")[0].split("?")[0]),Ue){var tt=this.track_pageview();tt&&(B=ve)}}).bind(this))}},Ke.prototype._prepare_callback=function(E,B){if(b.isUndefined(E))return null;if(Nr){var V=function(Ue){E(Ue,B)};return V}else{var Q=this._jsc,de=""+Math.floor(Math.random()*1e8),ve=this.get_config("callback_fn")+"["+de+"]";return Q[de]=function(Ue){delete Q[de],E(Ue,B)},ve}},Ke.prototype._send_request=function(E,B,V,Q){var de=!0;if(Os)return this.__request_queue.push(arguments),de;var ve={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},Ue=null;!Q&&(b.isFunction(V)||typeof V=="string")&&(Q=V,V=null),V=b.extend(ve,V||{}),Nr||(V.method="GET");var tt=V.method==="POST",$e=ds&&tt&&V.transport.toLowerCase()==="sendbeacon",et=V.verbose;B.verbose&&(et=!0),this.get_config("test")&&(B.test=1),et&&(B.verbose=1),this.get_config("img")&&(B.img=1),Nr||(Q?B.callback=Q:(et||this.get_config("test"))&&(B.callback="(function(){})")),B.ip=this.get_config("ip")?1:0,B._=new Date().getTime().toString(),tt&&(Ue="data="+encodeURIComponent(B.data),delete B.data),E+="?"+b.HTTPBuildQuery(B);var ut=this;if("img"in B){var bt=p.createElement("img");bt.src=E,p.body.appendChild(bt)}else if($e){try{de=ds(E,Ue)}catch(Fr){ut.report_error(Fr),de=!1}try{Q&&Q(de?1:0)}catch(Fr){ut.report_error(Fr)}}else if(Nr)try{var Je=new XMLHttpRequest;Je.open(V.method,E,!0);var gt=this.get_config("xhr_headers");if(tt&&(gt["Content-Type"]="application/x-www-form-urlencoded"),b.each(gt,function(Fr,Ar){Je.setRequestHeader(Ar,Fr)}),V.timeout_ms&&typeof Je.timeout<"u"){Je.timeout=V.timeout_ms;var mt=new Date().getTime()}Je.withCredentials=!0,Je.onreadystatechange=function(){if(Je.readyState===4)if(Je.status===200){if(Q)if(et){var Fr;try{Fr=b.JSONDecode(Je.responseText)}catch(Ri){if(ut.report_error(Ri),V.ignore_json_errors)Fr=Je.responseText;else return}Q(Fr)}else Q(Number(Je.responseText))}else{var Ar;Je.timeout&&!Je.status&&new Date().getTime()-mt>=Je.timeout?Ar="timeout":Ar="Bad HTTP status: "+Je.status+" "+Je.statusText,ut.report_error(Ar),Q&&Q(et?{status:0,error:Ar,xhr_req:Je}:0)}},Je.send(Ue)}catch(Fr){ut.report_error(Fr),de=!1}else{var tr=p.createElement("script");tr.type="text/javascript",tr.async=!0,tr.defer=!0,tr.src=E;var Mt=p.getElementsByTagName("script")[0];Mt.parentNode.insertBefore(tr,Mt)}return de},Ke.prototype._execute_array=function(E){var B,V=[],Q=[],de=[];b.each(E,function(Ue){Ue&&(B=Ue[0],b.isArray(B)?de.push(Ue):typeof Ue=="function"?Ue.call(this):b.isArray(Ue)&&B==="alias"?V.push(Ue):b.isArray(Ue)&&B.indexOf("track")!==-1&&typeof this[B]=="function"?de.push(Ue):Q.push(Ue))},this);var ve=function(Ue,tt){b.each(Ue,function($e){if(b.isArray($e[0])){var et=tt;b.each($e,function(ut){et=et[ut[0]].apply(et,ut.slice(1))})}else this[$e[0]].apply(this,$e.slice(1))},tt)};ve(V,this),ve(Q,this),ve(de,this)},Ke.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},Ke.prototype.get_batcher_configs=function(){var E="__mpq_"+this.get_config("token"),B=this.get_config("api_routes");return this._batcher_configs=this._batcher_configs||{events:{type:"events",endpoint:"/"+B.track,queue_key:E+"_ev"},people:{type:"people",endpoint:"/"+B.engage,queue_key:E+"_pp"},groups:{type:"groups",endpoint:"/"+B.groups,queue_key:E+"_gr"}},this._batcher_configs},Ke.prototype.init_batchers=function(){if(!this.are_batchers_initialized()){var E=b.bind(function(V){return new ue(V.queue_key,{libConfig:this.config,sendRequestFunc:b.bind(function(Q,de,ve){this._send_request(this.get_config("api_host")+V.endpoint,this._encode_data_for_request(Q),de,this._prepare_callback(ve,Q))},this),beforeSendHook:b.bind(function(Q){return this._run_hook("before_send_"+V.type,Q)},this),errorReporter:this.get_config("error_reporter"),stopAllBatchingFunc:b.bind(this.stop_batch_senders,this)})},this),B=this.get_batcher_configs();this.request_batchers={events:E(B.events),people:E(B.people),groups:E(B.groups)}}this.get_config("batch_autostart")&&this.start_batch_senders()},Ke.prototype.start_batch_senders=function(){this._batchers_were_started=!0,this.are_batchers_initialized()&&(this._batch_requests=!0,b.each(this.request_batchers,function(E){E.start()}))},Ke.prototype.stop_batch_senders=function(){this._batch_requests=!1,b.each(this.request_batchers,function(E){E.stop(),E.clear()})},Ke.prototype.push=function(E){this._execute_array([E])},Ke.prototype.disable=function(E){typeof E>"u"?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(E)},Ke.prototype._encode_data_for_request=function(E){var B=b.JSONEncode(E);return this.get_config("api_payload_format")===kr&&(B=b.base64Encode(B)),{data:B}},Ke.prototype._track_or_batch=function(E,B){var V=b.truncate(E.data,255),Q=E.endpoint,de=E.batcher,ve=E.should_send_immediately,Ue=E.send_request_options||{};B=B||Qr;var tt=!0,$e=b.bind(function(){return Ue.skip_hooks||(V=this._run_hook("before_send_"+E.type,V)),V?(C.log("MIXPANEL REQUEST:"),C.log(V),this._send_request(Q,this._encode_data_for_request(V),Ue,this._prepare_callback(B,V))):null},this);return this._batch_requests&&!ve?de.enqueue(V,function(et){et?B(1,V):$e()}):tt=$e(),tt&&V},Ke.prototype.track=ke(function(E,B,V,Q){!Q&&typeof V=="function"&&(Q=V,V=null),V=V||{};var de=V.transport;de&&(V.transport=de);var ve=V.send_immediately;if(typeof Q!="function"&&(Q=Qr),b.isUndefined(E)){this.report_error("No event name provided to mixpanel.track");return}if(this._event_is_disabled(E)){Q(0);return}B=b.extend({},B),B.token=this.get_config("token");var Ue=this.persistence.remove_event_timer(E);if(!b.isUndefined(Ue)){var tt=new Date().getTime()-Ue;B.$duration=parseFloat((tt/1e3).toFixed(3))}this._set_default_superprops();var $e=this.get_config("track_marketing")?b.info.marketingParams():{};B=b.extend({},b.info.properties({mp_loader:this.get_config("mp_loader")}),$e,this.persistence.properties(),this.unpersisted_superprops,this.get_session_recording_properties(),B);var et=this.get_config("property_blacklist");b.isArray(et)?b.each(et,function(Je){delete B[Je]}):this.report_error("Invalid value for property_blacklist config: "+et);var ut={event:E,properties:B},bt=this._track_or_batch({type:"events",data:ut,endpoint:this.get_config("api_host")+"/"+this.get_config("api_routes").track,batcher:this.request_batchers.events,should_send_immediately:ve,send_request_options:V},Q);return bt}),Ke.prototype.set_group=ke(function(E,B,V){b.isArray(B)||(B=[B]);var Q={};return Q[E]=B,this.register(Q),this.people.set(E,B,V)}),Ke.prototype.add_group=ke(function(E,B,V){var Q=this.get_property(E),de={};return Q===void 0?(de[E]=[B],this.register(de)):Q.indexOf(B)===-1&&(Q.push(B),de[E]=Q,this.register(de)),this.people.union(E,B,V)}),Ke.prototype.remove_group=ke(function(E,B,V){var Q=this.get_property(E);if(Q!==void 0){var de=Q.indexOf(B);de>-1&&(Q.splice(de,1),this.register({group_key:Q})),Q.length===0&&this.unregister(E)}return this.people.remove(E,B,V)}),Ke.prototype.track_with_groups=ke(function(E,B,V,Q){var de=b.extend({},B||{});return b.each(V,function(ve,Ue){ve!=null&&(de[Ue]=ve)}),this.track(E,de,Q)}),Ke.prototype._create_map_key=function(E,B){return E+"_"+JSON.stringify(B)},Ke.prototype._remove_group_from_cache=function(E,B){delete this._cached_groups[this._create_map_key(E,B)]},Ke.prototype.get_group=function(E,B){var V=this._create_map_key(E,B),Q=this._cached_groups[V];return(Q===void 0||Q._group_key!==E||Q._group_id!==B)&&(Q=new Ae,Q._init(this,E,B),this._cached_groups[V]=Q),Q},Ke.prototype.track_pageview=ke(function(E,B){typeof E!="object"&&(E={}),B=B||{};var V=B.event_name||"$mp_web_page_view",Q=b.extend(b.info.mpPageViewProperties(),b.info.campaignParams(),b.info.clickParams()),de=b.extend({},Q,E);return this.track(V,de)}),Ke.prototype.track_links=function(){return this._track_dom.call(this,me,arguments)},Ke.prototype.track_forms=function(){return this._track_dom.call(this,Xe,arguments)},Ke.prototype.time_event=function(E){if(b.isUndefined(E)){this.report_error("No event name provided to mixpanel.time_event");return}this._event_is_disabled(E)||this.persistence.set_event_timer(E,new Date().getTime())};var Jp={persistent:!0},ga=function(E){var B;return b.isObject(E)?B=E:b.isUndefined(E)?B={}:B={days:E},b.extend({},Jp,B)};Ke.prototype.register=function(E,B){var V=ga(B);V.persistent?this.persistence.register(E,V.days):b.extend(this.unpersisted_superprops,E)},Ke.prototype.register_once=function(E,B,V){var Q=ga(V);Q.persistent?this.persistence.register_once(E,B,Q.days):(typeof B>"u"&&(B="None"),b.each(E,function(de,ve){(!this.unpersisted_superprops.hasOwnProperty(ve)||this.unpersisted_superprops[ve]===B)&&(this.unpersisted_superprops[ve]=de)},this))},Ke.prototype.unregister=function(E,B){B=ga(B),B.persistent?this.persistence.unregister(E):delete this.unpersisted_superprops[E]},Ke.prototype._register_single=function(E,B){var V={};V[E]=B,this.register(V)},Ke.prototype.identify=function(E,B,V,Q,de,ve,Ue,tt){var $e=this.get_distinct_id();if(E&&$e!==E){if(typeof E=="string"&&E.indexOf(Xr)===0)return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:E})}if(!this.get_property("$device_id")){var et=$e;this.register_once({$had_persisted_distinct_id:!0,$device_id:et},"")}E!==$e&&E!==this.get_property(it)&&(this.unregister(it),this.register({distinct_id:E})),this._flags.identify_called=!0,this.people._flush(B,V,Q,de,ve,Ue,tt),E!==$e&&this.track("$identify",{distinct_id:E,$anon_distinct_id:$e},{skip_hooks:!0})},Ke.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var E=b.UUID();this.register_once({distinct_id:Xr+E,$device_id:E},"")},Ke.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},Ke.prototype.alias=function(E,B){if(E===this.get_property(Qe))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var V=this;return b.isUndefined(B)&&(B=this.get_distinct_id()),E!==B?(this._register_single(it,E),this.track("$create_alias",{alias:E,distinct_id:B},{skip_hooks:!0},function(){V.identify(E)})):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(E),-1)},Ke.prototype.name_tag=function(E){this._register_single("mp_name_tag",E)},Ke.prototype.set_config=function(E){if(b.isObject(E)){b.extend(this.config,E);var B=E.batch_size;B&&b.each(this.request_batchers,function(V){V.resetBatchSize()}),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),t.DEBUG=t.DEBUG||this.get_config("debug")}},Ke.prototype.get_config=function(E){return this.config[E]},Ke.prototype._run_hook=function(E){var B=(this.config.hooks[E]||nn).apply(this,o.call(arguments,1));return typeof B>"u"&&(this.report_error(E+" hook did not return a value"),B=null),B},Ke.prototype.get_property=function(E){return this.persistence.load_prop([E])},Ke.prototype.toString=function(){var E=this.get_config("name");return E!==St&&(E=St+"."+E),E},Ke.prototype._event_is_disabled=function(E){return b.isBlockedUA(T)||this._flags.disable_all_events||b.include(this.__disabled_events,E)},Ke.prototype._gdpr_init=function(){var E=this.get_config("opt_out_tracking_persistence_type")==="localStorage";E&&b.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):!this.has_opted_in_tracking()&&(this.get_config("opt_out_tracking_by_default")||b.cookie.get("mp_optout"))&&(b.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},Ke.prototype._gdpr_update_persistence=function(E){var B;if(E&&E.clear_persistence)B=!0;else if(E&&E.enable_persistence)B=!1;else return;!this.get_config("disable_persistence")&&this.persistence.disabled!==B&&this.persistence.set_disabled(B),B?this.stop_batch_senders():this._batchers_were_started&&this.start_batch_senders()},Ke.prototype._gdpr_call_func=function(E,B){return B=b.extend({track:b.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},B),b.localStorage.is_supported()||(B.persistence_type="cookie"),E(this.get_config("token"),{track:B.track,trackEventName:B.track_event_name,trackProperties:B.track_properties,persistenceType:B.persistence_type,persistencePrefix:B.cookie_prefix,cookieDomain:B.cookie_domain,cookieExpiration:B.cookie_expiration,crossSiteCookie:B.cross_site_cookie,crossSubdomainCookie:B.cross_subdomain_cookie,secureCookie:B.secure_cookie,ignoreDnt:B.ignore_dnt})},Ke.prototype.opt_in_tracking=function(E){E=b.extend({enable_persistence:!0},E),this._gdpr_call_func(be,E),this._gdpr_update_persistence(E)},Ke.prototype.opt_out_tracking=function(E){E=b.extend({clear_persistence:!0,delete_user:!0},E),E.delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(Le,E),this._gdpr_update_persistence(E)},Ke.prototype.has_opted_in_tracking=function(E){return this._gdpr_call_func(ye,E)},Ke.prototype.has_opted_out_tracking=function(E){return this._gdpr_call_func(De,E)},Ke.prototype.clear_opt_in_out_tracking=function(E){E=b.extend({enable_persistence:!0},E),this._gdpr_call_func(_e,E),this._gdpr_update_persistence(E)},Ke.prototype.report_error=function(E,B){C.error.apply(C.error,arguments);try{!B&&!(E instanceof Error)&&(E=new Error(E)),this.get_config("error_reporter")(E,B)}catch(V){C.error(V)}},Ke.prototype.init=Ke.prototype.init,Ke.prototype.reset=Ke.prototype.reset,Ke.prototype.disable=Ke.prototype.disable,Ke.prototype.time_event=Ke.prototype.time_event,Ke.prototype.track=Ke.prototype.track,Ke.prototype.track_links=Ke.prototype.track_links,Ke.prototype.track_forms=Ke.prototype.track_forms,Ke.prototype.track_pageview=Ke.prototype.track_pageview,Ke.prototype.register=Ke.prototype.register,Ke.prototype.register_once=Ke.prototype.register_once,Ke.prototype.unregister=Ke.prototype.unregister,Ke.prototype.identify=Ke.prototype.identify,Ke.prototype.alias=Ke.prototype.alias,Ke.prototype.name_tag=Ke.prototype.name_tag,Ke.prototype.set_config=Ke.prototype.set_config,Ke.prototype.get_config=Ke.prototype.get_config,Ke.prototype.get_property=Ke.prototype.get_property,Ke.prototype.get_distinct_id=Ke.prototype.get_distinct_id,Ke.prototype.toString=Ke.prototype.toString,Ke.prototype.opt_out_tracking=Ke.prototype.opt_out_tracking,Ke.prototype.opt_in_tracking=Ke.prototype.opt_in_tracking,Ke.prototype.has_opted_out_tracking=Ke.prototype.has_opted_out_tracking,Ke.prototype.has_opted_in_tracking=Ke.prototype.has_opted_in_tracking,Ke.prototype.clear_opt_in_out_tracking=Ke.prototype.clear_opt_in_out_tracking,Ke.prototype.get_group=Ke.prototype.get_group,Ke.prototype.set_group=Ke.prototype.set_group,Ke.prototype.add_group=Ke.prototype.add_group,Ke.prototype.remove_group=Ke.prototype.remove_group,Ke.prototype.track_with_groups=Ke.prototype.track_with_groups,Ke.prototype.start_batch_senders=Ke.prototype.start_batch_senders,Ke.prototype.stop_batch_senders=Ke.prototype.stop_batch_senders,Ke.prototype.start_session_recording=Ke.prototype.start_session_recording,Ke.prototype.stop_session_recording=Ke.prototype.stop_session_recording,Ke.prototype.get_session_recording_properties=Ke.prototype.get_session_recording_properties,Ke.prototype.DEFAULT_API_ROUTES=zi,ft.prototype.properties=ft.prototype.properties,ft.prototype.update_search_keyword=ft.prototype.update_search_keyword,ft.prototype.update_referrer_info=ft.prototype.update_referrer_info,ft.prototype.get_cross_subdomain=ft.prototype.get_cross_subdomain,ft.prototype.clear=ft.prototype.clear;var ma={},eg=function(){b.each(ma,function(E,B){B!==St&&(wt[B]=E)}),wt._=b},tg=function(){wt.init=function(E,B,V){if(V)return wt[V]||(wt[V]=ma[V]=pa(E,B,V),wt[V]._loaded()),wt[V];var Q=wt;ma[St]?Q=ma[St]:E&&(Q=pa(E,B,St),Q._loaded(),ma[St]=Q),wt=Q,Ct===sr&&(e[St]=wt),eg()}},df=function(){function E(){E.done||(E.done=!0,Wo=!0,Os=!1,b.each(ma,function(Q){Q._dom_loaded()}))}function B(){try{p.documentElement.doScroll("left")}catch{setTimeout(B,1);return}E()}if(p.addEventListener)p.readyState==="complete"?E():p.addEventListener("DOMContentLoaded",E,!1);else if(p.attachEvent){p.attachEvent("onreadystatechange",E);var V=!1;try{V=e.frameElement===null}catch{}p.documentElement.doScroll&&V&&B()}b.register_event(e,"load",E,!0)};function pf(){return Ct=ir,wt=new Ke,tg(),wt.init(),df(),wt}var gf=pf();return vm=gf,vm}gZ();const mZ=[{name:"Prototype",tag:"prototype",wrapper:"vue",isPublic:!0,directory:"internal/prototype"},{name:"EcastTestClient",tag:"ecast-test-client",wrapper:"marionette",isPublic:!0,directory:"internal/ecast-test-client"},{name:"Quiplash 3",tag:"quiplash3-tjsp",wrapper:"vue",isPublic:!0,directory:"tjsp/quiplash3",features:["moderation"],categoryId:"quiplash3Game"},{name:"Tee K.O.",tag:"awshirt-tjsp",wrapper:"vue",isPublic:!0,directory:"tjsp/awshirt",features:["moderation"],shopItems:["shirts"],categoryId:"TeeKOGame",galleryId:"teeko"},{name:"Trivia Murder Party 2",tag:"triviadeath2-tjsp",wrapper:"vue",isPublic:!0,directory:"tjsp/triviadeath2",categoryId:"TriviaMurderParty2Game"},{name:"Quiplash 2 InterLASHional",tag:"quiplash2-international",wrapper:"marionette",isPublic:!0,directory:"standalone/quiplash2-international",categoryId:"quiplash2-internationalGame"},{name:"Guesspionage Crowdplay",tag:"guesspionage-crowdplay",wrapper:"marionette",isPublic:!0,directory:"standalone/guesspionage-crowdplay"},{name:"Drawful 2",tag:"drawful2",wrapper:"marionette",isPublic:!0,directory:"standalone/drawful2",categoryId:"DrawfulGame",shopItems:["shirts"]},{name:"Drawful 2",tag:"drawful2international",wrapper:"marionette",isPublic:!0,directory:"standalone/drawful2-international",features:["moderation"]},{name:"Acquisitions, Inc.",tag:"acquisitions-inc",wrapper:"marionette",isPublic:!0,directory:"standalone/acquisitions-inc"},{name:"The Jackbox Survey Scramble",tag:"bigsurvey",wrapper:"vue",isPublic:!0,directory:"standalone/bigsurvey",features:["moderation","kicking","dropInDropOut"],categoryId:"BigSurveyGame",galleryId:"survey-scramble"},{name:"You Don't Know Jack 2015",tag:"ydkj2015",wrapper:"marionette",isPublic:!0,directory:"pp1/ydkj2015"},{name:"Drawful",tag:"drawful",wrapper:"marionette",isPublic:!0,directory:"pp1/drawful"},{name:"Word Spud",tag:"wordspud",wrapper:"marionette",isPublic:!0,directory:"pp1/wordspud"},{name:"Lie Swatter",tag:"lieswatter",wrapper:"marionette",isPublic:!0,directory:"pp1/lieswatter"},{name:"Fibbage",tag:"fibbage",wrapper:"marionette",isPublic:!0,directory:"pp1/fibbage"},{name:"Fibbage 2",tag:"fibbage2",wrapper:"marionette",isPublic:!0,directory:"pp2/fibbage2"},{name:"Earwax",tag:"earwax",wrapper:"marionette",isPublic:!0,directory:"pp2/earwax"},{name:"Bidiots",tag:"auction",wrapper:"marionette",isPublic:!0,directory:"pp2/auction"},{name:"Bomb Corp",tag:"bombintern",wrapper:"marionette",isPublic:!0,directory:"pp2/bombintern"},{name:"Quiplash",tag:"quiplash",wrapper:"marionette",isPublic:!0,directory:"pp2/quiplash"},{name:"Fakin' It",tag:"fakinit",wrapper:"marionette",isPublic:!0,directory:"pp3/fakinit"},{name:"Tee K.O.",tag:"awshirt",wrapper:"marionette",isPublic:!0,directory:"pp3/awshirt",shopItems:["shirts"],galleryId:"teeko"},{name:"Quiplash 2",tag:"quiplash2",wrapper:"marionette",isPublic:!0,directory:"pp3/quiplash2",categoryId:"Quiplash2Game"},{name:"Trivia Murder Party",tag:"triviadeath",wrapper:"marionette",isPublic:!0,directory:"pp3/triviadeath",categoryId:"TriviaDeathResults"},{name:"Guesspionage",tag:"pollposition",wrapper:"marionette",isPublic:!0,directory:"pp3/pollposition"},{name:"Fibbage 3",tag:"fibbage3",wrapper:"marionette",isPublic:!0,directory:"pp4/fibbage3"},{name:"Survive the Internet",tag:"survivetheinternet",wrapper:"marionette",isPublic:!0,directory:"pp4/survivetheinternet",categoryId:"STIGame"},{name:"Monster Seeking Monster",tag:"monstermingle",wrapper:"marionette",isPublic:!0,directory:"pp4/monstermingle",categoryId:"MonsterMingleGame"},{name:"Bracketeering",tag:"bracketeering",wrapper:"marionette",isPublic:!0,directory:"pp4/bracketeering",categoryId:"BRKGame"},{name:"Civic Doodle",tag:"overdrawn",wrapper:"marionette",isPublic:!0,directory:"pp4/overdrawn",categoryId:"OverdrawnGame",shopItems:["shirts"]},{name:"You Don't Know Jack: Full Stream",tag:"ydkj2018",wrapper:"marionette",isPublic:!0,directory:"pp5/ydkj2018",categoryId:"YDKJ2018Game"},{name:"Split the Room",tag:"splittheroom",wrapper:"marionette",isPublic:!0,directory:"pp5/splittheroom",categoryId:"SplitTheRoomGame"},{name:"Mad Verse City",tag:"rapbattle",wrapper:"marionette",isPublic:!0,directory:"pp5/rapbattle",categoryId:"RapBattleGame"},{name:"Zeeple Dome",tag:"slingshoot",wrapper:"marionette",isPublic:!0,directory:"pp5/slingshoot",categoryId:"SlingShootGame"},{name:"Patently Stupid",tag:"patentlystupid",wrapper:"marionette",isPublic:!0,directory:"pp5/patentlystupid",categoryId:"PatentlyStupidGame",shopItems:["mugs"]},{name:"Trivia Murder Party 2",tag:"triviadeath2",wrapper:"marionette",isPublic:!0,directory:"pp6/triviadeath2",categoryId:"TriviaDeath2Game"},{name:"Role Models",tag:"rolemodels",wrapper:"marionette",isPublic:!0,features:["camera"],directory:"pp6/rolemodels",categoryId:"RoleModelsGame",shopItems:["shirts"]},{name:"Joke Boat",tag:"jokeboat",wrapper:"marionette",isPublic:!0,directory:"pp6/jokeboat",categoryId:"JokeboatGame"},{name:"Dictionarium",tag:"ridictionary",wrapper:"marionette",isPublic:!0,directory:"pp6/ridictionary",categoryId:"RidictionaryGame"},{name:"Push the Button",tag:"pushthebutton",wrapper:"marionette",isPublic:!0,directory:"pp6/pushthebutton",categoryId:"PushTheButtonGame"},{name:"Talking Points",tag:"jackbox-talks",wrapper:"marionette",isPublic:!0,directory:"pp7/jackboxtalks",features:["camera","moderation"],categoryId:"JackboxTalksGame"},{name:"Quiplash 3",tag:"quiplash3",wrapper:"marionette",isPublic:!0,directory:"pp7/quiplash3",features:["moderation"],categoryId:"quiplash3Game"},{name:"The Devils and the Details",tag:"everyday",wrapper:"marionette",isPublic:!0,directory:"pp7/everyday",categoryId:"EverydayGame",shopItems:["mugs"]},{name:"Champ'd Up",tag:"worldchamps",wrapper:"marionette",isPublic:!0,directory:"pp7/worldchamps",features:["moderation"],categoryId:"WorldChampionsGame",shopItems:["cards"]},{name:"Blather 'Round",tag:"blanky-blank",wrapper:"marionette",isPublic:!0,directory:"pp7/blanky-blank",categoryId:"BlankyBlankGame"},{name:"Job Job",tag:"apply-yourself",wrapper:"vue",isPublic:!0,directory:"pp8/apply-yourself",categoryId:"JobGameGame",features:["moderation","previews"]},{name:"Drawful Animate",tag:"drawful-animate",wrapper:"vue",isPublic:!0,directory:"pp8/drawful-animate",categoryId:"DrawfulAnimateGame",features:["moderation"]},{name:"The Wheel of Enormous Proportions",tag:"the-wheel",wrapper:"vue",isPublic:!0,directory:"pp8/the-wheel",categoryId:"TheWheelGame"},{name:"The Poll Mine",tag:"survey-bomb",wrapper:"vue",isPublic:!0,directory:"pp8/survey-bomb",categoryId:"SurveyBombGame"},{name:"Weapons Drawn",tag:"murder-detectives",wrapper:"vue",isPublic:!0,directory:"pp8/murder-detectives",categoryId:"MurderDetectivesGame",features:["moderation"]},{name:"Fibbage 4",tag:"fourbage",wrapper:"vue",isPublic:!0,directory:"pp9/fourbage",features:["moderation","kicking"],categoryId:"Fibbage4Game"},{name:"Roomerang",tag:"htmf",wrapper:"vue",isPublic:!0,directory:"pp9/htmf",features:["moderation","kicking"],categoryId:"MakeFriendsGame"},{name:"Junktopia",tag:"antique-freak",wrapper:"vue",isPublic:!0,directory:"pp9/antique-freak",features:["moderation","kicking"],categoryId:"AntiqueGameGame"},{name:"Nonsensory",tag:"range-game",wrapper:"vue",isPublic:!0,directory:"pp9/range-game",features:["moderation","kicking"],categoryId:"RangeGameGame"},{name:"Quixort",tag:"lineup",wrapper:"vue",isPublic:!0,directory:"pp9/lineup",features:["kicking","previews"],categoryId:"LineupGame"},{name:"Tee K.O. 2",tag:"awshirt2",wrapper:"vue",isPublic:!0,directory:"pp10/awshirt2",features:["moderation","kicking"],shopItems:["shirts"],categoryId:"TeeKO2Game",galleryId:"teeko2"},{name:"Dodo Re Mi",tag:"nopus-opus",wrapper:"vue",isPublic:!0,directory:"pp10/nopus-opus",features:["dropInDropOut","kicking"],categoryId:"NopusOpusGame",galleryId:"dodo-re-mi"},{name:"FixyText",tag:"risky-text",wrapper:"vue",isPublic:!0,directory:"pp10/risky-text",features:["moderation","kicking"],categoryId:"FixyTextGame",galleryId:"fixytext"},{name:"Timejinx",tag:"time-trivia",wrapper:"vue",isPublic:!0,directory:"pp10/time-trivia",features:["kicking"],categoryId:"TimeTriviaGame",galleryId:"timejinx"},{name:"Hypnotorious",tag:"us-them",wrapper:"vue",isPublic:!0,directory:"pp10/us-them",features:["moderation","kicking"],categoryId:"StrangersGame",galleryId:"hypnotorious"},{name:"Fakin' It All Night Long",tag:"fakinit2",wrapper:"vue",isPublic:!0,directory:"ppad/fakinit2",features:["moderation","kicking"],categoryId:"FakinIt2Game",galleryId:"fakin-it-all-night-long"},{name:"Dirty Drawful",tag:"drawful3",wrapper:"vue",isPublic:!0,directory:"ppad/drawful3",features:["moderation","kicking"],categoryId:"Drawful3Game",galleryId:"dirty-drawful"},{name:"Let Me Finish",tag:"captcha",wrapper:"vue",isPublic:!0,directory:"ppad/captcha",features:["moderation","kicking"],categoryId:"CAPTCHAGame",galleryId:"let-me-finish"},{name:"DOOMINATE",tag:"you-ruined-it",wrapper:"vue",isPublic:!0,directory:"pp11/you-ruined-it",features:["moderation","kicking"],categoryId:"YouRuinedItGame",galleryId:"doominate"},{name:"Legends of Trivia",tag:"trivia-rpg",wrapper:"vue",isPublic:!0,directory:"pp11/trivia-rpg",features:["kicking"],categoryId:"TriviaRPGGame",galleryId:"legends-of-trivia"},{name:"Hear Say",tag:"mic-game",wrapper:"vue",isPublic:!0,directory:"pp11/sfx",features:["moderation","kicking","microphone"],categoryId:"MicGameGame",galleryId:"hear-say"},{name:"Cookie Haus",tag:"cookies",wrapper:"vue",isPublic:!0,directory:"pp11/cookies",features:["moderation","kicking","gpu"],categoryId:"CookiesGameGame",galleryId:"cookie-haus"},{name:"Suspectives",tag:"dirty-detectives",wrapper:"vue",isPublic:!0,directory:"pp11/dirty-detectives",features:["moderation","kicking"],categoryId:"DirtyDetectivesGame",galleryId:"suspectives"}];let _Z=[];const bZ=[...mZ,..._Z],Wu=t=>{var r;return(((r=window==null?void 0:window.tv)==null?void 0:r.games)||bZ).find(i=>i.tag===t||i.galleryId===t||i.categoryId===t)};var Em,vw;function xZ(){if(vw)return Em;vw=1;function t(){this.__data__=[],this.size=0}return Em=t,Em}var ym,Ew;function Wd(){if(Ew)return ym;Ew=1;function t(e,r){return e===r||e!==e&&r!==r}return ym=t,ym}var Tm,yw;function jd(){if(yw)return Tm;yw=1;var t=Wd();function e(r,i){for(var s=r.length;s--;)if(t(r[s][0],i))return s;return-1}return Tm=e,Tm}var Am,Tw;function vZ(){if(Tw)return Am;Tw=1;var t=jd(),e=Array.prototype,r=e.splice;function i(s){var a=this.__data__,n=t(a,s);if(n<0)return!1;var o=a.length-1;return n==o?a.pop():r.call(a,n,1),--this.size,!0}return Am=i,Am}var Sm,Aw;function EZ(){if(Aw)return Sm;Aw=1;var t=jd();function e(r){var i=this.__data__,s=t(i,r);return s<0?void 0:i[s][1]}return Sm=e,Sm}var Rm,Sw;function yZ(){if(Sw)return Rm;Sw=1;var t=jd();function e(r){return t(this.__data__,r)>-1}return Rm=e,Rm}var Cm,Rw;function TZ(){if(Rw)return Cm;Rw=1;var t=jd();function e(r,i){var s=this.__data__,a=t(s,r);return a<0?(++this.size,s.push([r,i])):s[a][1]=i,this}return Cm=e,Cm}var wm,Cw;function Yd(){if(Cw)return wm;Cw=1;var t=xZ(),e=vZ(),r=EZ(),i=yZ(),s=TZ();function a(n){var o=-1,u=n==null?0:n.length;for(this.clear();++o<u;){var c=n[o];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,wm=a,wm}var Lm,ww;function AZ(){if(ww)return Lm;ww=1;var t=Yd();function e(){this.__data__=new t,this.size=0}return Lm=e,Lm}var Im,Lw;function SZ(){if(Lw)return Im;Lw=1;function t(e){var r=this.__data__,i=r.delete(e);return this.size=r.size,i}return Im=t,Im}var Bm,Iw;function RZ(){if(Iw)return Bm;Iw=1;function t(e){return this.__data__.get(e)}return Bm=t,Bm}var Pm,Bw;function CZ(){if(Bw)return Pm;Bw=1;function t(e){return this.__data__.has(e)}return Pm=t,Pm}var Om,Pw;function JM(){if(Pw)return Om;Pw=1;var t=typeof $r=="object"&&$r&&$r.Object===Object&&$r;return Om=t,Om}var Dm,Ow;function hs(){if(Ow)return Dm;Ow=1;var t=JM(),e=typeof self=="object"&&self&&self.Object===Object&&self,r=t||e||Function("return this")();return Dm=r,Dm}var km,Dw;function Zd(){if(Dw)return km;Dw=1;var t=hs(),e=t.Symbol;return km=e,km}var Um,kw;function wZ(){if(kw)return Um;kw=1;var t=Zd(),e=Object.prototype,r=e.hasOwnProperty,i=e.toString,s=t?t.toStringTag:void 0;function a(n){var o=r.call(n,s),u=n[s];try{n[s]=void 0;var c=!0}catch{}var f=i.call(n);return c&&(o?n[s]=u:delete n[s]),f}return Um=a,Um}var Mm,Uw;function LZ(){if(Uw)return Mm;Uw=1;var t=Object.prototype,e=t.toString;function r(i){return e.call(i)}return Mm=r,Mm}var Nm,Mw;function il(){if(Mw)return Nm;Mw=1;var t=Zd(),e=wZ(),r=LZ(),i="[object Null]",s="[object Undefined]",a=t?t.toStringTag:void 0;function n(o){return o==null?o===void 0?s:i:a&&a in Object(o)?e(o):r(o)}return Nm=n,Nm}var Fm,Nw;function qi(){if(Nw)return Fm;Nw=1;function t(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}return Fm=t,Fm}var Gm,Fw;function hT(){if(Fw)return Gm;Fw=1;var t=il(),e=qi(),r="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function n(o){if(!e(o))return!1;var u=t(o);return u==i||u==s||u==r||u==a}return Gm=n,Gm}var Km,Gw;function IZ(){if(Gw)return Km;Gw=1;var t=hs(),e=t["__core-js_shared__"];return Km=e,Km}var Vm,Kw;function BZ(){if(Kw)return Vm;Kw=1;var t=IZ(),e=function(){var i=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function r(i){return!!e&&e in i}return Vm=r,Vm}var $m,Vw;function e4(){if(Vw)return $m;Vw=1;var t=Function.prototype,e=t.toString;function r(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return $m=r,$m}var Hm,$w;function PZ(){if($w)return Hm;$w=1;var t=hT(),e=BZ(),r=qi(),i=e4(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,n=Function.prototype,o=Object.prototype,u=n.toString,c=o.hasOwnProperty,f=RegExp("^"+u.call(c).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(p){if(!r(p)||e(p))return!1;var g=t(p)?f:a;return g.test(i(p))}return Hm=h,Hm}var qm,Hw;function OZ(){if(Hw)return qm;Hw=1;function t(e,r){return e==null?void 0:e[r]}return qm=t,qm}var Xm,qw;function Vo(){if(qw)return Xm;qw=1;var t=PZ(),e=OZ();function r(i,s){var a=e(i,s);return t(a)?a:void 0}return Xm=r,Xm}var zm,Xw;function dT(){if(Xw)return zm;Xw=1;var t=Vo(),e=hs(),r=t(e,"Map");return zm=r,zm}var Wm,zw;function Qd(){if(zw)return Wm;zw=1;var t=Vo(),e=t(Object,"create");return Wm=e,Wm}var jm,Ww;function DZ(){if(Ww)return jm;Ww=1;var t=Qd();function e(){this.__data__=t?t(null):{},this.size=0}return jm=e,jm}var Ym,jw;function kZ(){if(jw)return Ym;jw=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Ym=t,Ym}var Zm,Yw;function UZ(){if(Yw)return Zm;Yw=1;var t=Qd(),e="__lodash_hash_undefined__",r=Object.prototype,i=r.hasOwnProperty;function s(a){var n=this.__data__;if(t){var o=n[a];return o===e?void 0:o}return i.call(n,a)?n[a]:void 0}return Zm=s,Zm}var Qm,Zw;function MZ(){if(Zw)return Qm;Zw=1;var t=Qd(),e=Object.prototype,r=e.hasOwnProperty;function i(s){var a=this.__data__;return t?a[s]!==void 0:r.call(a,s)}return Qm=i,Qm}var Jm,Qw;function NZ(){if(Qw)return Jm;Qw=1;var t=Qd(),e="__lodash_hash_undefined__";function r(i,s){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=t&&s===void 0?e:s,this}return Jm=r,Jm}var e0,Jw;function FZ(){if(Jw)return e0;Jw=1;var t=DZ(),e=kZ(),r=UZ(),i=MZ(),s=NZ();function a(n){var o=-1,u=n==null?0:n.length;for(this.clear();++o<u;){var c=n[o];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,e0=a,e0}var t0,e3;function GZ(){if(e3)return t0;e3=1;var t=FZ(),e=Yd(),r=dT();function i(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return t0=i,t0}var r0,t3;function KZ(){if(t3)return r0;t3=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return r0=t,r0}var n0,r3;function Jd(){if(r3)return n0;r3=1;var t=KZ();function e(r,i){var s=r.__data__;return t(i)?s[typeof i=="string"?"string":"hash"]:s.map}return n0=e,n0}var i0,n3;function VZ(){if(n3)return i0;n3=1;var t=Jd();function e(r){var i=t(this,r).delete(r);return this.size-=i?1:0,i}return i0=e,i0}var s0,i3;function $Z(){if(i3)return s0;i3=1;var t=Jd();function e(r){return t(this,r).get(r)}return s0=e,s0}var a0,s3;function HZ(){if(s3)return a0;s3=1;var t=Jd();function e(r){return t(this,r).has(r)}return a0=e,a0}var o0,a3;function qZ(){if(a3)return o0;a3=1;var t=Jd();function e(r,i){var s=t(this,r),a=s.size;return s.set(r,i),this.size+=s.size==a?0:1,this}return o0=e,o0}var u0,o3;function t4(){if(o3)return u0;o3=1;var t=GZ(),e=VZ(),r=$Z(),i=HZ(),s=qZ();function a(n){var o=-1,u=n==null?0:n.length;for(this.clear();++o<u;){var c=n[o];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,u0=a,u0}var l0,u3;function XZ(){if(u3)return l0;u3=1;var t=Yd(),e=dT(),r=t4(),i=200;function s(a,n){var o=this.__data__;if(o instanceof t){var u=o.__data__;if(!e||u.length<i-1)return u.push([a,n]),this.size=++o.size,this;o=this.__data__=new r(u)}return o.set(a,n),this.size=o.size,this}return l0=s,l0}var c0,l3;function r4(){if(l3)return c0;l3=1;var t=Yd(),e=AZ(),r=SZ(),i=RZ(),s=CZ(),a=XZ();function n(o){var u=this.__data__=new t(o);this.size=u.size}return n.prototype.clear=e,n.prototype.delete=r,n.prototype.get=i,n.prototype.has=s,n.prototype.set=a,c0=n,c0}var f0,c3;function n4(){if(c3)return f0;c3=1;var t=Vo(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return f0=e,f0}var h0,f3;function pT(){if(f3)return h0;f3=1;var t=n4();function e(r,i,s){i=="__proto__"&&t?t(r,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[i]=s}return h0=e,h0}var d0,h3;function i4(){if(h3)return d0;h3=1;var t=pT(),e=Wd();function r(i,s,a){(a!==void 0&&!e(i[s],a)||a===void 0&&!(s in i))&&t(i,s,a)}return d0=r,d0}var p0,d3;function zZ(){if(d3)return p0;d3=1;function t(e){return function(r,i,s){for(var a=-1,n=Object(r),o=s(r),u=o.length;u--;){var c=o[e?u:++a];if(i(n[c],c,n)===!1)break}return r}}return p0=t,p0}var g0,p3;function WZ(){if(p3)return g0;p3=1;var t=zZ(),e=t();return g0=e,g0}var Wl={exports:{}};Wl.exports;var g3;function s4(){return g3||(g3=1,function(t,e){var r=hs(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,n=a?r.Buffer:void 0,o=n?n.allocUnsafe:void 0;function u(c,f){if(f)return c.slice();var h=c.length,p=o?o(h):new c.constructor(h);return c.copy(p),p}t.exports=u}(Wl,Wl.exports)),Wl.exports}var m0,m3;function jZ(){if(m3)return m0;m3=1;var t=hs(),e=t.Uint8Array;return m0=e,m0}var _0,_3;function gT(){if(_3)return _0;_3=1;var t=jZ();function e(r){var i=new r.constructor(r.byteLength);return new t(i).set(new t(r)),i}return _0=e,_0}var b0,b3;function a4(){if(b3)return b0;b3=1;var t=gT();function e(r,i){var s=i?t(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.length)}return b0=e,b0}var x0,x3;function o4(){if(x3)return x0;x3=1;function t(e,r){var i=-1,s=e.length;for(r||(r=Array(s));++i<s;)r[i]=e[i];return r}return x0=t,x0}var v0,v3;function YZ(){if(v3)return v0;v3=1;var t=qi(),e=Object.create,r=function(){function i(){}return function(s){if(!t(s))return{};if(e)return e(s);i.prototype=s;var a=new i;return i.prototype=void 0,a}}();return v0=r,v0}var E0,E3;function u4(){if(E3)return E0;E3=1;function t(e,r){return function(i){return e(r(i))}}return E0=t,E0}var y0,y3;function mT(){if(y3)return y0;y3=1;var t=u4(),e=t(Object.getPrototypeOf,Object);return y0=e,y0}var T0,T3;function _T(){if(T3)return T0;T3=1;var t=Object.prototype;function e(r){var i=r&&r.constructor,s=typeof i=="function"&&i.prototype||t;return r===s}return T0=e,T0}var A0,A3;function l4(){if(A3)return A0;A3=1;var t=YZ(),e=mT(),r=_T();function i(s){return typeof s.constructor=="function"&&!r(s)?t(e(s)):{}}return A0=i,A0}var S0,S3;function Xa(){if(S3)return S0;S3=1;function t(e){return e!=null&&typeof e=="object"}return S0=t,S0}var R0,R3;function ZZ(){if(R3)return R0;R3=1;var t=il(),e=Xa(),r="[object Arguments]";function i(s){return e(s)&&t(s)==r}return R0=i,R0}var C0,C3;function c4(){if(C3)return C0;C3=1;var t=ZZ(),e=Xa(),r=Object.prototype,i=r.hasOwnProperty,s=r.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(n){return e(n)&&i.call(n,"callee")&&!s.call(n,"callee")};return C0=a,C0}var w0,w3;function za(){if(w3)return w0;w3=1;var t=Array.isArray;return w0=t,w0}var L0,L3;function f4(){if(L3)return L0;L3=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return L0=e,L0}var I0,I3;function ep(){if(I3)return I0;I3=1;var t=hT(),e=f4();function r(i){return i!=null&&e(i.length)&&!t(i)}return I0=r,I0}var B0,B3;function QZ(){if(B3)return B0;B3=1;var t=ep(),e=Xa();function r(i){return e(i)&&t(i)}return B0=r,B0}var jl={exports:{}},P0,P3;function JZ(){if(P3)return P0;P3=1;function t(){return!1}return P0=t,P0}jl.exports;var O3;function bT(){return O3||(O3=1,function(t,e){var r=hs(),i=JZ(),s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,n=a&&a.exports===s,o=n?r.Buffer:void 0,u=o?o.isBuffer:void 0,c=u||i;t.exports=c}(jl,jl.exports)),jl.exports}var O0,D3;function eQ(){if(D3)return O0;D3=1;var t=il(),e=mT(),r=Xa(),i="[object Object]",s=Function.prototype,a=Object.prototype,n=s.toString,o=a.hasOwnProperty,u=n.call(Object);function c(f){if(!r(f)||t(f)!=i)return!1;var h=e(f);if(h===null)return!0;var p=o.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&n.call(p)==u}return O0=c,O0}var D0,k3;function tQ(){if(k3)return D0;k3=1;var t=il(),e=f4(),r=Xa(),i="[object Arguments]",s="[object Array]",a="[object Boolean]",n="[object Date]",o="[object Error]",u="[object Function]",c="[object Map]",f="[object Number]",h="[object Object]",p="[object RegExp]",g="[object Set]",m="[object String]",T="[object WeakMap]",x="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",R="[object Float64Array]",A="[object Int8Array]",k="[object Int16Array]",b="[object Int32Array]",C="[object Uint8Array]",w="[object Uint8ClampedArray]",O="[object Uint16Array]",M="[object Uint32Array]",$={};$[y]=$[R]=$[A]=$[k]=$[b]=$[C]=$[w]=$[O]=$[M]=!0,$[i]=$[s]=$[x]=$[a]=$[v]=$[n]=$[o]=$[u]=$[c]=$[f]=$[h]=$[p]=$[g]=$[m]=$[T]=!1;function G(Z){return r(Z)&&e(Z.length)&&!!$[t(Z)]}return D0=G,D0}var k0,U3;function xT(){if(U3)return k0;U3=1;function t(e){return function(r){return e(r)}}return k0=t,k0}var Yl={exports:{}};Yl.exports;var M3;function vT(){return M3||(M3=1,function(t,e){var r=JM(),i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,n=a&&r.process,o=function(){try{var u=s&&s.require&&s.require("util").types;return u||n&&n.binding&&n.binding("util")}catch{}}();t.exports=o}(Yl,Yl.exports)),Yl.exports}var U0,N3;function h4(){if(N3)return U0;N3=1;var t=tQ(),e=xT(),r=vT(),i=r&&r.isTypedArray,s=i?e(i):t;return U0=s,U0}var M0,F3;function d4(){if(F3)return M0;F3=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return M0=t,M0}var N0,G3;function ET(){if(G3)return N0;G3=1;var t=pT(),e=Wd(),r=Object.prototype,i=r.hasOwnProperty;function s(a,n,o){var u=a[n];(!(i.call(a,n)&&e(u,o))||o===void 0&&!(n in a))&&t(a,n,o)}return N0=s,N0}var F0,K3;function Jc(){if(K3)return F0;K3=1;var t=ET(),e=pT();function r(i,s,a,n){var o=!a;a||(a={});for(var u=-1,c=s.length;++u<c;){var f=s[u],h=n?n(a[f],i[f],f,a,i):void 0;h===void 0&&(h=i[f]),o?e(a,f,h):t(a,f,h)}return a}return F0=r,F0}var G0,V3;function rQ(){if(V3)return G0;V3=1;function t(e,r){for(var i=-1,s=Array(e);++i<e;)s[i]=r(i);return s}return G0=t,G0}var K0,$3;function yT(){if($3)return K0;$3=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(i,s){var a=typeof i;return s=s??t,!!s&&(a=="number"||a!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<s}return K0=r,K0}var V0,H3;function p4(){if(H3)return V0;H3=1;var t=rQ(),e=c4(),r=za(),i=bT(),s=yT(),a=h4(),n=Object.prototype,o=n.hasOwnProperty;function u(c,f){var h=r(c),p=!h&&e(c),g=!h&&!p&&i(c),m=!h&&!p&&!g&&a(c),T=h||p||g||m,x=T?t(c.length,String):[],v=x.length;for(var y in c)(f||o.call(c,y))&&!(T&&(y=="length"||g&&(y=="offset"||y=="parent")||m&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||s(y,v)))&&x.push(y);return x}return V0=u,V0}var $0,q3;function nQ(){if(q3)return $0;q3=1;function t(e){var r=[];if(e!=null)for(var i in Object(e))r.push(i);return r}return $0=t,$0}var H0,X3;function iQ(){if(X3)return H0;X3=1;var t=qi(),e=_T(),r=nQ(),i=Object.prototype,s=i.hasOwnProperty;function a(n){if(!t(n))return r(n);var o=e(n),u=[];for(var c in n)c=="constructor"&&(o||!s.call(n,c))||u.push(c);return u}return H0=a,H0}var q0,z3;function ef(){if(z3)return q0;z3=1;var t=p4(),e=iQ(),r=ep();function i(s){return r(s)?t(s,!0):e(s)}return q0=i,q0}var X0,W3;function sQ(){if(W3)return X0;W3=1;var t=Jc(),e=ef();function r(i){return t(i,e(i))}return X0=r,X0}var z0,j3;function aQ(){if(j3)return z0;j3=1;var t=i4(),e=s4(),r=a4(),i=o4(),s=l4(),a=c4(),n=za(),o=QZ(),u=bT(),c=hT(),f=qi(),h=eQ(),p=h4(),g=d4(),m=sQ();function T(x,v,y,R,A,k,b){var C=g(x,y),w=g(v,y),O=b.get(w);if(O){t(x,y,O);return}var M=k?k(C,w,y+"",x,v,b):void 0,$=M===void 0;if($){var G=n(w),Z=!G&&u(w),ce=!G&&!Z&&p(w);M=w,G||Z||ce?n(C)?M=C:o(C)?M=i(C):Z?($=!1,M=e(w,!0)):ce?($=!1,M=r(w,!0)):M=[]:h(w)||a(w)?(M=C,a(C)?M=m(C):(!f(C)||c(C))&&(M=s(w))):$=!1}$&&(b.set(w,M),A(M,w,R,k,b),b.delete(w)),t(x,y,M)}return z0=T,z0}var W0,Y3;function oQ(){if(Y3)return W0;Y3=1;var t=r4(),e=i4(),r=WZ(),i=aQ(),s=qi(),a=ef(),n=d4();function o(u,c,f,h,p){u!==c&&r(c,function(g,m){if(p||(p=new t),s(g))i(u,c,m,f,o,h,p);else{var T=h?h(n(u,m),g,m+"",u,c,p):void 0;T===void 0&&(T=g),e(u,m,T)}},a)}return W0=o,W0}var j0,Z3;function g4(){if(Z3)return j0;Z3=1;function t(e){return e}return j0=t,j0}var Y0,Q3;function uQ(){if(Q3)return Y0;Q3=1;function t(e,r,i){switch(i.length){case 0:return e.call(r);case 1:return e.call(r,i[0]);case 2:return e.call(r,i[0],i[1]);case 3:return e.call(r,i[0],i[1],i[2])}return e.apply(r,i)}return Y0=t,Y0}var Z0,J3;function lQ(){if(J3)return Z0;J3=1;var t=uQ(),e=Math.max;function r(i,s,a){return s=e(s===void 0?i.length-1:s,0),function(){for(var n=arguments,o=-1,u=e(n.length-s,0),c=Array(u);++o<u;)c[o]=n[s+o];o=-1;for(var f=Array(s+1);++o<s;)f[o]=n[o];return f[s]=a(c),t(i,this,f)}}return Z0=r,Z0}var Q0,eL;function cQ(){if(eL)return Q0;eL=1;function t(e){return function(){return e}}return Q0=t,Q0}var J0,tL;function fQ(){if(tL)return J0;tL=1;var t=cQ(),e=n4(),r=g4(),i=e?function(s,a){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return J0=i,J0}var e_,rL;function hQ(){if(rL)return e_;rL=1;var t=800,e=16,r=Date.now;function i(s){var a=0,n=0;return function(){var o=r(),u=e-(o-n);if(n=o,u>0){if(++a>=t)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}return e_=i,e_}var t_,nL;function dQ(){if(nL)return t_;nL=1;var t=fQ(),e=hQ(),r=e(t);return t_=r,t_}var r_,iL;function pQ(){if(iL)return r_;iL=1;var t=g4(),e=lQ(),r=dQ();function i(s,a){return r(e(s,a,t),s+"")}return r_=i,r_}var n_,sL;function gQ(){if(sL)return n_;sL=1;var t=Wd(),e=ep(),r=yT(),i=qi();function s(a,n,o){if(!i(o))return!1;var u=typeof n;return(u=="number"?e(o)&&r(n,o.length):u=="string"&&n in o)?t(o[n],a):!1}return n_=s,n_}var i_,aL;function mQ(){if(aL)return i_;aL=1;var t=pQ(),e=gQ();function r(i){return t(function(s,a){var n=-1,o=a.length,u=o>1?a[o-1]:void 0,c=o>2?a[2]:void 0;for(u=i.length>3&&typeof u=="function"?(o--,u):void 0,c&&e(a[0],a[1],c)&&(u=o<3?void 0:u,o=1),s=Object(s);++n<o;){var f=a[n];f&&i(s,f,n,u)}return s})}return i_=r,i_}var s_,oL;function _Q(){if(oL)return s_;oL=1;var t=oQ(),e=mQ(),r=e(function(i,s,a){t(i,s,a)});return s_=r,s_}var bQ=_Q();const xQ=fs(bQ);class Uu{static set(e){if(e&&this.isSupported(e)){this.locale=e,this.setDocumentLanguage();return}this.locale=this.getPreferredDeviceLocale(),this.setDocumentLanguage()}static getPreferredDeviceLocale(){const e=navigator.languages;for(let r=0;r<e.length;r++)if(this.isSupported(e[r]))return e[r];return this.supported[0]}static isSupported(e){return Object.values(this.supported).includes(e)}static setDocumentLanguage(){const r={en:"en-US",fr:"fr",it:"it",de:"de",es:"es-ES","es-XL":"es-419","pt-BR":"pt-BR"}[this.locale]??"en-US";document.documentElement.setAttribute("lang",r)}static mergeMessages(...e){return xQ(e[0],...e)}}Be(Uu,"locale"),Be(Uu,"supported",["en","fr","it","de","es","es-XL","pt-BR"]);const Ru=class Ru{static get serverUrl(){const e=this.getQueryParam("server")??this.getQueryParam("s");return!e||e==="live"?"ecast.jackboxgames.com":e==="local"?"https://localhost":e.includes("localhost")?e:`${e}.jackboxgames.com`}static isDevelopment(){return window.location.hostname==="dev.jackbox.tv"||window.location.hostname==="localhost"}static isProduction(){return window.location.hostname==="jackbox.tv"}static get isCanvasSupported(){const e=document.createElement("canvas");return!!(e.getContext&&e.getContext("2d"))}static get isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}static htmlUnescape(e){return String(e).replace(/&quot;/gi,'"').replace(/&#39;/gi,"'").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&amp;/gi,"&")}static htmlEscape(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static sanitize(e){const r=this.sanitizeInput(e).replace(/'/g,"");return this.htmlEscape(r).trim()}static sanitizeName(e){return e.replace(/[^A-Z0-9\u00A1\u0020-\u002F\u00BF-\u00FF\u2026!?*$+\-'_ .,]/gi,"").replace(/'/g,"")}static sanitizeInput(e){return e=e.replace("","..."),e.replace(/[^\u00A1\u0020-\u007E\u00BF-\u00FF]/gi,"")}static sanitizeEmoji(e){return e.replace(/(\u00a9|\u00ae|[\u2000-\u2017]|[\u2020-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff])/,"")}static safeText(e){const r=document.createElement("div");return r.textContent=e,r.innerHTML}static htmlTagsToBBCode(e,r){if(!r.length)throw new Error("[Utils.htmlTagsToBBCode] No tag pairs were passed in");return r.reduce((i,s)=>(i.replaceAll(`<${s[0]}>`,`[${s[1]}]`),i.replaceAll(`</${s[0]}>`,`</${s[1]}>`),i),e)}static hexToRgb(e){const r=new ArrayBuffer(4);new DataView(r).setUint32(0,parseInt(e.replace("#",""),16),!1);const s=new Uint8Array(r);return`${s[1]},${s[2]},${s[3]}`}static adjustColor(e,r){let i=!1,s=e;s[0]==="#"&&(s=s.slice(1),i=!0);const a=parseInt(s,16),n=Math.min(Math.max(0,(a>>16)*r),255),o=Math.min(Math.max(0,(a>>8&255)*r),255);let c=(Math.min(Math.max(0,(a&255)*r),255)|o<<8|n<<16).toString(16);for(;c.length<s.length;)c=`0${c}`;return(i?"#":"")+c}static mostFrequent(e){const r=new Map;let i=e[0],s=0;for(let a=0;a<e.length;a++){const n=e[a],o=(r.get(n)||0)+1;r.set(n,o),o>s&&(i=n,s=o)}return i}static toPrecision(e,r){const i=10**r;return Math.round((e+Number.EPSILON)*i)/i}static isInTolerance(e,r,i){return!(Math.abs(e.x-r.x)<i||Math.abs(e.y-r.y)>i)}static getDistanceBetweenPoints(e,r){const i=[e.x-r.x,e.y-r.y],s=Math.hypot(...i);return Math.round(s*100)/100}static getMidpoint(e,r){return{x:(e.x+r.x)/2,y:(e.y+r.y)/2}}static getAngleBetweenPoints(e,r){let s=Math.atan2(r.y-e.y,r.x-e.x)*(180/Math.PI);return s<0&&(s+=360),360-s}static getAngularDistance(e,r){let i=(r-e)%360;const s=i<0?1:-1;return i=Math.abs(i),i>180?s*(360-i):s*i}static getVelocity(e,r,i,s){return this.getDistanceBetweenPoints(e,i)/(s-r)}static isInsideElement(e,r){const i=r.getBoundingClientRect();return!(e.x<i.left||e.x>i.left+i.width||e.y<i.top||e.y>i.top+i.height)}static rotatePointByRadians(e,r,i){const s=r.x+(e.x-r.x)*Math.cos(i)-(e.y-r.y)*Math.sin(i),a=r.y+(e.x-r.x)*Math.sin(i)+(e.y-r.y)*Math.cos(i);return{x:s,y:a}}static rotatePointByDegrees(e,r,i){const s=i*(Math.PI/180);return this.rotatePointByRadians(e,r,s)}static rotatePoint(e,r,i){return this.rotatePointByDegrees(e,r,i)}static cyrb128(e){let r=1779033703,i=3144134277,s=1013904242,a=2773480762;for(let n=0,o;n<e.length;n++)o=e.charCodeAt(n),r=i^Math.imul(r^o,597399067),i=s^Math.imul(i^o,2869860233),s=a^Math.imul(s^o,951274213),a=r^Math.imul(a^o,2716044179);return r=Math.imul(s^r>>>18,597399067),i=Math.imul(a^i>>>22,2869860233),s=Math.imul(r^s>>>17,951274213),a=Math.imul(i^a>>>19,2716044179),[(r^i^s^a)>>>0,(i^r)>>>0,(s^r)>>>0,(a^r)>>>0]}static sfc32(e,r,i,s){return function(){e>>>=0,r>>>=0,i>>>=0,s>>>=0;let n=e+r|0;return e=r^r>>>9,r=i+(i<<3)|0,i=i<<21|i>>>11,s=s+1|0,n=n+s|0,i=i+n|0,(n>>>0)/4294967296}}};Be(Ru,"queryParams",new URLSearchParams(window.location.search)),Be(Ru,"getQueryParam",e=>Ru.queryParams.get(e)),Be(Ru,"sleep",e=>new Promise(r=>{window.setTimeout(r,e)}));let Yr=Ru;class yn{static get namespace(){var e;return((e=window.tv.storage)==null?void 0:e.namespace)??this.defaultNamespace}static get isDisabled(){var e;return((e=window.tv.storage)==null?void 0:e.isDisabled)??!1}static get tag(){var e;return(e=window.tv.storage)==null?void 0:e.tag}static get code(){var e;return(e=window.tv.storage)==null?void 0:e.code}static get isSupported(){if(this.isDisabled)return!1;try{return window.localStorage?(window.localStorage.setItem("support-check","1"),window.localStorage.removeItem("support-check"),!0):!1}catch{return!1}}static setup(e,r){delete window.tv.storage,window.tv.storage={namespace:Yr.getQueryParam("namespace")??Yr.getQueryParam("ns")??this.defaultNamespace,isDisabled:Yr.queryParams.has("incognito")||Yr.queryParams.has("nc")},e&&(window.tv.storage.tag=e),r&&(window.tv.storage.code=r.toLowerCase(),this.clearCodeScopedKeys(window.tv.storage.code))}static get(e,r){return this.isSupported?window.localStorage.getItem(this.getScopedKey(e,r)):null}static set(e,r,i="none"){if(this.isSupported)return window.localStorage.setItem(this.getScopedSetKey(e,i),r)}static remove(e,r){if(this.isSupported)return window.localStorage.removeItem(this.getScopedKey(e,r))}static setTag(e){const r=e.toLowerCase(),i=this.get("tags")??"[]",s=r.split("-")[0];let a=JSON.parse(i);a=a.filter(n=>{const o=n.split("-")[0];return s!==o}),a.push(r),this.set("tags",JSON.stringify(a))}static getScopedKey(e,r){const i=`${this.namespace}:${e}`,s=this.tag?`${this.namespace}:${e}:tag:${this.tag}`:null,a=this.code?`${this.namespace}:${e}:code:${this.code}`:null;if(r==="none")return i;if(r==="tag"){if(!s)throw new Error('[Storage] requested "tag" scope but tv.storage.tag is undefined');return s}if(r==="code"){if(!a)throw new Error('[Storage] requested "code" scope but tv.storage.code is undefined');return a}return a&&window.localStorage.getItem(a)!==null?a:s&&window.localStorage.getItem(s)!==null?s:i}static getScopedSetKey(e,r="none"){if(r==="tag"){if(!this.tag)throw new Error('[Storage] requested "room" scope but tv.storage.tag is undefined');return`${this.namespace}:${e}:tag:${this.tag}`}if(r==="code"){if(!this.code)throw new Error('[Storage] requested "code" scope but tv.storage.code is undefined');return`${this.namespace}:${e}:code:${this.code}`}return`${this.namespace}:${e}`}static clearCodeScopedKeys(e){this.isSupported&&Object.keys(window.localStorage).forEach(r=>{const i=r.split(":code:");i.length<=1||i[1]!==e&&window.localStorage.removeItem(r)})}}Be(yn,"defaultNamespace","tv");class lc{constructor(){Be(this,"artifacts");this.migrate(),this.artifacts=this.list()}get hasUnviewed(){return this.artifacts.some(e=>!e.isViewed)}getUrl(e,r){return r.galleryId?`/gallery/${r.galleryId}/${e.artifactId}`:e.isTest?`http://games-test.jackbox.tv/artifact/${e.categoryId}/${e.artifactId}/`:`https://games.jackbox.tv/artifact/${e.categoryId}/${e.artifactId}/`}getLocalArtifact(e){const r=new Intl.DateTimeFormat(Uu.locale,{year:"numeric",month:"short",day:"numeric"}),i=Wu(e.categoryId);if(!i)throw new Error(`[Artifacts] Unknown game with categoryId ${e.categoryId}`);const s=new Date(e.time),a=r.format(s),n=this.getUrl(e,i);return{...e,gameName:i.name??"",date:a,url:n}}list(){if(!yn.isSupported)return[];const e=Date.now(),r=yn.get("artifacts");if(!r)return[];try{return JSON.parse(r).filter(s=>e-s.time<525600*60*1e3).map(s=>this.getLocalArtifact(s))}catch{return console.warn("[Artifacts] Unable to parse artifacts array"),[]}}persist(){const e=this.artifacts.map(r=>({artifactId:r.artifactId,categoryId:r.categoryId,isTest:r.isTest,isViewed:r.isViewed,time:r.time}));yn.set("artifacts",JSON.stringify(e))}setAsViewed(e){if(yn.isSupported&&this.artifacts[e])try{this.artifacts[e].isViewed=!0,this.persist()}catch{console.warn(`[Artifacts] Unable to mark artifact ${e} as viewed`)}}add(e){var i;if(!yn.isSupported)return;const r={categoryId:e.categoryId,artifactId:e.artifactId,isTest:((i=e.rootId)==null?void 0:i.includes("test"))??!1,time:new Date().getTime(),isViewed:!1};this.artifacts.unshift(this.getLocalArtifact(r)),this.persist()}remove(e){if(yn.isSupported)try{this.artifacts.splice(e,1),this.persist()}catch{console.warn("[Artifacts] Unable to remove artifact")}}static setAsViewed(e){new lc().setAsViewed(e)}static add(e){new lc().add(e)}static remove(e){new lc().remove(e)}migrate(){const e=yn.get("galleries");if(!e)return;const i=JSON.parse(e).map(a=>{const n=a.url.split("/"),o=n[n.length-2],u=a.url.includes("games-test");return{categoryId:a.categoryId,artifactId:o,isTest:u,time:a.time,isViewed:a.viewed}}),s=JSON.parse(yn.get("artifacts")??"[]");yn.set("artifacts",JSON.stringify([...i,...s])),yn.remove("galleries")}}class m4{static isObject(e){return e===null?!1:typeof e=="object"}static isRef(e){return e===null?!1:e.$ref!==void 0}static isObjAndRef(e){return e===null?!1:this.isObject(e)&&Object.keys(e).length>1&&this.isRef(e)}static isModernArtifact(e){return"blob"in e}static isArtifactWithRefs(e){return e.blob?"refs"in e.blob:!1}static makeRefObj(e,r){if(!this.isObject(r))return;const i={...e[r.$ref]},s=Object.keys(r);for(let a=0;a<s.length;a++){const n=s[a];n!=="$ref"&&(i[n]=r[n])}return i}static recurse(e,r){if(this.isObjAndRef(r))return this.makeRefObj(e,r);if(this.isRef(r))return e[r.$ref];if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=this.recurse(e,r[i]);s&&(r[i]=s)}if(this.isObject(r)){const i=Object.keys(r);for(let s=0;s<i.length;s++){const a=this.recurse(e,r[i[s]]);a&&(r[i[s]]=a)}}}static async hydrateFromUrl(e){const i=await(await fetch(e)).json();return this.hydrate(i)}static hydrate(e){return!this.isModernArtifact(e)||!this.isArtifactWithRefs(e)||(this.recurse(e.blob.refs,e.blob),delete e.blob.refs),e}}var ah={exports:{}},uL;function vQ(){return uL||(uL=1,function(t,e){var r=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof $r<"u"&&$r,i=function(){function a(){this.fetch=!1,this.DOMException=r.DOMException}return a.prototype=r,new a}();(function(a){(function(n){var o=typeof a<"u"&&a||typeof self<"u"&&self||typeof $r<"u"&&$r||{},u={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function c(Y){return Y&&DataView.prototype.isPrototypeOf(Y)}if(u.arrayBuffer)var f=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(Y){return Y&&f.indexOf(Object.prototype.toString.call(Y))>-1};function p(Y){if(typeof Y!="string"&&(Y=String(Y)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(Y)||Y==="")throw new TypeError('Invalid character in header field name: "'+Y+'"');return Y.toLowerCase()}function g(Y){return typeof Y!="string"&&(Y=String(Y)),Y}function m(Y){var J={next:function(){var ie=Y.shift();return{done:ie===void 0,value:ie}}};return u.iterable&&(J[Symbol.iterator]=function(){return J}),J}function T(Y){this.map={},Y instanceof T?Y.forEach(function(J,ie){this.append(ie,J)},this):Array.isArray(Y)?Y.forEach(function(J){if(J.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+J.length);this.append(J[0],J[1])},this):Y&&Object.getOwnPropertyNames(Y).forEach(function(J){this.append(J,Y[J])},this)}T.prototype.append=function(Y,J){Y=p(Y),J=g(J);var ie=this.map[Y];this.map[Y]=ie?ie+", "+J:J},T.prototype.delete=function(Y){delete this.map[p(Y)]},T.prototype.get=function(Y){return Y=p(Y),this.has(Y)?this.map[Y]:null},T.prototype.has=function(Y){return this.map.hasOwnProperty(p(Y))},T.prototype.set=function(Y,J){this.map[p(Y)]=g(J)},T.prototype.forEach=function(Y,J){for(var ie in this.map)this.map.hasOwnProperty(ie)&&Y.call(J,this.map[ie],ie,this)},T.prototype.keys=function(){var Y=[];return this.forEach(function(J,ie){Y.push(ie)}),m(Y)},T.prototype.values=function(){var Y=[];return this.forEach(function(J){Y.push(J)}),m(Y)},T.prototype.entries=function(){var Y=[];return this.forEach(function(J,ie){Y.push([ie,J])}),m(Y)},u.iterable&&(T.prototype[Symbol.iterator]=T.prototype.entries);function x(Y){if(!Y._noBody){if(Y.bodyUsed)return Promise.reject(new TypeError("Already read"));Y.bodyUsed=!0}}function v(Y){return new Promise(function(J,ie){Y.onload=function(){J(Y.result)},Y.onerror=function(){ie(Y.error)}})}function y(Y){var J=new FileReader,ie=v(J);return J.readAsArrayBuffer(Y),ie}function R(Y){var J=new FileReader,ie=v(J),le=/charset=([A-Za-z0-9_-]+)/.exec(Y.type),Te=le?le[1]:"utf-8";return J.readAsText(Y,Te),ie}function A(Y){for(var J=new Uint8Array(Y),ie=new Array(J.length),le=0;le<J.length;le++)ie[le]=String.fromCharCode(J[le]);return ie.join("")}function k(Y){if(Y.slice)return Y.slice(0);var J=new Uint8Array(Y.byteLength);return J.set(new Uint8Array(Y)),J.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(Y){this.bodyUsed=this.bodyUsed,this._bodyInit=Y,Y?typeof Y=="string"?this._bodyText=Y:u.blob&&Blob.prototype.isPrototypeOf(Y)?this._bodyBlob=Y:u.formData&&FormData.prototype.isPrototypeOf(Y)?this._bodyFormData=Y:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(Y)?this._bodyText=Y.toString():u.arrayBuffer&&u.blob&&c(Y)?(this._bodyArrayBuffer=k(Y.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(Y)||h(Y))?this._bodyArrayBuffer=k(Y):this._bodyText=Y=Object.prototype.toString.call(Y):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof Y=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(Y)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var Y=x(this);if(Y)return Y;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var Y=x(this);return Y||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(u.blob)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var Y=x(this);if(Y)return Y;if(this._bodyBlob)return R(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}var C=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w(Y){var J=Y.toUpperCase();return C.indexOf(J)>-1?J:Y}function O(Y,J){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');J=J||{};var ie=J.body;if(Y instanceof O){if(Y.bodyUsed)throw new TypeError("Already read");this.url=Y.url,this.credentials=Y.credentials,J.headers||(this.headers=new T(Y.headers)),this.method=Y.method,this.mode=Y.mode,this.signal=Y.signal,!ie&&Y._bodyInit!=null&&(ie=Y._bodyInit,Y.bodyUsed=!0)}else this.url=String(Y);if(this.credentials=J.credentials||this.credentials||"same-origin",(J.headers||!this.headers)&&(this.headers=new T(J.headers)),this.method=w(J.method||this.method||"GET"),this.mode=J.mode||this.mode||null,this.signal=J.signal||this.signal||function(){if("AbortController"in o){var Me=new AbortController;return Me.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&ie)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(ie),(this.method==="GET"||this.method==="HEAD")&&(J.cache==="no-store"||J.cache==="no-cache")){var le=/([?&])_=[^&]*/;if(le.test(this.url))this.url=this.url.replace(le,"$1_="+new Date().getTime());else{var Te=/\?/;this.url+=(Te.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function M(Y){var J=new FormData;return Y.trim().split("&").forEach(function(ie){if(ie){var le=ie.split("="),Te=le.shift().replace(/\+/g," "),Me=le.join("=").replace(/\+/g," ");J.append(decodeURIComponent(Te),decodeURIComponent(Me))}}),J}function $(Y){var J=new T,ie=Y.replace(/\r?\n[\t ]+/g," ");return ie.split("\r").map(function(le){return le.indexOf(`
`)===0?le.substr(1,le.length):le}).forEach(function(le){var Te=le.split(":"),Me=Te.shift().trim();if(Me){var Ee=Te.join(":").trim();try{J.append(Me,Ee)}catch(se){console.warn("Response "+se.message)}}}),J}b.call(O.prototype);function G(Y,J){if(!(this instanceof G))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(J||(J={}),this.type="default",this.status=J.status===void 0?200:J.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=J.statusText===void 0?"":""+J.statusText,this.headers=new T(J.headers),this.url=J.url||"",this._initBody(Y)}b.call(G.prototype),G.prototype.clone=function(){return new G(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new T(this.headers),url:this.url})},G.error=function(){var Y=new G(null,{status:200,statusText:""});return Y.ok=!1,Y.status=0,Y.type="error",Y};var Z=[301,302,303,307,308];G.redirect=function(Y,J){if(Z.indexOf(J)===-1)throw new RangeError("Invalid status code");return new G(null,{status:J,headers:{location:Y}})},n.DOMException=o.DOMException;try{new n.DOMException}catch{n.DOMException=function(J,ie){this.message=J,this.name=ie;var le=Error(J);this.stack=le.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function ce(Y,J){return new Promise(function(ie,le){var Te=new O(Y,J);if(Te.signal&&Te.signal.aborted)return le(new n.DOMException("Aborted","AbortError"));var Me=new XMLHttpRequest;function Ee(){Me.abort()}Me.onload=function(){var Xe={statusText:Me.statusText,headers:$(Me.getAllResponseHeaders()||"")};Te.url.indexOf("file://")===0&&(Me.status<200||Me.status>599)?Xe.status=200:Xe.status=Me.status,Xe.url="responseURL"in Me?Me.responseURL:Xe.headers.get("X-Request-URL");var nt="response"in Me?Me.response:Me.responseText;setTimeout(function(){ie(new G(nt,Xe))},0)},Me.onerror=function(){setTimeout(function(){le(new TypeError("Network request failed"))},0)},Me.ontimeout=function(){setTimeout(function(){le(new TypeError("Network request timed out"))},0)},Me.onabort=function(){setTimeout(function(){le(new n.DOMException("Aborted","AbortError"))},0)};function se(Xe){try{return Xe===""&&o.location.href?o.location.href:Xe}catch{return Xe}}if(Me.open(Te.method,se(Te.url),!0),Te.credentials==="include"?Me.withCredentials=!0:Te.credentials==="omit"&&(Me.withCredentials=!1),"responseType"in Me&&(u.blob?Me.responseType="blob":u.arrayBuffer&&(Me.responseType="arraybuffer")),J&&typeof J.headers=="object"&&!(J.headers instanceof T||o.Headers&&J.headers instanceof o.Headers)){var me=[];Object.getOwnPropertyNames(J.headers).forEach(function(Xe){me.push(p(Xe)),Me.setRequestHeader(Xe,g(J.headers[Xe]))}),Te.headers.forEach(function(Xe,nt){me.indexOf(nt)===-1&&Me.setRequestHeader(nt,Xe)})}else Te.headers.forEach(function(Xe,nt){Me.setRequestHeader(nt,Xe)});Te.signal&&(Te.signal.addEventListener("abort",Ee),Me.onreadystatechange=function(){Me.readyState===4&&Te.signal.removeEventListener("abort",Ee)}),Me.send(typeof Te._bodyInit>"u"?null:Te._bodyInit)})}return ce.polyfill=!0,o.fetch||(o.fetch=ce,o.Headers=T,o.Request=O,o.Response=G),n.Headers=T,n.Request=O,n.Response=G,n.fetch=ce,n})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=r.fetch?r:i;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e}(ah,ah.exports)),ah.exports}var a_,lL;function sl(){return lL||(lL=1,a_=TypeError),a_}const EQ={},yQ=Object.freeze(Object.defineProperty({__proto__:null,default:EQ},Symbol.toStringTag,{value:"Module"})),TQ=dZ(yQ);var o_,cL;function tp(){if(cL)return o_;cL=1;var t=typeof Map=="function"&&Map.prototype,e=Object.getOwnPropertyDescriptor&&t?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=t&&e&&typeof e.get=="function"?e.get:null,i=t&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,a=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,n=s&&a&&typeof a.get=="function"?a.get:null,o=s&&Set.prototype.forEach,u=typeof WeakMap=="function"&&WeakMap.prototype,c=u?WeakMap.prototype.has:null,f=typeof WeakSet=="function"&&WeakSet.prototype,h=f?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,g=p?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,T=Object.prototype.toString,x=Function.prototype.toString,v=String.prototype.match,y=String.prototype.slice,R=String.prototype.replace,A=String.prototype.toUpperCase,k=String.prototype.toLowerCase,b=RegExp.prototype.test,C=Array.prototype.concat,w=Array.prototype.join,O=Array.prototype.slice,M=Math.floor,$=typeof BigInt=="function"?BigInt.prototype.valueOf:null,G=Object.getOwnPropertySymbols,Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ce=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Y=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ce||!0)?Symbol.toStringTag:null,J=Object.prototype.propertyIsEnumerable,ie=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(H){return H.__proto__}:null);function le(H,P){if(H===1/0||H===-1/0||H!==H||H&&H>-1e3&&H<1e3||b.call(/e/,P))return P;var Ae=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof H=="number"){var Ne=H<0?-M(-H):M(H);if(Ne!==H){var S=String(Ne),D=y.call(P,S.length+1);return R.call(S,Ae,"$&_")+"."+R.call(R.call(D,/([0-9]{3})/g,"$&_"),/_$/,"")}}return R.call(P,Ae,"$&_")}var Te=TQ,Me=Te.custom,Ee=oe(Me)?Me:null,se={__proto__:null,double:'"',single:"'"},me={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};o_=function H(P,Ae,Ne,S){var D=Ae||{};if(ye(D,"quoteStyle")&&!ye(se,D.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ye(D,"maxStringLength")&&(typeof D.maxStringLength=="number"?D.maxStringLength<0&&D.maxStringLength!==1/0:D.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var N=ye(D,"customInspect")?D.customInspect:!0;if(typeof N!="boolean"&&N!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ye(D,"indent")&&D.indent!==null&&D.indent!=="	"&&!(parseInt(D.indent,10)===D.indent&&D.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ye(D,"numericSeparator")&&typeof D.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var I=D.numericSeparator;if(typeof P>"u")return"undefined";if(P===null)return"null";if(typeof P=="boolean")return P?"true":"false";if(typeof P=="string")return Oe(P,D);if(typeof P=="number"){if(P===0)return 1/0/P>0?"0":"-0";var q=String(P);return I?le(P,q):q}if(typeof P=="bigint"){var fe=String(P)+"n";return I?le(P,fe):fe}var ze=typeof D.depth>"u"?5:D.depth;if(typeof Ne>"u"&&(Ne=0),Ne>=ze&&ze>0&&typeof P=="object")return pt(P)?"[Array]":"[Object]";var Qe=te(D,Ne);if(typeof S>"u")S=[];else if(z(S,P)>=0)return"[Circular]";function it(zi,Ds,Wo){if(Ds&&(S=O.call(S),S.push(Ds)),Wo){var Ke={depth:D.depth};return ye(D,"quoteStyle")&&(Ke.quoteStyle=D.quoteStyle),H(zi,Ke,Ne+1,S)}return H(zi,D,Ne+1,S)}if(typeof P=="function"&&!Ye(P)){var At=ke(P),Br=re(P,it);return"[Function"+(At?": "+At:" (anonymous)")+"]"+(Br.length>0?" { "+w.call(Br,", ")+" }":"")}if(oe(P)){var ft=ce?R.call(String(P),/^(Symbol\(.*\))_[^)]*$/,"$1"):Z.call(P);return typeof P=="object"&&!ce?ae(ft):ft}if(Ce(P)){for(var Ct="<"+k.call(String(P.nodeName)),wt=P.attributes||[],ir=0;ir<wt.length;ir++)Ct+=" "+wt[ir].name+"="+Xe(nt(wt[ir].value),"double",D);return Ct+=">",P.childNodes&&P.childNodes.length&&(Ct+="..."),Ct+="</"+k.call(String(P.nodeName))+">",Ct}if(pt(P)){if(P.length===0)return"[]";var sr=re(P,it);return Qe&&!K(sr)?"["+ge(sr,Qe)+"]":"[ "+w.call(sr,", ")+" ]"}if(at(P)){var nn=re(P,it);return!("cause"in Error.prototype)&&"cause"in P&&!J.call(P,"cause")?"{ ["+String(P)+"] "+w.call(C.call("[cause]: "+it(P.cause),nn),", ")+" }":nn.length===0?"["+String(P)+"]":"{ ["+String(P)+"] "+w.call(nn,", ")+" }"}if(typeof P=="object"&&N){if(Ee&&typeof P[Ee]=="function"&&Te)return Te(P,{depth:ze-Ne});if(N!=="symbol"&&typeof P.inspect=="function")return P.inspect()}if(X(P)){var Qr=[];return i&&i.call(P,function(zi,Ds){Qr.push(it(Ds,P,!0)+" => "+it(zi,P))}),U("Map",r.call(P),Qr,Qe)}if(Ze(P)){var St=[];return o&&o.call(P,function(zi){St.push(it(zi,P))}),U("Set",n.call(P),St,Qe)}if(_e(P))return ne("WeakMap");if(Ve(P))return ne("WeakSet");if(Ie(P))return ne("WeakRef");if(j(P))return ae(it(Number(P)));if(be(P))return ae(it($.call(P)));if(ue(P))return ae(m.call(P));if(lt(P))return ae(it(String(P)));if(typeof window<"u"&&P===window)return"{ [object Window] }";if(typeof globalThis<"u"&&P===globalThis||typeof $r<"u"&&P===$r)return"{ [object globalThis] }";if(!qe(P)&&!Ye(P)){var kr=re(P,it),cr=ie?ie(P)===Object.prototype:P instanceof Object||P.constructor===Object,Xr=P instanceof Object?"":"null prototype",Nr=!cr&&Y&&Object(P)===P&&Y in P?y.call(De(P),8,-1):Xr?"Object":"",Os=cr||typeof P.constructor!="function"?"":P.constructor.name?P.constructor.name+" ":"",ds=Os+(Nr||Xr?"["+w.call(C.call([],Nr||[],Xr||[]),": ")+"] ":"");return kr.length===0?ds+"{}":Qe?ds+"{"+ge(kr,Qe)+"}":ds+"{ "+w.call(kr,", ")+" }"}return String(P)};function Xe(H,P,Ae){var Ne=Ae.quoteStyle||P,S=se[Ne];return S+H+S}function nt(H){return R.call(String(H),/"/g,"&quot;")}function ot(H){return!Y||!(typeof H=="object"&&(Y in H||typeof H[Y]<"u"))}function pt(H){return De(H)==="[object Array]"&&ot(H)}function qe(H){return De(H)==="[object Date]"&&ot(H)}function Ye(H){return De(H)==="[object RegExp]"&&ot(H)}function at(H){return De(H)==="[object Error]"&&ot(H)}function lt(H){return De(H)==="[object String]"&&ot(H)}function j(H){return De(H)==="[object Number]"&&ot(H)}function ue(H){return De(H)==="[object Boolean]"&&ot(H)}function oe(H){if(ce)return H&&typeof H=="object"&&H instanceof Symbol;if(typeof H=="symbol")return!0;if(!H||typeof H!="object"||!Z)return!1;try{return Z.call(H),!0}catch{}return!1}function be(H){if(!H||typeof H!="object"||!$)return!1;try{return $.call(H),!0}catch{}return!1}var Le=Object.prototype.hasOwnProperty||function(H){return H in this};function ye(H,P){return Le.call(H,P)}function De(H){return T.call(H)}function ke(H){if(H.name)return H.name;var P=v.call(x.call(H),/^function\s*([\w$]+)/);return P?P[1]:null}function z(H,P){if(H.indexOf)return H.indexOf(P);for(var Ae=0,Ne=H.length;Ae<Ne;Ae++)if(H[Ae]===P)return Ae;return-1}function X(H){if(!r||!H||typeof H!="object")return!1;try{r.call(H);try{n.call(H)}catch{return!0}return H instanceof Map}catch{}return!1}function _e(H){if(!c||!H||typeof H!="object")return!1;try{c.call(H,c);try{h.call(H,h)}catch{return!0}return H instanceof WeakMap}catch{}return!1}function Ie(H){if(!g||!H||typeof H!="object")return!1;try{return g.call(H),!0}catch{}return!1}function Ze(H){if(!n||!H||typeof H!="object")return!1;try{n.call(H);try{r.call(H)}catch{return!0}return H instanceof Set}catch{}return!1}function Ve(H){if(!h||!H||typeof H!="object")return!1;try{h.call(H,h);try{c.call(H,c)}catch{return!0}return H instanceof WeakSet}catch{}return!1}function Ce(H){return!H||typeof H!="object"?!1:typeof HTMLElement<"u"&&H instanceof HTMLElement?!0:typeof H.nodeName=="string"&&typeof H.getAttribute=="function"}function Oe(H,P){if(H.length>P.maxStringLength){var Ae=H.length-P.maxStringLength,Ne="... "+Ae+" more character"+(Ae>1?"s":"");return Oe(y.call(H,0,P.maxStringLength),P)+Ne}var S=me[P.quoteStyle||"single"];S.lastIndex=0;var D=R.call(R.call(H,S,"\\$1"),/[\x00-\x1f]/g,st);return Xe(D,"single",P)}function st(H){var P=H.charCodeAt(0),Ae={8:"b",9:"t",10:"n",12:"f",13:"r"}[P];return Ae?"\\"+Ae:"\\x"+(P<16?"0":"")+A.call(P.toString(16))}function ae(H){return"Object("+H+")"}function ne(H){return H+" { ? }"}function U(H,P,Ae,Ne){var S=Ne?ge(Ae,Ne):w.call(Ae,", ");return H+" ("+P+") {"+S+"}"}function K(H){for(var P=0;P<H.length;P++)if(z(H[P],`
`)>=0)return!1;return!0}function te(H,P){var Ae;if(H.indent==="	")Ae="	";else if(typeof H.indent=="number"&&H.indent>0)Ae=w.call(Array(H.indent+1)," ");else return null;return{base:Ae,prev:w.call(Array(P+1),Ae)}}function ge(H,P){if(H.length===0)return"";var Ae=`
`+P.prev+P.base;return Ae+w.call(H,","+Ae)+`
`+P.prev}function re(H,P){var Ae=pt(H),Ne=[];if(Ae){Ne.length=H.length;for(var S=0;S<H.length;S++)Ne[S]=ye(H,S)?P(H[S],H):""}var D=typeof G=="function"?G(H):[],N;if(ce){N={};for(var I=0;I<D.length;I++)N["$"+D[I]]=D[I]}for(var q in H)ye(H,q)&&(Ae&&String(Number(q))===q&&q<H.length||ce&&N["$"+q]instanceof Symbol||(b.call(/[^\w$]/,q)?Ne.push(P(q,H)+": "+P(H[q],H)):Ne.push(q+": "+P(H[q],H))));if(typeof G=="function")for(var fe=0;fe<D.length;fe++)J.call(H,D[fe])&&Ne.push("["+P(D[fe])+"]: "+P(H[D[fe]],H));return Ne}return o_}var u_,fL;function AQ(){if(fL)return u_;fL=1;var t=tp(),e=sl(),r=function(o,u,c){for(var f=o,h;(h=f.next)!=null;f=h)if(h.key===u)return f.next=h.next,c||(h.next=o.next,o.next=h),h},i=function(o,u){if(o){var c=r(o,u);return c&&c.value}},s=function(o,u,c){var f=r(o,u);f?f.value=c:o.next={key:u,next:o.next,value:c}},a=function(o,u){return o?!!r(o,u):!1},n=function(o,u){if(o)return r(o,u,!0)};return u_=function(){var u,c={assert:function(f){if(!c.has(f))throw new e("Side channel does not contain "+t(f))},delete:function(f){var h=u&&u.next,p=n(u,f);return p&&h&&h===p&&(u=void 0),!!p},get:function(f){return i(u,f)},has:function(f){return a(u,f)},set:function(f,h){u||(u={next:void 0}),s(u,f,h)}};return c},u_}var l_,hL;function _4(){return hL||(hL=1,l_=Object),l_}var c_,dL;function SQ(){return dL||(dL=1,c_=Error),c_}var f_,pL;function RQ(){return pL||(pL=1,f_=EvalError),f_}var h_,gL;function CQ(){return gL||(gL=1,h_=RangeError),h_}var d_,mL;function wQ(){return mL||(mL=1,d_=ReferenceError),d_}var p_,_L;function LQ(){return _L||(_L=1,p_=SyntaxError),p_}var g_,bL;function IQ(){return bL||(bL=1,g_=URIError),g_}var m_,xL;function BQ(){return xL||(xL=1,m_=Math.abs),m_}var __,vL;function PQ(){return vL||(vL=1,__=Math.floor),__}var b_,EL;function OQ(){return EL||(EL=1,b_=Math.max),b_}var x_,yL;function DQ(){return yL||(yL=1,x_=Math.min),x_}var v_,TL;function kQ(){return TL||(TL=1,v_=Math.pow),v_}var E_,AL;function UQ(){return AL||(AL=1,E_=Math.round),E_}var y_,SL;function MQ(){return SL||(SL=1,y_=Number.isNaN||function(e){return e!==e}),y_}var T_,RL;function NQ(){if(RL)return T_;RL=1;var t=MQ();return T_=function(r){return t(r)||r===0?r:r<0?-1:1},T_}var A_,CL;function FQ(){return CL||(CL=1,A_=Object.getOwnPropertyDescriptor),A_}var S_,wL;function b4(){if(wL)return S_;wL=1;var t=FQ();if(t)try{t([],"length")}catch{t=null}return S_=t,S_}var R_,LL;function GQ(){if(LL)return R_;LL=1;var t=Object.defineProperty||!1;if(t)try{t({},"a",{value:1})}catch{t=!1}return R_=t,R_}var C_,IL;function KQ(){return IL||(IL=1,C_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var s=42;e[r]=s;for(var a in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var n=Object.getOwnPropertySymbols(e);if(n.length!==1||n[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==s||o.enumerable!==!0)return!1}return!0}),C_}var w_,BL;function VQ(){if(BL)return w_;BL=1;var t=typeof Symbol<"u"&&Symbol,e=KQ();return w_=function(){return typeof t!="function"||typeof Symbol!="function"||typeof t("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},w_}var L_,PL;function x4(){return PL||(PL=1,L_=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),L_}var I_,OL;function v4(){if(OL)return I_;OL=1;var t=_4();return I_=t.getPrototypeOf||null,I_}var B_,DL;function $Q(){if(DL)return B_;DL=1;var t="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,r=Math.max,i="[object Function]",s=function(u,c){for(var f=[],h=0;h<u.length;h+=1)f[h]=u[h];for(var p=0;p<c.length;p+=1)f[p+u.length]=c[p];return f},a=function(u,c){for(var f=[],h=c,p=0;h<u.length;h+=1,p+=1)f[p]=u[h];return f},n=function(o,u){for(var c="",f=0;f<o.length;f+=1)c+=o[f],f+1<o.length&&(c+=u);return c};return B_=function(u){var c=this;if(typeof c!="function"||e.apply(c)!==i)throw new TypeError(t+c);for(var f=a(arguments,1),h,p=function(){if(this instanceof h){var v=c.apply(this,s(f,arguments));return Object(v)===v?v:this}return c.apply(u,s(f,arguments))},g=r(0,c.length-f.length),m=[],T=0;T<g;T++)m[T]="$"+T;if(h=Function("binder","return function ("+n(m,",")+"){ return binder.apply(this,arguments); }")(p),c.prototype){var x=function(){};x.prototype=c.prototype,h.prototype=new x,x.prototype=null}return h},B_}var P_,kL;function rp(){if(kL)return P_;kL=1;var t=$Q();return P_=Function.prototype.bind||t,P_}var O_,UL;function TT(){return UL||(UL=1,O_=Function.prototype.call),O_}var D_,ML;function E4(){return ML||(ML=1,D_=Function.prototype.apply),D_}var k_,NL;function HQ(){return NL||(NL=1,k_=typeof Reflect<"u"&&Reflect&&Reflect.apply),k_}var U_,FL;function qQ(){if(FL)return U_;FL=1;var t=rp(),e=E4(),r=TT(),i=HQ();return U_=i||t.call(r,e),U_}var M_,GL;function y4(){if(GL)return M_;GL=1;var t=rp(),e=sl(),r=TT(),i=qQ();return M_=function(a){if(a.length<1||typeof a[0]!="function")throw new e("a function is required");return i(t,r,a)},M_}var N_,KL;function XQ(){if(KL)return N_;KL=1;var t=y4(),e=b4(),r;try{r=[].__proto__===Array.prototype}catch(n){if(!n||typeof n!="object"||!("code"in n)||n.code!=="ERR_PROTO_ACCESS")throw n}var i=!!r&&e&&e(Object.prototype,"__proto__"),s=Object,a=s.getPrototypeOf;return N_=i&&typeof i.get=="function"?t([i.get]):typeof a=="function"?function(o){return a(o==null?o:s(o))}:!1,N_}var F_,VL;function zQ(){if(VL)return F_;VL=1;var t=x4(),e=v4(),r=XQ();return F_=t?function(s){return t(s)}:e?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return e(s)}:r?function(s){return r(s)}:null,F_}var G_,$L;function WQ(){if($L)return G_;$L=1;var t=Function.prototype.call,e=Object.prototype.hasOwnProperty,r=rp();return G_=r.call(t,e),G_}var K_,HL;function AT(){if(HL)return K_;HL=1;var t,e=_4(),r=SQ(),i=RQ(),s=CQ(),a=wQ(),n=LQ(),o=sl(),u=IQ(),c=BQ(),f=PQ(),h=OQ(),p=DQ(),g=kQ(),m=UQ(),T=NQ(),x=Function,v=function(Ye){try{return x('"use strict"; return ('+Ye+").constructor;")()}catch{}},y=b4(),R=GQ(),A=function(){throw new o},k=y?function(){try{return arguments.callee,A}catch{try{return y(arguments,"callee").get}catch{return A}}}():A,b=VQ()(),C=zQ(),w=v4(),O=x4(),M=E4(),$=TT(),G={},Z=typeof Uint8Array>"u"||!C?t:C(Uint8Array),ce={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?t:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?t:ArrayBuffer,"%ArrayIteratorPrototype%":b&&C?C([][Symbol.iterator]()):t,"%AsyncFromSyncIteratorPrototype%":t,"%AsyncFunction%":G,"%AsyncGenerator%":G,"%AsyncGeneratorFunction%":G,"%AsyncIteratorPrototype%":G,"%Atomics%":typeof Atomics>"u"?t:Atomics,"%BigInt%":typeof BigInt>"u"?t:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?t:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?t:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?t:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":i,"%Float16Array%":typeof Float16Array>"u"?t:Float16Array,"%Float32Array%":typeof Float32Array>"u"?t:Float32Array,"%Float64Array%":typeof Float64Array>"u"?t:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?t:FinalizationRegistry,"%Function%":x,"%GeneratorFunction%":G,"%Int8Array%":typeof Int8Array>"u"?t:Int8Array,"%Int16Array%":typeof Int16Array>"u"?t:Int16Array,"%Int32Array%":typeof Int32Array>"u"?t:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":b&&C?C(C([][Symbol.iterator]())):t,"%JSON%":typeof JSON=="object"?JSON:t,"%Map%":typeof Map>"u"?t:Map,"%MapIteratorPrototype%":typeof Map>"u"||!b||!C?t:C(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":e,"%Object.getOwnPropertyDescriptor%":y,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?t:Promise,"%Proxy%":typeof Proxy>"u"?t:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":typeof Reflect>"u"?t:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?t:Set,"%SetIteratorPrototype%":typeof Set>"u"||!b||!C?t:C(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?t:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":b&&C?C(""[Symbol.iterator]()):t,"%Symbol%":b?Symbol:t,"%SyntaxError%":n,"%ThrowTypeError%":k,"%TypedArray%":Z,"%TypeError%":o,"%Uint8Array%":typeof Uint8Array>"u"?t:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?t:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?t:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?t:Uint32Array,"%URIError%":u,"%WeakMap%":typeof WeakMap>"u"?t:WeakMap,"%WeakRef%":typeof WeakRef>"u"?t:WeakRef,"%WeakSet%":typeof WeakSet>"u"?t:WeakSet,"%Function.prototype.call%":$,"%Function.prototype.apply%":M,"%Object.defineProperty%":R,"%Object.getPrototypeOf%":w,"%Math.abs%":c,"%Math.floor%":f,"%Math.max%":h,"%Math.min%":p,"%Math.pow%":g,"%Math.round%":m,"%Math.sign%":T,"%Reflect.getPrototypeOf%":O};if(C)try{null.error}catch(Ye){var Y=C(C(Ye));ce["%Error.prototype%"]=Y}var J=function Ye(at){var lt;if(at==="%AsyncFunction%")lt=v("async function () {}");else if(at==="%GeneratorFunction%")lt=v("function* () {}");else if(at==="%AsyncGeneratorFunction%")lt=v("async function* () {}");else if(at==="%AsyncGenerator%"){var j=Ye("%AsyncGeneratorFunction%");j&&(lt=j.prototype)}else if(at==="%AsyncIteratorPrototype%"){var ue=Ye("%AsyncGenerator%");ue&&C&&(lt=C(ue.prototype))}return ce[at]=lt,lt},ie={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},le=rp(),Te=WQ(),Me=le.call($,Array.prototype.concat),Ee=le.call(M,Array.prototype.splice),se=le.call($,String.prototype.replace),me=le.call($,String.prototype.slice),Xe=le.call($,RegExp.prototype.exec),nt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ot=/\\(\\)?/g,pt=function(at){var lt=me(at,0,1),j=me(at,-1);if(lt==="%"&&j!=="%")throw new n("invalid intrinsic syntax, expected closing `%`");if(j==="%"&&lt!=="%")throw new n("invalid intrinsic syntax, expected opening `%`");var ue=[];return se(at,nt,function(oe,be,Le,ye){ue[ue.length]=Le?se(ye,ot,"$1"):be||oe}),ue},qe=function(at,lt){var j=at,ue;if(Te(ie,j)&&(ue=ie[j],j="%"+ue[0]+"%"),Te(ce,j)){var oe=ce[j];if(oe===G&&(oe=J(j)),typeof oe>"u"&&!lt)throw new o("intrinsic "+at+" exists, but is not available. Please file an issue!");return{alias:ue,name:j,value:oe}}throw new n("intrinsic "+at+" does not exist!")};return K_=function(at,lt){if(typeof at!="string"||at.length===0)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof lt!="boolean")throw new o('"allowMissing" argument must be a boolean');if(Xe(/^%?[^%]*%?$/,at)===null)throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var j=pt(at),ue=j.length>0?j[0]:"",oe=qe("%"+ue+"%",lt),be=oe.name,Le=oe.value,ye=!1,De=oe.alias;De&&(ue=De[0],Ee(j,Me([0,1],De)));for(var ke=1,z=!0;ke<j.length;ke+=1){var X=j[ke],_e=me(X,0,1),Ie=me(X,-1);if((_e==='"'||_e==="'"||_e==="`"||Ie==='"'||Ie==="'"||Ie==="`")&&_e!==Ie)throw new n("property names with quotes must have matching quotes");if((X==="constructor"||!z)&&(ye=!0),ue+="."+X,be="%"+ue+"%",Te(ce,be))Le=ce[be];else if(Le!=null){if(!(X in Le)){if(!lt)throw new o("base intrinsic for "+at+" exists, but the property is not available.");return}if(y&&ke+1>=j.length){var Ze=y(Le,X);z=!!Ze,z&&"get"in Ze&&!("originalValue"in Ze.get)?Le=Ze.get:Le=Le[X]}else z=Te(Le,X),Le=Le[X];z&&!ye&&(ce[be]=Le)}}return Le},K_}var V_,qL;function T4(){if(qL)return V_;qL=1;var t=AT(),e=y4(),r=e([t("%String.prototype.indexOf%")]);return V_=function(s,a){var n=t(s,!!a);return typeof n=="function"&&r(s,".prototype.")>-1?e([n]):n},V_}var $_,XL;function A4(){if(XL)return $_;XL=1;var t=AT(),e=T4(),r=tp(),i=sl(),s=t("%Map%",!0),a=e("Map.prototype.get",!0),n=e("Map.prototype.set",!0),o=e("Map.prototype.has",!0),u=e("Map.prototype.delete",!0),c=e("Map.prototype.size",!0);return $_=!!s&&function(){var h,p={assert:function(g){if(!p.has(g))throw new i("Side channel does not contain "+r(g))},delete:function(g){if(h){var m=u(h,g);return c(h)===0&&(h=void 0),m}return!1},get:function(g){if(h)return a(h,g)},has:function(g){return h?o(h,g):!1},set:function(g,m){h||(h=new s),n(h,g,m)}};return p},$_}var H_,zL;function jQ(){if(zL)return H_;zL=1;var t=AT(),e=T4(),r=tp(),i=A4(),s=sl(),a=t("%WeakMap%",!0),n=e("WeakMap.prototype.get",!0),o=e("WeakMap.prototype.set",!0),u=e("WeakMap.prototype.has",!0),c=e("WeakMap.prototype.delete",!0);return H_=a?function(){var h,p,g={assert:function(m){if(!g.has(m))throw new s("Side channel does not contain "+r(m))},delete:function(m){if(a&&m&&(typeof m=="object"||typeof m=="function")){if(h)return c(h,m)}else if(i&&p)return p.delete(m);return!1},get:function(m){return a&&m&&(typeof m=="object"||typeof m=="function")&&h?n(h,m):p&&p.get(m)},has:function(m){return a&&m&&(typeof m=="object"||typeof m=="function")&&h?u(h,m):!!p&&p.has(m)},set:function(m,T){a&&m&&(typeof m=="object"||typeof m=="function")?(h||(h=new a),o(h,m,T)):i&&(p||(p=i()),p.set(m,T))}};return g}:i,H_}var q_,WL;function YQ(){if(WL)return q_;WL=1;var t=sl(),e=tp(),r=AQ(),i=A4(),s=jQ(),a=s||i||r;return q_=function(){var o,u={assert:function(c){if(!u.has(c))throw new t("Side channel does not contain "+e(c))},delete:function(c){return!!o&&o.delete(c)},get:function(c){return o&&o.get(c)},has:function(c){return!!o&&o.has(c)},set:function(c,f){o||(o=a()),o.set(c,f)}};return u},q_}var X_,jL;function ST(){if(jL)return X_;jL=1;var t=String.prototype.replace,e=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return X_={default:r.RFC3986,formatters:{RFC1738:function(i){return t.call(i,e,"+")},RFC3986:function(i){return String(i)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},X_}var z_,YL;function S4(){if(YL)return z_;YL=1;var t=ST(),e=Object.prototype.hasOwnProperty,r=Array.isArray,i=function(){for(var x=[],v=0;v<256;++v)x.push("%"+((v<16?"0":"")+v.toString(16)).toUpperCase());return x}(),s=function(v){for(;v.length>1;){var y=v.pop(),R=y.obj[y.prop];if(r(R)){for(var A=[],k=0;k<R.length;++k)typeof R[k]<"u"&&A.push(R[k]);y.obj[y.prop]=A}}},a=function(v,y){for(var R=y&&y.plainObjects?{__proto__:null}:{},A=0;A<v.length;++A)typeof v[A]<"u"&&(R[A]=v[A]);return R},n=function x(v,y,R){if(!y)return v;if(typeof y!="object"&&typeof y!="function"){if(r(v))v.push(y);else if(v&&typeof v=="object")(R&&(R.plainObjects||R.allowPrototypes)||!e.call(Object.prototype,y))&&(v[y]=!0);else return[v,y];return v}if(!v||typeof v!="object")return[v].concat(y);var A=v;return r(v)&&!r(y)&&(A=a(v,R)),r(v)&&r(y)?(y.forEach(function(k,b){if(e.call(v,b)){var C=v[b];C&&typeof C=="object"&&k&&typeof k=="object"?v[b]=x(C,k,R):v.push(k)}else v[b]=k}),v):Object.keys(y).reduce(function(k,b){var C=y[b];return e.call(k,b)?k[b]=x(k[b],C,R):k[b]=C,k},A)},o=function(v,y){return Object.keys(y).reduce(function(R,A){return R[A]=y[A],R},v)},u=function(x,v,y){var R=x.replace(/\+/g," ");if(y==="iso-8859-1")return R.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(R)}catch{return R}},c=1024,f=function(v,y,R,A,k){if(v.length===0)return v;var b=v;if(typeof v=="symbol"?b=Symbol.prototype.toString.call(v):typeof v!="string"&&(b=String(v)),R==="iso-8859-1")return escape(b).replace(/%u[0-9a-f]{4}/gi,function(Z){return"%26%23"+parseInt(Z.slice(2),16)+"%3B"});for(var C="",w=0;w<b.length;w+=c){for(var O=b.length>=c?b.slice(w,w+c):b,M=[],$=0;$<O.length;++$){var G=O.charCodeAt($);if(G===45||G===46||G===95||G===126||G>=48&&G<=57||G>=65&&G<=90||G>=97&&G<=122||k===t.RFC1738&&(G===40||G===41)){M[M.length]=O.charAt($);continue}if(G<128){M[M.length]=i[G];continue}if(G<2048){M[M.length]=i[192|G>>6]+i[128|G&63];continue}if(G<55296||G>=57344){M[M.length]=i[224|G>>12]+i[128|G>>6&63]+i[128|G&63];continue}$+=1,G=65536+((G&1023)<<10|O.charCodeAt($)&1023),M[M.length]=i[240|G>>18]+i[128|G>>12&63]+i[128|G>>6&63]+i[128|G&63]}C+=M.join("")}return C},h=function(v){for(var y=[{obj:{o:v},prop:"o"}],R=[],A=0;A<y.length;++A)for(var k=y[A],b=k.obj[k.prop],C=Object.keys(b),w=0;w<C.length;++w){var O=C[w],M=b[O];typeof M=="object"&&M!==null&&R.indexOf(M)===-1&&(y.push({obj:b,prop:O}),R.push(M))}return s(y),v},p=function(v){return Object.prototype.toString.call(v)==="[object RegExp]"},g=function(v){return!v||typeof v!="object"?!1:!!(v.constructor&&v.constructor.isBuffer&&v.constructor.isBuffer(v))},m=function(v,y){return[].concat(v,y)},T=function(v,y){if(r(v)){for(var R=[],A=0;A<v.length;A+=1)R.push(y(v[A]));return R}return y(v)};return z_={arrayToObject:a,assign:o,combine:m,compact:h,decode:u,encode:f,isBuffer:g,isRegExp:p,maybeMap:T,merge:n},z_}var W_,ZL;function ZQ(){if(ZL)return W_;ZL=1;var t=YQ(),e=S4(),r=ST(),i=Object.prototype.hasOwnProperty,s={brackets:function(x){return x+"[]"},comma:"comma",indices:function(x,v){return x+"["+v+"]"},repeat:function(x){return x}},a=Array.isArray,n=Array.prototype.push,o=function(T,x){n.apply(T,a(x)?x:[x])},u=Date.prototype.toISOString,c=r.default,f={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:e.encode,encodeValuesOnly:!1,filter:void 0,format:c,formatter:r.formatters[c],indices:!1,serializeDate:function(x){return u.call(x)},skipNulls:!1,strictNullHandling:!1},h=function(x){return typeof x=="string"||typeof x=="number"||typeof x=="boolean"||typeof x=="symbol"||typeof x=="bigint"},p={},g=function T(x,v,y,R,A,k,b,C,w,O,M,$,G,Z,ce,Y,J,ie){for(var le=x,Te=ie,Me=0,Ee=!1;(Te=Te.get(p))!==void 0&&!Ee;){var se=Te.get(x);if(Me+=1,typeof se<"u"){if(se===Me)throw new RangeError("Cyclic object value");Ee=!0}typeof Te.get(p)>"u"&&(Me=0)}if(typeof O=="function"?le=O(v,le):le instanceof Date?le=G(le):y==="comma"&&a(le)&&(le=e.maybeMap(le,function(be){return be instanceof Date?G(be):be})),le===null){if(k)return w&&!Y?w(v,f.encoder,J,"key",Z):v;le=""}if(h(le)||e.isBuffer(le)){if(w){var me=Y?v:w(v,f.encoder,J,"key",Z);return[ce(me)+"="+ce(w(le,f.encoder,J,"value",Z))]}return[ce(v)+"="+ce(String(le))]}var Xe=[];if(typeof le>"u")return Xe;var nt;if(y==="comma"&&a(le))Y&&w&&(le=e.maybeMap(le,w)),nt=[{value:le.length>0?le.join(",")||null:void 0}];else if(a(O))nt=O;else{var ot=Object.keys(le);nt=M?ot.sort(M):ot}var pt=C?String(v).replace(/\./g,"%2E"):String(v),qe=R&&a(le)&&le.length===1?pt+"[]":pt;if(A&&a(le)&&le.length===0)return qe+"[]";for(var Ye=0;Ye<nt.length;++Ye){var at=nt[Ye],lt=typeof at=="object"&&at&&typeof at.value<"u"?at.value:le[at];if(!(b&&lt===null)){var j=$&&C?String(at).replace(/\./g,"%2E"):String(at),ue=a(le)?typeof y=="function"?y(qe,j):qe:qe+($?"."+j:"["+j+"]");ie.set(x,Me);var oe=t();oe.set(p,ie),o(Xe,T(lt,ue,y,R,A,k,b,C,y==="comma"&&Y&&a(le)?null:w,O,M,$,G,Z,ce,Y,J,oe))}}return Xe},m=function(x){if(!x)return f;if(typeof x.allowEmptyArrays<"u"&&typeof x.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof x.encodeDotInKeys<"u"&&typeof x.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(x.encoder!==null&&typeof x.encoder<"u"&&typeof x.encoder!="function")throw new TypeError("Encoder has to be a function.");var v=x.charset||f.charset;if(typeof x.charset<"u"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var y=r.default;if(typeof x.format<"u"){if(!i.call(r.formatters,x.format))throw new TypeError("Unknown format option provided.");y=x.format}var R=r.formatters[y],A=f.filter;(typeof x.filter=="function"||a(x.filter))&&(A=x.filter);var k;if(x.arrayFormat in s?k=x.arrayFormat:"indices"in x?k=x.indices?"indices":"repeat":k=f.arrayFormat,"commaRoundTrip"in x&&typeof x.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var b=typeof x.allowDots>"u"?x.encodeDotInKeys===!0?!0:f.allowDots:!!x.allowDots;return{addQueryPrefix:typeof x.addQueryPrefix=="boolean"?x.addQueryPrefix:f.addQueryPrefix,allowDots:b,allowEmptyArrays:typeof x.allowEmptyArrays=="boolean"?!!x.allowEmptyArrays:f.allowEmptyArrays,arrayFormat:k,charset:v,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:f.charsetSentinel,commaRoundTrip:!!x.commaRoundTrip,delimiter:typeof x.delimiter>"u"?f.delimiter:x.delimiter,encode:typeof x.encode=="boolean"?x.encode:f.encode,encodeDotInKeys:typeof x.encodeDotInKeys=="boolean"?x.encodeDotInKeys:f.encodeDotInKeys,encoder:typeof x.encoder=="function"?x.encoder:f.encoder,encodeValuesOnly:typeof x.encodeValuesOnly=="boolean"?x.encodeValuesOnly:f.encodeValuesOnly,filter:A,format:y,formatter:R,serializeDate:typeof x.serializeDate=="function"?x.serializeDate:f.serializeDate,skipNulls:typeof x.skipNulls=="boolean"?x.skipNulls:f.skipNulls,sort:typeof x.sort=="function"?x.sort:null,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:f.strictNullHandling}};return W_=function(T,x){var v=T,y=m(x),R,A;typeof y.filter=="function"?(A=y.filter,v=A("",v)):a(y.filter)&&(A=y.filter,R=A);var k=[];if(typeof v!="object"||v===null)return"";var b=s[y.arrayFormat],C=b==="comma"&&y.commaRoundTrip;R||(R=Object.keys(v)),y.sort&&R.sort(y.sort);for(var w=t(),O=0;O<R.length;++O){var M=R[O],$=v[M];y.skipNulls&&$===null||o(k,g($,M,b,C,y.allowEmptyArrays,y.strictNullHandling,y.skipNulls,y.encodeDotInKeys,y.encode?y.encoder:null,y.filter,y.sort,y.allowDots,y.serializeDate,y.format,y.formatter,y.encodeValuesOnly,y.charset,w))}var G=k.join(y.delimiter),Z=y.addQueryPrefix===!0?"?":"";return y.charsetSentinel&&(y.charset==="iso-8859-1"?Z+="utf8=%26%2310003%3B&":Z+="utf8=%E2%9C%93&"),G.length>0?Z+G:""},W_}var j_,QL;function QQ(){if(QL)return j_;QL=1;var t=S4(),e=Object.prototype.hasOwnProperty,r=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:t.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},s=function(p){return p.replace(/&#(\d+);/g,function(g,m){return String.fromCharCode(parseInt(m,10))})},a=function(p,g,m){if(p&&typeof p=="string"&&g.comma&&p.indexOf(",")>-1)return p.split(",");if(g.throwOnLimitExceeded&&m>=g.arrayLimit)throw new RangeError("Array limit exceeded. Only "+g.arrayLimit+" element"+(g.arrayLimit===1?"":"s")+" allowed in an array.");return p},n="utf8=%26%2310003%3B",o="utf8=%E2%9C%93",u=function(g,m){var T={__proto__:null},x=m.ignoreQueryPrefix?g.replace(/^\?/,""):g;x=x.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var v=m.parameterLimit===1/0?void 0:m.parameterLimit,y=x.split(m.delimiter,m.throwOnLimitExceeded?v+1:v);if(m.throwOnLimitExceeded&&y.length>v)throw new RangeError("Parameter limit exceeded. Only "+v+" parameter"+(v===1?"":"s")+" allowed.");var R=-1,A,k=m.charset;if(m.charsetSentinel)for(A=0;A<y.length;++A)y[A].indexOf("utf8=")===0&&(y[A]===o?k="utf-8":y[A]===n&&(k="iso-8859-1"),R=A,A=y.length);for(A=0;A<y.length;++A)if(A!==R){var b=y[A],C=b.indexOf("]="),w=C===-1?b.indexOf("="):C+1,O,M;w===-1?(O=m.decoder(b,i.decoder,k,"key"),M=m.strictNullHandling?null:""):(O=m.decoder(b.slice(0,w),i.decoder,k,"key"),M=t.maybeMap(a(b.slice(w+1),m,r(T[O])?T[O].length:0),function(G){return m.decoder(G,i.decoder,k,"value")})),M&&m.interpretNumericEntities&&k==="iso-8859-1"&&(M=s(String(M))),b.indexOf("[]=")>-1&&(M=r(M)?[M]:M);var $=e.call(T,O);$&&m.duplicates==="combine"?T[O]=t.combine(T[O],M):(!$||m.duplicates==="last")&&(T[O]=M)}return T},c=function(p,g,m,T){var x=0;if(p.length>0&&p[p.length-1]==="[]"){var v=p.slice(0,-1).join("");x=Array.isArray(g)&&g[v]?g[v].length:0}for(var y=T?g:a(g,m,x),R=p.length-1;R>=0;--R){var A,k=p[R];if(k==="[]"&&m.parseArrays)A=m.allowEmptyArrays&&(y===""||m.strictNullHandling&&y===null)?[]:t.combine([],y);else{A=m.plainObjects?{__proto__:null}:{};var b=k.charAt(0)==="["&&k.charAt(k.length-1)==="]"?k.slice(1,-1):k,C=m.decodeDotInKeys?b.replace(/%2E/g,"."):b,w=parseInt(C,10);!m.parseArrays&&C===""?A={0:y}:!isNaN(w)&&k!==C&&String(w)===C&&w>=0&&m.parseArrays&&w<=m.arrayLimit?(A=[],A[w]=y):C!=="__proto__"&&(A[C]=y)}y=A}return y},f=function(g,m,T,x){if(g){var v=T.allowDots?g.replace(/\.([^.[]+)/g,"[$1]"):g,y=/(\[[^[\]]*])/,R=/(\[[^[\]]*])/g,A=T.depth>0&&y.exec(v),k=A?v.slice(0,A.index):v,b=[];if(k){if(!T.plainObjects&&e.call(Object.prototype,k)&&!T.allowPrototypes)return;b.push(k)}for(var C=0;T.depth>0&&(A=R.exec(v))!==null&&C<T.depth;){if(C+=1,!T.plainObjects&&e.call(Object.prototype,A[1].slice(1,-1))&&!T.allowPrototypes)return;b.push(A[1])}if(A){if(T.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+T.depth+" and strictDepth is true");b.push("["+v.slice(A.index)+"]")}return c(b,m,T,x)}},h=function(g){if(!g)return i;if(typeof g.allowEmptyArrays<"u"&&typeof g.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof g.decodeDotInKeys<"u"&&typeof g.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(g.decoder!==null&&typeof g.decoder<"u"&&typeof g.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof g.charset<"u"&&g.charset!=="utf-8"&&g.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof g.throwOnLimitExceeded<"u"&&typeof g.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var m=typeof g.charset>"u"?i.charset:g.charset,T=typeof g.duplicates>"u"?i.duplicates:g.duplicates;if(T!=="combine"&&T!=="first"&&T!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var x=typeof g.allowDots>"u"?g.decodeDotInKeys===!0?!0:i.allowDots:!!g.allowDots;return{allowDots:x,allowEmptyArrays:typeof g.allowEmptyArrays=="boolean"?!!g.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof g.allowPrototypes=="boolean"?g.allowPrototypes:i.allowPrototypes,allowSparse:typeof g.allowSparse=="boolean"?g.allowSparse:i.allowSparse,arrayLimit:typeof g.arrayLimit=="number"?g.arrayLimit:i.arrayLimit,charset:m,charsetSentinel:typeof g.charsetSentinel=="boolean"?g.charsetSentinel:i.charsetSentinel,comma:typeof g.comma=="boolean"?g.comma:i.comma,decodeDotInKeys:typeof g.decodeDotInKeys=="boolean"?g.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof g.decoder=="function"?g.decoder:i.decoder,delimiter:typeof g.delimiter=="string"||t.isRegExp(g.delimiter)?g.delimiter:i.delimiter,depth:typeof g.depth=="number"||g.depth===!1?+g.depth:i.depth,duplicates:T,ignoreQueryPrefix:g.ignoreQueryPrefix===!0,interpretNumericEntities:typeof g.interpretNumericEntities=="boolean"?g.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof g.parameterLimit=="number"?g.parameterLimit:i.parameterLimit,parseArrays:g.parseArrays!==!1,plainObjects:typeof g.plainObjects=="boolean"?g.plainObjects:i.plainObjects,strictDepth:typeof g.strictDepth=="boolean"?!!g.strictDepth:i.strictDepth,strictNullHandling:typeof g.strictNullHandling=="boolean"?g.strictNullHandling:i.strictNullHandling,throwOnLimitExceeded:typeof g.throwOnLimitExceeded=="boolean"?g.throwOnLimitExceeded:!1}};return j_=function(p,g){var m=h(g);if(p===""||p===null||typeof p>"u")return m.plainObjects?{__proto__:null}:{};for(var T=typeof p=="string"?u(p,m):p,x=m.plainObjects?{__proto__:null}:{},v=Object.keys(T),y=0;y<v.length;++y){var R=v[y],A=f(R,T[R],m,typeof p=="string");x=t.merge(x,A,m)}return m.allowSparse===!0?x:t.compact(x)},j_}var Y_,JL;function R4(){if(JL)return Y_;JL=1;var t=ZQ(),e=QQ(),r=ST();return Y_={formats:r,parse:e,stringify:t},Y_}var Z_,eI;function ud(){if(eI)return Z_;eI=1;class t{constructor(o){this.code=o.code,this.token=o.token,this.host=o.host}}class e{constructor(o){this.appId=o.appId,this.appTag=o.appTag,this.audienceEnabled=o.audienceEnabled,this.code=o.code,this.host=o.host,this.audienceHost=o.audienceHost,this.locked=o.locked,this.full=o.full,this.maxPlayers=o.maxPlayers,this.minPlayers=o.minPlayers,this.moderationEnabled=o.moderationEnabled,this.passwordRequired=o.passwordRequired,this.twitchLocked=o.twitchLocked,this.locale=o.locale,this.keepalive=o.keepalive,this.controllerBranch=o.controllerBranch}}class r{constructor(o){this.connections=o.connections}}class i{constructor(o){this.cause=o.cause}whenReceived(o){o.disconnect()}}class s{}class a{constructor(o){this.host=o.host,this.code=o.code,this.password=o.password}}return Z_={CreateRoomReply:t,GetRoomReply:e,GetAudienceReply:r,RoomExit:i,RoomLock:s,RoomMigrate:a},Z_}var Q_,tI;function JQ(){if(tI)return Q_;tI=1;const t=vQ(),e=R4(),{CreateRoomReply:r,GetRoomReply:i}=ud();class s{constructor(n){if(!n.host)throw new Error("unable to create ecast APIClient: no host provided");if(this.host=n.host,!n.scheme)throw new Error("unable to create ecast APIClient: no scheme provided");this.scheme=n.scheme}url(n,o){if(o){let u=e.stringify(o);return`${this.scheme}://${this.host}/api/v2${n}?${u}`}return`${this.scheme}://${this.host}/api/v2${n}`}async createRoom(n){let o={appTag:"test",userId:"fart",...n},u=this.url("/rooms",o),f=await t(u,{method:"POST"});const{body:h,error:p,ok:g}=await f.json();if(!g)throw new Error(`failed to create room: ${p}`);return new r({code:h.code,token:h.token,host:h.host})}async getRoom(n){let o=this.url(`/rooms/${n.code}`),c=await(await t(o)).json();if(!c.ok)throw new Error(`unable to get room with options ${JSON.stringify(n)}: ${c.error}`);let f=c.body;return new i({appId:f.appId,appTag:f.appTag,audienceEnabled:f.audienceEnabled,code:f.code,host:f.host,audienceHost:f.audienceHost,locked:f.locked,full:f.full,maxPlayers:f.maxPlayers,minPlayers:f.minPlayers,moderationEnabled:f.moderationEnabled,passwordRequired:f.passwordRequired,twitchLocked:f.twitchLocked,locale:f.locale,keepalive:f.keepalive,controllerBranch:f.controllerBranch})}}return Q_={APIClient:s},Q_}var J_,rI;function eJ(){if(rI)return J_;rI=1;var t=null;return typeof WebSocket<"u"?t=WebSocket:typeof MozWebSocket<"u"?t=MozWebSocket:typeof $r<"u"?t=$r.WebSocket||$r.MozWebSocket:typeof window<"u"?t=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(t=self.WebSocket||self.MozWebSocket),J_=t,J_}var oh={exports:{}},nI;function tJ(){if(nI)return oh.exports;nI=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(k,b,C){return Function.prototype.apply.call(k,b,C)},r;t&&typeof t.ownKeys=="function"?r=t.ownKeys:Object.getOwnPropertySymbols?r=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:r=function(k){return Object.getOwnPropertyNames(k)};function i(A){console&&console.warn&&console.warn(A)}var s=Number.isNaN||function(k){return k!==k};function a(){a.init.call(this)}oh.exports=a,oh.exports.once=v,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var n=10;function o(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(A){if(typeof A!="number"||A<0||s(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");n=A}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||s(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function u(A){return A._maxListeners===void 0?a.defaultMaxListeners:A._maxListeners}a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(k){for(var b=[],C=1;C<arguments.length;C++)b.push(arguments[C]);var w=k==="error",O=this._events;if(O!==void 0)w=w&&O.error===void 0;else if(!w)return!1;if(w){var M;if(b.length>0&&(M=b[0]),M instanceof Error)throw M;var $=new Error("Unhandled error."+(M?" ("+M.message+")":""));throw $.context=M,$}var G=O[k];if(G===void 0)return!1;if(typeof G=="function")e(G,this,b);else for(var Z=G.length,ce=m(G,Z),C=0;C<Z;++C)e(ce[C],this,b);return!0};function c(A,k,b,C){var w,O,M;if(o(b),O=A._events,O===void 0?(O=A._events=Object.create(null),A._eventsCount=0):(O.newListener!==void 0&&(A.emit("newListener",k,b.listener?b.listener:b),O=A._events),M=O[k]),M===void 0)M=O[k]=b,++A._eventsCount;else if(typeof M=="function"?M=O[k]=C?[b,M]:[M,b]:C?M.unshift(b):M.push(b),w=u(A),w>0&&M.length>w&&!M.warned){M.warned=!0;var $=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");$.name="MaxListenersExceededWarning",$.emitter=A,$.type=k,$.count=M.length,i($)}return A}a.prototype.addListener=function(k,b){return c(this,k,b,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(k,b){return c(this,k,b,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(A,k,b){var C={fired:!1,wrapFn:void 0,target:A,type:k,listener:b},w=f.bind(C);return w.listener=b,C.wrapFn=w,w}a.prototype.once=function(k,b){return o(b),this.on(k,h(this,k,b)),this},a.prototype.prependOnceListener=function(k,b){return o(b),this.prependListener(k,h(this,k,b)),this},a.prototype.removeListener=function(k,b){var C,w,O,M,$;if(o(b),w=this._events,w===void 0)return this;if(C=w[k],C===void 0)return this;if(C===b||C.listener===b)--this._eventsCount===0?this._events=Object.create(null):(delete w[k],w.removeListener&&this.emit("removeListener",k,C.listener||b));else if(typeof C!="function"){for(O=-1,M=C.length-1;M>=0;M--)if(C[M]===b||C[M].listener===b){$=C[M].listener,O=M;break}if(O<0)return this;O===0?C.shift():T(C,O),C.length===1&&(w[k]=C[0]),w.removeListener!==void 0&&this.emit("removeListener",k,$||b)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(k){var b,C,w;if(C=this._events,C===void 0)return this;if(C.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):C[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete C[k]),this;if(arguments.length===0){var O=Object.keys(C),M;for(w=0;w<O.length;++w)M=O[w],M!=="removeListener"&&this.removeAllListeners(M);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(b=C[k],typeof b=="function")this.removeListener(k,b);else if(b!==void 0)for(w=b.length-1;w>=0;w--)this.removeListener(k,b[w]);return this};function p(A,k,b){var C=A._events;if(C===void 0)return[];var w=C[k];return w===void 0?[]:typeof w=="function"?b?[w.listener||w]:[w]:b?x(w):m(w,w.length)}a.prototype.listeners=function(k){return p(this,k,!0)},a.prototype.rawListeners=function(k){return p(this,k,!1)},a.listenerCount=function(A,k){return typeof A.listenerCount=="function"?A.listenerCount(k):g.call(A,k)},a.prototype.listenerCount=g;function g(A){var k=this._events;if(k!==void 0){var b=k[A];if(typeof b=="function")return 1;if(b!==void 0)return b.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]};function m(A,k){for(var b=new Array(k),C=0;C<k;++C)b[C]=A[C];return b}function T(A,k){for(;k+1<A.length;k++)A[k]=A[k+1];A.pop()}function x(A){for(var k=new Array(A.length),b=0;b<k.length;++b)k[b]=A[b].listener||A[b];return k}function v(A,k){return new Promise(function(b,C){function w(M){A.removeListener(k,O),C(M)}function O(){typeof A.removeListener=="function"&&A.removeListener("error",w),b([].slice.call(arguments))}R(A,k,O,{once:!0}),k!=="error"&&y(A,w,{once:!0})})}function y(A,k,b){typeof A.on=="function"&&R(A,"error",k,b)}function R(A,k,b,C){if(typeof A.on=="function")C.once?A.once(k,b):A.on(k,b);else if(typeof A.addEventListener=="function")A.addEventListener(k,function w(O){C.once&&A.removeEventListener(k,w),b(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof A)}return oh.exports}var eb,iI;function RT(){if(iI)return eb;iI=1;class t{constructor(se){se&&(this.error=se.error,this.to=se.to,this.opcode=se.opcode)}toString(){return`ObservedError{
	to:${this.to}
	error:${this.error}
	opcode:${this.opcode}
}`}}class e extends Error{constructor(se){super(se),se&&(this.code=se.code,this.message=se.message)}}class r extends e{constructor(se){super(se),this.code=1e3,this.message=se&&se.message?se.message:"ecast server error"}}class i extends r{constructor(se){super(se),this.code=1001,this.message=se&&se.message?se.message:"create room failed"}}class s extends r{constructor(se){super(se),this.code=1002,this.message=se&&se.message?se.message:"unable to connect to room"}}class a extends r{constructor(se){super(se),this.code=1003,this.message=se&&se.message?se.message:"server is shutting down"}}class n extends e{constructor(se){super(se),this.code=2e3,this.message=se&&se.message?se.message:"ecast client error"}}class o extends n{constructor(se){super(se),this.code=2001,this.message=se&&se.message?se.message:"parse error in ecast protocol"}}class u extends n{constructor(se){super(se),this.code=2002,this.message=se&&se.message?se.message:"missing opcode"}}class c extends n{constructor(se){super(se),this.code=2003,this.message=se&&se.message?se.message:"invalid opcode"}}class f extends n{constructor(se){super(se),this.code=2004,this.message=se&&se.message?se.message:"invalid arguments"}}class h extends n{constructor(se){super(se),this.code=2005,this.message=se&&se.message?se.message:"entity not found"}}class p extends n{constructor(se){super(se),this.code=2006,this.message=se&&se.message?se.message:"an entity already exists with that key"}}class g extends n{constructor(se){super(se),this.code=2007,this.message=se&&se.message?se.message:"the entity is not of the expected type"}}class m extends n{constructor(se){super(se),this.code=2008,this.message=se&&se.message?se.message:"no such client"}}class T extends n{constructor(se){super(se),this.code=2009,this.message=se&&se.message?se.message:"room is locked"}}class x extends n{constructor(se){super(se),this.code=2010,this.message=se&&se.message?se.message:"room is full"}}class v extends n{constructor(se){super(se),this.code=2011,this.message=se&&se.message?se.message:"no such license"}}class y extends n{constructor(se){super(se),this.code=2012,this.message=se&&se.message?se.message:"invalid license"}}class R extends n{constructor(se){super(se),this.code=2013,this.message=se&&se.message?se.message:"room not found"}}class A extends n{constructor(se){super(se),this.code=2014,this.message=se&&se.message?se.message:"requested role does not exist"}}class k extends n{constructor(se){super(se),this.code=2015,this.message=se&&se.message?se.message:"twitch login required"}}class b extends n{constructor(se){super(se),this.code=2016,this.message=se&&se.message?se.message:"no such option"}}class C extends n{constructor(se){super(se),this.code=2017,this.message=se&&se.message?se.message:"password required"}}class w extends n{constructor(se){super(se),this.code=2018,this.message=se&&se.message?se.message:"invalid room password"}}class O extends n{constructor(se){super(se),this.code=2019,this.message=se&&se.message?se.message:"missing name"}}class M extends n{constructor(se){super(se),this.code=2021,this.message=se&&se.message?se.message:"text did not pass text filters"}}class $ extends n{constructor(se){super(se),this.code=2022,this.message=se&&se.message?se.message:"no such filter"}}class G extends n{constructor(se){super(se),this.code=2023,this.message=se&&se.message?se.message:"permission denied"}}class Z extends n{constructor(se){super(se),this.code=2024,this.message=se&&se.message?se.message:"not connected to a room"}}class ce extends n{constructor(se){super(se),this.code=2025,this.message=se&&se.message?se.message:"illegal operation"}}class Y extends n{constructor(se){super(se),this.code=2026,this.message=se&&se.message?se.message:"invalid ACL change"}}class J extends n{constructor(se){super(se),this.code=2027,this.message=se&&se.message?se.message:"room has already ended"}}class ie extends n{constructor(se){super(se),this.code=2028,this.message=se&&se.message?se.message:"the entity is locked"}}class le extends n{constructor(se){super(se),this.code=2420,this.message=se&&se.message?se.message:"rate limit exceeded"}}function Te({code:Ee,message:se}){const me=Me[Ee];return me?new me({message:se}):new e({message:se})}eb={createError:Te,CallError:e,EcastServerError:r,EcastCreateRoomFailed:i,EcastDialRoomFailed:s,EcastServerIsShuttingDown:a,EcastClientError:n,EcastParseError:o,EcastRequestIsMissingOpcode:u,EcastRequestHasInvalidOpcode:c,EcastRequestHasInvalidArguments:f,EcastEntityNotFound:h,EcastEntityAlreadyExists:p,EcastEntityTypeError:g,EcastNoSuchClient:m,EcastRoomIsLocked:T,EcastRoomIsFull:x,EcastLicenseNotFound:v,EcastLicenseCheckFailed:y,EcastRoomNotFound:R,EcastInvalidRole:A,EcastTwitchLoginRequired:k,EcastInvalidOption:b,EcastPasswordRequired:C,EcastInvalidPassword:w,EcastNameRequired:O,EcastFilterError:M,EcastNoSuchFilter:$,EcastPermissionDenied:G,EcastNotConnected:Z,EcastIllegalOperation:ce,EcastACLChangeDenied:Y,EcastRoomHasEnded:J,EcastEntityLocked:ie,EcastRateLimitExceeded:le,ObservedError:t};const Me={1e3:r,1001:i,1002:s,1003:a,2e3:n,2001:o,2002:u,2003:c,2004:f,2005:h,2006:p,2007:g,2008:m,2009:T,2010:x,2011:v,2012:y,2013:R,2014:A,2015:k,2016:b,2017:C,2018:w,2019:O,2021:M,2022:$,2023:G,2024:Z,2025:ce,2026:Y,2027:J,2028:ie,2420:le};return eb}var tb,sI;function CT(){if(sI)return tb;sI=1;class t{constructor(n){this.id=n.id,this.deviceId=n.deviceId,this.name=n.name,this.secret=n.secret,this.reconnect=n.reconnect,this.entities=n.entities,this.here=n.here,this.profile=n.profile,this.replayEnd=n.replayEnd}}class e{constructor(n){this.id=n.id,this.userId=n.userId,this.name=n.name,this.role=n.role,this.reconnect=n.reconnect}}class r{constructor(n){this.id=n.id,this.role=n.role}}class i{constructor(n){this.to=n.to,this.from=n.from,this.body=n.body,this.userId=n.userId}}class s{constructor(n){this.id=n.id,this.banned=n.banned,this.reason=n.reason}}return tb={ClientConnected:e,ClientDisconnected:r,ClientKicked:s,ClientSend:i,ClientWelcome:t},tb}var rb,aI;function wT(){if(aI)return rb;aI=1;class t{constructor(r){this.choices=r.choices,this.key=r.key,this.meta=r.meta||{}}whenReceived(r){r.entities[this.key]=this}toString(){return`CountGroup{
	choices: ${this.choices}
	meta:${JSON.stringify(this.meta)}
}`}}return rb={CountGroup:t},rb}var nb,oI;function LT(){if(oI)return nb;oI=1;class t{constructor(s){this.key=s.key,this.from=s.from,this.colors=s.colors,this.lines=s.lines,this.live=s.live,this.maxLayer=s.maxLayer,this.maxPoints=s.maxPoints,this.size=s.size,this.weights=s.weights,this.meta=s.meta||{},s.acl&&(this.acl=s.acl)}whenReceived(s){s.entities[this.key]=this}toString(){return`Doodle{
	key:${this.key}
	colors:${this.colors}
	lines:${this.lines}
	live:${this.live}
	maxLayer:${this.maxLayer}
	maxPoints:${this.maxPoints}
	size:${this.size}
	weights:${this.weights}
	meta:${JSON.stringify(this.meta)}
}`}}class e{constructor(s){this.key=s.key,this.from=s.from,this.line=s.line}whenReceived(s){s.entities[this.key].lines.push(this.line)}toString(){return`DoodleLine{
	val:${this.line}
}`}}class r{constructor(s){this.key=s.key,this.from=s.from,this.index=s.index}whenReceived(s){s.entities[this.key].lines.splice(this.index,1)}toString(){return`DoodleLineRemoved{
	index:${this.index}
}`}}return nb={DoodleEntity:t,DoodleLine:e,DoodleLineRemoved:r},nb}var ib,uI;function rJ(){if(uI)return ib;uI=1;class t{constructor(r){this.key=r.key,this.from=r.from,this.val=r.val,this.meta=r.meta||{},r.acl&&(this.acl=r.acl)}whenReceived(r){r.entities[this.key]=this}toString(){return`ExternalRequestEntity{
	key:${this.key}
	service: ${this.val.service}
	status: ${this.val.status}
	meta: ${JSON.stringify(this.meta)}
}`}}return ib={ExternalRequestEntity:t},ib}var sb,lI;function IT(){if(lI)return sb;lI=1;class t{constructor(r){this.key=r.key,this.count=r.count,this.meta=r.meta||{}}whenReceived(r){r.entities[this.key]=this}toString(){return`GCounter{
	count:${this.count}
	meta:${this.meta}
}`}}return sb={GCounter:t},sb}var ab,cI;function C4(){if(cI)return ab;cI=1;class t{constructor(r){this.pc=r.pc,this.opcode=r.opcode,this.result=r.result}}return ab={Notification:t},ab}var ob,fI;function BT(){if(fI)return ob;fI=1;class t{constructor(r){this.from=r.from,this.key=r.key,this.val=r.val,this.restrictions=r.restrictions,this.version=r.version,this.meta=r.meta||{},r.acl&&(this.acl=r.acl)}whenReceived(r){if(r.entities[this.key]&&r.entities[this.key]instanceof t&&!this.restrictions){r.entities[this.key].val=this.val,r.entities[this.key].meta=this.meta,r.entities[this.key].version=this.version,r.entities[this.key].from=this.from;return}r.entities[this.key]=this}toString(){return`NumberEntity{
	key:${this.key}
	val: ${this.val}
	restrictions: ${JSON.stringify(this.restrictions)}
	meta: ${JSON.stringify(this.meta)}
}`}}return ob={NumberEntity:t},ob}var ub,hI;function PT(){if(hI)return ub;hI=1;class t{constructor(i){this.from=i.from,this.key=i.key,this.val=i.val,this.version=i.version,this.meta=i.meta||{},i.acl&&(this.acl=i.acl)}whenReceived(i){i.entities[this.key]=this}toString(){return`ObjectEntity{
	key:${this.key}
	value: ${JSON.stringify(this.val)}
	meta:${JSON.stringify(this.meta)}
}`}toBlob(){return this.val}}class e{constructor(i){this.message=i.message}toString(){return`ObjectEcho{message: ${this.message}}`}}return ub={ObjectEntity:t,ObjectEcho:e},ub}var lb,dI;function OT(){if(dI)return lb;dI=1;class t{constructor(r){this.key=r.key,this.count=r.count,this.meta=r.meta||{}}whenReceived(r){r.entities[this.key]=this}toString(){return`PNCounter{
	count:${this.count}
	meta:${JSON.stringify(this.meta)}
}`}}return lb={PNCounter:t},lb}var cb,pI;function w4(){if(pI)return cb;pI=1;class t{constructor(r){this.pc=r.pc,this.re=r.re,this.opcode=r.opcode,this.result=r.result}}return cb={Reply:t},cb}var fb,gI;function nJ(){if(gI)return fb;gI=1;class t{constructor(r){this.seq=r.seq,this.opcode=r.opcode,this.params=r.params}}return fb={Request:t},fb}var hb,mI;function L4(){if(mI)return hb;mI=1;class t{constructor(s){this.key=s.key,this.size=s.size,this.version=s.version,this.from=s.from,this.meta=s.meta||{},s.acl&&(this.acl=s.acl)}whenRecived(s){s.entities[this.key]=this}toString(){return`Stack{
	key:${this.key}
	size:${this.size}
	version:${this.version}
	from:${this.from}
	meta:${this.meta}
}`}}class e{constructor(s){this.key=s.key,this.val=s.val}toString(){return`StackElement{
	key:${this.key}
	value: ${JSON.stringify(this.val)}
}`}}class r{constructor(s){this.key=s.key,this.vals=s.vals}toString(){return`StackElements{
	key:${this.key}
	values: ${JSON.stringify(this.vals)}
}`}}return hb={StackEntity:t,StackElement:e,StackElements:r},hb}var db,_I;function DT(){if(_I)return db;_I=1;class t{constructor(i){this.from=i.from,this.key=i.key,this.text=i.text,this.version=i.version,this.meta=i.meta||{},i.acl&&(this.acl=i.acl)}whenReceived(i){i.entities[this.key]=this,i.emit("text "+this.key,this)}toString(){return`TextEntity{
	key: ${this.key}
	text: ${this.text}
	meta:${JSON.stringify(this.meta)}
}`}toBlob(){return JSON.parse(this.text)}}class e{constructor(i){this.message=i.message}toString(){return`TextEcho{
	key: ${this.key}
	message: ${this.message}
}`}}return db={TextEntity:t,TextEcho:e},db}var pb,bI;function kT(){if(bI)return pb;bI=1;class t{constructor(s){this.from=s.from,this.key=s.key,this.meta=s.meta||{},this.root=s.root,s.acl&&(this.acl=s.acl)}whenReceived(s){s.entities[this.key]=this}toString(){return`TextMap{
	key:${this.key}
	meta:${JSON.stringify(this.meta)}
}`}}class e{constructor(s){this.from=s.from,this.key=s.key,this.msg=s.msg}toString(){const s=this.msg?this.msg.join(", "):this.msg;return`TextMapSynced{
	key:${this.key}
	from:${this.from}
	msg:${s}
}`}}class r{constructor(s){this.from=s.from,this.key=s.key,this.text=s.text,this.attributions=s.attributions}toString(){return`TextMapState{
	key: ${this.key}
	from:${this.from}
	text:${this.text}
	attributions:${this.attributions}
}`}}return pb={TextMapEntity:t,TextMapSynced:e,TextMapState:r},pb}var gb,xI;function UT(){if(xI)return gb;xI=1;class t{constructor(r){this.key=r.key,this.elements=r.elements,this.limit=r.limit,this.meta=r.meta||{}}whenReceived(r){r.entities[this.key]=this}toString(){return`TextRing{
	elements: ${this.elements}
	meta:${JSON.stringify(this.meta)}
}`}}return gb={TextRing:t},gb}var mb,vI;function I4(){if(vI)return mb;vI=1;class t{constructor(r){this.key=r.key,this.artifactId=r.artifactId,this.categoryId=r.categoryId,this.rootId=r.rootId,this.meta=r.meta||{}}whenReceived(r){r.entities[this.key]=this}toString(){return`ArtifactEntity${JSON.stringify(this)}
`}}return mb={ArtifactEntity:t},mb}var _b,EI;function B4(){if(EI)return _b;EI=1;class t{constructor(r){this.key=r.key}whenReceived(r){delete r.entities[this.key]}toString(){return`DropEntity{
	key:${this.key}
}`}}return _b={DropEntity:t},_b}var bb,yI;function iJ(){if(yI)return bb;yI=1;class t{constructor(r){this.message=r.message}toString(){return`Echo{message: ${this.message}
}`}}return bb={Echo:t},bb}var xb,TI;function sJ(){if(TI)return xb;TI=1;class t{constructor(r){this.key=r.key,this.from=r.from}whenReceived(r){r.entities[this.key]&&(r.entities[this.key].meta.locked=!0)}toString(){return`LockEntity{
	key:${this.key}
}`}}return xb={LockEntity:t},xb}var vb,AI;function P4(){if(AI)return vb;AI=1;class t{constructor(){}toString(){return"OK"}}return vb={OK:t},vb}var Eb,SI;function aJ(){if(SI)return Eb;SI=1;const{ArtifactEntity:t}=I4(),{ClientWelcome:e,ClientConnected:r,ClientDisconnected:i,ClientKicked:s,ClientSend:a}=CT(),{CountGroup:n}=wT(),{DoodleEntity:o,DoodleLine:u,DoodleLineRemoved:c}=LT(),{StackEntity:f,StackElement:h,StackElements:p}=L4(),{DropEntity:g}=B4(),{Echo:m}=iJ(),{LockEntity:T}=sJ(),{GCounter:x}=IT(),{GetAudienceReply:v,RoomExit:y,RoomLock:R,RoomMigrate:A}=ud(),{Notification:k}=C4(),{OK:b}=P4(),{NumberEntity:C}=BT(),{ObjectEcho:w,ObjectEntity:O}=PT(),{PNCounter:M}=OT(),{Reply:$}=w4(),{TextEcho:G,TextEntity:Z}=DT(),{TextRing:ce}=UT(),{createError:Y,ObservedError:J}=RT(),{TextMapEntity:ie,TextMapSynced:le,TextMapState:Te}=kT();function Me(se,me,Xe){switch(se){case"ok":return new b;case"echo":return new m({message:me.message});case"lock":return new T({key:me.key,from:me.from});case"error":return Y({code:me.code,message:me.msg});case"error/observed":return new J({to:me.to,opcode:me.opcode,error:Y({code:me.error.code,message:me.error.msg})});case"string":return me;case"text":return new Z({from:me.from,key:me.key,text:me.val,version:me.version,meta:Xe,acl:me.acl});case"text/echo":return new G({message:me.message});case"object":return new O({from:me.from,key:me.key,val:me.val,meta:Xe,acl:me.acl});case"object/echo":return new w({message:me.message});case"drop":return new g({key:me.key});case"artifact":return new t({key:me.key,artifactId:me.artifactId,categoryId:me.categoryId,rootId:me.rootId,meta:Xe});case"client/connected":return new r({id:me.id,userId:me.userId,name:me.name,role:me.role,reconnect:me.reconnect});case"client/disconnected":return new i({id:me.id,role:me.role});case"client/kicked":return new s({id:me.id,banned:me.banned,reason:me.reason});case"client/send":return new a({to:me.to,from:me.from,body:me.body,userId:me.userID});case"client/welcome":{let nt=new e({id:me.id,name:me.name,secret:me.secret,reconnect:me.reconnect,here:me.here,profile:me.profile,replayEnd:me.replayEnd});if(me.entities){let ot={};Object.entries(me.entities).forEach(([pt,qe])=>{ot[pt]=Me(qe[0],qe[1],qe[2])}),nt.entities=ot}return nt}case"doodle":return new o({key:me.key,from:me.from,colors:me.val.colors,lines:me.val.lines,live:me.val.live,maxLayer:me.val.maxLayer,maxPoints:me.val.maxPoints,size:me.val.size,weights:me.val.weights,meta:Xe,acl:me.acl});case"doodle/line":return new u({key:me.key,from:me.from,line:me.val});case"doodle/line/removed":return new c({key:me.key,from:me.from,index:me.index});case"stack":return new f({key:me.key,size:me.size,from:me.from,version:me.version,meta:me.meta,acl:me.acl});case"stack/element":return new h({key:me.key,val:me.val});case"stack/elements":return new p({key:me.key,vals:me.vals});case"number":return new C({key:me.key,val:me.val,restrictions:me.restrictions,from:me.from,version:me.version,meta:Xe,acl:me.acl});case"text-map":return new ie({key:me.key,from:me.from,root:me.root,meta:Xe,acl:me.acl});case"text-map/state":return new Te({key:me.key,from:me.from,attributions:me.attributions,text:me.text});case"text-map/synced":return new le({key:me.key,from:me.from,msg:me.msg});case"room/exit":return new y({cause:me.cause});case"room/lock":return new R;case"room/migrate":return new A({host:me.host,code:me.code,password:me.password,token:me.token});case"room/get-audience":return new v({connections:me.connections});case"audience":return new M({key:se,count:me[1]});case"audience/count-group":return new n({key:me.key,choices:me.choices,meta:Xe});case"audience/text-ring":return new ce({key:me.key,elements:me.elements,meta:Xe});case"audience/g-counter":return new x({key:me.key,count:me.count,meta:Xe});case"audience/pn-counter":return new M({key:me.key,count:me.count,meta:Xe});default:return console.error(`failed to parse result of type ${se}: ${JSON.stringify(me,null,2)}`),me}}function Ee(se){let me=JSON.parse(se.data),Xe=me.opcode||me.type;return me.re?new $({pc:me.pc,re:me.re,opcode:Xe,result:Me(Xe,me.result)}):new k({pc:me.pc,opcode:Xe,result:Me(Xe,me.result)})}return Eb={parseResponseMessage:Ee},Eb}var yb,RI;function oJ(){if(RI)return yb;RI=1;const t=eJ(),e=R4(),r=tJ(),{CallError:i}=RT(),{ClientWelcome:s}=CT(),{CountGroup:a}=wT(),{DoodleEntity:n}=LT(),{ExternalRequestEntity:o}=rJ(),{GCounter:u}=IT(),{Notification:c}=C4(),{NumberEntity:f}=BT(),{ObjectEntity:h}=PT(),{PNCounter:p}=OT(),{Reply:g}=w4(),{Request:m}=nJ(),{StackEntity:T}=L4(),{TextEntity:x}=DT(),{TextMapEntity:v}=kT(),{TextRing:y}=UT(),{parseResponseMessage:R}=aJ(),A=1e3+Math.floor(Math.random()*500),k=13e3;class b extends r{constructor(w){if(super(),this.debug=w.debug||!1,!w.host)throw new Error("unable to create ecast WSClient: no host provided");if(this.host=w.host,!w.code)throw new Error("unable to create ecast WSClient: no room code provided");if(this.code=w.code,w.scheme?this.scheme=w.scheme:this.scheme="wss",w.secret&&w.id)this.id=w.id,this.secret=w.secret;else{switch(w.role){case"player":if(!w.name)throw new Error("unable to create ecast WSClient: no name provided");break;case"host":if(!w.token)throw new Error("unable to create ecast WSClient: tried to connect with host role but without host token");this.token=w.token;break;case"moderator":if(!w.password)throw new Error("unable to create ecast WSClient: tried to connect with moderator role but without password");break}w.password&&(this.password=w.password),w.twitchToken&&(this.twitchToken=w.twitchToken)}this.name=w.name,this.role=w.role,this.deviceId=w.deviceId,this.userId=w.userId,this.conn=null,this.seq=0,this.pending={},this.entities={},w.role=="host"&&(this.replaySince=w.replaySince||0,this.syncEntities=w.syncEntities||!1)}connect(){const w={id:this.id,role:this.role,name:this.name,format:"json","user-id":this.userId,password:this.password};this.deviceId&&(w["device-id"]=this.deviceId),this.twitchToken&&(w["twitch-token"]=this.twitchToken),this.secret&&(w.secret=this.secret),this.role==="host"&&(w["host-token"]=this.token,this.replaySince>0&&(w["replay-since"]=this.replaySince),this.syncEntities&&(w["sync-entities"]=this.syncEntities));const O=e.stringify(w),M=this.role==="audience"||this.id>1e7?`${this.scheme}://${this.host}/api/v2/audience/${this.code}/play?${O}`:`${this.scheme}://${this.host}/api/v2/rooms/${this.code}/play?${O}`;return new Promise(($,G)=>{let Z=!1,ce=!1,Y=ie=>{$(ie),Z=!0},J=ie=>{G(ie),Z=!0};this.conn=new t(M,"ecast-v0"),this.conn.onmessage=ie=>{this.debugLog(`recv <- ${JSON.stringify(JSON.parse(ie.data),null,2)}`);const le=R(ie);if(le instanceof g)this.onReply(le);else if(le instanceof c){if(le.result instanceof s)ce=!0,this.id=le.result.id,this.deviceId=le.result.deviceId,this.entities=le.result.entities,this.secret=le.result.secret,le.result.name&&(this.name=le.result.name),Y(le.result);else if(!Z){J(le.result);return}this.onNotification(le)}else console.error(`failed to parse response messsage: ${le}`)},this.conn.onerror=ie=>{Z?this.emit("socketError",ie):J(ie)},this.conn.onclose=ie=>{this.debugLog("onclose",ie.code),ce&&ie.code===1006?this.reconnect():this.emit("socketClose",ie)},this.conn.onopen=ie=>{this.emit("socketOpen",ie)}})}sleep(w){return new Promise(O=>setTimeout(O,w))}debugLog(...w){this.debug&&console.log(`%c[WSClient:${this.name}]`,"background-color:blue;color:white;",...w)}async reconnect(){this.disconnect(),this.debugLog("Attempting to reconnect");let w=1,O=A;for(;;)try{this.emit("connection",{status:"connecting",attempt:w}),await this.connect(),this.debugLog("reconnected"),this.emit("connection",{status:"connected"});return}catch(M){if(this.debugLog("reconnect error",M),M.code===1005||M.code===1e3){this.debugLog("unable to reconnect!",M),this.emit("socketClose",M);return}if(O>=k){this.debugLog("reconnect failed!",M),this.emit("socketClose",M);return}w+=1,this.debugLog("waiting",O),this.emit("connection",{status:"waiting",attempt:w}),await this.sleep(O),O=Math.min(k,O*2)}}disconnect(){this.conn&&(this.conn.close(),this.conn.onmessage=null,this.conn.onerror=null,this.conn.onopen=null,this.conn.onclose=null,this.conn=null)}onReply(w){const O=w.re,M=this.pending[O];if(!M){const $=new c(w);$.re=O,this.emit("notification",$);return}delete this.pending[O],w.result instanceof i?M.reject(w.result):M.resolve(w.result)}onNotification(w){typeof w.result.whenReceived=="function"&&w.result.whenReceived(this),this.emit("notification",w),this.emit(w.opcode,w.result)}send(w,O={}){if(!this.conn)throw new Error("No connection available");if(this.conn.readyState!==t.OPEN)throw new Error(`Socket not ready to send, readyState is ${this.conn.readyState}`);const M=++this.seq,$=new m({seq:M,opcode:w,params:O}),G=new Promise((ce,Y)=>{this.pending[M]={resolve:ce,reject:Y,request:$}}),Z=JSON.stringify($);return this.debugLog(`send -> ${Z}`),this.conn.send(Z),G}lockRoom(){return this.send("room/lock")}migrateRoom(w){return this.send("room/migrate",w)}setRoomPassword(w){return this.send("room/set-password",{password:w})}startAudience(){return this.send("room/start-audience")}getAudience(){return this.send("room/get-audience")}mail(w,O){return this.send("client/send",{from:this.id,to:w,body:O})}kick(w,O=!1,M){return this.send("client/kick",{id:w,ban:O,reason:M})}async drop(w){const O=await this.send("drop",{key:w});return delete this.entities[w],O}echo(w){return this.send("echo",{message:w})}async lock(w){const O=await this.send("lock",{key:w});return this.entities[w].meta.locked=!0,O}async createNumber(w,O={}){let M={key:w};const{val:$=0,acl:G,min:Z,max:ce,increment:Y,type:J}=O;M.val=$,G&&(M.acl=G),Z!=null&&(M.min=Z),ce!=null&&(M.max=ce),Y&&(M.increment=Y),J&&(M.type=J);const ie=await this.send("number/create",M);return this.entities[w]=new f({key:w,val:$,restrictions:{min:Z,max:ce,increment:Y,type:J},meta:{locked:!1}}),ie}async decrementNumber(w){const O=await this.send("number/decrement",{key:w});return this.entities[w].val=O.val,O}async getNumber(w){const O=await this.send("number/get",{key:w});return this.entities[w]?(this.entities[w].val=O.val,this.entities[w].restrictions=O.restrictions):this.entities[w]=O,O}async incrementNumber(w){const O=await this.send("number/increment",{key:w});return this.entities[w].val=O.val,O}async updateNumber(w,O){const M=await this.send("number/update",{key:w,val:O});return this.entities[w].val=O,M}async createObject(w,O,M){const $={key:w,val:O};M&&($.acl=M);const G=await this.send("object/create",$);return this.entities[w]=new h({key:w,val:O,meta:{locked:!1}}),G}echoObject(w){return this.send("object/echo",{message:w})}async getObject(w){const O=await this.send("object/get",{key:w});return this.entities[w]?(this.entities[w].val=O.val,this.entities[w].version=O.version,this.entities[w].from=O.from):this.entities[w]=O,O}async setObject(w,O,M){const $={key:w,val:O};M&&($.acl=M);const G=await this.send("object/set",$);return this.entities[w]=new h({key:w,val:O,meta:{locked:!1}}),G}async updateObject(w,O){const M=await this.send("object/update",{key:w,val:O});return this.entities[w]=new h({key:w,val:O,meta:{locked:!1}}),M}echoText(w){return this.send("text/echo",{message:w})}getText(w){return this.send("text/get",{key:w})}async createText(w,O,M){const $={key:w,val:O},{acl:G,accept:Z,reject:ce}=M;G&&($.acl=G),Z&&($.accept=Z),ce&&($.reject=ce);const Y=await this.send("text/create",$);return this.entities[w]=new x({key:w,text:O,meta:{locked:!1}}),Y}async setText(w,O,M){const $={key:w,val:O};M&&($.acl=M);const G=await this.send("text/set",$);return this.entities[w]=new x({key:w,text:O,meta:{locked:!1}}),G}async updateText(w,O){const M=await this.send("text/update",{key:w,val:O});return this.entities[w]=new x({key:w,text:O,meta:{locked:!1}}),M}async createTextMap(w,O={}){const{val:M,notifyHost:$,acl:G,accept:Z,reject:ce}=O;let Y={key:w};M&&(Y.val=O.val),$&&(Y.notifyHost=O.notifyHost),G&&(Y.acl=G),Z&&(Y.accept=Z),ce&&(Y.reject=ce);const J=await this.send("text-map/create",Y);return this.entities[w]=new v({key:w,acl:G,meta:{locked:!1}}),J}async syncTextMap(w,O){return await this.send("text-map/sync",{key:w,msg:O})}async getTextMap(w,O){const{includeNodes:M}=O;return await this.send("text-map/get",{key:w,includeNodes:M})}async createDoodle(w,O){let M={key:w};const{acl:$,colors:G,live:Z,maxLayer:ce,maxPoints:Y,size:J,weights:ie}=O;$&&(M.acl=$),G&&(M.colors=G),M.live=Z,ce!=null&&(M.maxLayer=ce),Y!=null&&(M.maxPoints=Y),J&&(M.size=J),ie&&(M.weights=ie);const le=await this.send("doodle/create",M);return this.entities[w]=new n({key:w,colors:G,lines:[],live:Z,maxLayer:M.maxLayer||0,maxPoints:M.maxPoints||0,size:J,weights:ie,meta:{locked:!1}}),le}async getDoodle(w){const O=await this.send("doodle/get",{key:w});return this.entities[w]?this.entities[w].lines=O.lines:this.entities[w]=O,O}async strokeDoodle(w,O){const{color:M,weight:$,layer:G,points:Z,brush:ce}=O,Y={color:M,weight:$,layer:G,points:Z};ce&&(Y.brush=ce);const J=await this.send("doodle/stroke",{key:w,...Y});return this.entities[w].lines.push(Y),J}async undoDoodle(w){const O=await this.send("doodle/undo",{key:w});return this.entities[w].lines.pop(),O}async createStack(w,O){const M={key:w};O&&(M.acl=O);const $=await this.send("stack/create",M);return this.entities[w]=new T({key:w,size:0,meta:{locked:!1}}),$}pushStack(w,O){return this.send("stack/push",{key:w,val:O})}bulkPushStack(w,O){return this.send("stack/bulkpush",{key:w,vals:O})}peekStack(w,O){return this.send("stack/peek",{key:w,size:O})}popStack(w){return this.send("stack/pop",{key:w})}async createCountGroup(w,O){const M=await this.send("audience/count-group/create",{name:w,options:O});return this.entities[w]=new a({key:w,choices:O,meta:{locked:!1}}),M}incrementCountGroupCounter(w,O,M=1){return this.send("audience/count-group/increment",{name:w,vote:O,times:M})}getCountGroup(w){return this.send("audience/count-group/get",{name:w})}async createGCounter(w,O){const M=await this.send("audience/g-counter/create",{key:w,count:O});return this.entities[w]=new u({key:w,count:O,meta:{locked:!1}}),M}incrementGCounter(w,O){return this.send("audience/g-counter/increment",{key:w,times:O})}getGCounter(w){return this.send("audience/g-counter/get",{key:w})}async createPNCounter(w,O){const M=await this.send("audience/pn-counter/create",{key:w,count:O});return this.entities[w]=new p({key:w,count:O,meta:{locked:!1}}),M}incrementPNCounter(w,O){return this.send("audience/pn-counter/increment",{key:w,times:O})}decrementPNCounter(w,O){return this.send("audience/pn-counter/decrement",{key:w,times:O})}getPNCounter(w){return this.send("audience/pn-counter/get",{key:w})}async createTextRing(w,O){const M={key:w},{limit:$,accept:G,reject:Z}=O;$&&(M.limit=$),G&&(M.accept=G),Z&&(M.reject=Z);const ce=await this.send("audience/text-ring/create",M);return this.entities[w]=new y({key:w,elements:[],limit:$,meta:{locked:!1}}),ce}getTextRing(w){return this.send("audience/text-ring/get",{name:w})}pushTextRing(w,O){return this.send("audience/text-ring/push",{name:w,text:O})}async createExternalRequest(w,O,M,$){const G={key:w,service:O,payload:M};$&&(G.acl=$);const Z=await this.send("external-request/create",G);return this.entities[w]=new o({key:w,val:{service:O,status:"pending"},meta:{locked:!1}}),Z}}return yb={WSClient:b},yb}var Tb,CI;function uJ(){if(CI)return Tb;CI=1;const{APIClient:t}=JQ(),{WSClient:e}=oJ(),{CreateRoomReply:r,GetRoomReply:i}=ud(),{ClientWelcome:s,ClientDisconnected:a}=CT(),{ArtifactEntity:n}=I4(),{GCounter:o}=IT(),{NumberEntity:u}=BT(),{TextEntity:c}=DT(),{DoodleEntity:f}=LT(),{ObjectEntity:h}=PT(),{CountGroup:p}=wT(),{DropEntity:g}=B4(),{OK:m}=P4(),{RoomExit:T}=ud(),{TextRing:x}=UT(),{TextMapEntity:v}=kT(),{PNCounter:y}=OT();return Tb={APIClient:t,WSClient:e,ClientWelcome:s,CreateRoomReply:r,DropEntity:g,GetRoomReply:i,ClientDisconnected:a,RoomExit:T,OK:m,ArtifactEntity:n,DoodleEntity:f,NumberEntity:u,CountGroup:p,GCounter:o,ObjectEntity:h,PNCounter:y,TextEntity:c,TextRing:x,TextMapEntity:v},Tb}var fn=uJ();function Ly(...t){console.log(...t)}class lJ{constructor(e,r){Be(this,"client");Be(this,"room");Be(this,"items",[]);Be(this,"autoMarkWindow",150);Be(this,"autoMarkTimeout");Be(this,"autoMarkerCount",0);Be(this,"automarkPendingLabel");Be(this,"automarkIgnoredKeys",[]);Be(this,"incomingIgnoredKeys",[]);Be(this,"outgoingIgnoredKeys",[]);window.tv.debug=this.expose(),this.client=e,this.room=r,Object.keys(this.client.entities).forEach(i=>{this.pushEntity(this.client.entities[i])}),this.items.length&&this.setMarker("welcome"),e.on("artifact",i=>this.pushEntity(i)),e.on("doodle",i=>this.pushEntity(i)),e.on("drop",i=>this.pushEntity(i)),e.on("number",i=>this.pushEntity(i)),e.on("object",i=>this.pushEntity(i)),e.on("text",i=>this.pushEntity(i)),this.hijackConsole(),this.hijackSend()}get markerCount(){return this.items.reduce((e,r)=>"marker"in r?e+1:e,0)}reset(){this.items=[]}setAutomarkIgnoredKeys(e){this.automarkIgnoredKeys=e}setIncomingIgnoredKeys(e){this.incomingIgnoredKeys=e}setOutgoingIgnoredKeys(e){this.outgoingIgnoredKeys=e}hijackConsole(){const e=console.error.bind(console);console.error=(...r)=>{this.pushError(r),e.apply(console,r)}}hijackSend(){window.Proxy&&(this.client.send=new Proxy(this.client.send,{apply:(e,r,i)=>(this.pushSend(i),e.apply(r,i))}))}pushEntity(e){Ly("[Debug] pushEntity",e),!this.incomingIgnoredKeys.includes(e.key)&&(e instanceof fn.ArtifactEntity?this.items.push({type:"artifact",...e}):e instanceof fn.DoodleEntity?this.items.push({type:"doodle",...e}):e instanceof fn.DropEntity?this.items.push({key:e.key,type:"drop"}):e instanceof fn.NumberEntity?this.items.push({key:e.key,type:"number",value:e.val,meta:e.meta,restrictions:e.restrictions}):e instanceof fn.ObjectEntity?(e.val.kind&&(this.automarkPendingLabel=e.val.kind),this.items.push({key:e.key,type:"object",value:e.val,meta:e.meta})):e instanceof fn.TextEntity&&this.items.push({key:e.key,type:"text",value:e.text,meta:e.meta}),!this.automarkIgnoredKeys.includes(e.key)&&this.startAutoMarkTimeout())}pushError(...e){this.items.push({error:e})}pushSend(e){this.outgoingIgnoredKeys.includes(e[1].key)||this.items.push({opcode:e[0],arguments:e[1]})}setMarker(e){const r=this.items.filter(s=>s.marker===e).length,i=r?`label-${r}`:e;this.items.push({marker:i}),this.clearAutoMarkTimeout()}setAutoMarker(){const e=this.automarkPendingLabel??"marker";this.items.push({marker:`${this.autoMarkerCount}-${e}`}),this.autoMarkerCount+=1,delete this.automarkPendingLabel,this.clearAutoMarkTimeout()}startAutoMarkTimeout(){this.clearAutoMarkTimeout(),this.autoMarkTimeout=window.setTimeout(()=>{this.setAutoMarker()},this.autoMarkWindow)}clearAutoMarkTimeout(){this.autoMarkTimeout&&(window.clearTimeout(this.autoMarkTimeout),delete this.autoMarkTimeout)}async send(e){if(!this.client)return;const r=await this.sendToEcast();r&&await this.sendToSlack(r,e)}getSendData(){return{appTag:this.room.appTag,state:{version:3,room:{code:this.room.code,appTag:this.room.appTag},client:{id:this.client.id,name:this.client.name,role:this.client.role},items:this.items}}}async sendToEcast(){const e=this.getSendData();try{const i=await(await fetch("https://ecast.jackboxgames.com/api/v2/controller/state",{method:"POST",body:JSON.stringify(e)})).json();if(!i.body||!i.body.url)return console.warn(i),null;const s=i.body.url.split("/"),a=s[s.length-1].replace(".json",""),n=s[s.length-2];return{json:i.body.url,dev:`https://dev.jackbox.tv/debug/cloud/${n}/${a}/`,local:`http://localhost:9090/debug/cloud/${n}/${a}/`}}catch(r){return console.error("[Debug] sendToEcast",r),null}}async sendToSlack(e,r){if(!this.room||!this.client)return;const i=Wu(this.room.appTag),s=this.items.length-this.markerCount,a=`${this.markerCount} ${this.markerCount===1?"marker":"markers"}`,n=`${s} ${s===1?"entity":"entities"}`,o=[{type:"mrkdwn",text:`${this.client.role}:${this.client.id}`},{type:"mrkdwn",text:`*Version:* ${window.tv.manifest.loader.version}`},{type:"mrkdwn",text:`*Domain:* ${window.location.hostname}`}];try{const u="https://hooks.slack.com/services/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",p={unfurl_links:!1,blocks:[{type:"section",text:{type:"mrkdwn",text:`*${(i==null?void 0:i.name)??this.room.appTag} :${this.room.appTag}:* (${a}, ${n}) 

 From: ${this.client.name},
${r}`}},{type:"context",elements:o},{type:"actions",elements:[{type:"button",action_id:"actionId-0",url:e.json,text:{type:"plain_text",text:"JSON",emoji:!0}},{type:"button",action_id:"actionId-3",url:e.local,text:{type:"plain_text",text:"localhost:9090",emoji:!0}},{type:"button",action_id:"actionId-1",url:e.dev,text:{type:"plain_text",text:"dev.jackbox.tv",emoji:!0}}]}]};if(this.room){p.icon_emoji=this.room.appTag;const T=Wu(this.room.appTag);p.username=`DebugRecorder ${T?T.name:this.room.appTag}`}const m=await(await fetch(u,{method:"POST",body:JSON.stringify(p)})).text();Ly("[Debug] sendToSlack",m)}catch(u){console.error("[Debug] sendToSlack",u)}}download(e){var n;const r=e??`${((n=this.room)==null?void 0:n.appTag)??"unknown"}-debug`,i=this.getSendData().state,s=JSON.stringify(i,null,4),a=document.createElement("a");a.setAttribute("href",`data:text/json;charset=utf-8,${encodeURIComponent(s)}`),a.setAttribute("download",`${r}.json`),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}open(){var s;const e=this.getSendData().state,r=JSON.stringify(e,null,4),i=window.open();i.document.write(`
            <iframe src="data:text/json;charset=utf-8,${encodeURIComponent(r)}" frameborder="0" style="border:0;
                top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" allowfullscreen>
            </iframe>
        `),i.document.title=`${(s=this.room)==null?void 0:s.appTag} debug JSON`,i.document.close(),i.focus()}expose(){return{print:()=>this.items,reset:()=>this.reset(),setMarker:e=>this.setMarker(e),download:e=>this.download(e),open:()=>this.open(),send:e=>void this.send(e)}}}function O4(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Zl={exports:{}},cJ=Zl.exports,wI;function fJ(){return wI||(wI=1,function(t,e){(function(r,i){i(e)})(cJ,function(r){var i=typeof window<"u"?window:typeof $r<"u"?$r:typeof self<"u"?self:{},s=function(ne,U){if(U=U.split(":")[0],ne=+ne,!ne)return!1;switch(U){case"http":case"ws":return ne!==80;case"https":case"wss":return ne!==443;case"ftp":return ne!==21;case"gopher":return ne!==70;case"file":return!1}return ne!==0},a=Object.prototype.hasOwnProperty,n;function o(ae){try{return decodeURIComponent(ae.replace(/\+/g," "))}catch{return null}}function u(ae){try{return encodeURIComponent(ae)}catch{return null}}function c(ae){for(var ne=/([^=?#&]+)=?([^&]*)/g,U={},K;K=ne.exec(ae);){var te=o(K[1]),ge=o(K[2]);te===null||ge===null||te in U||(U[te]=ge)}return U}function f(ae,ne){ne=ne||"";var U=[],K,te;typeof ne!="string"&&(ne="?");for(te in ae)if(a.call(ae,te)){if(K=ae[te],!K&&(K===null||K===n||isNaN(K))&&(K=""),te=u(te),K=u(K),te===null||K===null)continue;U.push(te+"="+K)}return U.length?ne+U.join("&"):""}var h=f,p=c,g={stringify:h,parse:p},m=/[\n\r\t]/g,T=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,x=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,v=/^[a-zA-Z]:/,y=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/;function R(ae){return(ae||"").toString().replace(y,"")}var A=[["#","hash"],["?","query"],function(ne,U){return C(U.protocol)?ne.replace(/\\/g,"/"):ne},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],k={hash:1,query:1};function b(ae){var ne;typeof window<"u"?ne=window:typeof i<"u"?ne=i:typeof self<"u"?ne=self:ne={};var U=ne.location||{};ae=ae||U;var K={},te=typeof ae,ge;if(ae.protocol==="blob:")K=new M(unescape(ae.pathname),{});else if(te==="string"){K=new M(ae,{});for(ge in k)delete K[ge]}else if(te==="object"){for(ge in ae)ge in k||(K[ge]=ae[ge]);K.slashes===void 0&&(K.slashes=T.test(ae.href))}return K}function C(ae){return ae==="file:"||ae==="ftp:"||ae==="http:"||ae==="https:"||ae==="ws:"||ae==="wss:"}function w(ae,ne){ae=R(ae),ae=ae.replace(m,""),ne=ne||{};var U=x.exec(ae),K=U[1]?U[1].toLowerCase():"",te=!!U[2],ge=!!U[3],re=0,H;return te?ge?(H=U[2]+U[3]+U[4],re=U[2].length+U[3].length):(H=U[2]+U[4],re=U[2].length):ge?(H=U[3]+U[4],re=U[3].length):H=U[4],K==="file:"?re>=2&&(H=H.slice(2)):C(K)?H=U[4]:K?te&&(H=H.slice(2)):re>=2&&C(ne.protocol)&&(H=U[4]),{protocol:K,slashes:te||C(K),slashesCount:re,rest:H}}function O(ae,ne){if(ae==="")return ne;for(var U=(ne||"/").split("/").slice(0,-1).concat(ae.split("/")),K=U.length,te=U[K-1],ge=!1,re=0;K--;)U[K]==="."?U.splice(K,1):U[K]===".."?(U.splice(K,1),re++):re&&(K===0&&(ge=!0),U.splice(K,1),re--);return ge&&U.unshift(""),(te==="."||te==="..")&&U.push(""),U.join("/")}function M(ae,ne,U){if(ae=R(ae),ae=ae.replace(m,""),!(this instanceof M))return new M(ae,ne,U);var K,te,ge,re,H,P,Ae=A.slice(),Ne=typeof ne,S=this,D=0;for(Ne!=="object"&&Ne!=="string"&&(U=ne,ne=null),U&&typeof U!="function"&&(U=g.parse),ne=b(ne),te=w(ae||"",ne),K=!te.protocol&&!te.slashes,S.slashes=te.slashes||K&&ne.slashes,S.protocol=te.protocol||ne.protocol||"",ae=te.rest,(te.protocol==="file:"&&(te.slashesCount!==2||v.test(ae))||!te.slashes&&(te.protocol||te.slashesCount<2||!C(S.protocol)))&&(Ae[3]=[/(.*)/,"pathname"]);D<Ae.length;D++){if(re=Ae[D],typeof re=="function"){ae=re(ae,S);continue}ge=re[0],P=re[1],ge!==ge?S[P]=ae:typeof ge=="string"?(H=ge==="@"?ae.lastIndexOf(ge):ae.indexOf(ge),~H&&(typeof re[2]=="number"?(S[P]=ae.slice(0,H),ae=ae.slice(H+re[2])):(S[P]=ae.slice(H),ae=ae.slice(0,H)))):(H=ge.exec(ae))&&(S[P]=H[1],ae=ae.slice(0,H.index)),S[P]=S[P]||K&&re[3]&&ne[P]||"",re[4]&&(S[P]=S[P].toLowerCase())}U&&(S.query=U(S.query)),K&&ne.slashes&&S.pathname.charAt(0)!=="/"&&(S.pathname!==""||ne.pathname!=="")&&(S.pathname=O(S.pathname,ne.pathname)),S.pathname.charAt(0)!=="/"&&C(S.protocol)&&(S.pathname="/"+S.pathname),s(S.port,S.protocol)||(S.host=S.hostname,S.port=""),S.username=S.password="",S.auth&&(H=S.auth.indexOf(":"),~H?(S.username=S.auth.slice(0,H),S.username=encodeURIComponent(decodeURIComponent(S.username)),S.password=S.auth.slice(H+1),S.password=encodeURIComponent(decodeURIComponent(S.password))):S.username=encodeURIComponent(decodeURIComponent(S.auth)),S.auth=S.password?S.username+":"+S.password:S.username),S.origin=S.protocol!=="file:"&&C(S.protocol)&&S.host?S.protocol+"//"+S.host:"null",S.href=S.toString()}function $(ae,ne,U){var K=this;switch(ae){case"query":typeof ne=="string"&&ne.length&&(ne=(U||g.parse)(ne)),K[ae]=ne;break;case"port":K[ae]=ne,s(ne,K.protocol)?ne&&(K.host=K.hostname+":"+ne):(K.host=K.hostname,K[ae]="");break;case"hostname":K[ae]=ne,K.port&&(ne+=":"+K.port),K.host=ne;break;case"host":K[ae]=ne,/:\d+$/.test(ne)?(ne=ne.split(":"),K.port=ne.pop(),K.hostname=ne.join(":")):(K.hostname=ne,K.port="");break;case"protocol":K.protocol=ne.toLowerCase(),K.slashes=!U;break;case"pathname":case"hash":if(ne){var te=ae==="pathname"?"/":"#";K[ae]=ne.charAt(0)!==te?te+ne:ne}else K[ae]=ne;break;case"username":case"password":K[ae]=encodeURIComponent(ne);break;case"auth":var ge=ne.indexOf(":");~ge?(K.username=ne.slice(0,ge),K.username=encodeURIComponent(decodeURIComponent(K.username)),K.password=ne.slice(ge+1),K.password=encodeURIComponent(decodeURIComponent(K.password))):K.username=encodeURIComponent(decodeURIComponent(ne))}for(var re=0;re<A.length;re++){var H=A[re];H[4]&&(K[H[1]]=K[H[1]].toLowerCase())}return K.auth=K.password?K.username+":"+K.password:K.username,K.origin=K.protocol!=="file:"&&C(K.protocol)&&K.host?K.protocol+"//"+K.host:"null",K.href=K.toString(),K}function G(ae){(!ae||typeof ae!="function")&&(ae=g.stringify);var ne,U=this,K=U.host,te=U.protocol;te&&te.charAt(te.length-1)!==":"&&(te+=":");var ge=te+(U.protocol&&U.slashes||C(U.protocol)?"//":"");return U.username?(ge+=U.username,U.password&&(ge+=":"+U.password),ge+="@"):U.password?(ge+=":"+U.password,ge+="@"):U.protocol!=="file:"&&C(U.protocol)&&!K&&U.pathname!=="/"&&(ge+="@"),K[K.length-1]===":"&&(K+=":"),ge+=K+U.pathname,ne=typeof U.query=="object"?ae(U.query):U.query,ne&&(ge+=ne.charAt(0)!=="?"?"?"+ne:ne),U.hash&&(ge+=U.hash),ge}M.prototype={set:$,toString:G},M.extractProtocol=w,M.location=b,M.trimLeft=R,M.qs=g;var Z=M;function ce(ae,ne){setTimeout(function(U){return ae.call(U)},4,ne)}function Y(ae,ne){typeof process<"u"&&console[ae].call(null,ne)}function J(ae,ne){ae===void 0&&(ae=[]);var U=[];return ae.forEach(function(K){ne(K)||U.push(K)}),U}function ie(ae,ne){ae===void 0&&(ae=[]);var U=[];return ae.forEach(function(K){ne(K)&&U.push(K)}),U}var le=function(){this.listeners={}};le.prototype.addEventListener=function(ne,U){typeof U=="function"&&(Array.isArray(this.listeners[ne])||(this.listeners[ne]=[]),ie(this.listeners[ne],function(K){return K===U}).length===0&&this.listeners[ne].push(U))},le.prototype.removeEventListener=function(ne,U){var K=this.listeners[ne];this.listeners[ne]=J(K,function(te){return te===U})},le.prototype.dispatchEvent=function(ne){for(var U=this,K=[],te=arguments.length-1;te-- >0;)K[te]=arguments[te+1];var ge=ne.type,re=this.listeners[ge];return Array.isArray(re)?(re.forEach(function(H){K.length>0?H.apply(U,K):H.call(U,ne)}),!0):!1};function Te(ae){var ne=ae.indexOf("?");return ne>=0?ae.slice(0,ne):ae}var Me=function(){this.urlMap={}};Me.prototype.attachWebSocket=function(ne,U){var K=Te(U),te=this.urlMap[K];if(te&&te.server&&te.websockets.indexOf(ne)===-1)return te.websockets.push(ne),te.server},Me.prototype.addMembershipToRoom=function(ne,U){var K=this.urlMap[Te(ne.url)];K&&K.server&&K.websockets.indexOf(ne)!==-1&&(K.roomMemberships[U]||(K.roomMemberships[U]=[]),K.roomMemberships[U].push(ne))},Me.prototype.attachServer=function(ne,U){var K=Te(U),te=this.urlMap[K];if(!te)return this.urlMap[K]={server:ne,websockets:[],roomMemberships:{}},ne},Me.prototype.serverLookup=function(ne){var U=Te(ne),K=this.urlMap[U];if(K)return K.server},Me.prototype.websocketsLookup=function(ne,U,K){var te=Te(ne),ge,re=this.urlMap[te];if(ge=re?re.websockets:[],U){var H=re.roomMemberships[U];ge=H||[]}return K?ge.filter(function(P){return P!==K}):ge},Me.prototype.removeServer=function(ne){delete this.urlMap[Te(ne)]},Me.prototype.removeWebSocket=function(ne,U){var K=Te(U),te=this.urlMap[K];te&&(te.websockets=J(te.websockets,function(ge){return ge===ne}))},Me.prototype.removeMembershipFromRoom=function(ne,U){var K=this.urlMap[Te(ne.url)],te=K.roomMemberships[U];K&&te!==null&&(K.roomMemberships[U]=J(te,function(ge){return ge===ne}))};var Ee=new Me,se={CLOSE_NORMAL:1e3,CLOSE_NO_STATUS:1005,CLOSE_ABNORMAL:1006},me={CONSTRUCTOR_ERROR:"Failed to construct 'WebSocket':",CLOSE_ERROR:"Failed to execute 'close' on 'WebSocket':",EVENT:{MESSAGE:"Failed to construct 'MessageEvent':",CLOSE:"Failed to construct 'CloseEvent':"}},Xe=function(){};Xe.prototype.stopPropagation=function(){},Xe.prototype.stopImmediatePropagation=function(){},Xe.prototype.initEvent=function(ne,U,K){ne===void 0&&(ne="undefined"),U===void 0&&(U=!1),K===void 0&&(K=!1),this.type=""+ne,this.bubbles=!!U,this.cancelable=!!K};var nt=function(ae){function ne(U,K){if(K===void 0&&(K={}),ae.call(this),!U)throw new TypeError(me.EVENT_ERROR+" 1 argument required, but only 0 present.");if(typeof K!="object")throw new TypeError(me.EVENT_ERROR+" parameter 2 ('eventInitDict') is not an object.");var te=K.bubbles,ge=K.cancelable;this.type=""+U,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=ge?!!ge:!1,this.cancelBubble=!1,this.bubbles=te?!!te:!1}return ae&&(ne.__proto__=ae),ne.prototype=Object.create(ae&&ae.prototype),ne.prototype.constructor=ne,ne}(Xe),ot=function(ae){function ne(U,K){if(K===void 0&&(K={}),ae.call(this),!U)throw new TypeError(me.EVENT.MESSAGE+" 1 argument required, but only 0 present.");if(typeof K!="object")throw new TypeError(me.EVENT.MESSAGE+" parameter 2 ('eventInitDict') is not an object");var te=K.bubbles,ge=K.cancelable,re=K.data,H=K.origin,P=K.lastEventId,Ae=K.ports;this.type=""+U,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=ge?!!ge:!1,this.canncelBubble=!1,this.bubbles=te?!!te:!1,this.origin=""+H,this.ports=typeof Ae>"u"?null:Ae,this.data=typeof re>"u"?null:re,this.lastEventId=""+(P||"")}return ae&&(ne.__proto__=ae),ne.prototype=Object.create(ae&&ae.prototype),ne.prototype.constructor=ne,ne}(Xe),pt=function(ae){function ne(U,K){if(K===void 0&&(K={}),ae.call(this),!U)throw new TypeError(me.EVENT.CLOSE+" 1 argument required, but only 0 present.");if(typeof K!="object")throw new TypeError(me.EVENT.CLOSE+" parameter 2 ('eventInitDict') is not an object");var te=K.bubbles,ge=K.cancelable,re=K.code,H=K.reason,P=K.wasClean;this.type=""+U,this.timeStamp=Date.now(),this.target=null,this.srcElement=null,this.returnValue=!0,this.isTrusted=!1,this.eventPhase=0,this.defaultPrevented=!1,this.currentTarget=null,this.cancelable=ge?!!ge:!1,this.cancelBubble=!1,this.bubbles=te?!!te:!1,this.code=typeof re=="number"?parseInt(re,10):0,this.reason=""+(H||""),this.wasClean=P?!!P:!1}return ae&&(ne.__proto__=ae),ne.prototype=Object.create(ae&&ae.prototype),ne.prototype.constructor=ne,ne}(Xe);function qe(ae){var ne=ae.type,U=ae.target,K=new nt(ne);return U&&(K.target=U,K.srcElement=U,K.currentTarget=U),K}function Ye(ae){var ne=ae.type,U=ae.origin,K=ae.data,te=ae.target,ge=new ot(ne,{data:K,origin:U});return te&&(ge.target=te,ge.srcElement=te,ge.currentTarget=te),ge}function at(ae){var ne=ae.code,U=ae.reason,K=ae.type,te=ae.target,ge=ae.wasClean;ge||(ge=ne===se.CLOSE_NORMAL||ne===se.CLOSE_NO_STATUS);var re=new pt(K,{code:ne,reason:U,wasClean:ge});return te&&(re.target=te,re.srcElement=te,re.currentTarget=te),re}function lt(ae,ne,U){ae.readyState=ke.CLOSING;var K=Ee.serverLookup(ae.url),te=at({type:"close",target:ae.target,code:ne,reason:U});ce(function(){Ee.removeWebSocket(ae,ae.url),ae.readyState=ke.CLOSED,ae.dispatchEvent(te),K&&K.dispatchEvent(te,K)},ae)}function j(ae,ne,U){ae.readyState=ke.CLOSING;var K=Ee.serverLookup(ae.url),te=at({type:"close",target:ae.target,code:ne,reason:U,wasClean:!1}),ge=qe({type:"error",target:ae.target});ce(function(){Ee.removeWebSocket(ae,ae.url),ae.readyState=ke.CLOSED,ae.dispatchEvent(ge),ae.dispatchEvent(te),K&&K.dispatchEvent(te,K)},ae)}function ue(ae){return Object.prototype.toString.call(ae)!=="[object Blob]"&&!(ae instanceof ArrayBuffer)&&(ae=String(ae)),ae}var oe=new WeakMap;function be(ae){if(oe.has(ae))return oe.get(ae);var ne=new Proxy(ae,{get:function(K,te){if(te==="close")return function(H){H===void 0&&(H={});var P=H.code||se.CLOSE_NORMAL,Ae=H.reason||"";lt(ne,P,Ae)};if(te==="send")return function(H){H=ue(H),ae.dispatchEvent(Ye({type:"message",data:H,origin:this.url,target:ae}))};var ge=function(re){return re==="message"?"server::"+re:re};return te==="on"?function(H,P){ae.addEventListener(ge(H),P)}:te==="off"?function(H,P){ae.removeEventListener(ge(H),P)}:te==="target"?ae:K[te]}});return oe.set(ae,ne),ne}function Le(ae){var ne=encodeURIComponent(ae).match(/%[89ABab]/g);return ae.length+(ne?ne.length:0)}function ye(ae){var ne=new Z(ae),U=ne.pathname,K=ne.protocol,te=ne.hash;if(!ae)throw new TypeError(me.CONSTRUCTOR_ERROR+" 1 argument required, but only 0 present.");if(U||(ne.pathname="/"),K==="")throw new SyntaxError(me.CONSTRUCTOR_ERROR+" The URL '"+ne.toString()+"' is invalid.");if(K!=="ws:"&&K!=="wss:")throw new SyntaxError(me.CONSTRUCTOR_ERROR+" The URL's scheme must be either 'ws' or 'wss'. '"+K+"' is not allowed.");if(te!=="")throw new SyntaxError(me.CONSTRUCTOR_ERROR+" The URL contains a fragment identifier ('"+te+"'). Fragment identifiers are not allowed in WebSocket URLs.");return ne.toString()}function De(ae){if(ae===void 0&&(ae=[]),!Array.isArray(ae)&&typeof ae!="string")throw new SyntaxError(me.CONSTRUCTOR_ERROR+" The subprotocol '"+ae.toString()+"' is invalid.");typeof ae=="string"&&(ae=[ae]);var ne=ae.map(function(K){return{count:1,protocol:K}}).reduce(function(K,te){return K[te.protocol]=(K[te.protocol]||0)+te.count,K},{}),U=Object.keys(ne).filter(function(K){return ne[K]>1});if(U.length>0)throw new SyntaxError(me.CONSTRUCTOR_ERROR+" The subprotocol '"+U[0]+"' is duplicated.");return ae}var ke=function(ae){function ne(K,te){ae.call(this),this._onopen=null,this._onmessage=null,this._onerror=null,this._onclose=null,this.url=ye(K),te=De(te),this.protocol=te[0]||"",this.binaryType="blob",this.readyState=ne.CONNECTING;var ge=be(this),re=Ee.attachWebSocket(ge,this.url);ce(function(){if(this.readyState===ne.CONNECTING)if(re)if(re.options.verifyClient&&typeof re.options.verifyClient=="function"&&!re.options.verifyClient())this.readyState=ne.CLOSED,Y("error","WebSocket connection to '"+this.url+"' failed: HTTP Authentication failed; no valid credentials available"),Ee.removeWebSocket(ge,this.url),this.dispatchEvent(qe({type:"error",target:this})),this.dispatchEvent(at({type:"close",target:this,code:se.CLOSE_NORMAL}));else{if(re.options.selectProtocol&&typeof re.options.selectProtocol=="function"){var P=re.options.selectProtocol(te),Ae=P!=="",Ne=te.indexOf(P)!==-1;if(Ae&&!Ne){this.readyState=ne.CLOSED,Y("error","WebSocket connection to '"+this.url+"' failed: Invalid Sub-Protocol"),Ee.removeWebSocket(ge,this.url),this.dispatchEvent(qe({type:"error",target:this})),this.dispatchEvent(at({type:"close",target:this,code:se.CLOSE_NORMAL}));return}this.protocol=P}this.readyState=ne.OPEN,this.dispatchEvent(qe({type:"open",target:this})),re.dispatchEvent(qe({type:"connection"}),ge)}else this.readyState=ne.CLOSED,this.dispatchEvent(qe({type:"error",target:this})),this.dispatchEvent(at({type:"close",target:this,code:se.CLOSE_NORMAL})),Y("error","WebSocket connection to '"+this.url+"' failed")},this)}ae&&(ne.__proto__=ae),ne.prototype=Object.create(ae&&ae.prototype),ne.prototype.constructor=ne;var U={onopen:{},onmessage:{},onclose:{},onerror:{}};return U.onopen.get=function(){return this._onopen},U.onmessage.get=function(){return this._onmessage},U.onclose.get=function(){return this._onclose},U.onerror.get=function(){return this._onerror},U.onopen.set=function(K){this.removeEventListener("open",this._onopen),this._onopen=K,this.addEventListener("open",K)},U.onmessage.set=function(K){this.removeEventListener("message",this._onmessage),this._onmessage=K,this.addEventListener("message",K)},U.onclose.set=function(K){this.removeEventListener("close",this._onclose),this._onclose=K,this.addEventListener("close",K)},U.onerror.set=function(K){this.removeEventListener("error",this._onerror),this._onerror=K,this.addEventListener("error",K)},ne.prototype.send=function(te){var ge=this;if(this.readyState===ne.CONNECTING)throw new Error("Failed to execute 'send' on 'WebSocket': Still in CONNECTING state");var re=Ye({type:"server::message",origin:this.url,data:ue(te)}),H=Ee.serverLookup(this.url);H&&ce(function(){ge.dispatchEvent(re,te)},H)},ne.prototype.close=function(te,ge){if(te!==void 0&&(typeof te!="number"||te!==1e3&&(te<3e3||te>4999)))throw new TypeError(me.CLOSE_ERROR+" The code must be either 1000, or between 3000 and 4999. "+te+" is neither.");if(ge!==void 0){var re=Le(ge);if(re>123)throw new SyntaxError(me.CLOSE_ERROR+" The message must not be greater than 123 bytes.")}if(!(this.readyState===ne.CLOSING||this.readyState===ne.CLOSED)){var H=be(this);this.readyState===ne.CONNECTING?j(H,te||se.CLOSE_ABNORMAL,ge):lt(H,te||se.CLOSE_NO_STATUS,ge)}},Object.defineProperties(ne.prototype,U),ne}(le);ke.CONNECTING=0,ke.prototype.CONNECTING=ke.CONNECTING,ke.OPEN=1,ke.prototype.OPEN=ke.OPEN,ke.CLOSING=2,ke.prototype.CLOSING=ke.CLOSING,ke.CLOSED=3,ke.prototype.CLOSED=ke.CLOSED;var z=function(ae){function ne(K,te){var ge=this;K===void 0&&(K="socket.io"),te===void 0&&(te=""),ae.call(this),this.binaryType="blob";var re=new Z(K);re.pathname||(re.pathname="/"),this.url=re.toString(),this.readyState=ne.CONNECTING,this.protocol="",this.target=this,typeof te=="string"||typeof te=="object"&&te!==null?this.protocol=te:Array.isArray(te)&&te.length>0&&(this.protocol=te[0]);var H=Ee.attachWebSocket(this,this.url);ce(function(){H?(this.readyState=ne.OPEN,H.dispatchEvent(qe({type:"connection"}),H,this),H.dispatchEvent(qe({type:"connect"}),H,this),this.dispatchEvent(qe({type:"connect",target:this}))):(this.readyState=ne.CLOSED,this.dispatchEvent(qe({type:"error",target:this})),this.dispatchEvent(at({type:"close",target:this,code:se.CLOSE_NORMAL})),Y("error","Socket.io connection to '"+this.url+"' failed"))},this),this.addEventListener("close",function(P){ge.dispatchEvent(at({type:"disconnect",target:P.target,code:P.code}))})}ae&&(ne.__proto__=ae),ne.prototype=Object.create(ae&&ae.prototype),ne.prototype.constructor=ne;var U={broadcast:{}};return ne.prototype.close=function(){if(this.readyState===ne.OPEN){var te=Ee.serverLookup(this.url);return Ee.removeWebSocket(this,this.url),this.readyState=ne.CLOSED,this.dispatchEvent(at({type:"close",target:this,code:se.CLOSE_NORMAL})),te&&te.dispatchEvent(at({type:"disconnect",target:this,code:se.CLOSE_NORMAL}),te),this}},ne.prototype.disconnect=function(){return this.close()},ne.prototype.emit=function(te){for(var ge=[],re=arguments.length-1;re-- >0;)ge[re]=arguments[re+1];if(this.readyState!==ne.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var H=Ye({type:te,origin:this.url,data:ge}),P=Ee.serverLookup(this.url);return P&&P.dispatchEvent.apply(P,[H].concat(ge)),this},ne.prototype.send=function(te){return this.emit("message",te),this},U.broadcast.get=function(){if(this.readyState!==ne.OPEN)throw new Error("SocketIO is already in CLOSING or CLOSED state");var K=this,te=Ee.serverLookup(this.url);if(!te)throw new Error("SocketIO can not find a server at the specified URL ("+this.url+")");return{emit:function(re,H){return te.emit(re,H,{websockets:Ee.websocketsLookup(K.url,null,K)}),K},to:function(re){return te.to(re,K)},in:function(re){return te.in(re,K)}}},ne.prototype.on=function(te,ge){return this.addEventListener(te,ge),this},ne.prototype.off=function(te,ge){this.removeEventListener(te,ge)},ne.prototype.hasListeners=function(te){var ge=this.listeners[te];return Array.isArray(ge)?!!ge.length:!1},ne.prototype.join=function(te){Ee.addMembershipToRoom(this,te)},ne.prototype.leave=function(te){Ee.removeMembershipFromRoom(this,te)},ne.prototype.to=function(te){return this.broadcast.to(te)},ne.prototype.in=function(){return this.to.apply(null,arguments)},ne.prototype.dispatchEvent=function(te){for(var ge=this,re=[],H=arguments.length-1;H-- >0;)re[H]=arguments[H+1];var P=te.type,Ae=this.listeners[P];if(!Array.isArray(Ae))return!1;Ae.forEach(function(Ne){re.length>0?Ne.apply(ge,re):Ne.call(ge,te.data?te.data:te)})},Object.defineProperties(ne.prototype,U),ne}(le);z.CONNECTING=0,z.OPEN=1,z.CLOSING=2,z.CLOSED=3;var X=function(ne,U){return new z(ne,U)};X.connect=function(ne,U){return X(ne,U)};var _e=function(ae){return ae.reduce(function(ne,U){return ne.indexOf(U)>-1?ne:ne.concat(U)},[])};function Ie(){return typeof window<"u"?window:typeof process=="object"&&typeof O4=="function"&&typeof $r=="object"?$r:this}var Ze={mock:!0,verifyClient:null,selectProtocol:null},Ve=function(ae){function ne(U,K){K===void 0&&(K=Ze),ae.call(this);var te=new Z(U);te.pathname||(te.pathname="/"),this.url=te.toString(),this.originalWebSocket=null;var ge=Ee.attachServer(this,this.url);if(!ge)throw this.dispatchEvent(qe({type:"error"})),new Error("A mock server is already listening on this url");this.options=Object.assign({},Ze,K),this.options.mock&&this.mockWebsocket()}return ae&&(ne.__proto__=ae),ne.prototype=Object.create(ae&&ae.prototype),ne.prototype.constructor=ne,ne.prototype.mockWebsocket=function(){var K=Ie();this.originalWebSocket=K.WebSocket,K.WebSocket=ke},ne.prototype.restoreWebsocket=function(){var K=Ie();this.originalWebSocket!==null&&(K.WebSocket=this.originalWebSocket),this.originalWebSocket=null},ne.prototype.stop=function(K){K===void 0&&(K=function(){}),this.options.mock&&this.restoreWebsocket(),Ee.removeServer(this.url),typeof K=="function"&&K()},ne.prototype.on=function(K,te){this.addEventListener(K,te)},ne.prototype.off=function(K,te){this.removeEventListener(K,te)},ne.prototype.close=function(K){K===void 0&&(K={});var te=K.code,ge=K.reason,re=K.wasClean,H=Ee.websocketsLookup(this.url);Ee.removeServer(this.url),H.forEach(function(P){P.readyState=ke.CLOSED,P.dispatchEvent(at({type:"close",target:P.target,code:te||se.CLOSE_NORMAL,reason:ge||"",wasClean:re}))}),this.dispatchEvent(at({type:"close"}),this)},ne.prototype.emit=function(K,te,ge){var re=this;ge===void 0&&(ge={});var H=ge.websockets;H||(H=Ee.websocketsLookup(this.url));var P;typeof ge!="object"||arguments.length>3?(te=Array.prototype.slice.call(arguments,1,arguments.length),P=te.map(function(Ae){return ue(Ae)})):P=ue(te),H.forEach(function(Ae){var Ne=Ae instanceof z?te:P;Array.isArray(Ne)?Ae.dispatchEvent.apply(Ae,[Ye({type:K,data:Ne,origin:re.url,target:Ae.target})].concat(Ne)):Ae.dispatchEvent(Ye({type:K,data:Ne,origin:re.url,target:Ae.target}))})},ne.prototype.clients=function(){return Ee.websocketsLookup(this.url)},ne.prototype.to=function(K,te,ge){var re=this;ge===void 0&&(ge=[]);var H=this,P=_e(ge.concat(Ee.websocketsLookup(this.url,K,te)));return{to:function(Ae,Ne){return re.to.call(re,Ae,Ne,P)},emit:function(Ne,S){H.emit(Ne,S,{websockets:P})}}},ne.prototype.in=function(){for(var K=[],te=arguments.length;te--;)K[te]=arguments[te];return this.to.apply(null,K)},ne.prototype.simulate=function(K){var te=Ee.websocketsLookup(this.url);K==="error"&&te.forEach(function(ge){ge.readyState=ke.CLOSED,ge.dispatchEvent(qe({type:"error",target:ge.target}))})},ne}(le);Ve.of=function(ne){return new Ve(ne)};var Ce=Ve,Oe=ke,st=X;r.Server=Ce,r.WebSocket=Oe,r.SocketIO=st,Object.defineProperty(r,"__esModule",{value:!0})})}(Zl,Zl.exports)),Zl.exports}fJ();var lu={},cu={},Ab={},LI;function D4(){return LI||(LI=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.EXTENDED_PICTOGRAPHIC=t.CLUSTER_BREAK=void 0,function(e){e[e.CR=0]="CR",e[e.LF=1]="LF",e[e.CONTROL=2]="CONTROL",e[e.EXTEND=3]="EXTEND",e[e.REGIONAL_INDICATOR=4]="REGIONAL_INDICATOR",e[e.SPACINGMARK=5]="SPACINGMARK",e[e.L=6]="L",e[e.V=7]="V",e[e.T=8]="T",e[e.LV=9]="LV",e[e.LVT=10]="LVT",e[e.OTHER=11]="OTHER",e[e.PREPEND=12]="PREPEND",e[e.E_BASE=13]="E_BASE",e[e.E_MODIFIER=14]="E_MODIFIER",e[e.ZWJ=15]="ZWJ",e[e.GLUE_AFTER_ZWJ=16]="GLUE_AFTER_ZWJ",e[e.E_BASE_GAZ=17]="E_BASE_GAZ"}(t.CLUSTER_BREAK||(t.CLUSTER_BREAK={})),t.EXTENDED_PICTOGRAPHIC=101}(Ab)),Ab}var uh={},II;function hJ(){if(II)return uh;II=1,Object.defineProperty(uh,"__esModule",{value:!0});const t=D4(),e=0,r=1,i=2,s=3,a=4;let n=class{static isSurrogate(u,c){return 55296<=u.charCodeAt(c)&&u.charCodeAt(c)<=56319&&56320<=u.charCodeAt(c+1)&&u.charCodeAt(c+1)<=57343}static codePointAt(u,c){c===void 0&&(c=0);const f=u.charCodeAt(c);if(55296<=f&&f<=56319&&c<u.length-1){const h=f,p=u.charCodeAt(c+1);return 56320<=p&&p<=57343?(h-55296)*1024+(p-56320)+65536:h}if(56320<=f&&f<=57343&&c>=1){const h=u.charCodeAt(c-1),p=f;return 55296<=h&&h<=56319?(h-55296)*1024+(p-56320)+65536:p}return f}static shouldBreak(u,c,f,h,p,g){const m=[u].concat(c).concat([f]),T=[h].concat(p).concat([g]),x=m[m.length-2],v=f,y=g,R=m.lastIndexOf(t.CLUSTER_BREAK.REGIONAL_INDICATOR);if(R>0&&m.slice(1,R).every(function(k){return k===t.CLUSTER_BREAK.REGIONAL_INDICATOR})&&[t.CLUSTER_BREAK.PREPEND,t.CLUSTER_BREAK.REGIONAL_INDICATOR].indexOf(x)===-1)return m.filter(function(k){return k===t.CLUSTER_BREAK.REGIONAL_INDICATOR}).length%2===1?s:a;if(x===t.CLUSTER_BREAK.CR&&v===t.CLUSTER_BREAK.LF)return e;if(x===t.CLUSTER_BREAK.CONTROL||x===t.CLUSTER_BREAK.CR||x===t.CLUSTER_BREAK.LF)return r;if(v===t.CLUSTER_BREAK.CONTROL||v===t.CLUSTER_BREAK.CR||v===t.CLUSTER_BREAK.LF)return r;if(x===t.CLUSTER_BREAK.L&&(v===t.CLUSTER_BREAK.L||v===t.CLUSTER_BREAK.V||v===t.CLUSTER_BREAK.LV||v===t.CLUSTER_BREAK.LVT))return e;if((x===t.CLUSTER_BREAK.LV||x===t.CLUSTER_BREAK.V)&&(v===t.CLUSTER_BREAK.V||v===t.CLUSTER_BREAK.T))return e;if((x===t.CLUSTER_BREAK.LVT||x===t.CLUSTER_BREAK.T)&&v===t.CLUSTER_BREAK.T)return e;if(v===t.CLUSTER_BREAK.EXTEND||v===t.CLUSTER_BREAK.ZWJ)return e;if(v===t.CLUSTER_BREAK.SPACINGMARK)return e;if(x===t.CLUSTER_BREAK.PREPEND)return e;const A=T.slice(0,-1).lastIndexOf(t.EXTENDED_PICTOGRAPHIC);return A!==-1&&T[A]===t.EXTENDED_PICTOGRAPHIC&&m.slice(A+1,-2).every(function(k){return k===t.CLUSTER_BREAK.EXTEND})&&x===t.CLUSTER_BREAK.ZWJ&&y===t.EXTENDED_PICTOGRAPHIC?e:c.indexOf(t.CLUSTER_BREAK.REGIONAL_INDICATOR)!==-1?i:x===t.CLUSTER_BREAK.REGIONAL_INDICATOR&&v===t.CLUSTER_BREAK.REGIONAL_INDICATOR?e:r}};return uh.default=n,uh}var lh={},BI;function dJ(){if(BI)return lh;BI=1,Object.defineProperty(lh,"__esModule",{value:!0});let t=class{constructor(r,i){this._index=0,this._str=r,this._nextBreak=i}[Symbol.iterator](){return this}next(){let r;if((r=this._nextBreak(this._str,this._index))<this._str.length){const i=this._str.slice(this._index,r);return this._index=r,{value:i,done:!1}}if(this._index<this._str.length){const i=this._str.slice(this._index);return this._index=this._str.length,{value:i,done:!1}}return{value:void 0,done:!0}}};return lh.default=t,lh}var PI;function pJ(){if(PI)return cu;PI=1;var t=cu&&cu.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(cu,"__esModule",{value:!0});const e=D4(),r=t(hJ()),i=t(dJ());class s{static nextBreak(n,o){if(o===void 0&&(o=0),o<0)return 0;if(o>=n.length-1)return n.length;const u=r.default.codePointAt(n,o),c=s.getGraphemeBreakProperty(u),f=s.getEmojiProperty(u),h=[],p=[];for(let g=o+1;g<n.length;g++){if(r.default.isSurrogate(n,g-1))continue;const m=r.default.codePointAt(n,g),T=s.getGraphemeBreakProperty(m),x=s.getEmojiProperty(m);if(r.default.shouldBreak(c,h,T,f,p,x))return g;h.push(T),p.push(x)}return n.length}splitGraphemes(n){const o=[];let u=0,c;for(;(c=s.nextBreak(n,u))<n.length;)o.push(n.slice(u,c)),u=c;return u<n.length&&o.push(n.slice(u)),o}iterateGraphemes(n){return new i.default(n,s.nextBreak)}countGraphemes(n){let o=0,u=0,c;for(;(c=s.nextBreak(n,u))<n.length;)u=c,o++;return u<n.length&&o++,o}static getGraphemeBreakProperty(n){if(n<48905){if(n<44116){if(n<4141){if(n<2818){if(n<2363)if(n<1759){if(n<1471){if(n<127){if(n<11){if(n<10){if(0<=n&&n<=9)return e.CLUSTER_BREAK.CONTROL}else if(n===10)return e.CLUSTER_BREAK.LF}else if(n<13){if(11<=n&&n<=12)return e.CLUSTER_BREAK.CONTROL}else if(n<14){if(n===13)return e.CLUSTER_BREAK.CR}else if(14<=n&&n<=31)return e.CLUSTER_BREAK.CONTROL}else if(n<768){if(n<173){if(127<=n&&n<=159)return e.CLUSTER_BREAK.CONTROL}else if(n===173)return e.CLUSTER_BREAK.CONTROL}else if(n<1155){if(768<=n&&n<=879)return e.CLUSTER_BREAK.EXTEND}else if(n<1425){if(1155<=n&&n<=1161)return e.CLUSTER_BREAK.EXTEND}else if(1425<=n&&n<=1469)return e.CLUSTER_BREAK.EXTEND}else if(n<1552){if(n<1476){if(n<1473){if(n===1471)return e.CLUSTER_BREAK.EXTEND}else if(1473<=n&&n<=1474)return e.CLUSTER_BREAK.EXTEND}else if(n<1479){if(1476<=n&&n<=1477)return e.CLUSTER_BREAK.EXTEND}else if(n<1536){if(n===1479)return e.CLUSTER_BREAK.EXTEND}else if(1536<=n&&n<=1541)return e.CLUSTER_BREAK.PREPEND}else if(n<1648){if(n<1564){if(1552<=n&&n<=1562)return e.CLUSTER_BREAK.EXTEND}else if(n<1611){if(n===1564)return e.CLUSTER_BREAK.CONTROL}else if(1611<=n&&n<=1631)return e.CLUSTER_BREAK.EXTEND}else if(n<1750){if(n===1648)return e.CLUSTER_BREAK.EXTEND}else if(n<1757){if(1750<=n&&n<=1756)return e.CLUSTER_BREAK.EXTEND}else if(n===1757)return e.CLUSTER_BREAK.PREPEND}else if(n<2075){if(n<1840)if(n<1770){if(n<1767){if(1759<=n&&n<=1764)return e.CLUSTER_BREAK.EXTEND}else if(1767<=n&&n<=1768)return e.CLUSTER_BREAK.EXTEND}else if(n<1807){if(1770<=n&&n<=1773)return e.CLUSTER_BREAK.EXTEND}else{if(n===1807)return e.CLUSTER_BREAK.PREPEND;if(n===1809)return e.CLUSTER_BREAK.EXTEND}else if(n<2027){if(n<1958){if(1840<=n&&n<=1866)return e.CLUSTER_BREAK.EXTEND}else if(1958<=n&&n<=1968)return e.CLUSTER_BREAK.EXTEND}else if(n<2045){if(2027<=n&&n<=2035)return e.CLUSTER_BREAK.EXTEND}else if(n<2070){if(n===2045)return e.CLUSTER_BREAK.EXTEND}else if(2070<=n&&n<=2073)return e.CLUSTER_BREAK.EXTEND}else if(n<2200){if(n<2089){if(n<2085){if(2075<=n&&n<=2083)return e.CLUSTER_BREAK.EXTEND}else if(2085<=n&&n<=2087)return e.CLUSTER_BREAK.EXTEND}else if(n<2137){if(2089<=n&&n<=2093)return e.CLUSTER_BREAK.EXTEND}else if(n<2192){if(2137<=n&&n<=2139)return e.CLUSTER_BREAK.EXTEND}else if(2192<=n&&n<=2193)return e.CLUSTER_BREAK.PREPEND}else if(n<2275){if(n<2250){if(2200<=n&&n<=2207)return e.CLUSTER_BREAK.EXTEND}else if(n<2274){if(2250<=n&&n<=2273)return e.CLUSTER_BREAK.EXTEND}else if(n===2274)return e.CLUSTER_BREAK.PREPEND}else if(n<2307){if(2275<=n&&n<=2306)return e.CLUSTER_BREAK.EXTEND}else{if(n===2307)return e.CLUSTER_BREAK.SPACINGMARK;if(n===2362)return e.CLUSTER_BREAK.EXTEND}else if(n<2561){if(n<2434){if(n<2381){if(n<2366){if(n===2363)return e.CLUSTER_BREAK.SPACINGMARK;if(n===2364)return e.CLUSTER_BREAK.EXTEND}else if(n<2369){if(2366<=n&&n<=2368)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<2377){if(2369<=n&&n<=2376)return e.CLUSTER_BREAK.EXTEND}else if(2377<=n&&n<=2380)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<2385){if(n<2382){if(n===2381)return e.CLUSTER_BREAK.EXTEND}else if(2382<=n&&n<=2383)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<2402){if(2385<=n&&n<=2391)return e.CLUSTER_BREAK.EXTEND}else if(n<2433){if(2402<=n&&n<=2403)return e.CLUSTER_BREAK.EXTEND}else if(n===2433)return e.CLUSTER_BREAK.EXTEND}else if(n<2503){if(n<2494){if(n<2492){if(2434<=n&&n<=2435)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===2492)return e.CLUSTER_BREAK.EXTEND}else if(n<2495){if(n===2494)return e.CLUSTER_BREAK.EXTEND}else if(n<2497){if(2495<=n&&n<=2496)return e.CLUSTER_BREAK.SPACINGMARK}else if(2497<=n&&n<=2500)return e.CLUSTER_BREAK.EXTEND}else if(n<2519){if(n<2507){if(2503<=n&&n<=2504)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<2509){if(2507<=n&&n<=2508)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===2509)return e.CLUSTER_BREAK.EXTEND}else if(n<2530){if(n===2519)return e.CLUSTER_BREAK.EXTEND}else if(n<2558){if(2530<=n&&n<=2531)return e.CLUSTER_BREAK.EXTEND}else if(n===2558)return e.CLUSTER_BREAK.EXTEND}else if(n<2691){if(n<2631){if(n<2620){if(n<2563){if(2561<=n&&n<=2562)return e.CLUSTER_BREAK.EXTEND}else if(n===2563)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<2622){if(n===2620)return e.CLUSTER_BREAK.EXTEND}else if(n<2625){if(2622<=n&&n<=2624)return e.CLUSTER_BREAK.SPACINGMARK}else if(2625<=n&&n<=2626)return e.CLUSTER_BREAK.EXTEND}else if(n<2672){if(n<2635){if(2631<=n&&n<=2632)return e.CLUSTER_BREAK.EXTEND}else if(n<2641){if(2635<=n&&n<=2637)return e.CLUSTER_BREAK.EXTEND}else if(n===2641)return e.CLUSTER_BREAK.EXTEND}else if(n<2677){if(2672<=n&&n<=2673)return e.CLUSTER_BREAK.EXTEND}else if(n<2689){if(n===2677)return e.CLUSTER_BREAK.EXTEND}else if(2689<=n&&n<=2690)return e.CLUSTER_BREAK.EXTEND}else if(n<2761){if(n<2750){if(n===2691)return e.CLUSTER_BREAK.SPACINGMARK;if(n===2748)return e.CLUSTER_BREAK.EXTEND}else if(n<2753){if(2750<=n&&n<=2752)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<2759){if(2753<=n&&n<=2757)return e.CLUSTER_BREAK.EXTEND}else if(2759<=n&&n<=2760)return e.CLUSTER_BREAK.EXTEND}else if(n<2786){if(n<2763){if(n===2761)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<2765){if(2763<=n&&n<=2764)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===2765)return e.CLUSTER_BREAK.EXTEND}else if(n<2810){if(2786<=n&&n<=2787)return e.CLUSTER_BREAK.EXTEND}else if(n<2817){if(2810<=n&&n<=2815)return e.CLUSTER_BREAK.EXTEND}else if(n===2817)return e.CLUSTER_BREAK.EXTEND}else if(n<3315){if(n<3076){if(n<2946){if(n<2887){if(n<2878){if(n<2876){if(2818<=n&&n<=2819)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===2876)return e.CLUSTER_BREAK.EXTEND}else if(n<2880){if(2878<=n&&n<=2879)return e.CLUSTER_BREAK.EXTEND}else if(n<2881){if(n===2880)return e.CLUSTER_BREAK.SPACINGMARK}else if(2881<=n&&n<=2884)return e.CLUSTER_BREAK.EXTEND}else if(n<2893){if(n<2891){if(2887<=n&&n<=2888)return e.CLUSTER_BREAK.SPACINGMARK}else if(2891<=n&&n<=2892)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<2901){if(n===2893)return e.CLUSTER_BREAK.EXTEND}else if(n<2914){if(2901<=n&&n<=2903)return e.CLUSTER_BREAK.EXTEND}else if(2914<=n&&n<=2915)return e.CLUSTER_BREAK.EXTEND}else if(n<3014){if(n<3007){if(n===2946||n===3006)return e.CLUSTER_BREAK.EXTEND}else if(n<3008){if(n===3007)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3009){if(n===3008)return e.CLUSTER_BREAK.EXTEND}else if(3009<=n&&n<=3010)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3031){if(n<3018){if(3014<=n&&n<=3016)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3021){if(3018<=n&&n<=3020)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===3021)return e.CLUSTER_BREAK.EXTEND}else if(n<3072){if(n===3031)return e.CLUSTER_BREAK.EXTEND}else if(n<3073){if(n===3072)return e.CLUSTER_BREAK.EXTEND}else if(3073<=n&&n<=3075)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3262){if(n<3146){if(n<3134){if(n===3076||n===3132)return e.CLUSTER_BREAK.EXTEND}else if(n<3137){if(3134<=n&&n<=3136)return e.CLUSTER_BREAK.EXTEND}else if(n<3142){if(3137<=n&&n<=3140)return e.CLUSTER_BREAK.SPACINGMARK}else if(3142<=n&&n<=3144)return e.CLUSTER_BREAK.EXTEND}else if(n<3201){if(n<3157){if(3146<=n&&n<=3149)return e.CLUSTER_BREAK.EXTEND}else if(n<3170){if(3157<=n&&n<=3158)return e.CLUSTER_BREAK.EXTEND}else if(3170<=n&&n<=3171)return e.CLUSTER_BREAK.EXTEND}else if(n<3202){if(n===3201)return e.CLUSTER_BREAK.EXTEND}else if(n<3260){if(3202<=n&&n<=3203)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===3260)return e.CLUSTER_BREAK.EXTEND}else if(n<3270){if(n<3264){if(n===3262)return e.CLUSTER_BREAK.SPACINGMARK;if(n===3263)return e.CLUSTER_BREAK.EXTEND}else if(n<3266){if(3264<=n&&n<=3265)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3267){if(n===3266)return e.CLUSTER_BREAK.EXTEND}else if(3267<=n&&n<=3268)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3276){if(n<3271){if(n===3270)return e.CLUSTER_BREAK.EXTEND}else if(n<3274){if(3271<=n&&n<=3272)return e.CLUSTER_BREAK.SPACINGMARK}else if(3274<=n&&n<=3275)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3285){if(3276<=n&&n<=3277)return e.CLUSTER_BREAK.EXTEND}else if(n<3298){if(3285<=n&&n<=3286)return e.CLUSTER_BREAK.EXTEND}else if(3298<=n&&n<=3299)return e.CLUSTER_BREAK.EXTEND}else if(n<3551){if(n<3406){if(n<3391){if(n<3330){if(n<3328){if(n===3315)return e.CLUSTER_BREAK.SPACINGMARK}else if(3328<=n&&n<=3329)return e.CLUSTER_BREAK.EXTEND}else if(n<3387){if(3330<=n&&n<=3331)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3390){if(3387<=n&&n<=3388)return e.CLUSTER_BREAK.EXTEND}else if(n===3390)return e.CLUSTER_BREAK.EXTEND}else if(n<3398){if(n<3393){if(3391<=n&&n<=3392)return e.CLUSTER_BREAK.SPACINGMARK}else if(3393<=n&&n<=3396)return e.CLUSTER_BREAK.EXTEND}else if(n<3402){if(3398<=n&&n<=3400)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3405){if(3402<=n&&n<=3404)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===3405)return e.CLUSTER_BREAK.EXTEND}else if(n<3530){if(n<3426){if(n===3406)return e.CLUSTER_BREAK.PREPEND;if(n===3415)return e.CLUSTER_BREAK.EXTEND}else if(n<3457){if(3426<=n&&n<=3427)return e.CLUSTER_BREAK.EXTEND}else if(n<3458){if(n===3457)return e.CLUSTER_BREAK.EXTEND}else if(3458<=n&&n<=3459)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3538){if(n<3535){if(n===3530)return e.CLUSTER_BREAK.EXTEND}else if(n<3536){if(n===3535)return e.CLUSTER_BREAK.EXTEND}else if(3536<=n&&n<=3537)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3542){if(3538<=n&&n<=3540)return e.CLUSTER_BREAK.EXTEND}else if(n<3544){if(n===3542)return e.CLUSTER_BREAK.EXTEND}else if(3544<=n&&n<=3550)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3893){if(n<3655){if(n<3633){if(n<3570){if(n===3551)return e.CLUSTER_BREAK.EXTEND}else if(3570<=n&&n<=3571)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3635){if(n===3633)return e.CLUSTER_BREAK.EXTEND}else if(n<3636){if(n===3635)return e.CLUSTER_BREAK.SPACINGMARK}else if(3636<=n&&n<=3642)return e.CLUSTER_BREAK.EXTEND}else if(n<3764)if(n<3761){if(3655<=n&&n<=3662)return e.CLUSTER_BREAK.EXTEND}else{if(n===3761)return e.CLUSTER_BREAK.EXTEND;if(n===3763)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3784){if(3764<=n&&n<=3772)return e.CLUSTER_BREAK.EXTEND}else if(n<3864){if(3784<=n&&n<=3790)return e.CLUSTER_BREAK.EXTEND}else if(3864<=n&&n<=3865)return e.CLUSTER_BREAK.EXTEND}else if(n<3967){if(n<3897){if(n===3893||n===3895)return e.CLUSTER_BREAK.EXTEND}else if(n<3902){if(n===3897)return e.CLUSTER_BREAK.EXTEND}else if(n<3953){if(3902<=n&&n<=3903)return e.CLUSTER_BREAK.SPACINGMARK}else if(3953<=n&&n<=3966)return e.CLUSTER_BREAK.EXTEND}else if(n<3981){if(n<3968){if(n===3967)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<3974){if(3968<=n&&n<=3972)return e.CLUSTER_BREAK.EXTEND}else if(3974<=n&&n<=3975)return e.CLUSTER_BREAK.EXTEND}else if(n<3993){if(3981<=n&&n<=3991)return e.CLUSTER_BREAK.EXTEND}else if(n<4038){if(3993<=n&&n<=4028)return e.CLUSTER_BREAK.EXTEND}else if(n===4038)return e.CLUSTER_BREAK.EXTEND}else if(n<7204){if(n<6448){if(n<5938){if(n<4226){if(n<4157){if(n<4146){if(n<4145){if(4141<=n&&n<=4144)return e.CLUSTER_BREAK.EXTEND}else if(n===4145)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<4153){if(4146<=n&&n<=4151)return e.CLUSTER_BREAK.EXTEND}else if(n<4155){if(4153<=n&&n<=4154)return e.CLUSTER_BREAK.EXTEND}else if(4155<=n&&n<=4156)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<4184){if(n<4182){if(4157<=n&&n<=4158)return e.CLUSTER_BREAK.EXTEND}else if(4182<=n&&n<=4183)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<4190){if(4184<=n&&n<=4185)return e.CLUSTER_BREAK.EXTEND}else if(n<4209){if(4190<=n&&n<=4192)return e.CLUSTER_BREAK.EXTEND}else if(4209<=n&&n<=4212)return e.CLUSTER_BREAK.EXTEND}else if(n<4352){if(n<4229){if(n===4226)return e.CLUSTER_BREAK.EXTEND;if(n===4228)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<4237){if(4229<=n&&n<=4230)return e.CLUSTER_BREAK.EXTEND}else if(n===4237||n===4253)return e.CLUSTER_BREAK.EXTEND}else if(n<4957){if(n<4448){if(4352<=n&&n<=4447)return e.CLUSTER_BREAK.L}else if(n<4520){if(4448<=n&&n<=4519)return e.CLUSTER_BREAK.V}else if(4520<=n&&n<=4607)return e.CLUSTER_BREAK.T}else if(n<5906){if(4957<=n&&n<=4959)return e.CLUSTER_BREAK.EXTEND}else if(n<5909){if(5906<=n&&n<=5908)return e.CLUSTER_BREAK.EXTEND}else if(n===5909)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6089){if(n<6070){if(n<5970){if(n<5940){if(5938<=n&&n<=5939)return e.CLUSTER_BREAK.EXTEND}else if(n===5940)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6002){if(5970<=n&&n<=5971)return e.CLUSTER_BREAK.EXTEND}else if(n<6068){if(6002<=n&&n<=6003)return e.CLUSTER_BREAK.EXTEND}else if(6068<=n&&n<=6069)return e.CLUSTER_BREAK.EXTEND}else if(n<6078){if(n<6071){if(n===6070)return e.CLUSTER_BREAK.SPACINGMARK}else if(6071<=n&&n<=6077)return e.CLUSTER_BREAK.EXTEND}else if(n<6086){if(6078<=n&&n<=6085)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6087){if(n===6086)return e.CLUSTER_BREAK.EXTEND}else if(6087<=n&&n<=6088)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6277)if(n<6155){if(n<6109){if(6089<=n&&n<=6099)return e.CLUSTER_BREAK.EXTEND}else if(n===6109)return e.CLUSTER_BREAK.EXTEND}else if(n<6158){if(6155<=n&&n<=6157)return e.CLUSTER_BREAK.EXTEND}else{if(n===6158)return e.CLUSTER_BREAK.CONTROL;if(n===6159)return e.CLUSTER_BREAK.EXTEND}else if(n<6435){if(n<6313){if(6277<=n&&n<=6278)return e.CLUSTER_BREAK.EXTEND}else if(n<6432){if(n===6313)return e.CLUSTER_BREAK.EXTEND}else if(6432<=n&&n<=6434)return e.CLUSTER_BREAK.EXTEND}else if(n<6439){if(6435<=n&&n<=6438)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6441){if(6439<=n&&n<=6440)return e.CLUSTER_BREAK.EXTEND}else if(6441<=n&&n<=6443)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6971){if(n<6744)if(n<6681){if(n<6451){if(n<6450){if(6448<=n&&n<=6449)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===6450)return e.CLUSTER_BREAK.EXTEND}else if(n<6457){if(6451<=n&&n<=6456)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6679){if(6457<=n&&n<=6459)return e.CLUSTER_BREAK.EXTEND}else if(6679<=n&&n<=6680)return e.CLUSTER_BREAK.EXTEND}else if(n<6741){if(n<6683){if(6681<=n&&n<=6682)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===6683)return e.CLUSTER_BREAK.EXTEND}else if(n<6742){if(n===6741)return e.CLUSTER_BREAK.SPACINGMARK}else{if(n===6742)return e.CLUSTER_BREAK.EXTEND;if(n===6743)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6771){if(n<6754){if(n<6752){if(6744<=n&&n<=6750)return e.CLUSTER_BREAK.EXTEND}else if(n===6752)return e.CLUSTER_BREAK.EXTEND}else if(n<6757){if(n===6754)return e.CLUSTER_BREAK.EXTEND}else if(n<6765){if(6757<=n&&n<=6764)return e.CLUSTER_BREAK.EXTEND}else if(6765<=n&&n<=6770)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6912){if(n<6783){if(6771<=n&&n<=6780)return e.CLUSTER_BREAK.EXTEND}else if(n<6832){if(n===6783)return e.CLUSTER_BREAK.EXTEND}else if(6832<=n&&n<=6862)return e.CLUSTER_BREAK.EXTEND}else if(n<6916){if(6912<=n&&n<=6915)return e.CLUSTER_BREAK.EXTEND}else if(n<6964){if(n===6916)return e.CLUSTER_BREAK.SPACINGMARK}else if(6964<=n&&n<=6970)return e.CLUSTER_BREAK.EXTEND}else if(n<7080){if(n<7019){if(n<6973){if(n===6971)return e.CLUSTER_BREAK.SPACINGMARK;if(n===6972)return e.CLUSTER_BREAK.EXTEND}else if(n<6978){if(6973<=n&&n<=6977)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<6979){if(n===6978)return e.CLUSTER_BREAK.EXTEND}else if(6979<=n&&n<=6980)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7073){if(n<7040){if(7019<=n&&n<=7027)return e.CLUSTER_BREAK.EXTEND}else if(n<7042){if(7040<=n&&n<=7041)return e.CLUSTER_BREAK.EXTEND}else if(n===7042)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7074){if(n===7073)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7078){if(7074<=n&&n<=7077)return e.CLUSTER_BREAK.EXTEND}else if(7078<=n&&n<=7079)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7144)if(n<7083){if(n<7082){if(7080<=n&&n<=7081)return e.CLUSTER_BREAK.EXTEND}else if(n===7082)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7142){if(7083<=n&&n<=7085)return e.CLUSTER_BREAK.EXTEND}else{if(n===7142)return e.CLUSTER_BREAK.EXTEND;if(n===7143)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7150){if(n<7146){if(7144<=n&&n<=7145)return e.CLUSTER_BREAK.EXTEND}else if(n<7149){if(7146<=n&&n<=7148)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===7149)return e.CLUSTER_BREAK.EXTEND}else if(n<7151){if(n===7150)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7154){if(7151<=n&&n<=7153)return e.CLUSTER_BREAK.EXTEND}else if(7154<=n&&n<=7155)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43346){if(n<11647){if(n<7415){if(n<7380){if(n<7220){if(n<7212){if(7204<=n&&n<=7211)return e.CLUSTER_BREAK.SPACINGMARK}else if(7212<=n&&n<=7219)return e.CLUSTER_BREAK.EXTEND}else if(n<7222){if(7220<=n&&n<=7221)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7376){if(7222<=n&&n<=7223)return e.CLUSTER_BREAK.EXTEND}else if(7376<=n&&n<=7378)return e.CLUSTER_BREAK.EXTEND}else if(n<7394){if(n<7393){if(7380<=n&&n<=7392)return e.CLUSTER_BREAK.EXTEND}else if(n===7393)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<7405){if(7394<=n&&n<=7400)return e.CLUSTER_BREAK.EXTEND}else if(n===7405||n===7412)return e.CLUSTER_BREAK.EXTEND}else if(n<8205)if(n<7616){if(n<7416){if(n===7415)return e.CLUSTER_BREAK.SPACINGMARK}else if(7416<=n&&n<=7417)return e.CLUSTER_BREAK.EXTEND}else if(n<8203){if(7616<=n&&n<=7679)return e.CLUSTER_BREAK.EXTEND}else{if(n===8203)return e.CLUSTER_BREAK.CONTROL;if(n===8204)return e.CLUSTER_BREAK.EXTEND}else if(n<8288){if(n<8206){if(n===8205)return e.CLUSTER_BREAK.ZWJ}else if(n<8232){if(8206<=n&&n<=8207)return e.CLUSTER_BREAK.CONTROL}else if(8232<=n&&n<=8238)return e.CLUSTER_BREAK.CONTROL}else if(n<8400){if(8288<=n&&n<=8303)return e.CLUSTER_BREAK.CONTROL}else if(n<11503){if(8400<=n&&n<=8432)return e.CLUSTER_BREAK.EXTEND}else if(11503<=n&&n<=11505)return e.CLUSTER_BREAK.EXTEND}else if(n<43043){if(n<42612){if(n<12330){if(n<11744){if(n===11647)return e.CLUSTER_BREAK.EXTEND}else if(11744<=n&&n<=11775)return e.CLUSTER_BREAK.EXTEND}else if(n<12441){if(12330<=n&&n<=12335)return e.CLUSTER_BREAK.EXTEND}else if(n<42607){if(12441<=n&&n<=12442)return e.CLUSTER_BREAK.EXTEND}else if(42607<=n&&n<=42610)return e.CLUSTER_BREAK.EXTEND}else if(n<43010){if(n<42654){if(42612<=n&&n<=42621)return e.CLUSTER_BREAK.EXTEND}else if(n<42736){if(42654<=n&&n<=42655)return e.CLUSTER_BREAK.EXTEND}else if(42736<=n&&n<=42737)return e.CLUSTER_BREAK.EXTEND}else if(n<43014){if(n===43010)return e.CLUSTER_BREAK.EXTEND}else if(n===43014||n===43019)return e.CLUSTER_BREAK.EXTEND}else if(n<43188){if(n<43047){if(n<43045){if(43043<=n&&n<=43044)return e.CLUSTER_BREAK.SPACINGMARK}else if(43045<=n&&n<=43046)return e.CLUSTER_BREAK.EXTEND}else if(n<43052){if(n===43047)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43136){if(n===43052)return e.CLUSTER_BREAK.EXTEND}else if(43136<=n&&n<=43137)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43263){if(n<43204){if(43188<=n&&n<=43203)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43232){if(43204<=n&&n<=43205)return e.CLUSTER_BREAK.EXTEND}else if(43232<=n&&n<=43249)return e.CLUSTER_BREAK.EXTEND}else if(n<43302){if(n===43263)return e.CLUSTER_BREAK.EXTEND}else if(n<43335){if(43302<=n&&n<=43309)return e.CLUSTER_BREAK.EXTEND}else if(43335<=n&&n<=43345)return e.CLUSTER_BREAK.EXTEND}else if(n<43698){if(n<43493){if(n<43444)if(n<43392){if(n<43360){if(43346<=n&&n<=43347)return e.CLUSTER_BREAK.SPACINGMARK}else if(43360<=n&&n<=43388)return e.CLUSTER_BREAK.L}else if(n<43395){if(43392<=n&&n<=43394)return e.CLUSTER_BREAK.EXTEND}else{if(n===43395)return e.CLUSTER_BREAK.SPACINGMARK;if(n===43443)return e.CLUSTER_BREAK.EXTEND}else if(n<43450){if(n<43446){if(43444<=n&&n<=43445)return e.CLUSTER_BREAK.SPACINGMARK}else if(43446<=n&&n<=43449)return e.CLUSTER_BREAK.EXTEND}else if(n<43452){if(43450<=n&&n<=43451)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43454){if(43452<=n&&n<=43453)return e.CLUSTER_BREAK.EXTEND}else if(43454<=n&&n<=43456)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43573){if(n<43567){if(n<43561){if(n===43493)return e.CLUSTER_BREAK.EXTEND}else if(43561<=n&&n<=43566)return e.CLUSTER_BREAK.EXTEND}else if(n<43569){if(43567<=n&&n<=43568)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43571){if(43569<=n&&n<=43570)return e.CLUSTER_BREAK.EXTEND}else if(43571<=n&&n<=43572)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43597){if(n<43587){if(43573<=n&&n<=43574)return e.CLUSTER_BREAK.EXTEND}else if(n===43587||n===43596)return e.CLUSTER_BREAK.EXTEND}else if(n<43644){if(n===43597)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===43644||n===43696)return e.CLUSTER_BREAK.EXTEND}else if(n<44006){if(n<43756)if(n<43710){if(n<43703){if(43698<=n&&n<=43700)return e.CLUSTER_BREAK.EXTEND}else if(43703<=n&&n<=43704)return e.CLUSTER_BREAK.EXTEND}else if(n<43713){if(43710<=n&&n<=43711)return e.CLUSTER_BREAK.EXTEND}else{if(n===43713)return e.CLUSTER_BREAK.EXTEND;if(n===43755)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<43766){if(n<43758){if(43756<=n&&n<=43757)return e.CLUSTER_BREAK.EXTEND}else if(n<43765){if(43758<=n&&n<=43759)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===43765)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<44003){if(n===43766)return e.CLUSTER_BREAK.EXTEND}else if(n<44005){if(44003<=n&&n<=44004)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===44005)return e.CLUSTER_BREAK.EXTEND}else if(n<44032)if(n<44009){if(n<44008){if(44006<=n&&n<=44007)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===44008)return e.CLUSTER_BREAK.EXTEND}else if(n<44012){if(44009<=n&&n<=44010)return e.CLUSTER_BREAK.SPACINGMARK}else{if(n===44012)return e.CLUSTER_BREAK.SPACINGMARK;if(n===44013)return e.CLUSTER_BREAK.EXTEND}else if(n<44061){if(n<44033){if(n===44032)return e.CLUSTER_BREAK.LV}else if(n<44060){if(44033<=n&&n<=44059)return e.CLUSTER_BREAK.LVT}else if(n===44060)return e.CLUSTER_BREAK.LV}else if(n<44088){if(44061<=n&&n<=44087)return e.CLUSTER_BREAK.LVT}else if(n<44089){if(n===44088)return e.CLUSTER_BREAK.LV}else if(44089<=n&&n<=44115)return e.CLUSTER_BREAK.LVT}else if(n<46497){if(n<45293){if(n<44704){if(n<44397){if(n<44256){if(n<44173){if(n<44144){if(n<44117){if(n===44116)return e.CLUSTER_BREAK.LV}else if(44117<=n&&n<=44143)return e.CLUSTER_BREAK.LVT}else if(n<44145){if(n===44144)return e.CLUSTER_BREAK.LV}else if(n<44172){if(44145<=n&&n<=44171)return e.CLUSTER_BREAK.LVT}else if(n===44172)return e.CLUSTER_BREAK.LV}else if(n<44201){if(n<44200){if(44173<=n&&n<=44199)return e.CLUSTER_BREAK.LVT}else if(n===44200)return e.CLUSTER_BREAK.LV}else if(n<44228){if(44201<=n&&n<=44227)return e.CLUSTER_BREAK.LVT}else if(n<44229){if(n===44228)return e.CLUSTER_BREAK.LV}else if(44229<=n&&n<=44255)return e.CLUSTER_BREAK.LVT}else if(n<44313){if(n<44284){if(n<44257){if(n===44256)return e.CLUSTER_BREAK.LV}else if(44257<=n&&n<=44283)return e.CLUSTER_BREAK.LVT}else if(n<44285){if(n===44284)return e.CLUSTER_BREAK.LV}else if(n<44312){if(44285<=n&&n<=44311)return e.CLUSTER_BREAK.LVT}else if(n===44312)return e.CLUSTER_BREAK.LV}else if(n<44368){if(n<44340){if(44313<=n&&n<=44339)return e.CLUSTER_BREAK.LVT}else if(n<44341){if(n===44340)return e.CLUSTER_BREAK.LV}else if(44341<=n&&n<=44367)return e.CLUSTER_BREAK.LVT}else if(n<44369){if(n===44368)return e.CLUSTER_BREAK.LV}else if(n<44396){if(44369<=n&&n<=44395)return e.CLUSTER_BREAK.LVT}else if(n===44396)return e.CLUSTER_BREAK.LV}else if(n<44537){if(n<44480){if(n<44425){if(n<44424){if(44397<=n&&n<=44423)return e.CLUSTER_BREAK.LVT}else if(n===44424)return e.CLUSTER_BREAK.LV}else if(n<44452){if(44425<=n&&n<=44451)return e.CLUSTER_BREAK.LVT}else if(n<44453){if(n===44452)return e.CLUSTER_BREAK.LV}else if(44453<=n&&n<=44479)return e.CLUSTER_BREAK.LVT}else if(n<44508){if(n<44481){if(n===44480)return e.CLUSTER_BREAK.LV}else if(44481<=n&&n<=44507)return e.CLUSTER_BREAK.LVT}else if(n<44509){if(n===44508)return e.CLUSTER_BREAK.LV}else if(n<44536){if(44509<=n&&n<=44535)return e.CLUSTER_BREAK.LVT}else if(n===44536)return e.CLUSTER_BREAK.LV}else if(n<44620){if(n<44565){if(n<44564){if(44537<=n&&n<=44563)return e.CLUSTER_BREAK.LVT}else if(n===44564)return e.CLUSTER_BREAK.LV}else if(n<44592){if(44565<=n&&n<=44591)return e.CLUSTER_BREAK.LVT}else if(n<44593){if(n===44592)return e.CLUSTER_BREAK.LV}else if(44593<=n&&n<=44619)return e.CLUSTER_BREAK.LVT}else if(n<44649){if(n<44621){if(n===44620)return e.CLUSTER_BREAK.LV}else if(n<44648){if(44621<=n&&n<=44647)return e.CLUSTER_BREAK.LVT}else if(n===44648)return e.CLUSTER_BREAK.LV}else if(n<44676){if(44649<=n&&n<=44675)return e.CLUSTER_BREAK.LVT}else if(n<44677){if(n===44676)return e.CLUSTER_BREAK.LV}else if(44677<=n&&n<=44703)return e.CLUSTER_BREAK.LVT}else if(n<44985){if(n<44844){if(n<44761){if(n<44732){if(n<44705){if(n===44704)return e.CLUSTER_BREAK.LV}else if(44705<=n&&n<=44731)return e.CLUSTER_BREAK.LVT}else if(n<44733){if(n===44732)return e.CLUSTER_BREAK.LV}else if(n<44760){if(44733<=n&&n<=44759)return e.CLUSTER_BREAK.LVT}else if(n===44760)return e.CLUSTER_BREAK.LV}else if(n<44789){if(n<44788){if(44761<=n&&n<=44787)return e.CLUSTER_BREAK.LVT}else if(n===44788)return e.CLUSTER_BREAK.LV}else if(n<44816){if(44789<=n&&n<=44815)return e.CLUSTER_BREAK.LVT}else if(n<44817){if(n===44816)return e.CLUSTER_BREAK.LV}else if(44817<=n&&n<=44843)return e.CLUSTER_BREAK.LVT}else if(n<44901){if(n<44872){if(n<44845){if(n===44844)return e.CLUSTER_BREAK.LV}else if(44845<=n&&n<=44871)return e.CLUSTER_BREAK.LVT}else if(n<44873){if(n===44872)return e.CLUSTER_BREAK.LV}else if(n<44900){if(44873<=n&&n<=44899)return e.CLUSTER_BREAK.LVT}else if(n===44900)return e.CLUSTER_BREAK.LV}else if(n<44956){if(n<44928){if(44901<=n&&n<=44927)return e.CLUSTER_BREAK.LVT}else if(n<44929){if(n===44928)return e.CLUSTER_BREAK.LV}else if(44929<=n&&n<=44955)return e.CLUSTER_BREAK.LVT}else if(n<44957){if(n===44956)return e.CLUSTER_BREAK.LV}else if(n<44984){if(44957<=n&&n<=44983)return e.CLUSTER_BREAK.LVT}else if(n===44984)return e.CLUSTER_BREAK.LV}else if(n<45152){if(n<45068){if(n<45013){if(n<45012){if(44985<=n&&n<=45011)return e.CLUSTER_BREAK.LVT}else if(n===45012)return e.CLUSTER_BREAK.LV}else if(n<45040){if(45013<=n&&n<=45039)return e.CLUSTER_BREAK.LVT}else if(n<45041){if(n===45040)return e.CLUSTER_BREAK.LV}else if(45041<=n&&n<=45067)return e.CLUSTER_BREAK.LVT}else if(n<45097){if(n<45069){if(n===45068)return e.CLUSTER_BREAK.LV}else if(n<45096){if(45069<=n&&n<=45095)return e.CLUSTER_BREAK.LVT}else if(n===45096)return e.CLUSTER_BREAK.LV}else if(n<45124){if(45097<=n&&n<=45123)return e.CLUSTER_BREAK.LVT}else if(n<45125){if(n===45124)return e.CLUSTER_BREAK.LV}else if(45125<=n&&n<=45151)return e.CLUSTER_BREAK.LVT}else if(n<45209){if(n<45180){if(n<45153){if(n===45152)return e.CLUSTER_BREAK.LV}else if(45153<=n&&n<=45179)return e.CLUSTER_BREAK.LVT}else if(n<45181){if(n===45180)return e.CLUSTER_BREAK.LV}else if(n<45208){if(45181<=n&&n<=45207)return e.CLUSTER_BREAK.LVT}else if(n===45208)return e.CLUSTER_BREAK.LV}else if(n<45264){if(n<45236){if(45209<=n&&n<=45235)return e.CLUSTER_BREAK.LVT}else if(n<45237){if(n===45236)return e.CLUSTER_BREAK.LV}else if(45237<=n&&n<=45263)return e.CLUSTER_BREAK.LVT}else if(n<45265){if(n===45264)return e.CLUSTER_BREAK.LV}else if(n<45292){if(45265<=n&&n<=45291)return e.CLUSTER_BREAK.LVT}else if(n===45292)return e.CLUSTER_BREAK.LV}else if(n<45908){if(n<45600){if(n<45433){if(n<45376){if(n<45321){if(n<45320){if(45293<=n&&n<=45319)return e.CLUSTER_BREAK.LVT}else if(n===45320)return e.CLUSTER_BREAK.LV}else if(n<45348){if(45321<=n&&n<=45347)return e.CLUSTER_BREAK.LVT}else if(n<45349){if(n===45348)return e.CLUSTER_BREAK.LV}else if(45349<=n&&n<=45375)return e.CLUSTER_BREAK.LVT}else if(n<45404){if(n<45377){if(n===45376)return e.CLUSTER_BREAK.LV}else if(45377<=n&&n<=45403)return e.CLUSTER_BREAK.LVT}else if(n<45405){if(n===45404)return e.CLUSTER_BREAK.LV}else if(n<45432){if(45405<=n&&n<=45431)return e.CLUSTER_BREAK.LVT}else if(n===45432)return e.CLUSTER_BREAK.LV}else if(n<45516){if(n<45461){if(n<45460){if(45433<=n&&n<=45459)return e.CLUSTER_BREAK.LVT}else if(n===45460)return e.CLUSTER_BREAK.LV}else if(n<45488){if(45461<=n&&n<=45487)return e.CLUSTER_BREAK.LVT}else if(n<45489){if(n===45488)return e.CLUSTER_BREAK.LV}else if(45489<=n&&n<=45515)return e.CLUSTER_BREAK.LVT}else if(n<45545){if(n<45517){if(n===45516)return e.CLUSTER_BREAK.LV}else if(n<45544){if(45517<=n&&n<=45543)return e.CLUSTER_BREAK.LVT}else if(n===45544)return e.CLUSTER_BREAK.LV}else if(n<45572){if(45545<=n&&n<=45571)return e.CLUSTER_BREAK.LVT}else if(n<45573){if(n===45572)return e.CLUSTER_BREAK.LV}else if(45573<=n&&n<=45599)return e.CLUSTER_BREAK.LVT}else if(n<45741){if(n<45657){if(n<45628){if(n<45601){if(n===45600)return e.CLUSTER_BREAK.LV}else if(45601<=n&&n<=45627)return e.CLUSTER_BREAK.LVT}else if(n<45629){if(n===45628)return e.CLUSTER_BREAK.LV}else if(n<45656){if(45629<=n&&n<=45655)return e.CLUSTER_BREAK.LVT}else if(n===45656)return e.CLUSTER_BREAK.LV}else if(n<45712){if(n<45684){if(45657<=n&&n<=45683)return e.CLUSTER_BREAK.LVT}else if(n<45685){if(n===45684)return e.CLUSTER_BREAK.LV}else if(45685<=n&&n<=45711)return e.CLUSTER_BREAK.LVT}else if(n<45713){if(n===45712)return e.CLUSTER_BREAK.LV}else if(n<45740){if(45713<=n&&n<=45739)return e.CLUSTER_BREAK.LVT}else if(n===45740)return e.CLUSTER_BREAK.LV}else if(n<45824){if(n<45769){if(n<45768){if(45741<=n&&n<=45767)return e.CLUSTER_BREAK.LVT}else if(n===45768)return e.CLUSTER_BREAK.LV}else if(n<45796){if(45769<=n&&n<=45795)return e.CLUSTER_BREAK.LVT}else if(n<45797){if(n===45796)return e.CLUSTER_BREAK.LV}else if(45797<=n&&n<=45823)return e.CLUSTER_BREAK.LVT}else if(n<45853){if(n<45825){if(n===45824)return e.CLUSTER_BREAK.LV}else if(n<45852){if(45825<=n&&n<=45851)return e.CLUSTER_BREAK.LVT}else if(n===45852)return e.CLUSTER_BREAK.LV}else if(n<45880){if(45853<=n&&n<=45879)return e.CLUSTER_BREAK.LVT}else if(n<45881){if(n===45880)return e.CLUSTER_BREAK.LV}else if(45881<=n&&n<=45907)return e.CLUSTER_BREAK.LVT}else if(n<46189){if(n<46048){if(n<45965){if(n<45936){if(n<45909){if(n===45908)return e.CLUSTER_BREAK.LV}else if(45909<=n&&n<=45935)return e.CLUSTER_BREAK.LVT}else if(n<45937){if(n===45936)return e.CLUSTER_BREAK.LV}else if(n<45964){if(45937<=n&&n<=45963)return e.CLUSTER_BREAK.LVT}else if(n===45964)return e.CLUSTER_BREAK.LV}else if(n<45993){if(n<45992){if(45965<=n&&n<=45991)return e.CLUSTER_BREAK.LVT}else if(n===45992)return e.CLUSTER_BREAK.LV}else if(n<46020){if(45993<=n&&n<=46019)return e.CLUSTER_BREAK.LVT}else if(n<46021){if(n===46020)return e.CLUSTER_BREAK.LV}else if(46021<=n&&n<=46047)return e.CLUSTER_BREAK.LVT}else if(n<46105){if(n<46076){if(n<46049){if(n===46048)return e.CLUSTER_BREAK.LV}else if(46049<=n&&n<=46075)return e.CLUSTER_BREAK.LVT}else if(n<46077){if(n===46076)return e.CLUSTER_BREAK.LV}else if(n<46104){if(46077<=n&&n<=46103)return e.CLUSTER_BREAK.LVT}else if(n===46104)return e.CLUSTER_BREAK.LV}else if(n<46160){if(n<46132){if(46105<=n&&n<=46131)return e.CLUSTER_BREAK.LVT}else if(n<46133){if(n===46132)return e.CLUSTER_BREAK.LV}else if(46133<=n&&n<=46159)return e.CLUSTER_BREAK.LVT}else if(n<46161){if(n===46160)return e.CLUSTER_BREAK.LV}else if(n<46188){if(46161<=n&&n<=46187)return e.CLUSTER_BREAK.LVT}else if(n===46188)return e.CLUSTER_BREAK.LV}else if(n<46356){if(n<46272){if(n<46217){if(n<46216){if(46189<=n&&n<=46215)return e.CLUSTER_BREAK.LVT}else if(n===46216)return e.CLUSTER_BREAK.LV}else if(n<46244){if(46217<=n&&n<=46243)return e.CLUSTER_BREAK.LVT}else if(n<46245){if(n===46244)return e.CLUSTER_BREAK.LV}else if(46245<=n&&n<=46271)return e.CLUSTER_BREAK.LVT}else if(n<46301){if(n<46273){if(n===46272)return e.CLUSTER_BREAK.LV}else if(n<46300){if(46273<=n&&n<=46299)return e.CLUSTER_BREAK.LVT}else if(n===46300)return e.CLUSTER_BREAK.LV}else if(n<46328){if(46301<=n&&n<=46327)return e.CLUSTER_BREAK.LVT}else if(n<46329){if(n===46328)return e.CLUSTER_BREAK.LV}else if(46329<=n&&n<=46355)return e.CLUSTER_BREAK.LVT}else if(n<46413){if(n<46384){if(n<46357){if(n===46356)return e.CLUSTER_BREAK.LV}else if(46357<=n&&n<=46383)return e.CLUSTER_BREAK.LVT}else if(n<46385){if(n===46384)return e.CLUSTER_BREAK.LV}else if(n<46412){if(46385<=n&&n<=46411)return e.CLUSTER_BREAK.LVT}else if(n===46412)return e.CLUSTER_BREAK.LV}else if(n<46468){if(n<46440){if(46413<=n&&n<=46439)return e.CLUSTER_BREAK.LVT}else if(n<46441){if(n===46440)return e.CLUSTER_BREAK.LV}else if(46441<=n&&n<=46467)return e.CLUSTER_BREAK.LVT}else if(n<46469){if(n===46468)return e.CLUSTER_BREAK.LV}else if(n<46496){if(46469<=n&&n<=46495)return e.CLUSTER_BREAK.LVT}else if(n===46496)return e.CLUSTER_BREAK.LV}else if(n<47701){if(n<47112){if(n<46804){if(n<46637){if(n<46580){if(n<46525){if(n<46524){if(46497<=n&&n<=46523)return e.CLUSTER_BREAK.LVT}else if(n===46524)return e.CLUSTER_BREAK.LV}else if(n<46552){if(46525<=n&&n<=46551)return e.CLUSTER_BREAK.LVT}else if(n<46553){if(n===46552)return e.CLUSTER_BREAK.LV}else if(46553<=n&&n<=46579)return e.CLUSTER_BREAK.LVT}else if(n<46608){if(n<46581){if(n===46580)return e.CLUSTER_BREAK.LV}else if(46581<=n&&n<=46607)return e.CLUSTER_BREAK.LVT}else if(n<46609){if(n===46608)return e.CLUSTER_BREAK.LV}else if(n<46636){if(46609<=n&&n<=46635)return e.CLUSTER_BREAK.LVT}else if(n===46636)return e.CLUSTER_BREAK.LV}else if(n<46720){if(n<46665){if(n<46664){if(46637<=n&&n<=46663)return e.CLUSTER_BREAK.LVT}else if(n===46664)return e.CLUSTER_BREAK.LV}else if(n<46692){if(46665<=n&&n<=46691)return e.CLUSTER_BREAK.LVT}else if(n<46693){if(n===46692)return e.CLUSTER_BREAK.LV}else if(46693<=n&&n<=46719)return e.CLUSTER_BREAK.LVT}else if(n<46749){if(n<46721){if(n===46720)return e.CLUSTER_BREAK.LV}else if(n<46748){if(46721<=n&&n<=46747)return e.CLUSTER_BREAK.LVT}else if(n===46748)return e.CLUSTER_BREAK.LV}else if(n<46776){if(46749<=n&&n<=46775)return e.CLUSTER_BREAK.LVT}else if(n<46777){if(n===46776)return e.CLUSTER_BREAK.LV}else if(46777<=n&&n<=46803)return e.CLUSTER_BREAK.LVT}else if(n<46945){if(n<46861){if(n<46832){if(n<46805){if(n===46804)return e.CLUSTER_BREAK.LV}else if(46805<=n&&n<=46831)return e.CLUSTER_BREAK.LVT}else if(n<46833){if(n===46832)return e.CLUSTER_BREAK.LV}else if(n<46860){if(46833<=n&&n<=46859)return e.CLUSTER_BREAK.LVT}else if(n===46860)return e.CLUSTER_BREAK.LV}else if(n<46916){if(n<46888){if(46861<=n&&n<=46887)return e.CLUSTER_BREAK.LVT}else if(n<46889){if(n===46888)return e.CLUSTER_BREAK.LV}else if(46889<=n&&n<=46915)return e.CLUSTER_BREAK.LVT}else if(n<46917){if(n===46916)return e.CLUSTER_BREAK.LV}else if(n<46944){if(46917<=n&&n<=46943)return e.CLUSTER_BREAK.LVT}else if(n===46944)return e.CLUSTER_BREAK.LV}else if(n<47028){if(n<46973){if(n<46972){if(46945<=n&&n<=46971)return e.CLUSTER_BREAK.LVT}else if(n===46972)return e.CLUSTER_BREAK.LV}else if(n<47e3){if(46973<=n&&n<=46999)return e.CLUSTER_BREAK.LVT}else if(n<47001){if(n===47e3)return e.CLUSTER_BREAK.LV}else if(47001<=n&&n<=47027)return e.CLUSTER_BREAK.LVT}else if(n<47057){if(n<47029){if(n===47028)return e.CLUSTER_BREAK.LV}else if(n<47056){if(47029<=n&&n<=47055)return e.CLUSTER_BREAK.LVT}else if(n===47056)return e.CLUSTER_BREAK.LV}else if(n<47084){if(47057<=n&&n<=47083)return e.CLUSTER_BREAK.LVT}else if(n<47085){if(n===47084)return e.CLUSTER_BREAK.LV}else if(47085<=n&&n<=47111)return e.CLUSTER_BREAK.LVT}else if(n<47393){if(n<47252){if(n<47169){if(n<47140){if(n<47113){if(n===47112)return e.CLUSTER_BREAK.LV}else if(47113<=n&&n<=47139)return e.CLUSTER_BREAK.LVT}else if(n<47141){if(n===47140)return e.CLUSTER_BREAK.LV}else if(n<47168){if(47141<=n&&n<=47167)return e.CLUSTER_BREAK.LVT}else if(n===47168)return e.CLUSTER_BREAK.LV}else if(n<47197){if(n<47196){if(47169<=n&&n<=47195)return e.CLUSTER_BREAK.LVT}else if(n===47196)return e.CLUSTER_BREAK.LV}else if(n<47224){if(47197<=n&&n<=47223)return e.CLUSTER_BREAK.LVT}else if(n<47225){if(n===47224)return e.CLUSTER_BREAK.LV}else if(47225<=n&&n<=47251)return e.CLUSTER_BREAK.LVT}else if(n<47309){if(n<47280){if(n<47253){if(n===47252)return e.CLUSTER_BREAK.LV}else if(47253<=n&&n<=47279)return e.CLUSTER_BREAK.LVT}else if(n<47281){if(n===47280)return e.CLUSTER_BREAK.LV}else if(n<47308){if(47281<=n&&n<=47307)return e.CLUSTER_BREAK.LVT}else if(n===47308)return e.CLUSTER_BREAK.LV}else if(n<47364){if(n<47336){if(47309<=n&&n<=47335)return e.CLUSTER_BREAK.LVT}else if(n<47337){if(n===47336)return e.CLUSTER_BREAK.LV}else if(47337<=n&&n<=47363)return e.CLUSTER_BREAK.LVT}else if(n<47365){if(n===47364)return e.CLUSTER_BREAK.LV}else if(n<47392){if(47365<=n&&n<=47391)return e.CLUSTER_BREAK.LVT}else if(n===47392)return e.CLUSTER_BREAK.LV}else if(n<47560){if(n<47476){if(n<47421){if(n<47420){if(47393<=n&&n<=47419)return e.CLUSTER_BREAK.LVT}else if(n===47420)return e.CLUSTER_BREAK.LV}else if(n<47448){if(47421<=n&&n<=47447)return e.CLUSTER_BREAK.LVT}else if(n<47449){if(n===47448)return e.CLUSTER_BREAK.LV}else if(47449<=n&&n<=47475)return e.CLUSTER_BREAK.LVT}else if(n<47505){if(n<47477){if(n===47476)return e.CLUSTER_BREAK.LV}else if(n<47504){if(47477<=n&&n<=47503)return e.CLUSTER_BREAK.LVT}else if(n===47504)return e.CLUSTER_BREAK.LV}else if(n<47532){if(47505<=n&&n<=47531)return e.CLUSTER_BREAK.LVT}else if(n<47533){if(n===47532)return e.CLUSTER_BREAK.LV}else if(47533<=n&&n<=47559)return e.CLUSTER_BREAK.LVT}else if(n<47617){if(n<47588){if(n<47561){if(n===47560)return e.CLUSTER_BREAK.LV}else if(47561<=n&&n<=47587)return e.CLUSTER_BREAK.LVT}else if(n<47589){if(n===47588)return e.CLUSTER_BREAK.LV}else if(n<47616){if(47589<=n&&n<=47615)return e.CLUSTER_BREAK.LVT}else if(n===47616)return e.CLUSTER_BREAK.LV}else if(n<47672){if(n<47644){if(47617<=n&&n<=47643)return e.CLUSTER_BREAK.LVT}else if(n<47645){if(n===47644)return e.CLUSTER_BREAK.LV}else if(47645<=n&&n<=47671)return e.CLUSTER_BREAK.LVT}else if(n<47673){if(n===47672)return e.CLUSTER_BREAK.LV}else if(n<47700){if(47673<=n&&n<=47699)return e.CLUSTER_BREAK.LVT}else if(n===47700)return e.CLUSTER_BREAK.LV}else if(n<48316){if(n<48008){if(n<47841){if(n<47784){if(n<47729){if(n<47728){if(47701<=n&&n<=47727)return e.CLUSTER_BREAK.LVT}else if(n===47728)return e.CLUSTER_BREAK.LV}else if(n<47756){if(47729<=n&&n<=47755)return e.CLUSTER_BREAK.LVT}else if(n<47757){if(n===47756)return e.CLUSTER_BREAK.LV}else if(47757<=n&&n<=47783)return e.CLUSTER_BREAK.LVT}else if(n<47812){if(n<47785){if(n===47784)return e.CLUSTER_BREAK.LV}else if(47785<=n&&n<=47811)return e.CLUSTER_BREAK.LVT}else if(n<47813){if(n===47812)return e.CLUSTER_BREAK.LV}else if(n<47840){if(47813<=n&&n<=47839)return e.CLUSTER_BREAK.LVT}else if(n===47840)return e.CLUSTER_BREAK.LV}else if(n<47924){if(n<47869){if(n<47868){if(47841<=n&&n<=47867)return e.CLUSTER_BREAK.LVT}else if(n===47868)return e.CLUSTER_BREAK.LV}else if(n<47896){if(47869<=n&&n<=47895)return e.CLUSTER_BREAK.LVT}else if(n<47897){if(n===47896)return e.CLUSTER_BREAK.LV}else if(47897<=n&&n<=47923)return e.CLUSTER_BREAK.LVT}else if(n<47953){if(n<47925){if(n===47924)return e.CLUSTER_BREAK.LV}else if(n<47952){if(47925<=n&&n<=47951)return e.CLUSTER_BREAK.LVT}else if(n===47952)return e.CLUSTER_BREAK.LV}else if(n<47980){if(47953<=n&&n<=47979)return e.CLUSTER_BREAK.LVT}else if(n<47981){if(n===47980)return e.CLUSTER_BREAK.LV}else if(47981<=n&&n<=48007)return e.CLUSTER_BREAK.LVT}else if(n<48149){if(n<48065){if(n<48036){if(n<48009){if(n===48008)return e.CLUSTER_BREAK.LV}else if(48009<=n&&n<=48035)return e.CLUSTER_BREAK.LVT}else if(n<48037){if(n===48036)return e.CLUSTER_BREAK.LV}else if(n<48064){if(48037<=n&&n<=48063)return e.CLUSTER_BREAK.LVT}else if(n===48064)return e.CLUSTER_BREAK.LV}else if(n<48120){if(n<48092){if(48065<=n&&n<=48091)return e.CLUSTER_BREAK.LVT}else if(n<48093){if(n===48092)return e.CLUSTER_BREAK.LV}else if(48093<=n&&n<=48119)return e.CLUSTER_BREAK.LVT}else if(n<48121){if(n===48120)return e.CLUSTER_BREAK.LV}else if(n<48148){if(48121<=n&&n<=48147)return e.CLUSTER_BREAK.LVT}else if(n===48148)return e.CLUSTER_BREAK.LV}else if(n<48232){if(n<48177){if(n<48176){if(48149<=n&&n<=48175)return e.CLUSTER_BREAK.LVT}else if(n===48176)return e.CLUSTER_BREAK.LV}else if(n<48204){if(48177<=n&&n<=48203)return e.CLUSTER_BREAK.LVT}else if(n<48205){if(n===48204)return e.CLUSTER_BREAK.LV}else if(48205<=n&&n<=48231)return e.CLUSTER_BREAK.LVT}else if(n<48261){if(n<48233){if(n===48232)return e.CLUSTER_BREAK.LV}else if(n<48260){if(48233<=n&&n<=48259)return e.CLUSTER_BREAK.LVT}else if(n===48260)return e.CLUSTER_BREAK.LV}else if(n<48288){if(48261<=n&&n<=48287)return e.CLUSTER_BREAK.LVT}else if(n<48289){if(n===48288)return e.CLUSTER_BREAK.LV}else if(48289<=n&&n<=48315)return e.CLUSTER_BREAK.LVT}else if(n<48597){if(n<48456){if(n<48373){if(n<48344){if(n<48317){if(n===48316)return e.CLUSTER_BREAK.LV}else if(48317<=n&&n<=48343)return e.CLUSTER_BREAK.LVT}else if(n<48345){if(n===48344)return e.CLUSTER_BREAK.LV}else if(n<48372){if(48345<=n&&n<=48371)return e.CLUSTER_BREAK.LVT}else if(n===48372)return e.CLUSTER_BREAK.LV}else if(n<48401){if(n<48400){if(48373<=n&&n<=48399)return e.CLUSTER_BREAK.LVT}else if(n===48400)return e.CLUSTER_BREAK.LV}else if(n<48428){if(48401<=n&&n<=48427)return e.CLUSTER_BREAK.LVT}else if(n<48429){if(n===48428)return e.CLUSTER_BREAK.LV}else if(48429<=n&&n<=48455)return e.CLUSTER_BREAK.LVT}else if(n<48513){if(n<48484){if(n<48457){if(n===48456)return e.CLUSTER_BREAK.LV}else if(48457<=n&&n<=48483)return e.CLUSTER_BREAK.LVT}else if(n<48485){if(n===48484)return e.CLUSTER_BREAK.LV}else if(n<48512){if(48485<=n&&n<=48511)return e.CLUSTER_BREAK.LVT}else if(n===48512)return e.CLUSTER_BREAK.LV}else if(n<48568){if(n<48540){if(48513<=n&&n<=48539)return e.CLUSTER_BREAK.LVT}else if(n<48541){if(n===48540)return e.CLUSTER_BREAK.LV}else if(48541<=n&&n<=48567)return e.CLUSTER_BREAK.LVT}else if(n<48569){if(n===48568)return e.CLUSTER_BREAK.LV}else if(n<48596){if(48569<=n&&n<=48595)return e.CLUSTER_BREAK.LVT}else if(n===48596)return e.CLUSTER_BREAK.LV}else if(n<48764){if(n<48680){if(n<48625){if(n<48624){if(48597<=n&&n<=48623)return e.CLUSTER_BREAK.LVT}else if(n===48624)return e.CLUSTER_BREAK.LV}else if(n<48652){if(48625<=n&&n<=48651)return e.CLUSTER_BREAK.LVT}else if(n<48653){if(n===48652)return e.CLUSTER_BREAK.LV}else if(48653<=n&&n<=48679)return e.CLUSTER_BREAK.LVT}else if(n<48709){if(n<48681){if(n===48680)return e.CLUSTER_BREAK.LV}else if(n<48708){if(48681<=n&&n<=48707)return e.CLUSTER_BREAK.LVT}else if(n===48708)return e.CLUSTER_BREAK.LV}else if(n<48736){if(48709<=n&&n<=48735)return e.CLUSTER_BREAK.LVT}else if(n<48737){if(n===48736)return e.CLUSTER_BREAK.LV}else if(48737<=n&&n<=48763)return e.CLUSTER_BREAK.LVT}else if(n<48821){if(n<48792){if(n<48765){if(n===48764)return e.CLUSTER_BREAK.LV}else if(48765<=n&&n<=48791)return e.CLUSTER_BREAK.LVT}else if(n<48793){if(n===48792)return e.CLUSTER_BREAK.LV}else if(n<48820){if(48793<=n&&n<=48819)return e.CLUSTER_BREAK.LVT}else if(n===48820)return e.CLUSTER_BREAK.LV}else if(n<48876){if(n<48848){if(48821<=n&&n<=48847)return e.CLUSTER_BREAK.LVT}else if(n<48849){if(n===48848)return e.CLUSTER_BREAK.LV}else if(48849<=n&&n<=48875)return e.CLUSTER_BREAK.LVT}else if(n<48877){if(n===48876)return e.CLUSTER_BREAK.LV}else if(n<48904){if(48877<=n&&n<=48903)return e.CLUSTER_BREAK.LVT}else if(n===48904)return e.CLUSTER_BREAK.LV}else if(n<53720){if(n<51312){if(n<50108){if(n<49493){if(n<49212){if(n<49045){if(n<48988){if(n<48933){if(n<48932){if(48905<=n&&n<=48931)return e.CLUSTER_BREAK.LVT}else if(n===48932)return e.CLUSTER_BREAK.LV}else if(n<48960){if(48933<=n&&n<=48959)return e.CLUSTER_BREAK.LVT}else if(n<48961){if(n===48960)return e.CLUSTER_BREAK.LV}else if(48961<=n&&n<=48987)return e.CLUSTER_BREAK.LVT}else if(n<49016){if(n<48989){if(n===48988)return e.CLUSTER_BREAK.LV}else if(48989<=n&&n<=49015)return e.CLUSTER_BREAK.LVT}else if(n<49017){if(n===49016)return e.CLUSTER_BREAK.LV}else if(n<49044){if(49017<=n&&n<=49043)return e.CLUSTER_BREAK.LVT}else if(n===49044)return e.CLUSTER_BREAK.LV}else if(n<49128){if(n<49073){if(n<49072){if(49045<=n&&n<=49071)return e.CLUSTER_BREAK.LVT}else if(n===49072)return e.CLUSTER_BREAK.LV}else if(n<49100){if(49073<=n&&n<=49099)return e.CLUSTER_BREAK.LVT}else if(n<49101){if(n===49100)return e.CLUSTER_BREAK.LV}else if(49101<=n&&n<=49127)return e.CLUSTER_BREAK.LVT}else if(n<49157){if(n<49129){if(n===49128)return e.CLUSTER_BREAK.LV}else if(n<49156){if(49129<=n&&n<=49155)return e.CLUSTER_BREAK.LVT}else if(n===49156)return e.CLUSTER_BREAK.LV}else if(n<49184){if(49157<=n&&n<=49183)return e.CLUSTER_BREAK.LVT}else if(n<49185){if(n===49184)return e.CLUSTER_BREAK.LV}else if(49185<=n&&n<=49211)return e.CLUSTER_BREAK.LVT}else if(n<49352){if(n<49269){if(n<49240){if(n<49213){if(n===49212)return e.CLUSTER_BREAK.LV}else if(49213<=n&&n<=49239)return e.CLUSTER_BREAK.LVT}else if(n<49241){if(n===49240)return e.CLUSTER_BREAK.LV}else if(n<49268){if(49241<=n&&n<=49267)return e.CLUSTER_BREAK.LVT}else if(n===49268)return e.CLUSTER_BREAK.LV}else if(n<49297){if(n<49296){if(49269<=n&&n<=49295)return e.CLUSTER_BREAK.LVT}else if(n===49296)return e.CLUSTER_BREAK.LV}else if(n<49324){if(49297<=n&&n<=49323)return e.CLUSTER_BREAK.LVT}else if(n<49325){if(n===49324)return e.CLUSTER_BREAK.LV}else if(49325<=n&&n<=49351)return e.CLUSTER_BREAK.LVT}else if(n<49409){if(n<49380){if(n<49353){if(n===49352)return e.CLUSTER_BREAK.LV}else if(49353<=n&&n<=49379)return e.CLUSTER_BREAK.LVT}else if(n<49381){if(n===49380)return e.CLUSTER_BREAK.LV}else if(n<49408){if(49381<=n&&n<=49407)return e.CLUSTER_BREAK.LVT}else if(n===49408)return e.CLUSTER_BREAK.LV}else if(n<49464){if(n<49436){if(49409<=n&&n<=49435)return e.CLUSTER_BREAK.LVT}else if(n<49437){if(n===49436)return e.CLUSTER_BREAK.LV}else if(49437<=n&&n<=49463)return e.CLUSTER_BREAK.LVT}else if(n<49465){if(n===49464)return e.CLUSTER_BREAK.LV}else if(n<49492){if(49465<=n&&n<=49491)return e.CLUSTER_BREAK.LVT}else if(n===49492)return e.CLUSTER_BREAK.LV}else if(n<49800){if(n<49633){if(n<49576){if(n<49521){if(n<49520){if(49493<=n&&n<=49519)return e.CLUSTER_BREAK.LVT}else if(n===49520)return e.CLUSTER_BREAK.LV}else if(n<49548){if(49521<=n&&n<=49547)return e.CLUSTER_BREAK.LVT}else if(n<49549){if(n===49548)return e.CLUSTER_BREAK.LV}else if(49549<=n&&n<=49575)return e.CLUSTER_BREAK.LVT}else if(n<49604){if(n<49577){if(n===49576)return e.CLUSTER_BREAK.LV}else if(49577<=n&&n<=49603)return e.CLUSTER_BREAK.LVT}else if(n<49605){if(n===49604)return e.CLUSTER_BREAK.LV}else if(n<49632){if(49605<=n&&n<=49631)return e.CLUSTER_BREAK.LVT}else if(n===49632)return e.CLUSTER_BREAK.LV}else if(n<49716){if(n<49661){if(n<49660){if(49633<=n&&n<=49659)return e.CLUSTER_BREAK.LVT}else if(n===49660)return e.CLUSTER_BREAK.LV}else if(n<49688){if(49661<=n&&n<=49687)return e.CLUSTER_BREAK.LVT}else if(n<49689){if(n===49688)return e.CLUSTER_BREAK.LV}else if(49689<=n&&n<=49715)return e.CLUSTER_BREAK.LVT}else if(n<49745){if(n<49717){if(n===49716)return e.CLUSTER_BREAK.LV}else if(n<49744){if(49717<=n&&n<=49743)return e.CLUSTER_BREAK.LVT}else if(n===49744)return e.CLUSTER_BREAK.LV}else if(n<49772){if(49745<=n&&n<=49771)return e.CLUSTER_BREAK.LVT}else if(n<49773){if(n===49772)return e.CLUSTER_BREAK.LV}else if(49773<=n&&n<=49799)return e.CLUSTER_BREAK.LVT}else if(n<49941){if(n<49857){if(n<49828){if(n<49801){if(n===49800)return e.CLUSTER_BREAK.LV}else if(49801<=n&&n<=49827)return e.CLUSTER_BREAK.LVT}else if(n<49829){if(n===49828)return e.CLUSTER_BREAK.LV}else if(n<49856){if(49829<=n&&n<=49855)return e.CLUSTER_BREAK.LVT}else if(n===49856)return e.CLUSTER_BREAK.LV}else if(n<49912){if(n<49884){if(49857<=n&&n<=49883)return e.CLUSTER_BREAK.LVT}else if(n<49885){if(n===49884)return e.CLUSTER_BREAK.LV}else if(49885<=n&&n<=49911)return e.CLUSTER_BREAK.LVT}else if(n<49913){if(n===49912)return e.CLUSTER_BREAK.LV}else if(n<49940){if(49913<=n&&n<=49939)return e.CLUSTER_BREAK.LVT}else if(n===49940)return e.CLUSTER_BREAK.LV}else if(n<50024){if(n<49969){if(n<49968){if(49941<=n&&n<=49967)return e.CLUSTER_BREAK.LVT}else if(n===49968)return e.CLUSTER_BREAK.LV}else if(n<49996){if(49969<=n&&n<=49995)return e.CLUSTER_BREAK.LVT}else if(n<49997){if(n===49996)return e.CLUSTER_BREAK.LV}else if(49997<=n&&n<=50023)return e.CLUSTER_BREAK.LVT}else if(n<50053){if(n<50025){if(n===50024)return e.CLUSTER_BREAK.LV}else if(n<50052){if(50025<=n&&n<=50051)return e.CLUSTER_BREAK.LVT}else if(n===50052)return e.CLUSTER_BREAK.LV}else if(n<50080){if(50053<=n&&n<=50079)return e.CLUSTER_BREAK.LVT}else if(n<50081){if(n===50080)return e.CLUSTER_BREAK.LV}else if(50081<=n&&n<=50107)return e.CLUSTER_BREAK.LVT}else if(n<50697){if(n<50389){if(n<50248){if(n<50165){if(n<50136){if(n<50109){if(n===50108)return e.CLUSTER_BREAK.LV}else if(50109<=n&&n<=50135)return e.CLUSTER_BREAK.LVT}else if(n<50137){if(n===50136)return e.CLUSTER_BREAK.LV}else if(n<50164){if(50137<=n&&n<=50163)return e.CLUSTER_BREAK.LVT}else if(n===50164)return e.CLUSTER_BREAK.LV}else if(n<50193){if(n<50192){if(50165<=n&&n<=50191)return e.CLUSTER_BREAK.LVT}else if(n===50192)return e.CLUSTER_BREAK.LV}else if(n<50220){if(50193<=n&&n<=50219)return e.CLUSTER_BREAK.LVT}else if(n<50221){if(n===50220)return e.CLUSTER_BREAK.LV}else if(50221<=n&&n<=50247)return e.CLUSTER_BREAK.LVT}else if(n<50305){if(n<50276){if(n<50249){if(n===50248)return e.CLUSTER_BREAK.LV}else if(50249<=n&&n<=50275)return e.CLUSTER_BREAK.LVT}else if(n<50277){if(n===50276)return e.CLUSTER_BREAK.LV}else if(n<50304){if(50277<=n&&n<=50303)return e.CLUSTER_BREAK.LVT}else if(n===50304)return e.CLUSTER_BREAK.LV}else if(n<50360){if(n<50332){if(50305<=n&&n<=50331)return e.CLUSTER_BREAK.LVT}else if(n<50333){if(n===50332)return e.CLUSTER_BREAK.LV}else if(50333<=n&&n<=50359)return e.CLUSTER_BREAK.LVT}else if(n<50361){if(n===50360)return e.CLUSTER_BREAK.LV}else if(n<50388){if(50361<=n&&n<=50387)return e.CLUSTER_BREAK.LVT}else if(n===50388)return e.CLUSTER_BREAK.LV}else if(n<50556){if(n<50472){if(n<50417){if(n<50416){if(50389<=n&&n<=50415)return e.CLUSTER_BREAK.LVT}else if(n===50416)return e.CLUSTER_BREAK.LV}else if(n<50444){if(50417<=n&&n<=50443)return e.CLUSTER_BREAK.LVT}else if(n<50445){if(n===50444)return e.CLUSTER_BREAK.LV}else if(50445<=n&&n<=50471)return e.CLUSTER_BREAK.LVT}else if(n<50501){if(n<50473){if(n===50472)return e.CLUSTER_BREAK.LV}else if(n<50500){if(50473<=n&&n<=50499)return e.CLUSTER_BREAK.LVT}else if(n===50500)return e.CLUSTER_BREAK.LV}else if(n<50528){if(50501<=n&&n<=50527)return e.CLUSTER_BREAK.LVT}else if(n<50529){if(n===50528)return e.CLUSTER_BREAK.LV}else if(50529<=n&&n<=50555)return e.CLUSTER_BREAK.LVT}else if(n<50613){if(n<50584){if(n<50557){if(n===50556)return e.CLUSTER_BREAK.LV}else if(50557<=n&&n<=50583)return e.CLUSTER_BREAK.LVT}else if(n<50585){if(n===50584)return e.CLUSTER_BREAK.LV}else if(n<50612){if(50585<=n&&n<=50611)return e.CLUSTER_BREAK.LVT}else if(n===50612)return e.CLUSTER_BREAK.LV}else if(n<50668){if(n<50640){if(50613<=n&&n<=50639)return e.CLUSTER_BREAK.LVT}else if(n<50641){if(n===50640)return e.CLUSTER_BREAK.LV}else if(50641<=n&&n<=50667)return e.CLUSTER_BREAK.LVT}else if(n<50669){if(n===50668)return e.CLUSTER_BREAK.LV}else if(n<50696){if(50669<=n&&n<=50695)return e.CLUSTER_BREAK.LVT}else if(n===50696)return e.CLUSTER_BREAK.LV}else if(n<51004){if(n<50837){if(n<50780){if(n<50725){if(n<50724){if(50697<=n&&n<=50723)return e.CLUSTER_BREAK.LVT}else if(n===50724)return e.CLUSTER_BREAK.LV}else if(n<50752){if(50725<=n&&n<=50751)return e.CLUSTER_BREAK.LVT}else if(n<50753){if(n===50752)return e.CLUSTER_BREAK.LV}else if(50753<=n&&n<=50779)return e.CLUSTER_BREAK.LVT}else if(n<50808){if(n<50781){if(n===50780)return e.CLUSTER_BREAK.LV}else if(50781<=n&&n<=50807)return e.CLUSTER_BREAK.LVT}else if(n<50809){if(n===50808)return e.CLUSTER_BREAK.LV}else if(n<50836){if(50809<=n&&n<=50835)return e.CLUSTER_BREAK.LVT}else if(n===50836)return e.CLUSTER_BREAK.LV}else if(n<50920){if(n<50865){if(n<50864){if(50837<=n&&n<=50863)return e.CLUSTER_BREAK.LVT}else if(n===50864)return e.CLUSTER_BREAK.LV}else if(n<50892){if(50865<=n&&n<=50891)return e.CLUSTER_BREAK.LVT}else if(n<50893){if(n===50892)return e.CLUSTER_BREAK.LV}else if(50893<=n&&n<=50919)return e.CLUSTER_BREAK.LVT}else if(n<50949){if(n<50921){if(n===50920)return e.CLUSTER_BREAK.LV}else if(n<50948){if(50921<=n&&n<=50947)return e.CLUSTER_BREAK.LVT}else if(n===50948)return e.CLUSTER_BREAK.LV}else if(n<50976){if(50949<=n&&n<=50975)return e.CLUSTER_BREAK.LVT}else if(n<50977){if(n===50976)return e.CLUSTER_BREAK.LV}else if(50977<=n&&n<=51003)return e.CLUSTER_BREAK.LVT}else if(n<51145){if(n<51061){if(n<51032){if(n<51005){if(n===51004)return e.CLUSTER_BREAK.LV}else if(51005<=n&&n<=51031)return e.CLUSTER_BREAK.LVT}else if(n<51033){if(n===51032)return e.CLUSTER_BREAK.LV}else if(n<51060){if(51033<=n&&n<=51059)return e.CLUSTER_BREAK.LVT}else if(n===51060)return e.CLUSTER_BREAK.LV}else if(n<51116){if(n<51088){if(51061<=n&&n<=51087)return e.CLUSTER_BREAK.LVT}else if(n<51089){if(n===51088)return e.CLUSTER_BREAK.LV}else if(51089<=n&&n<=51115)return e.CLUSTER_BREAK.LVT}else if(n<51117){if(n===51116)return e.CLUSTER_BREAK.LV}else if(n<51144){if(51117<=n&&n<=51143)return e.CLUSTER_BREAK.LVT}else if(n===51144)return e.CLUSTER_BREAK.LV}else if(n<51228){if(n<51173){if(n<51172){if(51145<=n&&n<=51171)return e.CLUSTER_BREAK.LVT}else if(n===51172)return e.CLUSTER_BREAK.LV}else if(n<51200){if(51173<=n&&n<=51199)return e.CLUSTER_BREAK.LVT}else if(n<51201){if(n===51200)return e.CLUSTER_BREAK.LV}else if(51201<=n&&n<=51227)return e.CLUSTER_BREAK.LVT}else if(n<51257){if(n<51229){if(n===51228)return e.CLUSTER_BREAK.LV}else if(n<51256){if(51229<=n&&n<=51255)return e.CLUSTER_BREAK.LVT}else if(n===51256)return e.CLUSTER_BREAK.LV}else if(n<51284){if(51257<=n&&n<=51283)return e.CLUSTER_BREAK.LVT}else if(n<51285){if(n===51284)return e.CLUSTER_BREAK.LV}else if(51285<=n&&n<=51311)return e.CLUSTER_BREAK.LVT}else if(n<52516){if(n<51901){if(n<51593){if(n<51452){if(n<51369){if(n<51340){if(n<51313){if(n===51312)return e.CLUSTER_BREAK.LV}else if(51313<=n&&n<=51339)return e.CLUSTER_BREAK.LVT}else if(n<51341){if(n===51340)return e.CLUSTER_BREAK.LV}else if(n<51368){if(51341<=n&&n<=51367)return e.CLUSTER_BREAK.LVT}else if(n===51368)return e.CLUSTER_BREAK.LV}else if(n<51397){if(n<51396){if(51369<=n&&n<=51395)return e.CLUSTER_BREAK.LVT}else if(n===51396)return e.CLUSTER_BREAK.LV}else if(n<51424){if(51397<=n&&n<=51423)return e.CLUSTER_BREAK.LVT}else if(n<51425){if(n===51424)return e.CLUSTER_BREAK.LV}else if(51425<=n&&n<=51451)return e.CLUSTER_BREAK.LVT}else if(n<51509){if(n<51480){if(n<51453){if(n===51452)return e.CLUSTER_BREAK.LV}else if(51453<=n&&n<=51479)return e.CLUSTER_BREAK.LVT}else if(n<51481){if(n===51480)return e.CLUSTER_BREAK.LV}else if(n<51508){if(51481<=n&&n<=51507)return e.CLUSTER_BREAK.LVT}else if(n===51508)return e.CLUSTER_BREAK.LV}else if(n<51564){if(n<51536){if(51509<=n&&n<=51535)return e.CLUSTER_BREAK.LVT}else if(n<51537){if(n===51536)return e.CLUSTER_BREAK.LV}else if(51537<=n&&n<=51563)return e.CLUSTER_BREAK.LVT}else if(n<51565){if(n===51564)return e.CLUSTER_BREAK.LV}else if(n<51592){if(51565<=n&&n<=51591)return e.CLUSTER_BREAK.LVT}else if(n===51592)return e.CLUSTER_BREAK.LV}else if(n<51760){if(n<51676){if(n<51621){if(n<51620){if(51593<=n&&n<=51619)return e.CLUSTER_BREAK.LVT}else if(n===51620)return e.CLUSTER_BREAK.LV}else if(n<51648){if(51621<=n&&n<=51647)return e.CLUSTER_BREAK.LVT}else if(n<51649){if(n===51648)return e.CLUSTER_BREAK.LV}else if(51649<=n&&n<=51675)return e.CLUSTER_BREAK.LVT}else if(n<51705){if(n<51677){if(n===51676)return e.CLUSTER_BREAK.LV}else if(n<51704){if(51677<=n&&n<=51703)return e.CLUSTER_BREAK.LVT}else if(n===51704)return e.CLUSTER_BREAK.LV}else if(n<51732){if(51705<=n&&n<=51731)return e.CLUSTER_BREAK.LVT}else if(n<51733){if(n===51732)return e.CLUSTER_BREAK.LV}else if(51733<=n&&n<=51759)return e.CLUSTER_BREAK.LVT}else if(n<51817){if(n<51788){if(n<51761){if(n===51760)return e.CLUSTER_BREAK.LV}else if(51761<=n&&n<=51787)return e.CLUSTER_BREAK.LVT}else if(n<51789){if(n===51788)return e.CLUSTER_BREAK.LV}else if(n<51816){if(51789<=n&&n<=51815)return e.CLUSTER_BREAK.LVT}else if(n===51816)return e.CLUSTER_BREAK.LV}else if(n<51872){if(n<51844){if(51817<=n&&n<=51843)return e.CLUSTER_BREAK.LVT}else if(n<51845){if(n===51844)return e.CLUSTER_BREAK.LV}else if(51845<=n&&n<=51871)return e.CLUSTER_BREAK.LVT}else if(n<51873){if(n===51872)return e.CLUSTER_BREAK.LV}else if(n<51900){if(51873<=n&&n<=51899)return e.CLUSTER_BREAK.LVT}else if(n===51900)return e.CLUSTER_BREAK.LV}else if(n<52208){if(n<52041){if(n<51984){if(n<51929){if(n<51928){if(51901<=n&&n<=51927)return e.CLUSTER_BREAK.LVT}else if(n===51928)return e.CLUSTER_BREAK.LV}else if(n<51956){if(51929<=n&&n<=51955)return e.CLUSTER_BREAK.LVT}else if(n<51957){if(n===51956)return e.CLUSTER_BREAK.LV}else if(51957<=n&&n<=51983)return e.CLUSTER_BREAK.LVT}else if(n<52012){if(n<51985){if(n===51984)return e.CLUSTER_BREAK.LV}else if(51985<=n&&n<=52011)return e.CLUSTER_BREAK.LVT}else if(n<52013){if(n===52012)return e.CLUSTER_BREAK.LV}else if(n<52040){if(52013<=n&&n<=52039)return e.CLUSTER_BREAK.LVT}else if(n===52040)return e.CLUSTER_BREAK.LV}else if(n<52124){if(n<52069){if(n<52068){if(52041<=n&&n<=52067)return e.CLUSTER_BREAK.LVT}else if(n===52068)return e.CLUSTER_BREAK.LV}else if(n<52096){if(52069<=n&&n<=52095)return e.CLUSTER_BREAK.LVT}else if(n<52097){if(n===52096)return e.CLUSTER_BREAK.LV}else if(52097<=n&&n<=52123)return e.CLUSTER_BREAK.LVT}else if(n<52153){if(n<52125){if(n===52124)return e.CLUSTER_BREAK.LV}else if(n<52152){if(52125<=n&&n<=52151)return e.CLUSTER_BREAK.LVT}else if(n===52152)return e.CLUSTER_BREAK.LV}else if(n<52180){if(52153<=n&&n<=52179)return e.CLUSTER_BREAK.LVT}else if(n<52181){if(n===52180)return e.CLUSTER_BREAK.LV}else if(52181<=n&&n<=52207)return e.CLUSTER_BREAK.LVT}else if(n<52349){if(n<52265){if(n<52236){if(n<52209){if(n===52208)return e.CLUSTER_BREAK.LV}else if(52209<=n&&n<=52235)return e.CLUSTER_BREAK.LVT}else if(n<52237){if(n===52236)return e.CLUSTER_BREAK.LV}else if(n<52264){if(52237<=n&&n<=52263)return e.CLUSTER_BREAK.LVT}else if(n===52264)return e.CLUSTER_BREAK.LV}else if(n<52320){if(n<52292){if(52265<=n&&n<=52291)return e.CLUSTER_BREAK.LVT}else if(n<52293){if(n===52292)return e.CLUSTER_BREAK.LV}else if(52293<=n&&n<=52319)return e.CLUSTER_BREAK.LVT}else if(n<52321){if(n===52320)return e.CLUSTER_BREAK.LV}else if(n<52348){if(52321<=n&&n<=52347)return e.CLUSTER_BREAK.LVT}else if(n===52348)return e.CLUSTER_BREAK.LV}else if(n<52432){if(n<52377){if(n<52376){if(52349<=n&&n<=52375)return e.CLUSTER_BREAK.LVT}else if(n===52376)return e.CLUSTER_BREAK.LV}else if(n<52404){if(52377<=n&&n<=52403)return e.CLUSTER_BREAK.LVT}else if(n<52405){if(n===52404)return e.CLUSTER_BREAK.LV}else if(52405<=n&&n<=52431)return e.CLUSTER_BREAK.LVT}else if(n<52461){if(n<52433){if(n===52432)return e.CLUSTER_BREAK.LV}else if(n<52460){if(52433<=n&&n<=52459)return e.CLUSTER_BREAK.LVT}else if(n===52460)return e.CLUSTER_BREAK.LV}else if(n<52488){if(52461<=n&&n<=52487)return e.CLUSTER_BREAK.LVT}else if(n<52489){if(n===52488)return e.CLUSTER_BREAK.LV}else if(52489<=n&&n<=52515)return e.CLUSTER_BREAK.LVT}else if(n<53105){if(n<52797){if(n<52656){if(n<52573){if(n<52544){if(n<52517){if(n===52516)return e.CLUSTER_BREAK.LV}else if(52517<=n&&n<=52543)return e.CLUSTER_BREAK.LVT}else if(n<52545){if(n===52544)return e.CLUSTER_BREAK.LV}else if(n<52572){if(52545<=n&&n<=52571)return e.CLUSTER_BREAK.LVT}else if(n===52572)return e.CLUSTER_BREAK.LV}else if(n<52601){if(n<52600){if(52573<=n&&n<=52599)return e.CLUSTER_BREAK.LVT}else if(n===52600)return e.CLUSTER_BREAK.LV}else if(n<52628){if(52601<=n&&n<=52627)return e.CLUSTER_BREAK.LVT}else if(n<52629){if(n===52628)return e.CLUSTER_BREAK.LV}else if(52629<=n&&n<=52655)return e.CLUSTER_BREAK.LVT}else if(n<52713){if(n<52684){if(n<52657){if(n===52656)return e.CLUSTER_BREAK.LV}else if(52657<=n&&n<=52683)return e.CLUSTER_BREAK.LVT}else if(n<52685){if(n===52684)return e.CLUSTER_BREAK.LV}else if(n<52712){if(52685<=n&&n<=52711)return e.CLUSTER_BREAK.LVT}else if(n===52712)return e.CLUSTER_BREAK.LV}else if(n<52768){if(n<52740){if(52713<=n&&n<=52739)return e.CLUSTER_BREAK.LVT}else if(n<52741){if(n===52740)return e.CLUSTER_BREAK.LV}else if(52741<=n&&n<=52767)return e.CLUSTER_BREAK.LVT}else if(n<52769){if(n===52768)return e.CLUSTER_BREAK.LV}else if(n<52796){if(52769<=n&&n<=52795)return e.CLUSTER_BREAK.LVT}else if(n===52796)return e.CLUSTER_BREAK.LV}else if(n<52964){if(n<52880){if(n<52825){if(n<52824){if(52797<=n&&n<=52823)return e.CLUSTER_BREAK.LVT}else if(n===52824)return e.CLUSTER_BREAK.LV}else if(n<52852){if(52825<=n&&n<=52851)return e.CLUSTER_BREAK.LVT}else if(n<52853){if(n===52852)return e.CLUSTER_BREAK.LV}else if(52853<=n&&n<=52879)return e.CLUSTER_BREAK.LVT}else if(n<52909){if(n<52881){if(n===52880)return e.CLUSTER_BREAK.LV}else if(n<52908){if(52881<=n&&n<=52907)return e.CLUSTER_BREAK.LVT}else if(n===52908)return e.CLUSTER_BREAK.LV}else if(n<52936){if(52909<=n&&n<=52935)return e.CLUSTER_BREAK.LVT}else if(n<52937){if(n===52936)return e.CLUSTER_BREAK.LV}else if(52937<=n&&n<=52963)return e.CLUSTER_BREAK.LVT}else if(n<53021){if(n<52992){if(n<52965){if(n===52964)return e.CLUSTER_BREAK.LV}else if(52965<=n&&n<=52991)return e.CLUSTER_BREAK.LVT}else if(n<52993){if(n===52992)return e.CLUSTER_BREAK.LV}else if(n<53020){if(52993<=n&&n<=53019)return e.CLUSTER_BREAK.LVT}else if(n===53020)return e.CLUSTER_BREAK.LV}else if(n<53076){if(n<53048){if(53021<=n&&n<=53047)return e.CLUSTER_BREAK.LVT}else if(n<53049){if(n===53048)return e.CLUSTER_BREAK.LV}else if(53049<=n&&n<=53075)return e.CLUSTER_BREAK.LVT}else if(n<53077){if(n===53076)return e.CLUSTER_BREAK.LV}else if(n<53104){if(53077<=n&&n<=53103)return e.CLUSTER_BREAK.LVT}else if(n===53104)return e.CLUSTER_BREAK.LV}else if(n<53412){if(n<53245){if(n<53188){if(n<53133){if(n<53132){if(53105<=n&&n<=53131)return e.CLUSTER_BREAK.LVT}else if(n===53132)return e.CLUSTER_BREAK.LV}else if(n<53160){if(53133<=n&&n<=53159)return e.CLUSTER_BREAK.LVT}else if(n<53161){if(n===53160)return e.CLUSTER_BREAK.LV}else if(53161<=n&&n<=53187)return e.CLUSTER_BREAK.LVT}else if(n<53216){if(n<53189){if(n===53188)return e.CLUSTER_BREAK.LV}else if(53189<=n&&n<=53215)return e.CLUSTER_BREAK.LVT}else if(n<53217){if(n===53216)return e.CLUSTER_BREAK.LV}else if(n<53244){if(53217<=n&&n<=53243)return e.CLUSTER_BREAK.LVT}else if(n===53244)return e.CLUSTER_BREAK.LV}else if(n<53328){if(n<53273){if(n<53272){if(53245<=n&&n<=53271)return e.CLUSTER_BREAK.LVT}else if(n===53272)return e.CLUSTER_BREAK.LV}else if(n<53300){if(53273<=n&&n<=53299)return e.CLUSTER_BREAK.LVT}else if(n<53301){if(n===53300)return e.CLUSTER_BREAK.LV}else if(53301<=n&&n<=53327)return e.CLUSTER_BREAK.LVT}else if(n<53357){if(n<53329){if(n===53328)return e.CLUSTER_BREAK.LV}else if(n<53356){if(53329<=n&&n<=53355)return e.CLUSTER_BREAK.LVT}else if(n===53356)return e.CLUSTER_BREAK.LV}else if(n<53384){if(53357<=n&&n<=53383)return e.CLUSTER_BREAK.LVT}else if(n<53385){if(n===53384)return e.CLUSTER_BREAK.LV}else if(53385<=n&&n<=53411)return e.CLUSTER_BREAK.LVT}else if(n<53553){if(n<53469){if(n<53440){if(n<53413){if(n===53412)return e.CLUSTER_BREAK.LV}else if(53413<=n&&n<=53439)return e.CLUSTER_BREAK.LVT}else if(n<53441){if(n===53440)return e.CLUSTER_BREAK.LV}else if(n<53468){if(53441<=n&&n<=53467)return e.CLUSTER_BREAK.LVT}else if(n===53468)return e.CLUSTER_BREAK.LV}else if(n<53524){if(n<53496){if(53469<=n&&n<=53495)return e.CLUSTER_BREAK.LVT}else if(n<53497){if(n===53496)return e.CLUSTER_BREAK.LV}else if(53497<=n&&n<=53523)return e.CLUSTER_BREAK.LVT}else if(n<53525){if(n===53524)return e.CLUSTER_BREAK.LV}else if(n<53552){if(53525<=n&&n<=53551)return e.CLUSTER_BREAK.LVT}else if(n===53552)return e.CLUSTER_BREAK.LV}else if(n<53636){if(n<53581){if(n<53580){if(53553<=n&&n<=53579)return e.CLUSTER_BREAK.LVT}else if(n===53580)return e.CLUSTER_BREAK.LV}else if(n<53608){if(53581<=n&&n<=53607)return e.CLUSTER_BREAK.LVT}else if(n<53609){if(n===53608)return e.CLUSTER_BREAK.LV}else if(53609<=n&&n<=53635)return e.CLUSTER_BREAK.LVT}else if(n<53665){if(n<53637){if(n===53636)return e.CLUSTER_BREAK.LV}else if(n<53664){if(53637<=n&&n<=53663)return e.CLUSTER_BREAK.LVT}else if(n===53664)return e.CLUSTER_BREAK.LV}else if(n<53692){if(53665<=n&&n<=53691)return e.CLUSTER_BREAK.LVT}else if(n<53693){if(n===53692)return e.CLUSTER_BREAK.LV}else if(53693<=n&&n<=53719)return e.CLUSTER_BREAK.LVT}else if(n<70459){if(n<54897){if(n<54308){if(n<54001){if(n<53860){if(n<53777){if(n<53748){if(n<53721){if(n===53720)return e.CLUSTER_BREAK.LV}else if(53721<=n&&n<=53747)return e.CLUSTER_BREAK.LVT}else if(n<53749){if(n===53748)return e.CLUSTER_BREAK.LV}else if(n<53776){if(53749<=n&&n<=53775)return e.CLUSTER_BREAK.LVT}else if(n===53776)return e.CLUSTER_BREAK.LV}else if(n<53805){if(n<53804){if(53777<=n&&n<=53803)return e.CLUSTER_BREAK.LVT}else if(n===53804)return e.CLUSTER_BREAK.LV}else if(n<53832){if(53805<=n&&n<=53831)return e.CLUSTER_BREAK.LVT}else if(n<53833){if(n===53832)return e.CLUSTER_BREAK.LV}else if(53833<=n&&n<=53859)return e.CLUSTER_BREAK.LVT}else if(n<53917){if(n<53888){if(n<53861){if(n===53860)return e.CLUSTER_BREAK.LV}else if(53861<=n&&n<=53887)return e.CLUSTER_BREAK.LVT}else if(n<53889){if(n===53888)return e.CLUSTER_BREAK.LV}else if(n<53916){if(53889<=n&&n<=53915)return e.CLUSTER_BREAK.LVT}else if(n===53916)return e.CLUSTER_BREAK.LV}else if(n<53972){if(n<53944){if(53917<=n&&n<=53943)return e.CLUSTER_BREAK.LVT}else if(n<53945){if(n===53944)return e.CLUSTER_BREAK.LV}else if(53945<=n&&n<=53971)return e.CLUSTER_BREAK.LVT}else if(n<53973){if(n===53972)return e.CLUSTER_BREAK.LV}else if(n<54e3){if(53973<=n&&n<=53999)return e.CLUSTER_BREAK.LVT}else if(n===54e3)return e.CLUSTER_BREAK.LV}else if(n<54141){if(n<54084){if(n<54029){if(n<54028){if(54001<=n&&n<=54027)return e.CLUSTER_BREAK.LVT}else if(n===54028)return e.CLUSTER_BREAK.LV}else if(n<54056){if(54029<=n&&n<=54055)return e.CLUSTER_BREAK.LVT}else if(n<54057){if(n===54056)return e.CLUSTER_BREAK.LV}else if(54057<=n&&n<=54083)return e.CLUSTER_BREAK.LVT}else if(n<54112){if(n<54085){if(n===54084)return e.CLUSTER_BREAK.LV}else if(54085<=n&&n<=54111)return e.CLUSTER_BREAK.LVT}else if(n<54113){if(n===54112)return e.CLUSTER_BREAK.LV}else if(n<54140){if(54113<=n&&n<=54139)return e.CLUSTER_BREAK.LVT}else if(n===54140)return e.CLUSTER_BREAK.LV}else if(n<54224){if(n<54169){if(n<54168){if(54141<=n&&n<=54167)return e.CLUSTER_BREAK.LVT}else if(n===54168)return e.CLUSTER_BREAK.LV}else if(n<54196){if(54169<=n&&n<=54195)return e.CLUSTER_BREAK.LVT}else if(n<54197){if(n===54196)return e.CLUSTER_BREAK.LV}else if(54197<=n&&n<=54223)return e.CLUSTER_BREAK.LVT}else if(n<54253){if(n<54225){if(n===54224)return e.CLUSTER_BREAK.LV}else if(n<54252){if(54225<=n&&n<=54251)return e.CLUSTER_BREAK.LVT}else if(n===54252)return e.CLUSTER_BREAK.LV}else if(n<54280){if(54253<=n&&n<=54279)return e.CLUSTER_BREAK.LVT}else if(n<54281){if(n===54280)return e.CLUSTER_BREAK.LV}else if(54281<=n&&n<=54307)return e.CLUSTER_BREAK.LVT}else if(n<54589){if(n<54448){if(n<54365){if(n<54336){if(n<54309){if(n===54308)return e.CLUSTER_BREAK.LV}else if(54309<=n&&n<=54335)return e.CLUSTER_BREAK.LVT}else if(n<54337){if(n===54336)return e.CLUSTER_BREAK.LV}else if(n<54364){if(54337<=n&&n<=54363)return e.CLUSTER_BREAK.LVT}else if(n===54364)return e.CLUSTER_BREAK.LV}else if(n<54393){if(n<54392){if(54365<=n&&n<=54391)return e.CLUSTER_BREAK.LVT}else if(n===54392)return e.CLUSTER_BREAK.LV}else if(n<54420){if(54393<=n&&n<=54419)return e.CLUSTER_BREAK.LVT}else if(n<54421){if(n===54420)return e.CLUSTER_BREAK.LV}else if(54421<=n&&n<=54447)return e.CLUSTER_BREAK.LVT}else if(n<54505){if(n<54476){if(n<54449){if(n===54448)return e.CLUSTER_BREAK.LV}else if(54449<=n&&n<=54475)return e.CLUSTER_BREAK.LVT}else if(n<54477){if(n===54476)return e.CLUSTER_BREAK.LV}else if(n<54504){if(54477<=n&&n<=54503)return e.CLUSTER_BREAK.LVT}else if(n===54504)return e.CLUSTER_BREAK.LV}else if(n<54560){if(n<54532){if(54505<=n&&n<=54531)return e.CLUSTER_BREAK.LVT}else if(n<54533){if(n===54532)return e.CLUSTER_BREAK.LV}else if(54533<=n&&n<=54559)return e.CLUSTER_BREAK.LVT}else if(n<54561){if(n===54560)return e.CLUSTER_BREAK.LV}else if(n<54588){if(54561<=n&&n<=54587)return e.CLUSTER_BREAK.LVT}else if(n===54588)return e.CLUSTER_BREAK.LV}else if(n<54756){if(n<54672){if(n<54617){if(n<54616){if(54589<=n&&n<=54615)return e.CLUSTER_BREAK.LVT}else if(n===54616)return e.CLUSTER_BREAK.LV}else if(n<54644){if(54617<=n&&n<=54643)return e.CLUSTER_BREAK.LVT}else if(n<54645){if(n===54644)return e.CLUSTER_BREAK.LV}else if(54645<=n&&n<=54671)return e.CLUSTER_BREAK.LVT}else if(n<54701){if(n<54673){if(n===54672)return e.CLUSTER_BREAK.LV}else if(n<54700){if(54673<=n&&n<=54699)return e.CLUSTER_BREAK.LVT}else if(n===54700)return e.CLUSTER_BREAK.LV}else if(n<54728){if(54701<=n&&n<=54727)return e.CLUSTER_BREAK.LVT}else if(n<54729){if(n===54728)return e.CLUSTER_BREAK.LV}else if(54729<=n&&n<=54755)return e.CLUSTER_BREAK.LVT}else if(n<54813){if(n<54784){if(n<54757){if(n===54756)return e.CLUSTER_BREAK.LV}else if(54757<=n&&n<=54783)return e.CLUSTER_BREAK.LVT}else if(n<54785){if(n===54784)return e.CLUSTER_BREAK.LV}else if(n<54812){if(54785<=n&&n<=54811)return e.CLUSTER_BREAK.LVT}else if(n===54812)return e.CLUSTER_BREAK.LV}else if(n<54868){if(n<54840){if(54813<=n&&n<=54839)return e.CLUSTER_BREAK.LVT}else if(n<54841){if(n===54840)return e.CLUSTER_BREAK.LV}else if(54841<=n&&n<=54867)return e.CLUSTER_BREAK.LVT}else if(n<54869){if(n===54868)return e.CLUSTER_BREAK.LV}else if(n<54896){if(54869<=n&&n<=54895)return e.CLUSTER_BREAK.LVT}else if(n===54896)return e.CLUSTER_BREAK.LV}else if(n<69632){if(n<55216){if(n<55037){if(n<54980){if(n<54925){if(n<54924){if(54897<=n&&n<=54923)return e.CLUSTER_BREAK.LVT}else if(n===54924)return e.CLUSTER_BREAK.LV}else if(n<54952){if(54925<=n&&n<=54951)return e.CLUSTER_BREAK.LVT}else if(n<54953){if(n===54952)return e.CLUSTER_BREAK.LV}else if(54953<=n&&n<=54979)return e.CLUSTER_BREAK.LVT}else if(n<55008){if(n<54981){if(n===54980)return e.CLUSTER_BREAK.LV}else if(54981<=n&&n<=55007)return e.CLUSTER_BREAK.LVT}else if(n<55009){if(n===55008)return e.CLUSTER_BREAK.LV}else if(n<55036){if(55009<=n&&n<=55035)return e.CLUSTER_BREAK.LVT}else if(n===55036)return e.CLUSTER_BREAK.LV}else if(n<55120){if(n<55065){if(n<55064){if(55037<=n&&n<=55063)return e.CLUSTER_BREAK.LVT}else if(n===55064)return e.CLUSTER_BREAK.LV}else if(n<55092){if(55065<=n&&n<=55091)return e.CLUSTER_BREAK.LVT}else if(n<55093){if(n===55092)return e.CLUSTER_BREAK.LV}else if(55093<=n&&n<=55119)return e.CLUSTER_BREAK.LVT}else if(n<55149){if(n<55121){if(n===55120)return e.CLUSTER_BREAK.LV}else if(n<55148){if(55121<=n&&n<=55147)return e.CLUSTER_BREAK.LVT}else if(n===55148)return e.CLUSTER_BREAK.LV}else if(n<55176){if(55149<=n&&n<=55175)return e.CLUSTER_BREAK.LVT}else if(n<55177){if(n===55176)return e.CLUSTER_BREAK.LV}else if(55177<=n&&n<=55203)return e.CLUSTER_BREAK.LVT}else if(n<68097){if(n<65279){if(n<64286){if(n<55243){if(55216<=n&&n<=55238)return e.CLUSTER_BREAK.V}else if(55243<=n&&n<=55291)return e.CLUSTER_BREAK.T}else if(n<65024){if(n===64286)return e.CLUSTER_BREAK.EXTEND}else if(n<65056){if(65024<=n&&n<=65039)return e.CLUSTER_BREAK.EXTEND}else if(65056<=n&&n<=65071)return e.CLUSTER_BREAK.EXTEND}else if(n<66045){if(n<65438){if(n===65279)return e.CLUSTER_BREAK.CONTROL}else if(n<65520){if(65438<=n&&n<=65439)return e.CLUSTER_BREAK.EXTEND}else if(65520<=n&&n<=65531)return e.CLUSTER_BREAK.CONTROL}else if(n<66272){if(n===66045)return e.CLUSTER_BREAK.EXTEND}else if(n<66422){if(n===66272)return e.CLUSTER_BREAK.EXTEND}else if(66422<=n&&n<=66426)return e.CLUSTER_BREAK.EXTEND}else if(n<68325){if(n<68108){if(n<68101){if(68097<=n&&n<=68099)return e.CLUSTER_BREAK.EXTEND}else if(68101<=n&&n<=68102)return e.CLUSTER_BREAK.EXTEND}else if(n<68152){if(68108<=n&&n<=68111)return e.CLUSTER_BREAK.EXTEND}else if(n<68159){if(68152<=n&&n<=68154)return e.CLUSTER_BREAK.EXTEND}else if(n===68159)return e.CLUSTER_BREAK.EXTEND}else if(n<69373){if(n<68900){if(68325<=n&&n<=68326)return e.CLUSTER_BREAK.EXTEND}else if(n<69291){if(68900<=n&&n<=68903)return e.CLUSTER_BREAK.EXTEND}else if(69291<=n&&n<=69292)return e.CLUSTER_BREAK.EXTEND}else if(n<69446){if(69373<=n&&n<=69375)return e.CLUSTER_BREAK.EXTEND}else if(n<69506){if(69446<=n&&n<=69456)return e.CLUSTER_BREAK.EXTEND}else if(69506<=n&&n<=69509)return e.CLUSTER_BREAK.EXTEND}else if(n<70016){if(n<69815){if(n<69747){if(n<69634){if(n===69632)return e.CLUSTER_BREAK.SPACINGMARK;if(n===69633)return e.CLUSTER_BREAK.EXTEND}else if(n<69688){if(n===69634)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<69744){if(69688<=n&&n<=69702)return e.CLUSTER_BREAK.EXTEND}else if(n===69744)return e.CLUSTER_BREAK.EXTEND}else if(n<69762){if(n<69759){if(69747<=n&&n<=69748)return e.CLUSTER_BREAK.EXTEND}else if(69759<=n&&n<=69761)return e.CLUSTER_BREAK.EXTEND}else if(n<69808){if(n===69762)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<69811){if(69808<=n&&n<=69810)return e.CLUSTER_BREAK.SPACINGMARK}else if(69811<=n&&n<=69814)return e.CLUSTER_BREAK.EXTEND}else if(n<69888)if(n<69821){if(n<69817){if(69815<=n&&n<=69816)return e.CLUSTER_BREAK.SPACINGMARK}else if(69817<=n&&n<=69818)return e.CLUSTER_BREAK.EXTEND}else if(n<69826){if(n===69821)return e.CLUSTER_BREAK.PREPEND}else{if(n===69826)return e.CLUSTER_BREAK.EXTEND;if(n===69837)return e.CLUSTER_BREAK.PREPEND}else if(n<69933){if(n<69927){if(69888<=n&&n<=69890)return e.CLUSTER_BREAK.EXTEND}else if(n<69932){if(69927<=n&&n<=69931)return e.CLUSTER_BREAK.EXTEND}else if(n===69932)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<69957){if(69933<=n&&n<=69940)return e.CLUSTER_BREAK.EXTEND}else if(n<70003){if(69957<=n&&n<=69958)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===70003)return e.CLUSTER_BREAK.EXTEND}else if(n<70194){if(n<70082){if(n<70067){if(n<70018){if(70016<=n&&n<=70017)return e.CLUSTER_BREAK.EXTEND}else if(n===70018)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70070){if(70067<=n&&n<=70069)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70079){if(70070<=n&&n<=70078)return e.CLUSTER_BREAK.EXTEND}else if(70079<=n&&n<=70080)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70095){if(n<70089){if(70082<=n&&n<=70083)return e.CLUSTER_BREAK.PREPEND}else if(n<70094){if(70089<=n&&n<=70092)return e.CLUSTER_BREAK.EXTEND}else if(n===70094)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70188){if(n===70095)return e.CLUSTER_BREAK.EXTEND}else if(n<70191){if(70188<=n&&n<=70190)return e.CLUSTER_BREAK.SPACINGMARK}else if(70191<=n&&n<=70193)return e.CLUSTER_BREAK.EXTEND}else if(n<70209){if(n<70197){if(n<70196){if(70194<=n&&n<=70195)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===70196)return e.CLUSTER_BREAK.EXTEND}else if(n<70198){if(n===70197)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70206){if(70198<=n&&n<=70199)return e.CLUSTER_BREAK.EXTEND}else if(n===70206)return e.CLUSTER_BREAK.EXTEND}else if(n<70371){if(n<70367){if(n===70209)return e.CLUSTER_BREAK.EXTEND}else if(n<70368){if(n===70367)return e.CLUSTER_BREAK.EXTEND}else if(70368<=n&&n<=70370)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70400){if(70371<=n&&n<=70378)return e.CLUSTER_BREAK.EXTEND}else if(n<70402){if(70400<=n&&n<=70401)return e.CLUSTER_BREAK.EXTEND}else if(70402<=n&&n<=70403)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<72343){if(n<71339){if(n<70841){if(n<70512){if(n<70471){if(n<70463){if(n<70462){if(70459<=n&&n<=70460)return e.CLUSTER_BREAK.EXTEND}else if(n===70462)return e.CLUSTER_BREAK.EXTEND}else if(n<70464){if(n===70463)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70465){if(n===70464)return e.CLUSTER_BREAK.EXTEND}else if(70465<=n&&n<=70468)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70487){if(n<70475){if(70471<=n&&n<=70472)return e.CLUSTER_BREAK.SPACINGMARK}else if(70475<=n&&n<=70477)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70498){if(n===70487)return e.CLUSTER_BREAK.EXTEND}else if(n<70502){if(70498<=n&&n<=70499)return e.CLUSTER_BREAK.SPACINGMARK}else if(70502<=n&&n<=70508)return e.CLUSTER_BREAK.EXTEND}else if(n<70725){if(n<70712){if(n<70709){if(70512<=n&&n<=70516)return e.CLUSTER_BREAK.EXTEND}else if(70709<=n&&n<=70711)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<70720){if(70712<=n&&n<=70719)return e.CLUSTER_BREAK.EXTEND}else if(n<70722){if(70720<=n&&n<=70721)return e.CLUSTER_BREAK.SPACINGMARK}else if(70722<=n&&n<=70724)return e.CLUSTER_BREAK.EXTEND}else if(n<70832){if(n<70726){if(n===70725)return e.CLUSTER_BREAK.SPACINGMARK}else if(n===70726||n===70750)return e.CLUSTER_BREAK.EXTEND}else if(n<70833){if(n===70832)return e.CLUSTER_BREAK.EXTEND}else if(n<70835){if(70833<=n&&n<=70834)return e.CLUSTER_BREAK.SPACINGMARK}else if(70835<=n&&n<=70840)return e.CLUSTER_BREAK.EXTEND}else if(n<71096){if(n<70847)if(n<70843){if(n===70841)return e.CLUSTER_BREAK.SPACINGMARK;if(n===70842)return e.CLUSTER_BREAK.EXTEND}else if(n<70845){if(70843<=n&&n<=70844)return e.CLUSTER_BREAK.SPACINGMARK}else{if(n===70845)return e.CLUSTER_BREAK.EXTEND;if(n===70846)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<71087){if(n<70849){if(70847<=n&&n<=70848)return e.CLUSTER_BREAK.EXTEND}else if(n<70850){if(n===70849)return e.CLUSTER_BREAK.SPACINGMARK}else if(70850<=n&&n<=70851)return e.CLUSTER_BREAK.EXTEND}else if(n<71088){if(n===71087)return e.CLUSTER_BREAK.EXTEND}else if(n<71090){if(71088<=n&&n<=71089)return e.CLUSTER_BREAK.SPACINGMARK}else if(71090<=n&&n<=71093)return e.CLUSTER_BREAK.EXTEND}else if(n<71216){if(n<71102){if(n<71100){if(71096<=n&&n<=71099)return e.CLUSTER_BREAK.SPACINGMARK}else if(71100<=n&&n<=71101)return e.CLUSTER_BREAK.EXTEND}else if(n<71103){if(n===71102)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<71132){if(71103<=n&&n<=71104)return e.CLUSTER_BREAK.EXTEND}else if(71132<=n&&n<=71133)return e.CLUSTER_BREAK.EXTEND}else if(n<71229){if(n<71219){if(71216<=n&&n<=71218)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<71227){if(71219<=n&&n<=71226)return e.CLUSTER_BREAK.EXTEND}else if(71227<=n&&n<=71228)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<71230){if(n===71229)return e.CLUSTER_BREAK.EXTEND}else if(n<71231){if(n===71230)return e.CLUSTER_BREAK.SPACINGMARK}else if(71231<=n&&n<=71232)return e.CLUSTER_BREAK.EXTEND}else if(n<71999)if(n<71463){if(n<71350){if(n<71341){if(n===71339)return e.CLUSTER_BREAK.EXTEND;if(n===71340)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<71342){if(n===71341)return e.CLUSTER_BREAK.EXTEND}else if(n<71344){if(71342<=n&&n<=71343)return e.CLUSTER_BREAK.SPACINGMARK}else if(71344<=n&&n<=71349)return e.CLUSTER_BREAK.EXTEND}else if(n<71453){if(n===71350)return e.CLUSTER_BREAK.SPACINGMARK;if(n===71351)return e.CLUSTER_BREAK.EXTEND}else if(n<71458){if(71453<=n&&n<=71455)return e.CLUSTER_BREAK.EXTEND}else if(n<71462){if(71458<=n&&n<=71461)return e.CLUSTER_BREAK.EXTEND}else if(n===71462)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<71984){if(n<71727){if(n<71724){if(71463<=n&&n<=71467)return e.CLUSTER_BREAK.EXTEND}else if(71724<=n&&n<=71726)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<71736){if(71727<=n&&n<=71735)return e.CLUSTER_BREAK.EXTEND}else if(n<71737){if(n===71736)return e.CLUSTER_BREAK.SPACINGMARK}else if(71737<=n&&n<=71738)return e.CLUSTER_BREAK.EXTEND}else if(n<71995){if(n<71985){if(n===71984)return e.CLUSTER_BREAK.EXTEND}else if(n<71991){if(71985<=n&&n<=71989)return e.CLUSTER_BREAK.SPACINGMARK}else if(71991<=n&&n<=71992)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<71997){if(71995<=n&&n<=71996)return e.CLUSTER_BREAK.EXTEND}else{if(n===71997)return e.CLUSTER_BREAK.SPACINGMARK;if(n===71998)return e.CLUSTER_BREAK.EXTEND}else if(n<72193)if(n<72145)if(n<72001){if(n===71999)return e.CLUSTER_BREAK.PREPEND;if(n===72e3)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<72002){if(n===72001)return e.CLUSTER_BREAK.PREPEND}else{if(n===72002)return e.CLUSTER_BREAK.SPACINGMARK;if(n===72003)return e.CLUSTER_BREAK.EXTEND}else if(n<72156){if(n<72148){if(72145<=n&&n<=72147)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<72154){if(72148<=n&&n<=72151)return e.CLUSTER_BREAK.EXTEND}else if(72154<=n&&n<=72155)return e.CLUSTER_BREAK.EXTEND}else if(n<72160){if(72156<=n&&n<=72159)return e.CLUSTER_BREAK.SPACINGMARK}else{if(n===72160)return e.CLUSTER_BREAK.EXTEND;if(n===72164)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<72263){if(n<72249){if(n<72243){if(72193<=n&&n<=72202)return e.CLUSTER_BREAK.EXTEND}else if(72243<=n&&n<=72248)return e.CLUSTER_BREAK.EXTEND}else if(n<72250){if(n===72249)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<72251){if(n===72250)return e.CLUSTER_BREAK.PREPEND}else if(72251<=n&&n<=72254)return e.CLUSTER_BREAK.EXTEND}else if(n<72281){if(n<72273){if(n===72263)return e.CLUSTER_BREAK.EXTEND}else if(n<72279){if(72273<=n&&n<=72278)return e.CLUSTER_BREAK.EXTEND}else if(72279<=n&&n<=72280)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<72324){if(72281<=n&&n<=72283)return e.CLUSTER_BREAK.EXTEND}else if(n<72330){if(72324<=n&&n<=72329)return e.CLUSTER_BREAK.PREPEND}else if(72330<=n&&n<=72342)return e.CLUSTER_BREAK.EXTEND}else if(n<94033){if(n<73104){if(n<72881){if(n<72766){if(n<72751){if(n<72344){if(n===72343)return e.CLUSTER_BREAK.SPACINGMARK}else if(72344<=n&&n<=72345)return e.CLUSTER_BREAK.EXTEND}else if(n<72752){if(n===72751)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<72760){if(72752<=n&&n<=72758)return e.CLUSTER_BREAK.EXTEND}else if(72760<=n&&n<=72765)return e.CLUSTER_BREAK.EXTEND}else if(n<72850){if(n===72766)return e.CLUSTER_BREAK.SPACINGMARK;if(n===72767)return e.CLUSTER_BREAK.EXTEND}else if(n<72873){if(72850<=n&&n<=72871)return e.CLUSTER_BREAK.EXTEND}else if(n<72874){if(n===72873)return e.CLUSTER_BREAK.SPACINGMARK}else if(72874<=n&&n<=72880)return e.CLUSTER_BREAK.EXTEND}else if(n<73018){if(n<72884){if(n<72882){if(n===72881)return e.CLUSTER_BREAK.SPACINGMARK}else if(72882<=n&&n<=72883)return e.CLUSTER_BREAK.EXTEND}else if(n<72885){if(n===72884)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<73009){if(72885<=n&&n<=72886)return e.CLUSTER_BREAK.EXTEND}else if(73009<=n&&n<=73014)return e.CLUSTER_BREAK.EXTEND}else if(n<73030){if(n<73020){if(n===73018)return e.CLUSTER_BREAK.EXTEND}else if(n<73023){if(73020<=n&&n<=73021)return e.CLUSTER_BREAK.EXTEND}else if(73023<=n&&n<=73029)return e.CLUSTER_BREAK.EXTEND}else if(n<73031){if(n===73030)return e.CLUSTER_BREAK.PREPEND}else if(n<73098){if(n===73031)return e.CLUSTER_BREAK.EXTEND}else if(73098<=n&&n<=73102)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<73526){if(n<73459)if(n<73109){if(n<73107){if(73104<=n&&n<=73105)return e.CLUSTER_BREAK.EXTEND}else if(73107<=n&&n<=73108)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<73110){if(n===73109)return e.CLUSTER_BREAK.EXTEND}else{if(n===73110)return e.CLUSTER_BREAK.SPACINGMARK;if(n===73111)return e.CLUSTER_BREAK.EXTEND}else if(n<73474){if(n<73461){if(73459<=n&&n<=73460)return e.CLUSTER_BREAK.EXTEND}else if(n<73472){if(73461<=n&&n<=73462)return e.CLUSTER_BREAK.SPACINGMARK}else if(73472<=n&&n<=73473)return e.CLUSTER_BREAK.EXTEND}else if(n<73475){if(n===73474)return e.CLUSTER_BREAK.PREPEND}else if(n<73524){if(n===73475)return e.CLUSTER_BREAK.SPACINGMARK}else if(73524<=n&&n<=73525)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<78896)if(n<73536){if(n<73534){if(73526<=n&&n<=73530)return e.CLUSTER_BREAK.EXTEND}else if(73534<=n&&n<=73535)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<73537){if(n===73536)return e.CLUSTER_BREAK.EXTEND}else{if(n===73537)return e.CLUSTER_BREAK.SPACINGMARK;if(n===73538)return e.CLUSTER_BREAK.EXTEND}else if(n<92912){if(n<78912){if(78896<=n&&n<=78911)return e.CLUSTER_BREAK.CONTROL}else if(n<78919){if(n===78912)return e.CLUSTER_BREAK.EXTEND}else if(78919<=n&&n<=78933)return e.CLUSTER_BREAK.EXTEND}else if(n<92976){if(92912<=n&&n<=92916)return e.CLUSTER_BREAK.EXTEND}else if(n<94031){if(92976<=n&&n<=92982)return e.CLUSTER_BREAK.EXTEND}else if(n===94031)return e.CLUSTER_BREAK.EXTEND}else if(n<121476){if(n<119143)if(n<113824){if(n<94180){if(n<94095){if(94033<=n&&n<=94087)return e.CLUSTER_BREAK.SPACINGMARK}else if(94095<=n&&n<=94098)return e.CLUSTER_BREAK.EXTEND}else if(n<94192){if(n===94180)return e.CLUSTER_BREAK.EXTEND}else if(n<113821){if(94192<=n&&n<=94193)return e.CLUSTER_BREAK.SPACINGMARK}else if(113821<=n&&n<=113822)return e.CLUSTER_BREAK.EXTEND}else if(n<118576){if(n<118528){if(113824<=n&&n<=113827)return e.CLUSTER_BREAK.CONTROL}else if(118528<=n&&n<=118573)return e.CLUSTER_BREAK.EXTEND}else if(n<119141){if(118576<=n&&n<=118598)return e.CLUSTER_BREAK.EXTEND}else{if(n===119141)return e.CLUSTER_BREAK.EXTEND;if(n===119142)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<119173){if(n<119150){if(n<119149){if(119143<=n&&n<=119145)return e.CLUSTER_BREAK.EXTEND}else if(n===119149)return e.CLUSTER_BREAK.SPACINGMARK}else if(n<119155){if(119150<=n&&n<=119154)return e.CLUSTER_BREAK.EXTEND}else if(n<119163){if(119155<=n&&n<=119162)return e.CLUSTER_BREAK.CONTROL}else if(119163<=n&&n<=119170)return e.CLUSTER_BREAK.EXTEND}else if(n<121344){if(n<119210){if(119173<=n&&n<=119179)return e.CLUSTER_BREAK.EXTEND}else if(n<119362){if(119210<=n&&n<=119213)return e.CLUSTER_BREAK.EXTEND}else if(119362<=n&&n<=119364)return e.CLUSTER_BREAK.EXTEND}else if(n<121403){if(121344<=n&&n<=121398)return e.CLUSTER_BREAK.EXTEND}else if(n<121461){if(121403<=n&&n<=121452)return e.CLUSTER_BREAK.EXTEND}else if(n===121461)return e.CLUSTER_BREAK.EXTEND}else if(n<123628){if(n<122907){if(n<121505){if(n<121499){if(n===121476)return e.CLUSTER_BREAK.EXTEND}else if(121499<=n&&n<=121503)return e.CLUSTER_BREAK.EXTEND}else if(n<122880){if(121505<=n&&n<=121519)return e.CLUSTER_BREAK.EXTEND}else if(n<122888){if(122880<=n&&n<=122886)return e.CLUSTER_BREAK.EXTEND}else if(122888<=n&&n<=122904)return e.CLUSTER_BREAK.EXTEND}else if(n<123023){if(n<122915){if(122907<=n&&n<=122913)return e.CLUSTER_BREAK.EXTEND}else if(n<122918){if(122915<=n&&n<=122916)return e.CLUSTER_BREAK.EXTEND}else if(122918<=n&&n<=122922)return e.CLUSTER_BREAK.EXTEND}else if(n<123184){if(n===123023)return e.CLUSTER_BREAK.EXTEND}else if(n<123566){if(123184<=n&&n<=123190)return e.CLUSTER_BREAK.EXTEND}else if(n===123566)return e.CLUSTER_BREAK.EXTEND}else if(n<127995){if(n<125136){if(n<124140){if(123628<=n&&n<=123631)return e.CLUSTER_BREAK.EXTEND}else if(124140<=n&&n<=124143)return e.CLUSTER_BREAK.EXTEND}else if(n<125252){if(125136<=n&&n<=125142)return e.CLUSTER_BREAK.EXTEND}else if(n<127462){if(125252<=n&&n<=125258)return e.CLUSTER_BREAK.EXTEND}else if(127462<=n&&n<=127487)return e.CLUSTER_BREAK.REGIONAL_INDICATOR}else if(n<917632){if(n<917504){if(127995<=n&&n<=127999)return e.CLUSTER_BREAK.EXTEND}else if(n<917536){if(917504<=n&&n<=917535)return e.CLUSTER_BREAK.CONTROL}else if(917536<=n&&n<=917631)return e.CLUSTER_BREAK.EXTEND}else if(n<917760){if(917632<=n&&n<=917759)return e.CLUSTER_BREAK.CONTROL}else if(n<918e3){if(917760<=n&&n<=917999)return e.CLUSTER_BREAK.EXTEND}else if(918e3<=n&&n<=921599)return e.CLUSTER_BREAK.CONTROL;return e.CLUSTER_BREAK.OTHER}static getEmojiProperty(n){if(n<10160){if(n<9728){if(n<9e3){if(n<8482){if(n<8252){if(n===169||n===174)return e.EXTENDED_PICTOGRAPHIC}else if(n===8252||n===8265)return e.EXTENDED_PICTOGRAPHIC}else if(n<8596){if(n===8482||n===8505)return e.EXTENDED_PICTOGRAPHIC}else if(n<8617){if(8596<=n&&n<=8601)return e.EXTENDED_PICTOGRAPHIC}else if(n<8986){if(8617<=n&&n<=8618)return e.EXTENDED_PICTOGRAPHIC}else if(8986<=n&&n<=8987)return e.EXTENDED_PICTOGRAPHIC}else if(n<9410){if(n<9167){if(n===9e3||n===9096)return e.EXTENDED_PICTOGRAPHIC}else if(n<9193){if(n===9167)return e.EXTENDED_PICTOGRAPHIC}else if(n<9208){if(9193<=n&&n<=9203)return e.EXTENDED_PICTOGRAPHIC}else if(9208<=n&&n<=9210)return e.EXTENDED_PICTOGRAPHIC}else if(n<9654){if(n<9642){if(n===9410)return e.EXTENDED_PICTOGRAPHIC}else if(9642<=n&&n<=9643)return e.EXTENDED_PICTOGRAPHIC}else if(n<9664){if(n===9654)return e.EXTENDED_PICTOGRAPHIC}else if(n<9723){if(n===9664)return e.EXTENDED_PICTOGRAPHIC}else if(9723<=n&&n<=9726)return e.EXTENDED_PICTOGRAPHIC}else if(n<10035){if(n<10004){if(n<9748){if(n<9735){if(9728<=n&&n<=9733)return e.EXTENDED_PICTOGRAPHIC}else if(9735<=n&&n<=9746)return e.EXTENDED_PICTOGRAPHIC}else if(n<9872){if(9748<=n&&n<=9861)return e.EXTENDED_PICTOGRAPHIC}else if(n<9992){if(9872<=n&&n<=9989)return e.EXTENDED_PICTOGRAPHIC}else if(9992<=n&&n<=10002)return e.EXTENDED_PICTOGRAPHIC}else if(n<10013){if(n===10004||n===10006)return e.EXTENDED_PICTOGRAPHIC}else if(n<10017){if(n===10013)return e.EXTENDED_PICTOGRAPHIC}else if(n===10017||n===10024)return e.EXTENDED_PICTOGRAPHIC}else if(n<10067){if(n<10055){if(n<10052){if(10035<=n&&n<=10036)return e.EXTENDED_PICTOGRAPHIC}else if(n===10052)return e.EXTENDED_PICTOGRAPHIC}else if(n<10060){if(n===10055)return e.EXTENDED_PICTOGRAPHIC}else if(n===10060||n===10062)return e.EXTENDED_PICTOGRAPHIC}else if(n<10083){if(n<10071){if(10067<=n&&n<=10069)return e.EXTENDED_PICTOGRAPHIC}else if(n===10071)return e.EXTENDED_PICTOGRAPHIC}else if(n<10133){if(10083<=n&&n<=10087)return e.EXTENDED_PICTOGRAPHIC}else if(n<10145){if(10133<=n&&n<=10135)return e.EXTENDED_PICTOGRAPHIC}else if(n===10145)return e.EXTENDED_PICTOGRAPHIC}else if(n<127489){if(n<12951){if(n<11035){if(n<10548){if(n===10160||n===10175)return e.EXTENDED_PICTOGRAPHIC}else if(n<11013){if(10548<=n&&n<=10549)return e.EXTENDED_PICTOGRAPHIC}else if(11013<=n&&n<=11015)return e.EXTENDED_PICTOGRAPHIC}else if(n<11093){if(n<11088){if(11035<=n&&n<=11036)return e.EXTENDED_PICTOGRAPHIC}else if(n===11088)return e.EXTENDED_PICTOGRAPHIC}else if(n<12336){if(n===11093)return e.EXTENDED_PICTOGRAPHIC}else if(n===12336||n===12349)return e.EXTENDED_PICTOGRAPHIC}else if(n<127340){if(n<126976){if(n===12951||n===12953)return e.EXTENDED_PICTOGRAPHIC}else if(n<127245){if(126976<=n&&n<=127231)return e.EXTENDED_PICTOGRAPHIC}else if(n<127279){if(127245<=n&&n<=127247)return e.EXTENDED_PICTOGRAPHIC}else if(n===127279)return e.EXTENDED_PICTOGRAPHIC}else if(n<127374){if(n<127358){if(127340<=n&&n<=127345)return e.EXTENDED_PICTOGRAPHIC}else if(127358<=n&&n<=127359)return e.EXTENDED_PICTOGRAPHIC}else if(n<127377){if(n===127374)return e.EXTENDED_PICTOGRAPHIC}else if(n<127405){if(127377<=n&&n<=127386)return e.EXTENDED_PICTOGRAPHIC}else if(127405<=n&&n<=127461)return e.EXTENDED_PICTOGRAPHIC}else if(n<128981){if(n<127561){if(n<127535){if(n<127514){if(127489<=n&&n<=127503)return e.EXTENDED_PICTOGRAPHIC}else if(n===127514)return e.EXTENDED_PICTOGRAPHIC}else if(n<127538){if(n===127535)return e.EXTENDED_PICTOGRAPHIC}else if(n<127548){if(127538<=n&&n<=127546)return e.EXTENDED_PICTOGRAPHIC}else if(127548<=n&&n<=127551)return e.EXTENDED_PICTOGRAPHIC}else if(n<128326){if(n<128e3){if(127561<=n&&n<=127994)return e.EXTENDED_PICTOGRAPHIC}else if(128e3<=n&&n<=128317)return e.EXTENDED_PICTOGRAPHIC}else if(n<128640){if(128326<=n&&n<=128591)return e.EXTENDED_PICTOGRAPHIC}else if(n<128884){if(128640<=n&&n<=128767)return e.EXTENDED_PICTOGRAPHIC}else if(128884<=n&&n<=128895)return e.EXTENDED_PICTOGRAPHIC}else if(n<129198){if(n<129096){if(n<129036){if(128981<=n&&n<=129023)return e.EXTENDED_PICTOGRAPHIC}else if(129036<=n&&n<=129039)return e.EXTENDED_PICTOGRAPHIC}else if(n<129114){if(129096<=n&&n<=129103)return e.EXTENDED_PICTOGRAPHIC}else if(n<129160){if(129114<=n&&n<=129119)return e.EXTENDED_PICTOGRAPHIC}else if(129160<=n&&n<=129167)return e.EXTENDED_PICTOGRAPHIC}else if(n<129340){if(n<129292){if(129198<=n&&n<=129279)return e.EXTENDED_PICTOGRAPHIC}else if(129292<=n&&n<=129338)return e.EXTENDED_PICTOGRAPHIC}else if(n<129351){if(129340<=n&&n<=129349)return e.EXTENDED_PICTOGRAPHIC}else if(n<130048){if(129351<=n&&n<=129791)return e.EXTENDED_PICTOGRAPHIC}else if(130048<=n&&n<=131069)return e.EXTENDED_PICTOGRAPHIC;return e.CLUSTER_BREAK.OTHER}}return cu.default=s,cu}var OI;function gJ(){if(OI)return lu;OI=1;var t=lu&&lu.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(lu,"__esModule",{value:!0});const e=t(pJ());return lu.default=e.default,lu}var mJ=gJ();const _J=fs(mJ);new _J;class DI{static getPromptGuess(e,r){var i,s,a;if((i=e.player)!=null&&i.prompt)return e.player.prompt;if((s=e.audience)!=null&&s.prompt)return e.audience.prompt;if((a=e.audiencePlayer)!=null&&a.prompt)return e.audiencePlayer.prompt;if(e.prompt)return e.prompt;if(r==="range-game")return this.getRangeGameGuess(e)}static getRangeGameGuess(e){var r,i,s,a,n,o,u,c;if((i=(r=e.player)==null?void 0:r.content)!=null&&i.text)return(a=(s=e.player)==null?void 0:s.content)==null?void 0:a.text;if((o=(n=e.content)==null?void 0:n.content)!=null&&o.text)return(c=(u=e.content)==null?void 0:u.content)==null?void 0:c.text}static async send(e){const r={appTag:e.room.appTag,state:{appTag:e.room.appTag,name:e.name,role:e.role,code:e.room.code,message:e.message,vibe:e.vibe,state:e.values}};try{const i=await this.sendToEcast(r);await this.sendToSlack(i,e)}catch(i){console.error(i)}}static async sendToEcast(e){return(await(await fetch("https://ecast.jackboxgames.com/api/v2/controller/state",{method:"POST",body:JSON.stringify(e)})).json()).body.url}static async sendToSlack(e,r){const i=Wu(r.room.appTag),s="https://hooks.slack.com/services/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",a={good:":large_green_circle:",meh:":large_yellow_circle:",bad:":red_circle:"},o=`${(i==null?void 0:i.name)??r.room.appTag} :${r.room.appTag}: 

 From: ${r.name},
${r.message}`,u=[];r.vibe&&r.vibe!=="none"&&u.push({type:"plain_text",text:`${a[r.vibe]} ${r.vibe.toUpperCase()} Vibes`,emoji:!0}),r.content&&u.push({type:"plain_text",text:`Content: ${r.content}`,emoji:!0});const f={blocks:[{type:"section",text:{type:"mrkdwn",text:o}},{type:"context",elements:u},{type:"actions",elements:[{type:"button",action_id:"actionId-0",url:e,text:{type:"plain_text",text:"View Game State JSON",emoji:!0}}]}]};try{const p=await(await fetch(s,{method:"POST",body:JSON.stringify(f)})).text();Ly("[Feedback] sendToSlack",p)}catch(h){console.error("[Feedback] sendToSlack",h)}}}class k4{constructor(e){Be(this,"iteration",0);Be(this,"seed");Be(this,"generator");this.seed=`${e}`,this.generator=this.getGenerator()}random(e,r){return e>r&&([e,r]=[r,e]),Math.floor(this.generator()*(r-e+1))+e}sample(e,r){if(r===void 0){const a=Math.floor(this.generator()*e.length);return e[a]}if(r<=0)throw new Error("cannot sample zero or less items");r>e.length&&(r=e.length);const i=[...e],s=[];for(;s.length<r;){const a=Math.floor(this.generator()*i.length);s.push(i.splice(a,1)[0])}return s}shuffled(e){const r=[...e];for(let i=r.length-1;i>0;i--){const s=Math.floor(this.generator()*(i+1));[r[i],r[s]]=[r[s],r[i]]}return r}getGenerator(){let e=1779033703,r=3144134277,i=1013904242,s=2773480762;for(let c=0,f;c<this.seed.length;c++)f=this.seed.charCodeAt(c),e=r^Math.imul(e^f,597399067),r=i^Math.imul(r^f,2869860233),i=s^Math.imul(i^f,951274213),s=e^Math.imul(s^f,2716044179);e=Math.imul(i^e>>>18,597399067),r=Math.imul(s^r>>>22,2869860233),i=Math.imul(e^i>>>17,951274213),s=Math.imul(r^s>>>19,2716044179);let a=(e^r^i^s)>>>0,n=(r^e)>>>0,o=(i^e)>>>0,u=(s^e)>>>0;return function(){a>>>=0,n>>>=0,o>>>=0,u>>>=0;let f=a+n|0;return a=n^n>>>9,n=o+(o<<3)|0,o=o<<21|o>>>11,u=u+1|0,f=f+u|0,o=o+f|0,(f>>>0)/4294967296}}}const Cu=class Cu{constructor(e,r){Be(this,"activePointers",new Map);Be(this,"element");Be(this,"documentElement");Be(this,"usePointerEvents");Be(this,"isCanceled",!1);Be(this,"cachedElementRect");Be(this,"cachedDocumentRect");Be(this,"cachedTranslations");Be(this,"isMultitouch");Be(this,"isRestrictedToBox");Be(this,"swipeVelocity");Be(this,"swipeDistance");Be(this,"boundOnClick",this.onClick.bind(this));Be(this,"boundOnStart",this.onStart.bind(this));Be(this,"boundOnMove",this.onMove.bind(this));Be(this,"boundOnEnd",this.onEnd.bind(this));this.applyPolyfill(),this.element=e,this.documentElement=document.documentElement,this.usePointerEvents=window.PointerEvent!==void 0,this.isRestrictedToBox=r.restrictToBox??!1,this.isMultitouch=r.isMultitouch??!1,this.swipeDistance=r.swipeDistance??30,this.swipeVelocity=r.swipeVelocity??.5,this.bindStaticEvents()}destroy(){this.unbindStaticEvents(),this.unbindStartedEvents()}cancel(){this.isCanceled=!0,this.activePointers.clear(),this.unbindStartedEvents()}isPointerEvent(e){return window.PointerEvent===void 0?!1:e instanceof PointerEvent}isTouchEvent(e){return"ontouchstart"in window?e instanceof TouchEvent:!1}isMouseEvent(e){return e instanceof MouseEvent}getTouchById(e,r){return Array.from(e).find(i=>i.identifier===r)}bindStaticEvents(){if(this.element.addEventListener("click",this.boundOnClick),this.usePointerEvents){this.element.addEventListener("pointerdown",this.boundOnStart);return}this.element.addEventListener("touchstart",this.boundOnStart),this.element.addEventListener("mousedown",this.boundOnStart)}unbindStaticEvents(){if(this.element.removeEventListener("click",this.boundOnClick),this.usePointerEvents){this.element.removeEventListener("pointerdown",this.boundOnStart);return}this.element.removeEventListener("touchstart",this.boundOnStart),this.element.removeEventListener("mousedown",this.boundOnStart)}bindStartedEvents(){if(this.usePointerEvents){this.element.addEventListener("pointermove",this.boundOnMove),this.element.addEventListener("pointerup",this.boundOnEnd),this.isRestrictedToBox&&this.element.addEventListener("pointerleave",this.boundOnEnd),this.element.addEventListener("lostpointercapture",this.boundOnEnd),this.disableChildPointerEvents();return}this.element.addEventListener("touchmove",this.boundOnMove),this.element.addEventListener("mousemove",this.boundOnMove),this.element.addEventListener("touchend",this.boundOnEnd),this.element.addEventListener("mouseleave",this.boundOnEnd),this.element.addEventListener("mouseup",this.boundOnEnd)}unbindStartedEvents(){if(this.usePointerEvents){this.element.removeEventListener("pointermove",this.boundOnMove),this.element.removeEventListener("pointerup",this.boundOnEnd),this.isRestrictedToBox&&this.element.removeEventListener("pointerleave",this.boundOnEnd),this.element.removeEventListener("lostpointercapture",this.boundOnEnd),this.enableChildPointerEvents();return}this.element.removeEventListener("touchmove",this.boundOnMove),this.element.removeEventListener("mousemove",this.boundOnMove),this.element.removeEventListener("touchend",this.boundOnEnd),this.element.removeEventListener("mouseleave",this.boundOnEnd),this.element.removeEventListener("mouseup",this.boundOnEnd)}onClick(e){const r=this.getStartDetail(e,{id:0,type:"click"}),i=new CustomEvent("pointerbox:click",{detail:r});this.element.dispatchEvent(i)}onStart(e){if(e.preventDefault(),this.isCanceled=!1,!this.isMultitouch&&this.activePointers.size)return!1;if(this.resetCache(),this.isPointerEvent(e))return this.processStartEvent(e,{id:e.pointerId,type:e.pointerType}),!1;if(this.isTouchEvent(e)){for(let r=0;r<e.targetTouches.length;r++){const i=e.targetTouches.item(r);this.processStartEvent(e,{id:i.identifier,type:"touch"},i)}return!1}return this.processStartEvent(e,{id:0,type:"mouse"}),!1}processStartEvent(e,r,i){if(this.activePointers.get(r.id))return;const s=this.getStartDetail(e,r,i),a={id:r.id,type:r.type,distanceAccumulator:0,velocityValues:[0],children:document.elementsFromPoint(s.clientX,s.clientY),previousEventTimestamp:Date.now(),initial:s,previous:s};this.activePointers.set(r.id,a);const n=new CustomEvent("pointerbox:start",{detail:s});this.element.dispatchEvent(n);const o=new CustomEvent("pointerbox:childdown",{detail:s});a.children.forEach(u=>u.dispatchEvent(o)),this.bindStartedEvents()}onMove(e){if(e.preventDefault(),!this.isCanceled){if(this.isPointerEvent(e))return this.processMoveEvent(e,{id:e.pointerId,type:e.pointerType}),!1;if(this.isTouchEvent(e)){for(let r=0;r<e.changedTouches.length;r++){const i=e.targetTouches.item(r);this.processMoveEvent(e,{id:i.identifier,type:"touch"},i)}return!1}return this.processMoveEvent(e,{id:0,type:"mouse"}),!1}}processMoveEvent(e,r,i){const s=this.activePointers.get(r.id);if(!s)return!1;const a=this.getMoveDetail(e,s,i);s.previous=a,s.previousEventTimestamp=Date.now();const n=new CustomEvent("pointerbox:move",{detail:a});return this.element.dispatchEvent(n),!1}onEnd(e){if(e.preventDefault(),!this.isCanceled)return this.isPointerEvent(e)?(this.processEndEvent(e,{id:e.pointerId,type:e.pointerType}),!1):this.isTouchEvent(e)?(this.activePointers.forEach((r,i)=>{if(this.getTouchById(e.touches,i))return;const s=this.getTouchById(r.previous.originalEvent.touches,i);if(!s)throw new Error("[PointerBox] No previous details stored");this.processEndEvent(e,{id:i,type:r.type},s)}),!1):(this.processEndEvent(e,{id:0,type:"mouse"}),!1)}processEndEvent(e,r,i){const s=this.activePointers.get(r.id);if(!s)return!1;const a=this.getMoveDetail(e,s,i),n=new CustomEvent("pointerbox:end",{detail:a});this.element.dispatchEvent(n),this.checkForSwipe(n),this.activePointers.delete(s.id),this.activePointers.size||this.unbindStartedEvents();const o=new CustomEvent("pointerbox:childup",{detail:a});return document.elementsFromPoint(a.clientX,a.clientY).forEach(c=>{if(c.dispatchEvent(o),!s.children.includes(c))return;const f=new CustomEvent("pointerbox:childclick",{detail:a});c.dispatchEvent(f)}),!1}resetCache(){delete this.cachedElementRect,delete this.cachedDocumentRect,delete this.cachedTranslations}checkForSwipe(e){const r=e.detail;if(r.distanceFromInitial<this.swipeDistance||r.previous.normalizedVelocity<this.swipeVelocity)return;const i=r.degreesFromInitial;i>45&&i<135?r.direction="up":i>135&&i<225?r.direction="left":i>225&&i<315?r.direction="down":r.direction="right";const s=new CustomEvent("pointerbox:swipe",{detail:r}),a=new CustomEvent(`pointerbox:swipe${r.direction}`,{detail:r});this.element.dispatchEvent(s),this.element.dispatchEvent(a)}getStartDetail(e,r,i){let s,a,n,o;this.cachedElementRect||(this.cachedElementRect=this.element.getBoundingClientRect()),this.cachedDocumentRect||(this.cachedDocumentRect=this.documentElement.getBoundingClientRect());const u=this.cachedDocumentRect.top;this.cachedTranslations||(this.cachedTranslations=this.getTranslations()),i?(s=i.pageX,a=i.pageY+u,n=i.clientX,o=i.clientY):(s=e.pageX,a=e.pageY+u,n=e.clientX,o=e.clientY);const c=s-this.cachedElementRect.left,f=a-this.cachedElementRect.top,h=c/this.cachedElementRect.width,p=f/this.cachedElementRect.height,g=h<0||h>1||p<0||p>1,m={};return this.cachedTranslations.forEach(T=>{m[T.id]&&console.warn(`[PointerBox] duplicate translation key ${T.id}`);let x=c*T.x-T.left,v=f*T.y-T.top;if(T.rotation){const y=Yr.rotatePointByDegrees({x,y:v},{x:T.width/2,y:T.height/2},-T.rotation);x=y.x,v=y.y}m[T.id]={x,y:v}}),{id:r.id,type:r.type,boxX:c,boxY:f,pageX:s,pageY:a,clientX:n,clientY:o,percentX:h,percentY:p,translations:m,isOutsideBox:g,originalEvent:e,cancel:()=>this.cancel()}}getMoveDetail(e,r,i){if(!r.initial)throw new Error("[PointerBox] No initial details stored");if(!r.previous)throw new Error("[PointerBox] No previous details stored");const s=this.getStartDetail(e,{id:r.id,type:r.type},i),a=Yr.getAngleBetweenPoints({x:r.initial.boxX,y:r.initial.boxY},{x:s.boxX,y:s.boxY}),n=Yr.getDistanceBetweenPoints({x:r.initial.boxX,y:r.initial.boxY},{x:s.boxX,y:s.boxY}),o=Yr.getAngleBetweenPoints({x:r.previous.boxX,y:r.previous.boxY},{x:s.boxX,y:s.boxY}),u=Yr.getDistanceBetweenPoints({x:r.previous.boxX,y:r.previous.boxY},{x:s.boxX,y:s.boxY});r.distanceAccumulator+=u;let c=0;return r.previousEventTimestamp&&(c=Yr.getVelocity({x:r.previous.boxX,y:r.previous.boxY},r.previousEventTimestamp,{x:s.boxX,y:s.boxY},Date.now())),c&&(r.velocityValues.unshift(c),r.velocityValues.length=Math.min(r.velocityValues.length,5)),{id:s.id,type:s.type,boxX:s.boxX,boxY:s.boxY,pageX:s.pageX,pageY:s.pageY,clientX:s.clientX,clientY:s.clientY,percentX:s.percentX,percentY:s.percentY,translations:s.translations,isOutsideBox:s.isOutsideBox,degreesFromInitial:a,distanceFromInitial:n,changeXFromInitial:s.boxX-r.initial.boxX,changeYFromInitial:s.boxY-r.initial.boxY,degreesFromPrevious:o,distancefromPrevious:u,changeXFromPrevious:s.boxX-r.previous.boxX,changeYFromPrevious:s.boxY-r.previous.boxY,totalDistance:r.distanceAccumulator,velocity:c,normalizedVelocity:r.velocityValues.reduce((f,h)=>f+h)/r.velocityValues.length,originalEvent:s.originalEvent,initial:r.initial,previous:r.previous,cancel:s.cancel}}getTranslations(){if(!this.cachedElementRect)throw Error("[PointerBox] Element rect is undefined");const e=[],r=this.element.children;for(let i=0;i<r.length;i++){const s=r[i].attributes.getNamedItem("data-pointerboxtranslateid");if(!s)continue;const a=s.value;if(!a)continue;const n=r[i].attributes.getNamedItem("data-pointerboxtranslatewidth"),o=r[i].attributes.getNamedItem("data-pointerboxtranslateheight"),u=r[i].attributes.getNamedItem("data-pointerboxtranslaterotation"),c=n!=null&&n.value?parseInt(n.value,10):this.cachedElementRect.width,f=o!=null&&o.value?parseInt(o.value,10):this.cachedElementRect.height,h=u!=null&&u.value?parseInt(u.value,10):0,p=r[i].getBoundingClientRect();e.push({id:a,left:p.left-this.cachedElementRect.left,top:p.top-this.cachedElementRect.top,x:c/p.width,y:f/p.height,width:c,height:f,rotation:h})}return e}disableChildPointerEvents(){this.element.style.touchAction="none";for(let e=0;e<this.element.children.length;e++){const r=this.element.children[e];r.style.pointerEvents="none",r.style.touchAction="none"}}enableChildPointerEvents(){this.element.style.touchAction="";for(let e=0;e<this.element.children.length;e++){const r=this.element.children[e];r.style.pointerEvents="",r.style.touchAction=""}}applyPolyfill(){Cu.isPolyfilled||(Cu.isPolyfilled=!0,window&&window.document&&(window.document.elementsFromPoint||(window.document.elementsFromPoint=Cu.elementsFromPoint)))}static elementsFromPoint(e,r){const i=[],s=[];let a=null;do{const n=window.document.elementFromPoint(e,r);a!==n?(a=n,i.push(a),s.push(a.style.pointerEvents),a.style.pointerEvents="none"):a=null}while(a);return i.forEach((n,o)=>{n.style.pointerEvents=s[o]}),i}};Be(Cu,"isPolyfilled",!1);let Iy=Cu;class bJ{static withTypes(e,r){let i=e;return r.forEach(s=>{typeof this[s]=="function"&&(i=this[s](i))}),i}static html(e){if(String(e).match(/<fart>/g)){const i=new Audio(new URL("./assets/BhWysX6c.wav",import.meta.url).href);i.volume=.1,i.play()}const r=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g;return String(e).replace(r,"")}static input(e){return e.replace("","...").replace(/[\u201C\u201D]/gi,'"').replace(/[\u2018\u2019]/g,"'").replace(/[^\u00A1\u0020-\u007E\u00BF-\u00FF\u2019]/gi,"")}static username(e){return e.replace(/[^A-Z0-9\u00A1\u0020-\u002F\u00BF-\u00FF\u2026!?*$+\-'_ .,]/gi,"").replace(/'/g,"")}static emoji(e){try{return e.replace(new RegExp("\\p{RGI_Emoji}","gv"),"")}catch{console.warn("[Sanitize] Cannot remove emoji with Unicode sequence escapes, falling back.")}try{return e.replace(/[\p{Extended_Pictographic}\u{1F3FB}-\u{1F3FF}\u{1F9B0}-\u{1F9B3}]/gu,"")}catch{console.warn("[Sanitize] Cannot remove emoji with Unicode character escapes, falling back.")}return e.replace(/(\u00A9|\u00AE|[\u2000-\u2017]|[\u2020-\u3300]|\uD83C[\uD000-\uDFFF]|\uD83D[\uD000-\uDFFF]|\uD83E[\uD000-\uDFFF])/g,"")}static nonEmoji(e){try{const r=e.match(new RegExp("\\p{RGI_Emoji}","gv"));return(r==null?void 0:r.join(""))??""}catch{console.warn("[Sanitize] Cannot remove non-emoji with Unicode sequence escapes, falling back.")}try{return e.replace(new RegExp("\\P{Extended_Pictographic}","gu"),"").replace(/[^\u{1F3FB}-\u{1F3FF}\u{1F9B0}-\u{1F9B3}]/gu,"")}catch{console.warn("[Sanitize] Cannot remove non-emoji with Unicode character escapes, falling back.")}return e.replace(new RegExp("\\p{Currency_Symbol}","gu"),"").replace(new RegExp("\\p{Letter}","gu"),"").replace(new RegExp("\\p{Number}","gu"),"").replace(new RegExp("\\p{Math_Symbol}","gu"),"").replace(new RegExp("\\p{Punctuation}","gu"),"").replace(new RegExp("\\p{Separator}","gu"),"").replace(/[`^]/gu,"")}}class ld{static get canShare(){return!!navigator.canShare}static async share(e,r,i){var a;if(!navigator.share)return;const s={files:[e]};r.title&&(s.title=r.title),r.text&&(s.text=r.text),r.url&&(s.url=r.url),await navigator.share(s),i&&((a=window.tv.analytics)==null||a.galleryShare(i.categoryId,i.options))}static async copyToClipboard(e,r){var s;if(!navigator.clipboard)return;const i=new ClipboardItem({[e.type]:e});await navigator.clipboard.write([i]),r&&((s=window.tv.analytics)==null||s.galleryShare(r.categoryId,r.options))}}const xJ={BACK:"Back",CANCEL:"Cancel",CLOSE:"Close",CONFIRM:"Confirm",CREATE:"Create",DELETE:"Delete",DONE:"Done",EDIT:"Edit",OK:"OK",NEXT:"Next",NO:"No",PLAY:"Play",PUBLISH:"Publish",REMOVE:"Remove",RESET:"Reset",SUBMIT:"Submit",TRY_AGAIN:"Try Again",UNDO:"Undo",YES:"Yes"},vJ={UGC:{VISIBILITY_CONTROLLER_OFF:"prompts hidden on players devices",VISIBILITY_CONTROLLER_ON:"prompts shown on players devices",VISIBILITY_SCREEN_OFF:"prompts hidden on game screen",VISIBILITY_SCREEN_ON:"prompts shown on game screen"}},EJ={DISCONNECTED:"You have been disconnected.",DRAWING_NOTHING:"You have to draw something!",PLAYER_KICKED:"You have been kicked from the game by a moderator.",ROOM_DESTROYED:"Thanks for playing!",ROOM_DISCONNECTED:"Disconnected",TEXT_NAUGHTY:"Im afraid you cant write that. Please be respectful of other players.",TEXT_NOTHING:"You cant enter nothing!",TITLE:"Error"},yJ="LOADING",TJ={JOINED_COUNT:"{count} of {maxPlayers} players joined",PLAYERS_NEEDED:"1 player needed to start | {count} players needed to start",WAITING_FOR_VIP:"Waiting for {name} to start the game",WAITING_FOR_GAMEPAD:"Waiting for the game to start",WAITING_FOR_NEW_GAME:"Waiting for a new game to start",GAME_STARTING:"Game is starting",BUTTON_START:"Press to Start",BUTTON_CANCEL:"Press to Cancel"},AJ={GALLERY_LINK:"Visit the Gallery",NEW_GAME_STARTED:"A new game has started",PLAY_AGAIN:"Play again?",WHICH_GAME:"Which game?",WHICH_PLAYERS:"Which players?",THANKS_FOR_PLAYING:"Thanks for playing!",BUTTON_GO_TO_GAME:"Go to game",BUTTON_GO_TO_JACKBOX:"Back to jackbox.tv",BUTTON_PLAY_AGAIN:"Play again",BUTTON_SAME_PLAYERS:"Same players",BUTTON_NEW_PLAYERS:"New players",BUTTON_CHANGE_GAME:"Change game",BUTTON_NEXT_GAME:"Play {gameName}"},SJ={AND:"AND",OR:"OR"},RJ={BUTTON_SKIP:"Skip",BUTTON_NEXT:"Next",BUTTON_DONE:"Lets Go!"},CJ={NAME:"AUDIENCE"},wJ={CART:{CHECK_OUT:"Check out",EMPTY:"Your cart is empty",TITLE:"Shopping Cart",TOTAL:"Total"}},LJ={EPISODE_REPORT:"Report Episode",EPISODE_UNLOAD:"Unload Episode",EPISODE_VIEW_AUTHOR:"View Author",EPISODES_LOAD:"Load an episode by id:",EPISODES_MENU:"Episodes Menu",EPISODES_SELECT:"Or select an epsiode:",EPISODES_WARNING:"Warning: user generated content is not rated",INSTRUCTION:{CREATE_TITLE:"first things first, enter a name for the episode that will contain all your prompts and hit create.",LOAD:"create or load?",PUBLISH:"publish your episode",TITLE:"name your episode",TOGGLE_VISIBILITY:"tap to show/hide prompts",WRITE:"write your prompts"},WARNING:{DELETE:"Are you sure you want to delete this episode?",TOS:"By sharing content, you agree to our [tos]Terms of Service[/tos]",TOS_AGREE:"agree and share"},BACK_TO_EPISODES:"back to episodes",BACK_TO_MENU:"back to menu",CREATE_NEW_EPISODE:"create a new episode",PREVIOUS_EPISODES:"previous episodes",PROMPT_ADD:"add prompt",PROMPT_PLACEHOLDER:"enter a prompt",PROMPTS_COUNT_HIDDEN:"({count} hidden)",TITLE_PLACEHOLDER:"enter a title"},IJ={BROADCASTER:{SUBTEXT:"You have successfully connected your account to the Jackbox Audience Kit Twitch Extension.",WARNING:"THIS ROOM DOESN'T HAVE THE AUDIENCE SETTING ENABLED"},RECONNECTED:{TEXT:"RECONNECTED",SUBTEXT:"Have fun!"},RECONNECTING:{CONTROLLER:{TEXT:"CONNECTION INTERRUPTED",SUBTEXT:"Attempting to reconnect ({attempt} of 5)"},GAME:{TEXT:"GAME CONNECTION INTERRUPTED",SUBTEXT:"Please wait while we attempt to reconnect"}},PAUSED:{TEXT:"THE GAME IS PAUSED",SUBTEXT:"Anything you submit will still be sent to the game."}},BJ={SHARE:"Share",COPY_TO_CLIPBOARD:"Copy to clipboard",COPIED:"Copied"},PJ={ACTION:xJ,ALT:vJ,ERROR:EJ,LOADING:yJ,LOBBY:TJ,POST_GAME:AJ,SEPARATOR:SJ,TUTORIAL:RJ,AUDIENCE:CJ,GALLERY:wJ,UGC:LJ,TOAST:IJ,SHARE:BJ},OJ={BACK:"Retour",CANCEL:"Annuler",CLOSE:"Fermer",CONFIRM:"Confirmer",CREATE:"Crer",DELETE:"Supprimer",DONE:"Termin",EDIT:"Modifier",OK:"OK",NEXT:"Suivant",NO:"Non",PLAY:"Jouer",PUBLISH:"Publier",REMOVE:"Supprimer",RESET:"Rinitialiser",SUBMIT:"Envoyer",TRY_AGAIN:"Ressayer",UNDO:"Annuler",YES:"Oui"},DJ={UGC:{VISIBILITY_CONTROLLER_OFF:"sujets non affichs sur les appareils des joueurs",VISIBILITY_CONTROLLER_ON:"sujets affichs sur les appareils des joueurs",VISIBILITY_SCREEN_OFF:"sujets non affichs sur l'cran de jeu",VISIBILITY_SCREEN_ON:"sujets affichs sur l'cran de jeu"}},kJ={DISCONNECTED:"Vous avez t dconnect(e).",DRAWING_NOTHING:"Vous devez dessiner quelque chose!",PLAYER_KICKED:"Vous avez t ject(e) de la partie par un modrateur.",ROOM_DESTROYED:"Merci d'avoir jou!",ROOM_DISCONNECTED:"Dconnexion",TEXT_NAUGHTY:"Je crains que vous ne puissiez pas crire a. Respectez les autres joueurs.",TEXT_NOTHING:"Vous ne pouvez pas ne rien entrer",TITLE:"Erreur"},UJ="CHARGEMENT",MJ={JOINED_COUNT:"{count} joueurs sur {maxPlayers} ont rejoint la partie",PLAYERS_NEEDED:"1joueur ncessaire pour commencer | {count}joueurs ncessaires pour commencer",WAITING_FOR_VIP:"En attente de {name} pour commencer la partie",WAITING_FOR_GAMEPAD:"En attente du dbut de la partie",WAITING_FOR_NEW_GAME:"En attente du dbut d'une nouvelle partie",GAME_STARTING:"La partie commence",BUTTON_START:"Appuyer pour commencer",BUTTON_CANCEL:"Appuyer pour annuler"},NJ={GALLERY_LINK:"Visiter la galerie",NEW_GAME_STARTED:"Une nouvelle partie a commenc",PLAY_AGAIN:"Rejouer?",WHICH_GAME:" quel jeu?",WHICH_PLAYERS:"Avec quels joueurs?",THANKS_FOR_PLAYING:"Merci d'avoir jou!",BUTTON_GO_TO_GAME:"Aller au jeu",BUTTON_GO_TO_JACKBOX:"Retour  jackbox.tv",BUTTON_PLAY_AGAIN:"Rejouer",BUTTON_SAME_PLAYERS:"Mmes joueurs",BUTTON_NEW_PLAYERS:"Nouveaux joueurs",BUTTON_CHANGE_GAME:"Changer de jeu",BUTTON_NEXT_GAME:"Jouer {gameName}"},FJ={AND:"ET",OR:"OU"},GJ={BUTTON_SKIP:"Passer",BUTTON_NEXT:"Suivant",BUTTON_DONE:"Allons-y!"},KJ={NAME:"SPECTATEURS"},VJ={CART:{CHECK_OUT:"Paiement",EMPTY:"Votre panier est vide",TITLE:"Panier",TOTAL:"Total"}},$J={EPISODE_REPORT:"Signaler l'pisode",EPISODE_UNLOAD:"Retirer l'pisode",EPISODE_VIEW_AUTHOR:"Voir l'auteur",EPISODES_LOAD:"Charger un pisode par id:",EPISODES_MENU:"Menu des pisodes",EPISODES_SELECT:"Ou slectionner un pisode:",EPISODES_WARNING:"Attention: le contenu gnr par les utilisateurs ne fait pas l'objet d'un classement",INSTRUCTION:{CREATE_TITLE:"commencez par donner un nom  l'pisode qui contiendra vos sujets, puis touchez crer.",LOAD:"crer ou charger?",PUBLISH:"publiez votre pisode",TITLE:"donnez un nom  votre pisode",TOGGLE_VISIBILITY:"touchez pour afficher/masquer les sujets",WRITE:"crivez vos sujets"},WARNING:{DELETE:"Voulez-vous vraiment supprimer cet pisode?",TOS:"En partageant votre contenu, vous acceptez nos [tos]Conditions de service[/tos]",TOS_AGREE:"accepter et partager"},BACK_TO_EPISODES:"retour aux pisodes",BACK_TO_MENU:"retour au menu",CREATE_NEW_EPISODE:"crer un nouvel pisode",PREVIOUS_EPISODES:"pisodes prcdents",PROMPT_ADD:"ajouter un sujet",PROMPT_PLACEHOLDER:"taper un sujet",PROMPTS_COUNT_HIDDEN:"({count} non affich)",TITLE_PLACEHOLDER:"taper un titre"},HJ={BROADCASTER:{SUBTEXT:"La connexion de votre compte  l'extension Twitch Jackbox Audience Kit a russi.",WARNING:"LE PARAMTRE 'PUBLIC' N'EST PAS ACTIV DANS CETTE SALLE."},RECONNECTED:{TEXT:"RECONNECT(E)",SUBTEXT:"Amusez-vous bien!"},RECONNECTING:{CONTROLLER:{TEXT:"CONNEXION INTERROMPUE",SUBTEXT:"Tentative de reconnexion ({attempt} sur 5)"},GAME:{TEXT:"CONNEXION AU JEU INTERROMPUE",SUBTEXT:"Veuillez patienter pendant que nous tentons de vous reconnecter."}},PAUSED:{TEXT:"LA PARTIE EST EN PAUSE",SUBTEXT:"Tout ce que vous proposez sera quand mme envoy dans le jeu."}},qJ={SHARE:"Partager",COPY_TO_CLIPBOARD:"Copier dans le presse-papiers",COPIED:"Copi"},XJ={ACTION:OJ,ALT:DJ,ERROR:kJ,LOADING:UJ,LOBBY:MJ,POST_GAME:NJ,SEPARATOR:FJ,TUTORIAL:GJ,AUDIENCE:KJ,GALLERY:VJ,UGC:$J,TOAST:HJ,SHARE:qJ},zJ={BACK:"Indietro",CANCEL:"Annulla",CLOSE:"Chiuda",CONFIRM:"Conferma",CREATE:"Crea",DELETE:"Elimina",DONE:"Fine",EDIT:"Modifica",OK:"OK",NEXT:"Prossimo",NO:"No",PLAY:"Gioca",PUBLISH:"Pubblica",REMOVE:"Rimuovi",RESET:"Reset",SUBMIT:"Invia",TRY_AGAIN:"Riprova",UNDO:"Annulla",YES:"S"},WJ={UGC:{VISIBILITY_CONTROLLER_OFF:"definizioni nascoste sui dispositivi dei giocatori",VISIBILITY_CONTROLLER_ON:"definizioni visualizzate sui dispositivi dei giocatori",VISIBILITY_SCREEN_OFF:"definizioni nascoste sullo schermo di gioco",VISIBILITY_SCREEN_ON:"definizioni visualizzate sullo schermo di gioco"}},jJ={DISCONNECTED:" stata effettuata la disconnessione.",DRAWING_NOTHING:"Devi disegnare qualcosa!",PLAYER_KICKED:"Un moderatore ti ha cacciato dalla partita.",ROOM_DESTROYED:"Grazie per aver scelto di giocare con noi!",ROOM_DISCONNECTED:"Disconnessione effettuata",TEXT_NAUGHTY:"Purtroppo non puoi scrivere questa cosa. Abbi rispetto per gli altri giocatori.",TEXT_NOTHING:"Devi per forza inserire qualcosa!",TITLE:"Errore"},YJ="CARICAMENTO",ZJ={JOINED_COUNT:"{count} su {maxPlayers} giocatori in partita",PLAYERS_NEEDED:"Manca 1 giocatore per iniziare | Mancano {count} giocatori per iniziare",WAITING_FOR_VIP:"In attesa di {name} per iniziare la partita",WAITING_FOR_GAMEPAD:"In attesa d'iniziare la partita",WAITING_FOR_NEW_GAME:"In attesa d'iniziare una nuova partita",GAME_STARTING:"La partita sta per iniziare",BUTTON_START:"Premi per avviare",BUTTON_CANCEL:"Premi per annullare"},QJ={GALLERY_LINK:"Visita la galleria",NEW_GAME_STARTED:" iniziata una nuova partita",PLAY_AGAIN:"Vuoi giocare di nuovo?",WHICH_GAME:"Quale gioco?",WHICH_PLAYERS:"Quali giocatori?",THANKS_FOR_PLAYING:"Grazie per aver scelto di giocare con noi!",BUTTON_GO_TO_GAME:"Vai al gioco",BUTTON_GO_TO_JACKBOX:"Torna a jackbox.tv",BUTTON_PLAY_AGAIN:"Gioca di nuovo",BUTTON_SAME_PLAYERS:"Stessi giocatori",BUTTON_NEW_PLAYERS:"Nuovi giocatori",BUTTON_CHANGE_GAME:"Cambia gioco",BUTTON_NEXT_GAME:"Gioca {gameName}"},JJ={AND:"E",OR:"O"},eee={BUTTON_SKIP:"Salta",BUTTON_NEXT:"Avanti",BUTTON_DONE:"Iniziamo!"},tee={NAME:"PUBBLICO"},ree={CART:{CHECK_OUT:"Vai al pagamento",EMPTY:"Il carrello  vuoto",TITLE:"Carrello",TOTAL:"Totale"}},nee={EPISODE_REPORT:"Segnala episodio",EPISODE_UNLOAD:"Rimuovi episodio",EPISODE_VIEW_AUTHOR:"Mostra autore",EPISODES_LOAD:"Carica un episodio in base al suo id:",EPISODES_MENU:"Menu Episodi",EPISODES_SELECT:"Oppure seleziona un episodio:",EPISODES_WARNING:"Attenzione: il contenuto generato dagli utenti non  classificato",INSTRUCTION:{CREATE_TITLE:"per prima cosa, inserisci un nome per lepisodio che contenga tutti i tuoi suggerimenti e premi crea.",LOAD:"creare o caricare?",PUBLISH:"pubblica il tuo episodio",TITLE:"dai un nome al tuo episodio",TOGGLE_VISIBILITY:"tocca per mostrare/nascondere suggerimenti",WRITE:"scrivi le tue definizioni"},WARNING:{DELETE:"Vuoi davvero eliminare questo episodio?",TOS:"Condividendo i contenuti, accetti le nostre [tos]Condizioni del servizio[/tos]",TOS_AGREE:"accetta e condividi"},BACK_TO_EPISODES:"torna agli episodi",BACK_TO_MENU:"torna al menu",CREATE_NEW_EPISODE:"crea un nuovo episodio",PREVIOUS_EPISODES:"episodi precedenti",PROMPT_ADD:"aggiungi suggerimento",PROMPT_PLACEHOLDER:"inserisci suggerimento",PROMPTS_COUNT_HIDDEN:"({count} nascosti)",TITLE_PLACEHOLDER:"inserisci un titolo"},iee={BROADCASTER:{SUBTEXT:"Il collegamento del tuo account con l'estensione per Twitch Jackbox Audience Kit  andato a buon fine.",WARNING:"L'IMPOSTAZIONE DEL PUBBLICO NON  ATTIVA PER QUESTA STANZA"},RECONNECTED:{TEXT:"RICONNESSO",SUBTEXT:"Buon divertimento!"},RECONNECTING:{CONTROLLER:{TEXT:"CONNESSIONE INTERROTTA",SUBTEXT:"Tentativo di riconnessione in corso ({attempt} di 5)"},GAME:{TEXT:"CONNESSIONE AL GIOCO INTERROTTA",SUBTEXT:"Resta in attesa mentre proviamo a riconnetterci"}},PAUSED:{TEXT:"IL GIOCO  IN PAUSA",SUBTEXT:"Qualsiasi cosa invii sar comunque inviata al gioco."}},see={SHARE:"Condividi",COPY_TO_CLIPBOARD:"Copia negli appunti",COPIED:"Copiato"},aee={ACTION:zJ,ALT:WJ,ERROR:jJ,LOADING:YJ,LOBBY:ZJ,POST_GAME:QJ,SEPARATOR:JJ,TUTORIAL:eee,AUDIENCE:tee,GALLERY:ree,UGC:nee,TOAST:iee,SHARE:see},oee={BACK:"Zurck",CANCEL:"Abbrechen",CLOSE:"Schlieen",CONFIRM:"Besttigen",CREATE:"Erstellen",DELETE:"Lschen",DONE:"Fertig",EDIT:"Bearbeiten",OK:"OK",NEXT:"Weiter",NO:"Nein",PLAY:"Spielen",PUBLISH:"Verffentlichen",REMOVE:"Entfernen",RESET:"Neu starten",SUBMIT:"Abschicken",TRY_AGAIN:"Erneut versuchen",UNDO:"Rckgngig",YES:"Ja"},uee={UGC:{VISIBILITY_CONTROLLER_OFF:"Prompts auf Spielergerten verborgen",VISIBILITY_CONTROLLER_ON:"Prompts auf Spielergerten angezeigt",VISIBILITY_SCREEN_OFF:"Prompts auf Spielbildschirm verborgen",VISIBILITY_SCREEN_ON:"Prompts auf Spielbildschirm angezeigt"}},lee={DISCONNECTED:"Deine Verbindung wurde getrennt.",DRAWING_NOTHING:"Du musst irgendwas zeichnen!",PLAYER_KICKED:"Du wurdest von einem Moderator gekickt.",ROOM_DESTROYED:"Danke frs Spielen!",ROOM_DISCONNECTED:"Verbindung getrennt",TEXT_NAUGHTY:"Das kannst du leider nicht schreiben. Bitte nimm Rcksicht auf deine Mitspieler.",TEXT_NOTHING:"Du musst etwas eingeben!",TITLE:"Fehler"},cee="LADE",fee={JOINED_COUNT:"{count} von {maxPlayers} Spielern sind beigetreten",PLAYERS_NEEDED:"1 Spieler zum Starten bentigt | {count} Spieler zum Starten bentigt",WAITING_FOR_VIP:"Warten, bis {name} das Spiel startet",WAITING_FOR_GAMEPAD:"Warten, bis das Spiel startet",WAITING_FOR_NEW_GAME:"Warten, bis ein neues Spiel startet",GAME_STARTING:"Das Spiel beginnt",BUTTON_START:"Zum Starten drcken",BUTTON_CANCEL:"Zum Abbrechen drcken"},hee={GALLERY_LINK:"Galerie besuchen",NEW_GAME_STARTED:"Ein neues Spiel hat begonnen",PLAY_AGAIN:"Erneut spielen?",WHICH_GAME:"Welches Spiel?",WHICH_PLAYERS:"Welche Spieler?",THANKS_FOR_PLAYING:"Danke frs Spielen!",BUTTON_GO_TO_GAME:"Zum Spiel",BUTTON_GO_TO_JACKBOX:"Zurck zu jackbox.tv",BUTTON_PLAY_AGAIN:"Erneut spielen",BUTTON_SAME_PLAYERS:"Selbe Spieler",BUTTON_NEW_PLAYERS:"Neue Spieler",BUTTON_CHANGE_GAME:"Anderes Spiel",BUTTON_NEXT_GAME:"{gameName} spielen"},dee={AND:"UND",OR:"ODER"},pee={BUTTON_SKIP:"berspringen",BUTTON_NEXT:"Weiter",BUTTON_DONE:"Los geht's!"},gee={NAME:"PUBLIKUM"},mee={CART:{CHECK_OUT:"Kasse",EMPTY:"Dein Einkaufswagen ist leer",TITLE:"Einkaufswagen",TOTAL:"Gesamtsumme"}},_ee={EPISODE_REPORT:"Episode melden",EPISODE_UNLOAD:"Episode deaktivieren",EPISODE_VIEW_AUTHOR:"Autor ansehen",EPISODES_LOAD:"Lade eine Episode ber dessen ID:",EPISODES_MENU:"Episoden-Men",EPISODES_SELECT:"Oder whle eine Episode aus:",EPISODES_WARNING:"Achtung: Von Nutzern erstellte Inhalte werden nicht auf Familientauglichkeit geprft",INSTRUCTION:{CREATE_TITLE:'Benenne als allererstes deine Episode, die alle deine Prompts enthalten wird und drcke dann "Erstellen".',LOAD:"Erstellen oder laden?",PUBLISH:"Verffentliche deine Episode",TITLE:"Benenne deine Episode",TOGGLE_VISIBILITY:"Drcken, um Prompts zu zeigen / zu verstecken",WRITE:"Schreibe deine Prompts"},WARNING:{DELETE:"Bist du sicher, dass du diese Episode lschen mchtest?",TOS:"Durch das Teilen von Inhalten stimmst du unseren [tos]Nutzungsbedingungen[/tos] zu",TOS_AGREE:"Zustimmen und teilen"},BACK_TO_EPISODES:"Zurck zu den Episoden",BACK_TO_MENU:"Zurck zum Men",CREATE_NEW_EPISODE:"Eigene Episode erstellen",PREVIOUS_EPISODES:"Vorige Episoden",PROMPT_ADD:"Prompt hinzufgen",PROMPT_PLACEHOLDER:"Prompt eingeben",PROMPTS_COUNT_HIDDEN:"({count} versteckt)",TITLE_PLACEHOLDER:"Titel eingeben"},bee={BROADCASTER:{SUBTEXT:"Du hast dein Konto erfolgreich mit der Jackbox Audience Kit Twitch-Erweiterung verknpft.",WARNING:"FR DIESEN RAUM IST DIE PUBLIKUMS-EINSTELLUNG NICHT AKTIV"},RECONNECTED:{TEXT:"NEU VERBUNDEN",SUBTEXT:"Viel Spa!"},RECONNECTING:{CONTROLLER:{TEXT:"VERBINDUNG UNTERBROCHEN",SUBTEXT:"Versuche neu zu verbinden ({attempt} von 5)"},GAME:{TEXT:"VERBINDUNG ZUM SPIEL UNTERBROCHEN",SUBTEXT:"Bitte warte whrend wir versuchen, die Verbindung wiederherzustellen."}},PAUSED:{TEXT:"DAS SPIEL IST PAUSIERT",SUBTEXT:"Alles, was du abschickst, wird weiterhin ans Spiel gesendet."}},xee={SHARE:"Teilen",COPY_TO_CLIPBOARD:"In Zwischenablage kopieren",COPIED:"Kopiert"},vee={ACTION:oee,ALT:uee,ERROR:lee,LOADING:cee,LOBBY:fee,POST_GAME:hee,SEPARATOR:dee,TUTORIAL:pee,AUDIENCE:gee,GALLERY:mee,UGC:_ee,TOAST:bee,SHARE:xee},Eee={BACK:"Atrs",CANCEL:"Cancelar",CLOSE:"Cerrar",CONFIRM:"Confirmar",CREATE:"Crear",DELETE:"Borrar",DONE:"Hecho",EDIT:"Editar",OK:"Aceptar",NEXT:"Siguiente",NO:"No",PLAY:"Jugar",PUBLISH:"Publicar",REMOVE:"Eliminar",RESET:"Reiniciar",SUBMIT:"Enviar",TRY_AGAIN:"Volver a intentarlo",UNDO:"Deshacer",YES:"S"},yee={UGC:{VISIBILITY_CONTROLLER_OFF:"los enunciados no se muestran en el dispositivo del jugador",VISIBILITY_CONTROLLER_ON:"los enunciados se muestran en el dispositivo del jugador",VISIBILITY_SCREEN_OFF:"los enunciados no se muestran en la pantalla",VISIBILITY_SCREEN_ON:"los enunciados se muestran en la pantalla"}},Tee={DISCONNECTED:"Te has desconectado.",DRAWING_NOTHING:"Tienes que dibujar algo!",PLAYER_KICKED:"Un moderador te ha expulsado de la partida.",ROOM_DESTROYED:"Gracias por jugar!",ROOM_DISCONNECTED:"Desconectado",TEXT_NAUGHTY:"Lo siento, no puedes escribir eso. Hay que ser respetuoso con los dems jugadores.",TEXT_NOTHING:"Tienes que escribir algo",TITLE:"Error"},Aee="CARGANDO",See={JOINED_COUNT:"Se han unido {count} de {maxPlayers} jugadores",PLAYERS_NEEDED:"Se necesita 1 jugador para empezar | Se necesitan {count} jugadores para empezar",WAITING_FOR_VIP:"Esperando a que {name} inicie la partida",WAITING_FOR_GAMEPAD:"Esperando a que empiece la partida",WAITING_FOR_NEW_GAME:"Esperando a que empiece otra partida",GAME_STARTING:"La partida va a empezar",BUTTON_START:"Pulsa para empezar",BUTTON_CANCEL:"Pulsa para cancelar"},Ree={GALLERY_LINK:"Visita la galera",NEW_GAME_STARTED:"Ha empezado una nueva partida",PLAY_AGAIN:"Jugar otra vez?",WHICH_GAME:"Qu juego?",WHICH_PLAYERS:"Qu jugadores?",THANKS_FOR_PLAYING:"Gracias por jugar!",BUTTON_GO_TO_GAME:"Ir a al juego",BUTTON_GO_TO_JACKBOX:"Volver a jackbox.tv",BUTTON_PLAY_AGAIN:"Jugar de nuevo",BUTTON_SAME_PLAYERS:"Los mismos jugadores",BUTTON_NEW_PLAYERS:"Nuevos jugadores",BUTTON_CHANGE_GAME:"Cambiar de juego",BUTTON_NEXT_GAME:"Jugar a {gameName}"},Cee={AND:"Y",OR:"O"},wee={BUTTON_SKIP:"Omitir",BUTTON_NEXT:"Siguiente",BUTTON_DONE:"Vamos!"},Lee={NAME:"PBLICO"},Iee={CART:{CHECK_OUT:"Pagar",EMPTY:"El carrito est vaco",TITLE:"Carrito de la compra",TOTAL:"Total"}},Bee={EPISODE_REPORT:"Denunciar episodio",EPISODE_UNLOAD:"Retirar episodio",EPISODE_VIEW_AUTHOR:"Ver autor",EPISODES_LOAD:"Cargar un episodio por ID:",EPISODES_MENU:"Men de episodios",EPISODES_SELECT:"O selecciona un episodio:",EPISODES_WARNING:"Aviso: El contenido de los usuarios no tiene clasificacin de edad",INSTRUCTION:{CREATE_TITLE:"en primer lugar, ponle un nombre al episodio que contendr tus enunciados y dale a crear.",LOAD:"crear o cargar?",PUBLISH:"publica tu episodio",TITLE:"ponle nombre al episodio",TOGGLE_VISIBILITY:"toca para mostrar u ocultar los enunciados",WRITE:"escribe los enunciados"},WARNING:{DELETE:"Seguro que quieres borrar este episodio?",TOS:"Al compartir contenidos, aceptas las [tos]Condiciones del servicio[/tos]",TOS_AGREE:"aceptar y compartir"},BACK_TO_EPISODES:"volver a los episodios",BACK_TO_MENU:"volver al men",CREATE_NEW_EPISODE:"crear nuevo episodio",PREVIOUS_EPISODES:"episodios anteriores",PROMPT_ADD:"aadir enunciado",PROMPT_PLACEHOLDER:"escribe un enunciado",PROMPTS_COUNT_HIDDEN:"({count} ocultos)",TITLE_PLACEHOLDER:"escribe un ttulo"},Pee={BROADCASTER:{SUBTEXT:"Has conectado tu cuenta con xito a la extensin de Twitch del kit para pblico de Jackbox.",WARNING:"ESTA SALA NO TIENE LA FUNCIN DE PBLICO HABILITADA"},RECONNECTED:{TEXT:"CONEXIN RESTABLECIDA",SUBTEXT:"Divirtete!"},RECONNECTING:{CONTROLLER:{TEXT:"SE HA INTERRUMPIDO LA CONEXIN",SUBTEXT:"Recuperando conexin (intento {attempt} de 5)"},GAME:{TEXT:"SE HA INTERRUMPIDO LA CONEXIN CON EL JUEGO",SUBTEXT:"Espera mientras intentamos recuperar la conexin"}},PAUSED:{TEXT:"PARTIDA EN PAUSA",SUBTEXT:"Tus respuestas se enviarn igualmente al juego."}},Oee={SHARE:"Compartir",COPY_TO_CLIPBOARD:"Copiar al portapapeles",COPIED:"Copiado"},Dee={ACTION:Eee,ALT:yee,ERROR:Tee,LOADING:Aee,LOBBY:See,POST_GAME:Ree,SEPARATOR:Cee,TUTORIAL:wee,AUDIENCE:Lee,GALLERY:Iee,UGC:Bee,TOAST:Pee,SHARE:Oee},kee={BACK:"Volver",CANCEL:"Cancelar",CLOSE:"Cerrar",CONFIRM:"Confirmar",CREATE:"Crear",DELETE:"Borrar",DONE:"Listo",EDIT:"Editar",OK:"Aceptar",NEXT:"Siguiente",NO:"No",PLAY:"Jugar",PUBLISH:"Publicar",REMOVE:"Quitar",RESET:"Reiniciar",SUBMIT:"Enviar",TRY_AGAIN:"Volver a intentarlo",UNDO:"Deshacer",YES:"S"},Uee={UGC:{VISIBILITY_CONTROLLER_OFF:"indicaciones ocultas en los dispositivos de los jugadores",VISIBILITY_CONTROLLER_ON:"indicaciones presentes en los dispositivos de los jugadores",VISIBILITY_SCREEN_OFF:"indicaciones ocultas en la pantalla del juego",VISIBILITY_SCREEN_ON:"indicaciones presentes en la pantalla del juego"}},Mee={DISCONNECTED:"Te desconectaste.",DRAWING_NOTHING:"Tienes que dibujar algo!",PLAYER_KICKED:"Un moderador te expuls del juego.",ROOM_DESTROYED:"Gracias por jugar!",ROOM_DISCONNECTED:"Desconectado",TEXT_NAUGHTY:"Lo siento, no puedes escribir eso. Seamos respetuosos con los dems participantes.",TEXT_NOTHING:"Tienes que escribir algo!",TITLE:"Error"},Nee="CARGANDO",Fee={JOINED_COUNT:"{count} de {maxPlayers} jugadores se unieron",PLAYERS_NEEDED:"Se necesita 1 jugador para empezar | Se necesitan {count} jugadores para empezar",WAITING_FOR_VIP:"Esperando a que {name} inicie la partida",WAITING_FOR_GAMEPAD:"Esperando a que empiece la partida",WAITING_FOR_NEW_GAME:"Esperando a que empiece una partida nueva",GAME_STARTING:"La partida va a empezar",BUTTON_START:"Pulsa para empezar",BUTTON_CANCEL:"Pulsa para cancelar"},Gee={GALLERY_LINK:"Visita la galera",NEW_GAME_STARTED:"Una partida nueva ha empezado",PLAY_AGAIN:"Jugar de nuevo?",WHICH_GAME:"Qu juego?",WHICH_PLAYERS:"Cules jugadores?",THANKS_FOR_PLAYING:"Gracias por jugar!",BUTTON_GO_TO_GAME:"Ir a la partida",BUTTON_GO_TO_JACKBOX:"Volver a jackbox.tv",BUTTON_PLAY_AGAIN:"Jugar de nuevo",BUTTON_SAME_PLAYERS:"Los mismos jugadores",BUTTON_NEW_PLAYERS:"Nuevos jugadores",BUTTON_CHANGE_GAME:"Cambiar de juego",BUTTON_NEXT_GAME:"Jugar a {gameName}"},Kee={AND:"Y",OR:"O"},Vee={BUTTON_SKIP:"Omitir",BUTTON_NEXT:"Siguiente",BUTTON_DONE:"Vamos!"},$ee={NAME:"PBLICO"},Hee={CART:{CHECK_OUT:"Comprar ahora",EMPTY:"Tu carrito est vaco",TITLE:"Carrito de compras",TOTAL:"Total"}},qee={EPISODE_REPORT:"Denunciar episodio",EPISODE_UNLOAD:"Descargar episodio",EPISODE_VIEW_AUTHOR:"Ver autor",EPISODES_LOAD:"Cargar un episodio por ID:",EPISODES_MENU:"Men de episodios",EPISODES_SELECT:"O selecciona un episodio:",EPISODES_WARNING:"Aviso: El contenido de los usuarios no tiene clasificacin por edades",INSTRUCTION:{CREATE_TITLE:"Lo primero que debes hacer es escribir un nombre para el episodio que contendr todas sus indicaciones y pulsar crear.",LOAD:"Crear o cargar?",PUBLISH:"Publica tu episodio",TITLE:"Nombra tu episodio",TOGGLE_VISIBILITY:"Pulsa para mostrar/ocultar las indicaciones",WRITE:"Escribe tus indicaciones"},WARNING:{DELETE:"De verdad quieres borrar este episodio?",TOS:"Al compartir contenido, aceptas nuestros [tos]Trminos de servicio[/tos]",TOS_AGREE:"Aceptar y compartir"},BACK_TO_EPISODES:"Volver a los episodios",BACK_TO_MENU:"Volver al men",CREATE_NEW_EPISODE:"Crear un nuevo episodio",PREVIOUS_EPISODES:"Episodios anteriores",PROMPT_ADD:"Aadir indicacin",PROMPT_PLACEHOLDER:"Escribe una indicacin",PROMPTS_COUNT_HIDDEN:"({count} oculto(s))",TITLE_PLACEHOLDER:"Escribir un ttulo"},Xee={BROADCASTER:{SUBTEXT:"Conectaste correctamente tu cuenta a la extensin para Twitch del kit para pblico de Jackbox.",WARNING:"ESTA SALA NO TIENE ACTIVADA LA OPCIN DE PBLICO"},RECONNECTED:{TEXT:"CONEXIN RESTABLECIDA",SUBTEXT:"Divirtete!"},RECONNECTING:{CONTROLLER:{TEXT:"CONEXIN INTERRUMPIDA",SUBTEXT:"Intento de reconexin ({attempt} de 5)"},GAME:{TEXT:"SE INTERRUMPI LA CONEXIN AL JUEGO",SUBTEXT:"Espera mientras intentamos restablecer la conexin"}},PAUSED:{TEXT:"EL JUEGO EST EN PAUSA",SUBTEXT:"Todo lo que ingreses ser enviado al juego."}},zee={SHARE:"Compartir",COPY_TO_CLIPBOARD:"Copiar al portapapeles",COPIED:"Se copi"},Wee={ACTION:kee,ALT:Uee,ERROR:Mee,LOADING:Nee,LOBBY:Fee,POST_GAME:Gee,SEPARATOR:Kee,TUTORIAL:Vee,AUDIENCE:$ee,GALLERY:Hee,UGC:qee,TOAST:Xee,SHARE:zee},jee={BACK:"Voltar",CANCEL:"Cancelar",CLOSE:"Fechar",CONFIRM:"Confirmar",CREATE:"Criar",DELETE:"Excluir",DONE:"Pronto",EDIT:"Editar",OK:"OK",NEXT:"Avanar",NO:"No",PLAY:"Jogar",PUBLISH:"Publicar",REMOVE:"Remover",RESET:"Redefinir",SUBMIT:"Enviar",TRY_AGAIN:"Tentar de novo",UNDO:"Desfazer",YES:"Sim"},Yee={UGC:{VISIBILITY_CONTROLLER_OFF:"enunciados ocultos no dispositivo dos jogadores",VISIBILITY_CONTROLLER_ON:"enunciados exibidos no dispositivo dos jogadores",VISIBILITY_SCREEN_OFF:"enunciados ocultos na tela do jogo",VISIBILITY_SCREEN_ON:"enunciados exibidos na tela do jogo"}},Zee={DISCONNECTED:"Voc foi desconectado.",DRAWING_NOTHING:"Voc tem que desenhar!",PLAYER_KICKED:"Voc foi expulso do jogo por um moderador.",ROOM_DESTROYED:"Obrigado por jogar!",ROOM_DISCONNECTED:"Desconectado",TEXT_NAUGHTY:"No pode escrever isso. Respeite os outros jogadores.",TEXT_NOTHING:"No d para inserir texto vazio!",TITLE:"Erro"},Qee="CARREGANDO",Jee={JOINED_COUNT:"{count} de {maxPlayers} jogadores entraram",PLAYERS_NEEDED:"1 jogador necessrio para comear | {count} jogadores necessrios para comear",WAITING_FOR_VIP:"Aguardando {name} comear o jogo",WAITING_FOR_GAMEPAD:"Aguardando o comeo do jogo",WAITING_FOR_NEW_GAME:"Aguardando o comeo de uma nova partida",GAME_STARTING:"O jogo est comeando",BUTTON_START:"Aperte para comear",BUTTON_CANCEL:"Aperte para cancelar"},ete={GALLERY_LINK:"Visitar a galeria",NEW_GAME_STARTED:"Comeou uma nova partida",PLAY_AGAIN:"Jogar de novo?",WHICH_GAME:"Qual jogo?",WHICH_PLAYERS:"Quais jogadores?",THANKS_FOR_PLAYING:"Obrigado por jogar!",BUTTON_GO_TO_GAME:"Ir para o jogo",BUTTON_GO_TO_JACKBOX:"Voltar para jackbox.tv",BUTTON_PLAY_AGAIN:"Jogar de novo",BUTTON_SAME_PLAYERS:"Mesmos jogadores",BUTTON_NEW_PLAYERS:"Outros jogadores",BUTTON_CHANGE_GAME:"Trocar de jogo",BUTTON_NEXT_GAME:"Jogar {gameName}"},tte={AND:"E",OR:"OU"},rte={BUTTON_SKIP:"Pular",BUTTON_NEXT:"Avanar",BUTTON_DONE:"Vamos l!"},nte={NAME:"PLATEIA"},ite={CART:{CHECK_OUT:"Finalizar",EMPTY:"Seu carrinho est vazio",TITLE:"Carrinho de Compras",TOTAL:"Total"}},ste={EPISODE_REPORT:"Denunciar episdio",EPISODE_UNLOAD:"Excluir cpia local do episdio",EPISODE_VIEW_AUTHOR:"Visualizar autor",EPISODES_LOAD:"Carregar um episdio por ID:",EPISODES_MENU:"Menu de episdios",EPISODES_SELECT:"Ou selecione um episdio:",EPISODES_WARNING:"Aviso: os contedos gerados pelos usurios no tm classificao indicativa",INSTRUCTION:{CREATE_TITLE:"para comear, insira o nome do episdio que conter todos os seus enunciados e aperte Criar.",LOAD:"criar ou carregar?",PUBLISH:"publicar seu episdio",TITLE:"d um nome ao seu episdio",TOGGLE_VISIBILITY:"toque para exibir/ocultar enunciados",WRITE:"escreva seus enunciados"},WARNING:{DELETE:"Deseja mesmo excluir este episdio?",TOS:"Ao compartilhar contedo, voc concordar com os nossos [tos]Termos de Servio[/tos]",TOS_AGREE:"concordar e compartilhar"},BACK_TO_EPISODES:"voltar aos episdios",BACK_TO_MENU:"voltar ao menu",CREATE_NEW_EPISODE:"criar novo episdio",PREVIOUS_EPISODES:"episdios anteriores",PROMPT_ADD:"adicionar enunciado",PROMPT_PLACEHOLDER:"insira um enunciado",PROMPTS_COUNT_HIDDEN:"({count} oculto[s])",TITLE_PLACEHOLDER:"insira um ttulo"},ate={BROADCASTER:{SUBTEXT:"Voc conectou sua conta  extenso Jackbox Audience Kit para Twitch.",WARNING:"A CONFIGURAO DE PLATEIA NO EST ATIVA NESTA SALA"},RECONNECTED:{TEXT:"CONEXO RESTABELECIDA",SUBTEXT:"Divirtam-se!"},RECONNECTING:{CONTROLLER:{TEXT:"CONEXO INTERROMPIDA",SUBTEXT:"Tentando reconectar-se ({attempt} de 5)"},GAME:{TEXT:"CONEXO DO JOGO INTERROMPIDA",SUBTEXT:"Aguarde enquanto tentamos restabelecer a conexo"}},PAUSED:{TEXT:"O JOGO EST PAUSADO",SUBTEXT:"Tudo que voc enviar ainda ser enviado ao jogo."}},ote={SHARE:"Compartilhar",COPY_TO_CLIPBOARD:"Copiar para rea de transferncia",COPIED:"Copiado"},ute={ACTION:jee,ALT:Yee,ERROR:Zee,LOADING:Qee,LOBBY:Jee,POST_GAME:ete,SEPARATOR:tte,TUTORIAL:rte,AUDIENCE:nte,GALLERY:ite,UGC:ste,TOAST:ate,SHARE:ote},lte={en:PJ,fr:XJ,it:aee,de:vee,es:Dee,"es-XL":Wee,"pt-BR":ute};var Ql={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var cte=Ql.exports,kI;function fte(){return kI||(kI=1,function(t,e){(function(){var r,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",n="Expected a function",o="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",h=1,p=2,g=4,m=1,T=2,x=1,v=2,y=4,R=8,A=16,k=32,b=64,C=128,w=256,O=512,M=30,$="...",G=800,Z=16,ce=1,Y=2,J=3,ie=1/0,le=9007199254740991,Te=17976931348623157e292,Me=NaN,Ee=4294967295,se=Ee-1,me=Ee>>>1,Xe=[["ary",C],["bind",x],["bindKey",v],["curry",R],["curryRight",A],["flip",O],["partial",k],["partialRight",b],["rearg",w]],nt="[object Arguments]",ot="[object Array]",pt="[object AsyncFunction]",qe="[object Boolean]",Ye="[object Date]",at="[object DOMException]",lt="[object Error]",j="[object Function]",ue="[object GeneratorFunction]",oe="[object Map]",be="[object Number]",Le="[object Null]",ye="[object Object]",De="[object Promise]",ke="[object Proxy]",z="[object RegExp]",X="[object Set]",_e="[object String]",Ie="[object Symbol]",Ze="[object Undefined]",Ve="[object WeakMap]",Ce="[object WeakSet]",Oe="[object ArrayBuffer]",st="[object DataView]",ae="[object Float32Array]",ne="[object Float64Array]",U="[object Int8Array]",K="[object Int16Array]",te="[object Int32Array]",ge="[object Uint8Array]",re="[object Uint8ClampedArray]",H="[object Uint16Array]",P="[object Uint32Array]",Ae=/\b__p \+= '';/g,Ne=/\b(__p \+=) '' \+/g,S=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/&(?:amp|lt|gt|quot|#39);/g,N=/[&<>"']/g,I=RegExp(D.source),q=RegExp(N.source),fe=/<%-([\s\S]+?)%>/g,ze=/<%([\s\S]+?)%>/g,Qe=/<%=([\s\S]+?)%>/g,it=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,Br=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ft=/[\\^$.*+?()[\]{}|]/g,Ct=RegExp(ft.source),wt=/^\s+/,ir=/\s/,sr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nn=/\{\n\/\* \[wrapped with (.+)\] \*/,Qr=/,? & /,St=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,kr=/[()=,{}\[\]\/\s]/,cr=/\\(\\)?/g,Xr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nr=/\w*$/,Os=/^[-+]0x[0-9a-f]+$/i,ds=/^0b[01]+$/i,zi=/^\[object .+?Constructor\]$/,Ds=/^0o[0-7]+$/i,Wo=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pa=/($^)/,Jp=/['\n\r\u2028\u2029\\]/g,ga="\\ud800-\\udfff",ma="\\u0300-\\u036f",eg="\\ufe20-\\ufe2f",tg="\\u20d0-\\u20ff",df=ma+eg+tg,pf="\\u2700-\\u27bf",gf="a-z\\xdf-\\xf6\\xf8-\\xff",E="\\xac\\xb1\\xd7\\xf7",B="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",V="\\u2000-\\u206f",Q=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",de="A-Z\\xc0-\\xd6\\xd8-\\xde",ve="\\ufe0e\\ufe0f",Ue=E+B+V+Q,tt="[']",$e="["+ga+"]",et="["+Ue+"]",ut="["+df+"]",bt="\\d+",Je="["+pf+"]",gt="["+gf+"]",mt="[^"+ga+Ue+bt+pf+gf+de+"]",tr="\\ud83c[\\udffb-\\udfff]",Mt="(?:"+ut+"|"+tr+")",Fr="[^"+ga+"]",Ar="(?:\\ud83c[\\udde6-\\uddff]){2}",Ri="[\\ud800-\\udbff][\\udc00-\\udfff]",Ci="["+de+"]",Wi="\\u200d",mf="(?:"+gt+"|"+mt+")",ks="(?:"+Ci+"|"+mt+")",ji="(?:"+tt+"(?:d|ll|m|re|s|t|ve))?",xn="(?:"+tt+"(?:D|LL|M|RE|S|T|VE))?",A2=Mt+"?",S2="["+ve+"]?",KK="(?:"+Wi+"(?:"+[Fr,Ar,Ri].join("|")+")"+S2+A2+")*",VK="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$K="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",R2=S2+A2+KK,HK="(?:"+[Je,Ar,Ri].join("|")+")"+R2,qK="(?:"+[Fr+ut+"?",ut,Ar,Ri,$e].join("|")+")",XK=RegExp(tt,"g"),zK=RegExp(ut,"g"),rg=RegExp(tr+"(?="+tr+")|"+qK+R2,"g"),WK=RegExp([Ci+"?"+gt+"+"+ji+"(?="+[et,Ci,"$"].join("|")+")",ks+"+"+xn+"(?="+[et,Ci+mf,"$"].join("|")+")",Ci+"?"+mf+"+"+ji,Ci+"+"+xn,$K,VK,bt,HK].join("|"),"g"),jK=RegExp("["+Wi+ga+df+ve+"]"),YK=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ZK=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],QK=-1,Pr={};Pr[ae]=Pr[ne]=Pr[U]=Pr[K]=Pr[te]=Pr[ge]=Pr[re]=Pr[H]=Pr[P]=!0,Pr[nt]=Pr[ot]=Pr[Oe]=Pr[qe]=Pr[st]=Pr[Ye]=Pr[lt]=Pr[j]=Pr[oe]=Pr[be]=Pr[ye]=Pr[z]=Pr[X]=Pr[_e]=Pr[Ve]=!1;var Sr={};Sr[nt]=Sr[ot]=Sr[Oe]=Sr[st]=Sr[qe]=Sr[Ye]=Sr[ae]=Sr[ne]=Sr[U]=Sr[K]=Sr[te]=Sr[oe]=Sr[be]=Sr[ye]=Sr[z]=Sr[X]=Sr[_e]=Sr[Ie]=Sr[ge]=Sr[re]=Sr[H]=Sr[P]=!0,Sr[lt]=Sr[j]=Sr[Ve]=!1;var JK={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},eV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tV={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},rV={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nV=parseFloat,iV=parseInt,C2=typeof $r=="object"&&$r&&$r.Object===Object&&$r,sV=typeof self=="object"&&self&&self.Object===Object&&self,vn=C2||sV||Function("return this")(),ng=e&&!e.nodeType&&e,ro=ng&&!0&&t&&!t.nodeType&&t,w2=ro&&ro.exports===ng,ig=w2&&C2.process,wi=function(){try{var Re=ro&&ro.require&&ro.require("util").types;return Re||ig&&ig.binding&&ig.binding("util")}catch{}}(),L2=wi&&wi.isArrayBuffer,I2=wi&&wi.isDate,B2=wi&&wi.isMap,P2=wi&&wi.isRegExp,O2=wi&&wi.isSet,D2=wi&&wi.isTypedArray;function li(Re,He,Fe){switch(Fe.length){case 0:return Re.call(He);case 1:return Re.call(He,Fe[0]);case 2:return Re.call(He,Fe[0],Fe[1]);case 3:return Re.call(He,Fe[0],Fe[1],Fe[2])}return Re.apply(He,Fe)}function aV(Re,He,Fe,_t){for(var Ft=-1,fr=Re==null?0:Re.length;++Ft<fr;){var sn=Re[Ft];He(_t,sn,Fe(sn),Re)}return _t}function Li(Re,He){for(var Fe=-1,_t=Re==null?0:Re.length;++Fe<_t&&He(Re[Fe],Fe,Re)!==!1;);return Re}function oV(Re,He){for(var Fe=Re==null?0:Re.length;Fe--&&He(Re[Fe],Fe,Re)!==!1;);return Re}function k2(Re,He){for(var Fe=-1,_t=Re==null?0:Re.length;++Fe<_t;)if(!He(Re[Fe],Fe,Re))return!1;return!0}function _a(Re,He){for(var Fe=-1,_t=Re==null?0:Re.length,Ft=0,fr=[];++Fe<_t;){var sn=Re[Fe];He(sn,Fe,Re)&&(fr[Ft++]=sn)}return fr}function _f(Re,He){var Fe=Re==null?0:Re.length;return!!Fe&&jo(Re,He,0)>-1}function sg(Re,He,Fe){for(var _t=-1,Ft=Re==null?0:Re.length;++_t<Ft;)if(Fe(He,Re[_t]))return!0;return!1}function Ur(Re,He){for(var Fe=-1,_t=Re==null?0:Re.length,Ft=Array(_t);++Fe<_t;)Ft[Fe]=He(Re[Fe],Fe,Re);return Ft}function ba(Re,He){for(var Fe=-1,_t=He.length,Ft=Re.length;++Fe<_t;)Re[Ft+Fe]=He[Fe];return Re}function ag(Re,He,Fe,_t){var Ft=-1,fr=Re==null?0:Re.length;for(_t&&fr&&(Fe=Re[++Ft]);++Ft<fr;)Fe=He(Fe,Re[Ft],Ft,Re);return Fe}function uV(Re,He,Fe,_t){var Ft=Re==null?0:Re.length;for(_t&&Ft&&(Fe=Re[--Ft]);Ft--;)Fe=He(Fe,Re[Ft],Ft,Re);return Fe}function og(Re,He){for(var Fe=-1,_t=Re==null?0:Re.length;++Fe<_t;)if(He(Re[Fe],Fe,Re))return!0;return!1}var lV=ug("length");function cV(Re){return Re.split("")}function fV(Re){return Re.match(St)||[]}function U2(Re,He,Fe){var _t;return Fe(Re,function(Ft,fr,sn){if(He(Ft,fr,sn))return _t=fr,!1}),_t}function bf(Re,He,Fe,_t){for(var Ft=Re.length,fr=Fe+(_t?1:-1);_t?fr--:++fr<Ft;)if(He(Re[fr],fr,Re))return fr;return-1}function jo(Re,He,Fe){return He===He?TV(Re,He,Fe):bf(Re,M2,Fe)}function hV(Re,He,Fe,_t){for(var Ft=Fe-1,fr=Re.length;++Ft<fr;)if(_t(Re[Ft],He))return Ft;return-1}function M2(Re){return Re!==Re}function N2(Re,He){var Fe=Re==null?0:Re.length;return Fe?cg(Re,He)/Fe:Me}function ug(Re){return function(He){return He==null?r:He[Re]}}function lg(Re){return function(He){return Re==null?r:Re[He]}}function F2(Re,He,Fe,_t,Ft){return Ft(Re,function(fr,sn,vr){Fe=_t?(_t=!1,fr):He(Fe,fr,sn,vr)}),Fe}function dV(Re,He){var Fe=Re.length;for(Re.sort(He);Fe--;)Re[Fe]=Re[Fe].value;return Re}function cg(Re,He){for(var Fe,_t=-1,Ft=Re.length;++_t<Ft;){var fr=He(Re[_t]);fr!==r&&(Fe=Fe===r?fr:Fe+fr)}return Fe}function fg(Re,He){for(var Fe=-1,_t=Array(Re);++Fe<Re;)_t[Fe]=He(Fe);return _t}function pV(Re,He){return Ur(He,function(Fe){return[Fe,Re[Fe]]})}function G2(Re){return Re&&Re.slice(0,H2(Re)+1).replace(wt,"")}function ci(Re){return function(He){return Re(He)}}function hg(Re,He){return Ur(He,function(Fe){return Re[Fe]})}function ml(Re,He){return Re.has(He)}function K2(Re,He){for(var Fe=-1,_t=Re.length;++Fe<_t&&jo(He,Re[Fe],0)>-1;);return Fe}function V2(Re,He){for(var Fe=Re.length;Fe--&&jo(He,Re[Fe],0)>-1;);return Fe}function gV(Re,He){for(var Fe=Re.length,_t=0;Fe--;)Re[Fe]===He&&++_t;return _t}var mV=lg(JK),_V=lg(eV);function bV(Re){return"\\"+rV[Re]}function xV(Re,He){return Re==null?r:Re[He]}function Yo(Re){return jK.test(Re)}function vV(Re){return YK.test(Re)}function EV(Re){for(var He,Fe=[];!(He=Re.next()).done;)Fe.push(He.value);return Fe}function dg(Re){var He=-1,Fe=Array(Re.size);return Re.forEach(function(_t,Ft){Fe[++He]=[Ft,_t]}),Fe}function $2(Re,He){return function(Fe){return Re(He(Fe))}}function xa(Re,He){for(var Fe=-1,_t=Re.length,Ft=0,fr=[];++Fe<_t;){var sn=Re[Fe];(sn===He||sn===f)&&(Re[Fe]=f,fr[Ft++]=Fe)}return fr}function xf(Re){var He=-1,Fe=Array(Re.size);return Re.forEach(function(_t){Fe[++He]=_t}),Fe}function yV(Re){var He=-1,Fe=Array(Re.size);return Re.forEach(function(_t){Fe[++He]=[_t,_t]}),Fe}function TV(Re,He,Fe){for(var _t=Fe-1,Ft=Re.length;++_t<Ft;)if(Re[_t]===He)return _t;return-1}function AV(Re,He,Fe){for(var _t=Fe+1;_t--;)if(Re[_t]===He)return _t;return _t}function Zo(Re){return Yo(Re)?RV(Re):lV(Re)}function Yi(Re){return Yo(Re)?CV(Re):cV(Re)}function H2(Re){for(var He=Re.length;He--&&ir.test(Re.charAt(He)););return He}var SV=lg(tV);function RV(Re){for(var He=rg.lastIndex=0;rg.test(Re);)++He;return He}function CV(Re){return Re.match(rg)||[]}function wV(Re){return Re.match(WK)||[]}var LV=function Re(He){He=He==null?vn:Qo.defaults(vn.Object(),He,Qo.pick(vn,ZK));var Fe=He.Array,_t=He.Date,Ft=He.Error,fr=He.Function,sn=He.Math,vr=He.Object,pg=He.RegExp,IV=He.String,Ii=He.TypeError,vf=Fe.prototype,BV=fr.prototype,Jo=vr.prototype,Ef=He["__core-js_shared__"],yf=BV.toString,mr=Jo.hasOwnProperty,PV=0,q2=function(){var l=/[^.]+$/.exec(Ef&&Ef.keys&&Ef.keys.IE_PROTO||"");return l?"Symbol(src)_1."+l:""}(),Tf=Jo.toString,OV=yf.call(vr),DV=vn._,kV=pg("^"+yf.call(mr).replace(ft,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Af=w2?He.Buffer:r,va=He.Symbol,Sf=He.Uint8Array,X2=Af?Af.allocUnsafe:r,Rf=$2(vr.getPrototypeOf,vr),z2=vr.create,W2=Jo.propertyIsEnumerable,Cf=vf.splice,j2=va?va.isConcatSpreadable:r,_l=va?va.iterator:r,no=va?va.toStringTag:r,wf=function(){try{var l=uo(vr,"defineProperty");return l({},"",{}),l}catch{}}(),UV=He.clearTimeout!==vn.clearTimeout&&He.clearTimeout,MV=_t&&_t.now!==vn.Date.now&&_t.now,NV=He.setTimeout!==vn.setTimeout&&He.setTimeout,Lf=sn.ceil,If=sn.floor,gg=vr.getOwnPropertySymbols,FV=Af?Af.isBuffer:r,Y2=He.isFinite,GV=vf.join,KV=$2(vr.keys,vr),an=sn.max,Cn=sn.min,VV=_t.now,$V=He.parseInt,Z2=sn.random,HV=vf.reverse,mg=uo(He,"DataView"),bl=uo(He,"Map"),_g=uo(He,"Promise"),eu=uo(He,"Set"),xl=uo(He,"WeakMap"),vl=uo(vr,"create"),Bf=xl&&new xl,tu={},qV=lo(mg),XV=lo(bl),zV=lo(_g),WV=lo(eu),jV=lo(xl),Pf=va?va.prototype:r,El=Pf?Pf.valueOf:r,Q2=Pf?Pf.toString:r;function W(l){if(zr(l)&&!Vt(l)&&!(l instanceof Jt)){if(l instanceof Bi)return l;if(mr.call(l,"__wrapped__"))return JR(l)}return new Bi(l)}var ru=function(){function l(){}return function(d){if(!Gr(d))return{};if(z2)return z2(d);l.prototype=d;var _=new l;return l.prototype=r,_}}();function Of(){}function Bi(l,d){this.__wrapped__=l,this.__actions__=[],this.__chain__=!!d,this.__index__=0,this.__values__=r}W.templateSettings={escape:fe,evaluate:ze,interpolate:Qe,variable:"",imports:{_:W}},W.prototype=Of.prototype,W.prototype.constructor=W,Bi.prototype=ru(Of.prototype),Bi.prototype.constructor=Bi;function Jt(l){this.__wrapped__=l,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ee,this.__views__=[]}function YV(){var l=new Jt(this.__wrapped__);return l.__actions__=Xn(this.__actions__),l.__dir__=this.__dir__,l.__filtered__=this.__filtered__,l.__iteratees__=Xn(this.__iteratees__),l.__takeCount__=this.__takeCount__,l.__views__=Xn(this.__views__),l}function ZV(){if(this.__filtered__){var l=new Jt(this);l.__dir__=-1,l.__filtered__=!0}else l=this.clone(),l.__dir__*=-1;return l}function QV(){var l=this.__wrapped__.value(),d=this.__dir__,_=Vt(l),L=d<0,F=_?l.length:0,ee=cH(0,F,this.__views__),he=ee.start,xe=ee.end,we=xe-he,We=L?xe:he-1,je=this.__iteratees__,rt=je.length,ht=0,yt=Cn(we,this.__takeCount__);if(!_||!L&&F==we&&yt==we)return yR(l,this.__actions__);var Bt=[];e:for(;we--&&ht<yt;){We+=d;for(var Ht=-1,Pt=l[We];++Ht<rt;){var jt=je[Ht],rr=jt.iteratee,di=jt.type,Un=rr(Pt);if(di==Y)Pt=Un;else if(!Un){if(di==ce)continue e;break e}}Bt[ht++]=Pt}return Bt}Jt.prototype=ru(Of.prototype),Jt.prototype.constructor=Jt;function io(l){var d=-1,_=l==null?0:l.length;for(this.clear();++d<_;){var L=l[d];this.set(L[0],L[1])}}function JV(){this.__data__=vl?vl(null):{},this.size=0}function e$(l){var d=this.has(l)&&delete this.__data__[l];return this.size-=d?1:0,d}function t$(l){var d=this.__data__;if(vl){var _=d[l];return _===u?r:_}return mr.call(d,l)?d[l]:r}function r$(l){var d=this.__data__;return vl?d[l]!==r:mr.call(d,l)}function n$(l,d){var _=this.__data__;return this.size+=this.has(l)?0:1,_[l]=vl&&d===r?u:d,this}io.prototype.clear=JV,io.prototype.delete=e$,io.prototype.get=t$,io.prototype.has=r$,io.prototype.set=n$;function Us(l){var d=-1,_=l==null?0:l.length;for(this.clear();++d<_;){var L=l[d];this.set(L[0],L[1])}}function i$(){this.__data__=[],this.size=0}function s$(l){var d=this.__data__,_=Df(d,l);if(_<0)return!1;var L=d.length-1;return _==L?d.pop():Cf.call(d,_,1),--this.size,!0}function a$(l){var d=this.__data__,_=Df(d,l);return _<0?r:d[_][1]}function o$(l){return Df(this.__data__,l)>-1}function u$(l,d){var _=this.__data__,L=Df(_,l);return L<0?(++this.size,_.push([l,d])):_[L][1]=d,this}Us.prototype.clear=i$,Us.prototype.delete=s$,Us.prototype.get=a$,Us.prototype.has=o$,Us.prototype.set=u$;function Ms(l){var d=-1,_=l==null?0:l.length;for(this.clear();++d<_;){var L=l[d];this.set(L[0],L[1])}}function l$(){this.size=0,this.__data__={hash:new io,map:new(bl||Us),string:new io}}function c$(l){var d=Xf(this,l).delete(l);return this.size-=d?1:0,d}function f$(l){return Xf(this,l).get(l)}function h$(l){return Xf(this,l).has(l)}function d$(l,d){var _=Xf(this,l),L=_.size;return _.set(l,d),this.size+=_.size==L?0:1,this}Ms.prototype.clear=l$,Ms.prototype.delete=c$,Ms.prototype.get=f$,Ms.prototype.has=h$,Ms.prototype.set=d$;function so(l){var d=-1,_=l==null?0:l.length;for(this.__data__=new Ms;++d<_;)this.add(l[d])}function p$(l){return this.__data__.set(l,u),this}function g$(l){return this.__data__.has(l)}so.prototype.add=so.prototype.push=p$,so.prototype.has=g$;function Zi(l){var d=this.__data__=new Us(l);this.size=d.size}function m$(){this.__data__=new Us,this.size=0}function _$(l){var d=this.__data__,_=d.delete(l);return this.size=d.size,_}function b$(l){return this.__data__.get(l)}function x$(l){return this.__data__.has(l)}function v$(l,d){var _=this.__data__;if(_ instanceof Us){var L=_.__data__;if(!bl||L.length<s-1)return L.push([l,d]),this.size=++_.size,this;_=this.__data__=new Ms(L)}return _.set(l,d),this.size=_.size,this}Zi.prototype.clear=m$,Zi.prototype.delete=_$,Zi.prototype.get=b$,Zi.prototype.has=x$,Zi.prototype.set=v$;function J2(l,d){var _=Vt(l),L=!_&&co(l),F=!_&&!L&&Sa(l),ee=!_&&!L&&!F&&au(l),he=_||L||F||ee,xe=he?fg(l.length,IV):[],we=xe.length;for(var We in l)(d||mr.call(l,We))&&!(he&&(We=="length"||F&&(We=="offset"||We=="parent")||ee&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||Ks(We,we)))&&xe.push(We);return xe}function eR(l){var d=l.length;return d?l[wg(0,d-1)]:r}function E$(l,d){return zf(Xn(l),ao(d,0,l.length))}function y$(l){return zf(Xn(l))}function bg(l,d,_){(_!==r&&!Qi(l[d],_)||_===r&&!(d in l))&&Ns(l,d,_)}function yl(l,d,_){var L=l[d];(!(mr.call(l,d)&&Qi(L,_))||_===r&&!(d in l))&&Ns(l,d,_)}function Df(l,d){for(var _=l.length;_--;)if(Qi(l[_][0],d))return _;return-1}function T$(l,d,_,L){return Ea(l,function(F,ee,he){d(L,F,_(F),he)}),L}function tR(l,d){return l&&gs(d,ln(d),l)}function A$(l,d){return l&&gs(d,Wn(d),l)}function Ns(l,d,_){d=="__proto__"&&wf?wf(l,d,{configurable:!0,enumerable:!0,value:_,writable:!0}):l[d]=_}function xg(l,d){for(var _=-1,L=d.length,F=Fe(L),ee=l==null;++_<L;)F[_]=ee?r:Jg(l,d[_]);return F}function ao(l,d,_){return l===l&&(_!==r&&(l=l<=_?l:_),d!==r&&(l=l>=d?l:d)),l}function Pi(l,d,_,L,F,ee){var he,xe=d&h,we=d&p,We=d&g;if(_&&(he=F?_(l,L,F,ee):_(l)),he!==r)return he;if(!Gr(l))return l;var je=Vt(l);if(je){if(he=hH(l),!xe)return Xn(l,he)}else{var rt=wn(l),ht=rt==j||rt==ue;if(Sa(l))return SR(l,xe);if(rt==ye||rt==nt||ht&&!F){if(he=we||ht?{}:HR(l),!xe)return we?tH(l,A$(he,l)):eH(l,tR(he,l))}else{if(!Sr[rt])return F?l:{};he=dH(l,rt,xe)}}ee||(ee=new Zi);var yt=ee.get(l);if(yt)return yt;ee.set(l,he),xC(l)?l.forEach(function(Pt){he.add(Pi(Pt,d,_,Pt,l,ee))}):_C(l)&&l.forEach(function(Pt,jt){he.set(jt,Pi(Pt,d,_,jt,l,ee))});var Bt=We?we?Fg:Ng:we?Wn:ln,Ht=je?r:Bt(l);return Li(Ht||l,function(Pt,jt){Ht&&(jt=Pt,Pt=l[jt]),yl(he,jt,Pi(Pt,d,_,jt,l,ee))}),he}function S$(l){var d=ln(l);return function(_){return rR(_,l,d)}}function rR(l,d,_){var L=_.length;if(l==null)return!L;for(l=vr(l);L--;){var F=_[L],ee=d[F],he=l[F];if(he===r&&!(F in l)||!ee(he))return!1}return!0}function nR(l,d,_){if(typeof l!="function")throw new Ii(n);return Ll(function(){l.apply(r,_)},d)}function Tl(l,d,_,L){var F=-1,ee=_f,he=!0,xe=l.length,we=[],We=d.length;if(!xe)return we;_&&(d=Ur(d,ci(_))),L?(ee=sg,he=!1):d.length>=s&&(ee=ml,he=!1,d=new so(d));e:for(;++F<xe;){var je=l[F],rt=_==null?je:_(je);if(je=L||je!==0?je:0,he&&rt===rt){for(var ht=We;ht--;)if(d[ht]===rt)continue e;we.push(je)}else ee(d,rt,L)||we.push(je)}return we}var Ea=IR(ps),iR=IR(Eg,!0);function R$(l,d){var _=!0;return Ea(l,function(L,F,ee){return _=!!d(L,F,ee),_}),_}function kf(l,d,_){for(var L=-1,F=l.length;++L<F;){var ee=l[L],he=d(ee);if(he!=null&&(xe===r?he===he&&!hi(he):_(he,xe)))var xe=he,we=ee}return we}function C$(l,d,_,L){var F=l.length;for(_=$t(_),_<0&&(_=-_>F?0:F+_),L=L===r||L>F?F:$t(L),L<0&&(L+=F),L=_>L?0:EC(L);_<L;)l[_++]=d;return l}function sR(l,d){var _=[];return Ea(l,function(L,F,ee){d(L,F,ee)&&_.push(L)}),_}function En(l,d,_,L,F){var ee=-1,he=l.length;for(_||(_=gH),F||(F=[]);++ee<he;){var xe=l[ee];d>0&&_(xe)?d>1?En(xe,d-1,_,L,F):ba(F,xe):L||(F[F.length]=xe)}return F}var vg=BR(),aR=BR(!0);function ps(l,d){return l&&vg(l,d,ln)}function Eg(l,d){return l&&aR(l,d,ln)}function Uf(l,d){return _a(d,function(_){return Vs(l[_])})}function oo(l,d){d=Ta(d,l);for(var _=0,L=d.length;l!=null&&_<L;)l=l[ms(d[_++])];return _&&_==L?l:r}function oR(l,d,_){var L=d(l);return Vt(l)?L:ba(L,_(l))}function Dn(l){return l==null?l===r?Ze:Le:no&&no in vr(l)?lH(l):yH(l)}function yg(l,d){return l>d}function w$(l,d){return l!=null&&mr.call(l,d)}function L$(l,d){return l!=null&&d in vr(l)}function I$(l,d,_){return l>=Cn(d,_)&&l<an(d,_)}function Tg(l,d,_){for(var L=_?sg:_f,F=l[0].length,ee=l.length,he=ee,xe=Fe(ee),we=1/0,We=[];he--;){var je=l[he];he&&d&&(je=Ur(je,ci(d))),we=Cn(je.length,we),xe[he]=!_&&(d||F>=120&&je.length>=120)?new so(he&&je):r}je=l[0];var rt=-1,ht=xe[0];e:for(;++rt<F&&We.length<we;){var yt=je[rt],Bt=d?d(yt):yt;if(yt=_||yt!==0?yt:0,!(ht?ml(ht,Bt):L(We,Bt,_))){for(he=ee;--he;){var Ht=xe[he];if(!(Ht?ml(Ht,Bt):L(l[he],Bt,_)))continue e}ht&&ht.push(Bt),We.push(yt)}}return We}function B$(l,d,_,L){return ps(l,function(F,ee,he){d(L,_(F),ee,he)}),L}function Al(l,d,_){d=Ta(d,l),l=WR(l,d);var L=l==null?l:l[ms(Di(d))];return L==null?r:li(L,l,_)}function uR(l){return zr(l)&&Dn(l)==nt}function P$(l){return zr(l)&&Dn(l)==Oe}function O$(l){return zr(l)&&Dn(l)==Ye}function Sl(l,d,_,L,F){return l===d?!0:l==null||d==null||!zr(l)&&!zr(d)?l!==l&&d!==d:D$(l,d,_,L,Sl,F)}function D$(l,d,_,L,F,ee){var he=Vt(l),xe=Vt(d),we=he?ot:wn(l),We=xe?ot:wn(d);we=we==nt?ye:we,We=We==nt?ye:We;var je=we==ye,rt=We==ye,ht=we==We;if(ht&&Sa(l)){if(!Sa(d))return!1;he=!0,je=!1}if(ht&&!je)return ee||(ee=new Zi),he||au(l)?KR(l,d,_,L,F,ee):oH(l,d,we,_,L,F,ee);if(!(_&m)){var yt=je&&mr.call(l,"__wrapped__"),Bt=rt&&mr.call(d,"__wrapped__");if(yt||Bt){var Ht=yt?l.value():l,Pt=Bt?d.value():d;return ee||(ee=new Zi),F(Ht,Pt,_,L,ee)}}return ht?(ee||(ee=new Zi),uH(l,d,_,L,F,ee)):!1}function k$(l){return zr(l)&&wn(l)==oe}function Ag(l,d,_,L){var F=_.length,ee=F,he=!L;if(l==null)return!ee;for(l=vr(l);F--;){var xe=_[F];if(he&&xe[2]?xe[1]!==l[xe[0]]:!(xe[0]in l))return!1}for(;++F<ee;){xe=_[F];var we=xe[0],We=l[we],je=xe[1];if(he&&xe[2]){if(We===r&&!(we in l))return!1}else{var rt=new Zi;if(L)var ht=L(We,je,we,l,d,rt);if(!(ht===r?Sl(je,We,m|T,L,rt):ht))return!1}}return!0}function lR(l){if(!Gr(l)||_H(l))return!1;var d=Vs(l)?kV:zi;return d.test(lo(l))}function U$(l){return zr(l)&&Dn(l)==z}function M$(l){return zr(l)&&wn(l)==X}function N$(l){return zr(l)&&Jf(l.length)&&!!Pr[Dn(l)]}function cR(l){return typeof l=="function"?l:l==null?jn:typeof l=="object"?Vt(l)?dR(l[0],l[1]):hR(l):PC(l)}function Sg(l){if(!wl(l))return KV(l);var d=[];for(var _ in vr(l))mr.call(l,_)&&_!="constructor"&&d.push(_);return d}function F$(l){if(!Gr(l))return EH(l);var d=wl(l),_=[];for(var L in l)L=="constructor"&&(d||!mr.call(l,L))||_.push(L);return _}function Rg(l,d){return l<d}function fR(l,d){var _=-1,L=zn(l)?Fe(l.length):[];return Ea(l,function(F,ee,he){L[++_]=d(F,ee,he)}),L}function hR(l){var d=Kg(l);return d.length==1&&d[0][2]?XR(d[0][0],d[0][1]):function(_){return _===l||Ag(_,l,d)}}function dR(l,d){return $g(l)&&qR(d)?XR(ms(l),d):function(_){var L=Jg(_,l);return L===r&&L===d?em(_,l):Sl(d,L,m|T)}}function Mf(l,d,_,L,F){l!==d&&vg(d,function(ee,he){if(F||(F=new Zi),Gr(ee))G$(l,d,he,_,Mf,L,F);else{var xe=L?L(qg(l,he),ee,he+"",l,d,F):r;xe===r&&(xe=ee),bg(l,he,xe)}},Wn)}function G$(l,d,_,L,F,ee,he){var xe=qg(l,_),we=qg(d,_),We=he.get(we);if(We){bg(l,_,We);return}var je=ee?ee(xe,we,_+"",l,d,he):r,rt=je===r;if(rt){var ht=Vt(we),yt=!ht&&Sa(we),Bt=!ht&&!yt&&au(we);je=we,ht||yt||Bt?Vt(xe)?je=xe:Jr(xe)?je=Xn(xe):yt?(rt=!1,je=SR(we,!0)):Bt?(rt=!1,je=RR(we,!0)):je=[]:Il(we)||co(we)?(je=xe,co(xe)?je=yC(xe):(!Gr(xe)||Vs(xe))&&(je=HR(we))):rt=!1}rt&&(he.set(we,je),F(je,we,L,ee,he),he.delete(we)),bg(l,_,je)}function pR(l,d){var _=l.length;if(_)return d+=d<0?_:0,Ks(d,_)?l[d]:r}function gR(l,d,_){d.length?d=Ur(d,function(ee){return Vt(ee)?function(he){return oo(he,ee.length===1?ee[0]:ee)}:ee}):d=[jn];var L=-1;d=Ur(d,ci(It()));var F=fR(l,function(ee,he,xe){var we=Ur(d,function(We){return We(ee)});return{criteria:we,index:++L,value:ee}});return dV(F,function(ee,he){return J$(ee,he,_)})}function K$(l,d){return mR(l,d,function(_,L){return em(l,L)})}function mR(l,d,_){for(var L=-1,F=d.length,ee={};++L<F;){var he=d[L],xe=oo(l,he);_(xe,he)&&Rl(ee,Ta(he,l),xe)}return ee}function V$(l){return function(d){return oo(d,l)}}function Cg(l,d,_,L){var F=L?hV:jo,ee=-1,he=d.length,xe=l;for(l===d&&(d=Xn(d)),_&&(xe=Ur(l,ci(_)));++ee<he;)for(var we=0,We=d[ee],je=_?_(We):We;(we=F(xe,je,we,L))>-1;)xe!==l&&Cf.call(xe,we,1),Cf.call(l,we,1);return l}function _R(l,d){for(var _=l?d.length:0,L=_-1;_--;){var F=d[_];if(_==L||F!==ee){var ee=F;Ks(F)?Cf.call(l,F,1):Bg(l,F)}}return l}function wg(l,d){return l+If(Z2()*(d-l+1))}function $$(l,d,_,L){for(var F=-1,ee=an(Lf((d-l)/(_||1)),0),he=Fe(ee);ee--;)he[L?ee:++F]=l,l+=_;return he}function Lg(l,d){var _="";if(!l||d<1||d>le)return _;do d%2&&(_+=l),d=If(d/2),d&&(l+=l);while(d);return _}function Xt(l,d){return Xg(zR(l,d,jn),l+"")}function H$(l){return eR(ou(l))}function q$(l,d){var _=ou(l);return zf(_,ao(d,0,_.length))}function Rl(l,d,_,L){if(!Gr(l))return l;d=Ta(d,l);for(var F=-1,ee=d.length,he=ee-1,xe=l;xe!=null&&++F<ee;){var we=ms(d[F]),We=_;if(we==="__proto__"||we==="constructor"||we==="prototype")return l;if(F!=he){var je=xe[we];We=L?L(je,we,xe):r,We===r&&(We=Gr(je)?je:Ks(d[F+1])?[]:{})}yl(xe,we,We),xe=xe[we]}return l}var bR=Bf?function(l,d){return Bf.set(l,d),l}:jn,X$=wf?function(l,d){return wf(l,"toString",{configurable:!0,enumerable:!1,value:rm(d),writable:!0})}:jn;function z$(l){return zf(ou(l))}function Oi(l,d,_){var L=-1,F=l.length;d<0&&(d=-d>F?0:F+d),_=_>F?F:_,_<0&&(_+=F),F=d>_?0:_-d>>>0,d>>>=0;for(var ee=Fe(F);++L<F;)ee[L]=l[L+d];return ee}function W$(l,d){var _;return Ea(l,function(L,F,ee){return _=d(L,F,ee),!_}),!!_}function Nf(l,d,_){var L=0,F=l==null?L:l.length;if(typeof d=="number"&&d===d&&F<=me){for(;L<F;){var ee=L+F>>>1,he=l[ee];he!==null&&!hi(he)&&(_?he<=d:he<d)?L=ee+1:F=ee}return F}return Ig(l,d,jn,_)}function Ig(l,d,_,L){var F=0,ee=l==null?0:l.length;if(ee===0)return 0;d=_(d);for(var he=d!==d,xe=d===null,we=hi(d),We=d===r;F<ee;){var je=If((F+ee)/2),rt=_(l[je]),ht=rt!==r,yt=rt===null,Bt=rt===rt,Ht=hi(rt);if(he)var Pt=L||Bt;else We?Pt=Bt&&(L||ht):xe?Pt=Bt&&ht&&(L||!yt):we?Pt=Bt&&ht&&!yt&&(L||!Ht):yt||Ht?Pt=!1:Pt=L?rt<=d:rt<d;Pt?F=je+1:ee=je}return Cn(ee,se)}function xR(l,d){for(var _=-1,L=l.length,F=0,ee=[];++_<L;){var he=l[_],xe=d?d(he):he;if(!_||!Qi(xe,we)){var we=xe;ee[F++]=he===0?0:he}}return ee}function vR(l){return typeof l=="number"?l:hi(l)?Me:+l}function fi(l){if(typeof l=="string")return l;if(Vt(l))return Ur(l,fi)+"";if(hi(l))return Q2?Q2.call(l):"";var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}function ya(l,d,_){var L=-1,F=_f,ee=l.length,he=!0,xe=[],we=xe;if(_)he=!1,F=sg;else if(ee>=s){var We=d?null:sH(l);if(We)return xf(We);he=!1,F=ml,we=new so}else we=d?[]:xe;e:for(;++L<ee;){var je=l[L],rt=d?d(je):je;if(je=_||je!==0?je:0,he&&rt===rt){for(var ht=we.length;ht--;)if(we[ht]===rt)continue e;d&&we.push(rt),xe.push(je)}else F(we,rt,_)||(we!==xe&&we.push(rt),xe.push(je))}return xe}function Bg(l,d){return d=Ta(d,l),l=WR(l,d),l==null||delete l[ms(Di(d))]}function ER(l,d,_,L){return Rl(l,d,_(oo(l,d)),L)}function Ff(l,d,_,L){for(var F=l.length,ee=L?F:-1;(L?ee--:++ee<F)&&d(l[ee],ee,l););return _?Oi(l,L?0:ee,L?ee+1:F):Oi(l,L?ee+1:0,L?F:ee)}function yR(l,d){var _=l;return _ instanceof Jt&&(_=_.value()),ag(d,function(L,F){return F.func.apply(F.thisArg,ba([L],F.args))},_)}function Pg(l,d,_){var L=l.length;if(L<2)return L?ya(l[0]):[];for(var F=-1,ee=Fe(L);++F<L;)for(var he=l[F],xe=-1;++xe<L;)xe!=F&&(ee[F]=Tl(ee[F]||he,l[xe],d,_));return ya(En(ee,1),d,_)}function TR(l,d,_){for(var L=-1,F=l.length,ee=d.length,he={};++L<F;){var xe=L<ee?d[L]:r;_(he,l[L],xe)}return he}function Og(l){return Jr(l)?l:[]}function Dg(l){return typeof l=="function"?l:jn}function Ta(l,d){return Vt(l)?l:$g(l,d)?[l]:QR(dr(l))}var j$=Xt;function Aa(l,d,_){var L=l.length;return _=_===r?L:_,!d&&_>=L?l:Oi(l,d,_)}var AR=UV||function(l){return vn.clearTimeout(l)};function SR(l,d){if(d)return l.slice();var _=l.length,L=X2?X2(_):new l.constructor(_);return l.copy(L),L}function kg(l){var d=new l.constructor(l.byteLength);return new Sf(d).set(new Sf(l)),d}function Y$(l,d){var _=d?kg(l.buffer):l.buffer;return new l.constructor(_,l.byteOffset,l.byteLength)}function Z$(l){var d=new l.constructor(l.source,Nr.exec(l));return d.lastIndex=l.lastIndex,d}function Q$(l){return El?vr(El.call(l)):{}}function RR(l,d){var _=d?kg(l.buffer):l.buffer;return new l.constructor(_,l.byteOffset,l.length)}function CR(l,d){if(l!==d){var _=l!==r,L=l===null,F=l===l,ee=hi(l),he=d!==r,xe=d===null,we=d===d,We=hi(d);if(!xe&&!We&&!ee&&l>d||ee&&he&&we&&!xe&&!We||L&&he&&we||!_&&we||!F)return 1;if(!L&&!ee&&!We&&l<d||We&&_&&F&&!L&&!ee||xe&&_&&F||!he&&F||!we)return-1}return 0}function J$(l,d,_){for(var L=-1,F=l.criteria,ee=d.criteria,he=F.length,xe=_.length;++L<he;){var we=CR(F[L],ee[L]);if(we){if(L>=xe)return we;var We=_[L];return we*(We=="desc"?-1:1)}}return l.index-d.index}function wR(l,d,_,L){for(var F=-1,ee=l.length,he=_.length,xe=-1,we=d.length,We=an(ee-he,0),je=Fe(we+We),rt=!L;++xe<we;)je[xe]=d[xe];for(;++F<he;)(rt||F<ee)&&(je[_[F]]=l[F]);for(;We--;)je[xe++]=l[F++];return je}function LR(l,d,_,L){for(var F=-1,ee=l.length,he=-1,xe=_.length,we=-1,We=d.length,je=an(ee-xe,0),rt=Fe(je+We),ht=!L;++F<je;)rt[F]=l[F];for(var yt=F;++we<We;)rt[yt+we]=d[we];for(;++he<xe;)(ht||F<ee)&&(rt[yt+_[he]]=l[F++]);return rt}function Xn(l,d){var _=-1,L=l.length;for(d||(d=Fe(L));++_<L;)d[_]=l[_];return d}function gs(l,d,_,L){var F=!_;_||(_={});for(var ee=-1,he=d.length;++ee<he;){var xe=d[ee],we=L?L(_[xe],l[xe],xe,_,l):r;we===r&&(we=l[xe]),F?Ns(_,xe,we):yl(_,xe,we)}return _}function eH(l,d){return gs(l,Vg(l),d)}function tH(l,d){return gs(l,VR(l),d)}function Gf(l,d){return function(_,L){var F=Vt(_)?aV:T$,ee=d?d():{};return F(_,l,It(L,2),ee)}}function nu(l){return Xt(function(d,_){var L=-1,F=_.length,ee=F>1?_[F-1]:r,he=F>2?_[2]:r;for(ee=l.length>3&&typeof ee=="function"?(F--,ee):r,he&&kn(_[0],_[1],he)&&(ee=F<3?r:ee,F=1),d=vr(d);++L<F;){var xe=_[L];xe&&l(d,xe,L,ee)}return d})}function IR(l,d){return function(_,L){if(_==null)return _;if(!zn(_))return l(_,L);for(var F=_.length,ee=d?F:-1,he=vr(_);(d?ee--:++ee<F)&&L(he[ee],ee,he)!==!1;);return _}}function BR(l){return function(d,_,L){for(var F=-1,ee=vr(d),he=L(d),xe=he.length;xe--;){var we=he[l?xe:++F];if(_(ee[we],we,ee)===!1)break}return d}}function rH(l,d,_){var L=d&x,F=Cl(l);function ee(){var he=this&&this!==vn&&this instanceof ee?F:l;return he.apply(L?_:this,arguments)}return ee}function PR(l){return function(d){d=dr(d);var _=Yo(d)?Yi(d):r,L=_?_[0]:d.charAt(0),F=_?Aa(_,1).join(""):d.slice(1);return L[l]()+F}}function iu(l){return function(d){return ag(IC(LC(d).replace(XK,"")),l,"")}}function Cl(l){return function(){var d=arguments;switch(d.length){case 0:return new l;case 1:return new l(d[0]);case 2:return new l(d[0],d[1]);case 3:return new l(d[0],d[1],d[2]);case 4:return new l(d[0],d[1],d[2],d[3]);case 5:return new l(d[0],d[1],d[2],d[3],d[4]);case 6:return new l(d[0],d[1],d[2],d[3],d[4],d[5]);case 7:return new l(d[0],d[1],d[2],d[3],d[4],d[5],d[6])}var _=ru(l.prototype),L=l.apply(_,d);return Gr(L)?L:_}}function nH(l,d,_){var L=Cl(l);function F(){for(var ee=arguments.length,he=Fe(ee),xe=ee,we=su(F);xe--;)he[xe]=arguments[xe];var We=ee<3&&he[0]!==we&&he[ee-1]!==we?[]:xa(he,we);if(ee-=We.length,ee<_)return MR(l,d,Kf,F.placeholder,r,he,We,r,r,_-ee);var je=this&&this!==vn&&this instanceof F?L:l;return li(je,this,he)}return F}function OR(l){return function(d,_,L){var F=vr(d);if(!zn(d)){var ee=It(_,3);d=ln(d),_=function(xe){return ee(F[xe],xe,F)}}var he=l(d,_,L);return he>-1?F[ee?d[he]:he]:r}}function DR(l){return Gs(function(d){var _=d.length,L=_,F=Bi.prototype.thru;for(l&&d.reverse();L--;){var ee=d[L];if(typeof ee!="function")throw new Ii(n);if(F&&!he&&qf(ee)=="wrapper")var he=new Bi([],!0)}for(L=he?L:_;++L<_;){ee=d[L];var xe=qf(ee),we=xe=="wrapper"?Gg(ee):r;we&&Hg(we[0])&&we[1]==(C|R|k|w)&&!we[4].length&&we[9]==1?he=he[qf(we[0])].apply(he,we[3]):he=ee.length==1&&Hg(ee)?he[xe]():he.thru(ee)}return function(){var We=arguments,je=We[0];if(he&&We.length==1&&Vt(je))return he.plant(je).value();for(var rt=0,ht=_?d[rt].apply(this,We):je;++rt<_;)ht=d[rt].call(this,ht);return ht}})}function Kf(l,d,_,L,F,ee,he,xe,we,We){var je=d&C,rt=d&x,ht=d&v,yt=d&(R|A),Bt=d&O,Ht=ht?r:Cl(l);function Pt(){for(var jt=arguments.length,rr=Fe(jt),di=jt;di--;)rr[di]=arguments[di];if(yt)var Un=su(Pt),pi=gV(rr,Un);if(L&&(rr=wR(rr,L,F,yt)),ee&&(rr=LR(rr,ee,he,yt)),jt-=pi,yt&&jt<We){var en=xa(rr,Un);return MR(l,d,Kf,Pt.placeholder,_,rr,en,xe,we,We-jt)}var Ji=rt?_:this,Hs=ht?Ji[l]:l;return jt=rr.length,xe?rr=TH(rr,xe):Bt&&jt>1&&rr.reverse(),je&&we<jt&&(rr.length=we),this&&this!==vn&&this instanceof Pt&&(Hs=Ht||Cl(Hs)),Hs.apply(Ji,rr)}return Pt}function kR(l,d){return function(_,L){return B$(_,l,d(L),{})}}function Vf(l,d){return function(_,L){var F;if(_===r&&L===r)return d;if(_!==r&&(F=_),L!==r){if(F===r)return L;typeof _=="string"||typeof L=="string"?(_=fi(_),L=fi(L)):(_=vR(_),L=vR(L)),F=l(_,L)}return F}}function Ug(l){return Gs(function(d){return d=Ur(d,ci(It())),Xt(function(_){var L=this;return l(d,function(F){return li(F,L,_)})})})}function $f(l,d){d=d===r?" ":fi(d);var _=d.length;if(_<2)return _?Lg(d,l):d;var L=Lg(d,Lf(l/Zo(d)));return Yo(d)?Aa(Yi(L),0,l).join(""):L.slice(0,l)}function iH(l,d,_,L){var F=d&x,ee=Cl(l);function he(){for(var xe=-1,we=arguments.length,We=-1,je=L.length,rt=Fe(je+we),ht=this&&this!==vn&&this instanceof he?ee:l;++We<je;)rt[We]=L[We];for(;we--;)rt[We++]=arguments[++xe];return li(ht,F?_:this,rt)}return he}function UR(l){return function(d,_,L){return L&&typeof L!="number"&&kn(d,_,L)&&(_=L=r),d=$s(d),_===r?(_=d,d=0):_=$s(_),L=L===r?d<_?1:-1:$s(L),$$(d,_,L,l)}}function Hf(l){return function(d,_){return typeof d=="string"&&typeof _=="string"||(d=ki(d),_=ki(_)),l(d,_)}}function MR(l,d,_,L,F,ee,he,xe,we,We){var je=d&R,rt=je?he:r,ht=je?r:he,yt=je?ee:r,Bt=je?r:ee;d|=je?k:b,d&=~(je?b:k),d&y||(d&=-4);var Ht=[l,d,F,yt,rt,Bt,ht,xe,we,We],Pt=_.apply(r,Ht);return Hg(l)&&jR(Pt,Ht),Pt.placeholder=L,YR(Pt,l,d)}function Mg(l){var d=sn[l];return function(_,L){if(_=ki(_),L=L==null?0:Cn($t(L),292),L&&Y2(_)){var F=(dr(_)+"e").split("e"),ee=d(F[0]+"e"+(+F[1]+L));return F=(dr(ee)+"e").split("e"),+(F[0]+"e"+(+F[1]-L))}return d(_)}}var sH=eu&&1/xf(new eu([,-0]))[1]==ie?function(l){return new eu(l)}:sm;function NR(l){return function(d){var _=wn(d);return _==oe?dg(d):_==X?yV(d):pV(d,l(d))}}function Fs(l,d,_,L,F,ee,he,xe){var we=d&v;if(!we&&typeof l!="function")throw new Ii(n);var We=L?L.length:0;if(We||(d&=-97,L=F=r),he=he===r?he:an($t(he),0),xe=xe===r?xe:$t(xe),We-=F?F.length:0,d&b){var je=L,rt=F;L=F=r}var ht=we?r:Gg(l),yt=[l,d,_,L,F,je,rt,ee,he,xe];if(ht&&vH(yt,ht),l=yt[0],d=yt[1],_=yt[2],L=yt[3],F=yt[4],xe=yt[9]=yt[9]===r?we?0:l.length:an(yt[9]-We,0),!xe&&d&(R|A)&&(d&=-25),!d||d==x)var Bt=rH(l,d,_);else d==R||d==A?Bt=nH(l,d,xe):(d==k||d==(x|k))&&!F.length?Bt=iH(l,d,_,L):Bt=Kf.apply(r,yt);var Ht=ht?bR:jR;return YR(Ht(Bt,yt),l,d)}function FR(l,d,_,L){return l===r||Qi(l,Jo[_])&&!mr.call(L,_)?d:l}function GR(l,d,_,L,F,ee){return Gr(l)&&Gr(d)&&(ee.set(d,l),Mf(l,d,r,GR,ee),ee.delete(d)),l}function aH(l){return Il(l)?r:l}function KR(l,d,_,L,F,ee){var he=_&m,xe=l.length,we=d.length;if(xe!=we&&!(he&&we>xe))return!1;var We=ee.get(l),je=ee.get(d);if(We&&je)return We==d&&je==l;var rt=-1,ht=!0,yt=_&T?new so:r;for(ee.set(l,d),ee.set(d,l);++rt<xe;){var Bt=l[rt],Ht=d[rt];if(L)var Pt=he?L(Ht,Bt,rt,d,l,ee):L(Bt,Ht,rt,l,d,ee);if(Pt!==r){if(Pt)continue;ht=!1;break}if(yt){if(!og(d,function(jt,rr){if(!ml(yt,rr)&&(Bt===jt||F(Bt,jt,_,L,ee)))return yt.push(rr)})){ht=!1;break}}else if(!(Bt===Ht||F(Bt,Ht,_,L,ee))){ht=!1;break}}return ee.delete(l),ee.delete(d),ht}function oH(l,d,_,L,F,ee,he){switch(_){case st:if(l.byteLength!=d.byteLength||l.byteOffset!=d.byteOffset)return!1;l=l.buffer,d=d.buffer;case Oe:return!(l.byteLength!=d.byteLength||!ee(new Sf(l),new Sf(d)));case qe:case Ye:case be:return Qi(+l,+d);case lt:return l.name==d.name&&l.message==d.message;case z:case _e:return l==d+"";case oe:var xe=dg;case X:var we=L&m;if(xe||(xe=xf),l.size!=d.size&&!we)return!1;var We=he.get(l);if(We)return We==d;L|=T,he.set(l,d);var je=KR(xe(l),xe(d),L,F,ee,he);return he.delete(l),je;case Ie:if(El)return El.call(l)==El.call(d)}return!1}function uH(l,d,_,L,F,ee){var he=_&m,xe=Ng(l),we=xe.length,We=Ng(d),je=We.length;if(we!=je&&!he)return!1;for(var rt=we;rt--;){var ht=xe[rt];if(!(he?ht in d:mr.call(d,ht)))return!1}var yt=ee.get(l),Bt=ee.get(d);if(yt&&Bt)return yt==d&&Bt==l;var Ht=!0;ee.set(l,d),ee.set(d,l);for(var Pt=he;++rt<we;){ht=xe[rt];var jt=l[ht],rr=d[ht];if(L)var di=he?L(rr,jt,ht,d,l,ee):L(jt,rr,ht,l,d,ee);if(!(di===r?jt===rr||F(jt,rr,_,L,ee):di)){Ht=!1;break}Pt||(Pt=ht=="constructor")}if(Ht&&!Pt){var Un=l.constructor,pi=d.constructor;Un!=pi&&"constructor"in l&&"constructor"in d&&!(typeof Un=="function"&&Un instanceof Un&&typeof pi=="function"&&pi instanceof pi)&&(Ht=!1)}return ee.delete(l),ee.delete(d),Ht}function Gs(l){return Xg(zR(l,r,rC),l+"")}function Ng(l){return oR(l,ln,Vg)}function Fg(l){return oR(l,Wn,VR)}var Gg=Bf?function(l){return Bf.get(l)}:sm;function qf(l){for(var d=l.name+"",_=tu[d],L=mr.call(tu,d)?_.length:0;L--;){var F=_[L],ee=F.func;if(ee==null||ee==l)return F.name}return d}function su(l){var d=mr.call(W,"placeholder")?W:l;return d.placeholder}function It(){var l=W.iteratee||nm;return l=l===nm?cR:l,arguments.length?l(arguments[0],arguments[1]):l}function Xf(l,d){var _=l.__data__;return mH(d)?_[typeof d=="string"?"string":"hash"]:_.map}function Kg(l){for(var d=ln(l),_=d.length;_--;){var L=d[_],F=l[L];d[_]=[L,F,qR(F)]}return d}function uo(l,d){var _=xV(l,d);return lR(_)?_:r}function lH(l){var d=mr.call(l,no),_=l[no];try{l[no]=r;var L=!0}catch{}var F=Tf.call(l);return L&&(d?l[no]=_:delete l[no]),F}var Vg=gg?function(l){return l==null?[]:(l=vr(l),_a(gg(l),function(d){return W2.call(l,d)}))}:am,VR=gg?function(l){for(var d=[];l;)ba(d,Vg(l)),l=Rf(l);return d}:am,wn=Dn;(mg&&wn(new mg(new ArrayBuffer(1)))!=st||bl&&wn(new bl)!=oe||_g&&wn(_g.resolve())!=De||eu&&wn(new eu)!=X||xl&&wn(new xl)!=Ve)&&(wn=function(l){var d=Dn(l),_=d==ye?l.constructor:r,L=_?lo(_):"";if(L)switch(L){case qV:return st;case XV:return oe;case zV:return De;case WV:return X;case jV:return Ve}return d});function cH(l,d,_){for(var L=-1,F=_.length;++L<F;){var ee=_[L],he=ee.size;switch(ee.type){case"drop":l+=he;break;case"dropRight":d-=he;break;case"take":d=Cn(d,l+he);break;case"takeRight":l=an(l,d-he);break}}return{start:l,end:d}}function fH(l){var d=l.match(nn);return d?d[1].split(Qr):[]}function $R(l,d,_){d=Ta(d,l);for(var L=-1,F=d.length,ee=!1;++L<F;){var he=ms(d[L]);if(!(ee=l!=null&&_(l,he)))break;l=l[he]}return ee||++L!=F?ee:(F=l==null?0:l.length,!!F&&Jf(F)&&Ks(he,F)&&(Vt(l)||co(l)))}function hH(l){var d=l.length,_=new l.constructor(d);return d&&typeof l[0]=="string"&&mr.call(l,"index")&&(_.index=l.index,_.input=l.input),_}function HR(l){return typeof l.constructor=="function"&&!wl(l)?ru(Rf(l)):{}}function dH(l,d,_){var L=l.constructor;switch(d){case Oe:return kg(l);case qe:case Ye:return new L(+l);case st:return Y$(l,_);case ae:case ne:case U:case K:case te:case ge:case re:case H:case P:return RR(l,_);case oe:return new L;case be:case _e:return new L(l);case z:return Z$(l);case X:return new L;case Ie:return Q$(l)}}function pH(l,d){var _=d.length;if(!_)return l;var L=_-1;return d[L]=(_>1?"& ":"")+d[L],d=d.join(_>2?", ":" "),l.replace(sr,`{
/* [wrapped with `+d+`] */
`)}function gH(l){return Vt(l)||co(l)||!!(j2&&l&&l[j2])}function Ks(l,d){var _=typeof l;return d=d??le,!!d&&(_=="number"||_!="symbol"&&Wo.test(l))&&l>-1&&l%1==0&&l<d}function kn(l,d,_){if(!Gr(_))return!1;var L=typeof d;return(L=="number"?zn(_)&&Ks(d,_.length):L=="string"&&d in _)?Qi(_[d],l):!1}function $g(l,d){if(Vt(l))return!1;var _=typeof l;return _=="number"||_=="symbol"||_=="boolean"||l==null||hi(l)?!0:At.test(l)||!it.test(l)||d!=null&&l in vr(d)}function mH(l){var d=typeof l;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?l!=="__proto__":l===null}function Hg(l){var d=qf(l),_=W[d];if(typeof _!="function"||!(d in Jt.prototype))return!1;if(l===_)return!0;var L=Gg(_);return!!L&&l===L[0]}function _H(l){return!!q2&&q2 in l}var bH=Ef?Vs:om;function wl(l){var d=l&&l.constructor,_=typeof d=="function"&&d.prototype||Jo;return l===_}function qR(l){return l===l&&!Gr(l)}function XR(l,d){return function(_){return _==null?!1:_[l]===d&&(d!==r||l in vr(_))}}function xH(l){var d=Zf(l,function(L){return _.size===c&&_.clear(),L}),_=d.cache;return d}function vH(l,d){var _=l[1],L=d[1],F=_|L,ee=F<(x|v|C),he=L==C&&_==R||L==C&&_==w&&l[7].length<=d[8]||L==(C|w)&&d[7].length<=d[8]&&_==R;if(!(ee||he))return l;L&x&&(l[2]=d[2],F|=_&x?0:y);var xe=d[3];if(xe){var we=l[3];l[3]=we?wR(we,xe,d[4]):xe,l[4]=we?xa(l[3],f):d[4]}return xe=d[5],xe&&(we=l[5],l[5]=we?LR(we,xe,d[6]):xe,l[6]=we?xa(l[5],f):d[6]),xe=d[7],xe&&(l[7]=xe),L&C&&(l[8]=l[8]==null?d[8]:Cn(l[8],d[8])),l[9]==null&&(l[9]=d[9]),l[0]=d[0],l[1]=F,l}function EH(l){var d=[];if(l!=null)for(var _ in vr(l))d.push(_);return d}function yH(l){return Tf.call(l)}function zR(l,d,_){return d=an(d===r?l.length-1:d,0),function(){for(var L=arguments,F=-1,ee=an(L.length-d,0),he=Fe(ee);++F<ee;)he[F]=L[d+F];F=-1;for(var xe=Fe(d+1);++F<d;)xe[F]=L[F];return xe[d]=_(he),li(l,this,xe)}}function WR(l,d){return d.length<2?l:oo(l,Oi(d,0,-1))}function TH(l,d){for(var _=l.length,L=Cn(d.length,_),F=Xn(l);L--;){var ee=d[L];l[L]=Ks(ee,_)?F[ee]:r}return l}function qg(l,d){if(!(d==="constructor"&&typeof l[d]=="function")&&d!="__proto__")return l[d]}var jR=ZR(bR),Ll=NV||function(l,d){return vn.setTimeout(l,d)},Xg=ZR(X$);function YR(l,d,_){var L=d+"";return Xg(l,pH(L,AH(fH(L),_)))}function ZR(l){var d=0,_=0;return function(){var L=VV(),F=Z-(L-_);if(_=L,F>0){if(++d>=G)return arguments[0]}else d=0;return l.apply(r,arguments)}}function zf(l,d){var _=-1,L=l.length,F=L-1;for(d=d===r?L:d;++_<d;){var ee=wg(_,F),he=l[ee];l[ee]=l[_],l[_]=he}return l.length=d,l}var QR=xH(function(l){var d=[];return l.charCodeAt(0)===46&&d.push(""),l.replace(Br,function(_,L,F,ee){d.push(F?ee.replace(cr,"$1"):L||_)}),d});function ms(l){if(typeof l=="string"||hi(l))return l;var d=l+"";return d=="0"&&1/l==-1/0?"-0":d}function lo(l){if(l!=null){try{return yf.call(l)}catch{}try{return l+""}catch{}}return""}function AH(l,d){return Li(Xe,function(_){var L="_."+_[0];d&_[1]&&!_f(l,L)&&l.push(L)}),l.sort()}function JR(l){if(l instanceof Jt)return l.clone();var d=new Bi(l.__wrapped__,l.__chain__);return d.__actions__=Xn(l.__actions__),d.__index__=l.__index__,d.__values__=l.__values__,d}function SH(l,d,_){(_?kn(l,d,_):d===r)?d=1:d=an($t(d),0);var L=l==null?0:l.length;if(!L||d<1)return[];for(var F=0,ee=0,he=Fe(Lf(L/d));F<L;)he[ee++]=Oi(l,F,F+=d);return he}function RH(l){for(var d=-1,_=l==null?0:l.length,L=0,F=[];++d<_;){var ee=l[d];ee&&(F[L++]=ee)}return F}function CH(){var l=arguments.length;if(!l)return[];for(var d=Fe(l-1),_=arguments[0],L=l;L--;)d[L-1]=arguments[L];return ba(Vt(_)?Xn(_):[_],En(d,1))}var wH=Xt(function(l,d){return Jr(l)?Tl(l,En(d,1,Jr,!0)):[]}),LH=Xt(function(l,d){var _=Di(d);return Jr(_)&&(_=r),Jr(l)?Tl(l,En(d,1,Jr,!0),It(_,2)):[]}),IH=Xt(function(l,d){var _=Di(d);return Jr(_)&&(_=r),Jr(l)?Tl(l,En(d,1,Jr,!0),r,_):[]});function BH(l,d,_){var L=l==null?0:l.length;return L?(d=_||d===r?1:$t(d),Oi(l,d<0?0:d,L)):[]}function PH(l,d,_){var L=l==null?0:l.length;return L?(d=_||d===r?1:$t(d),d=L-d,Oi(l,0,d<0?0:d)):[]}function OH(l,d){return l&&l.length?Ff(l,It(d,3),!0,!0):[]}function DH(l,d){return l&&l.length?Ff(l,It(d,3),!0):[]}function kH(l,d,_,L){var F=l==null?0:l.length;return F?(_&&typeof _!="number"&&kn(l,d,_)&&(_=0,L=F),C$(l,d,_,L)):[]}function eC(l,d,_){var L=l==null?0:l.length;if(!L)return-1;var F=_==null?0:$t(_);return F<0&&(F=an(L+F,0)),bf(l,It(d,3),F)}function tC(l,d,_){var L=l==null?0:l.length;if(!L)return-1;var F=L-1;return _!==r&&(F=$t(_),F=_<0?an(L+F,0):Cn(F,L-1)),bf(l,It(d,3),F,!0)}function rC(l){var d=l==null?0:l.length;return d?En(l,1):[]}function UH(l){var d=l==null?0:l.length;return d?En(l,ie):[]}function MH(l,d){var _=l==null?0:l.length;return _?(d=d===r?1:$t(d),En(l,d)):[]}function NH(l){for(var d=-1,_=l==null?0:l.length,L={};++d<_;){var F=l[d];L[F[0]]=F[1]}return L}function nC(l){return l&&l.length?l[0]:r}function FH(l,d,_){var L=l==null?0:l.length;if(!L)return-1;var F=_==null?0:$t(_);return F<0&&(F=an(L+F,0)),jo(l,d,F)}function GH(l){var d=l==null?0:l.length;return d?Oi(l,0,-1):[]}var KH=Xt(function(l){var d=Ur(l,Og);return d.length&&d[0]===l[0]?Tg(d):[]}),VH=Xt(function(l){var d=Di(l),_=Ur(l,Og);return d===Di(_)?d=r:_.pop(),_.length&&_[0]===l[0]?Tg(_,It(d,2)):[]}),$H=Xt(function(l){var d=Di(l),_=Ur(l,Og);return d=typeof d=="function"?d:r,d&&_.pop(),_.length&&_[0]===l[0]?Tg(_,r,d):[]});function HH(l,d){return l==null?"":GV.call(l,d)}function Di(l){var d=l==null?0:l.length;return d?l[d-1]:r}function qH(l,d,_){var L=l==null?0:l.length;if(!L)return-1;var F=L;return _!==r&&(F=$t(_),F=F<0?an(L+F,0):Cn(F,L-1)),d===d?AV(l,d,F):bf(l,M2,F,!0)}function XH(l,d){return l&&l.length?pR(l,$t(d)):r}var zH=Xt(iC);function iC(l,d){return l&&l.length&&d&&d.length?Cg(l,d):l}function WH(l,d,_){return l&&l.length&&d&&d.length?Cg(l,d,It(_,2)):l}function jH(l,d,_){return l&&l.length&&d&&d.length?Cg(l,d,r,_):l}var YH=Gs(function(l,d){var _=l==null?0:l.length,L=xg(l,d);return _R(l,Ur(d,function(F){return Ks(F,_)?+F:F}).sort(CR)),L});function ZH(l,d){var _=[];if(!(l&&l.length))return _;var L=-1,F=[],ee=l.length;for(d=It(d,3);++L<ee;){var he=l[L];d(he,L,l)&&(_.push(he),F.push(L))}return _R(l,F),_}function zg(l){return l==null?l:HV.call(l)}function QH(l,d,_){var L=l==null?0:l.length;return L?(_&&typeof _!="number"&&kn(l,d,_)?(d=0,_=L):(d=d==null?0:$t(d),_=_===r?L:$t(_)),Oi(l,d,_)):[]}function JH(l,d){return Nf(l,d)}function eq(l,d,_){return Ig(l,d,It(_,2))}function tq(l,d){var _=l==null?0:l.length;if(_){var L=Nf(l,d);if(L<_&&Qi(l[L],d))return L}return-1}function rq(l,d){return Nf(l,d,!0)}function nq(l,d,_){return Ig(l,d,It(_,2),!0)}function iq(l,d){var _=l==null?0:l.length;if(_){var L=Nf(l,d,!0)-1;if(Qi(l[L],d))return L}return-1}function sq(l){return l&&l.length?xR(l):[]}function aq(l,d){return l&&l.length?xR(l,It(d,2)):[]}function oq(l){var d=l==null?0:l.length;return d?Oi(l,1,d):[]}function uq(l,d,_){return l&&l.length?(d=_||d===r?1:$t(d),Oi(l,0,d<0?0:d)):[]}function lq(l,d,_){var L=l==null?0:l.length;return L?(d=_||d===r?1:$t(d),d=L-d,Oi(l,d<0?0:d,L)):[]}function cq(l,d){return l&&l.length?Ff(l,It(d,3),!1,!0):[]}function fq(l,d){return l&&l.length?Ff(l,It(d,3)):[]}var hq=Xt(function(l){return ya(En(l,1,Jr,!0))}),dq=Xt(function(l){var d=Di(l);return Jr(d)&&(d=r),ya(En(l,1,Jr,!0),It(d,2))}),pq=Xt(function(l){var d=Di(l);return d=typeof d=="function"?d:r,ya(En(l,1,Jr,!0),r,d)});function gq(l){return l&&l.length?ya(l):[]}function mq(l,d){return l&&l.length?ya(l,It(d,2)):[]}function _q(l,d){return d=typeof d=="function"?d:r,l&&l.length?ya(l,r,d):[]}function Wg(l){if(!(l&&l.length))return[];var d=0;return l=_a(l,function(_){if(Jr(_))return d=an(_.length,d),!0}),fg(d,function(_){return Ur(l,ug(_))})}function sC(l,d){if(!(l&&l.length))return[];var _=Wg(l);return d==null?_:Ur(_,function(L){return li(d,r,L)})}var bq=Xt(function(l,d){return Jr(l)?Tl(l,d):[]}),xq=Xt(function(l){return Pg(_a(l,Jr))}),vq=Xt(function(l){var d=Di(l);return Jr(d)&&(d=r),Pg(_a(l,Jr),It(d,2))}),Eq=Xt(function(l){var d=Di(l);return d=typeof d=="function"?d:r,Pg(_a(l,Jr),r,d)}),yq=Xt(Wg);function Tq(l,d){return TR(l||[],d||[],yl)}function Aq(l,d){return TR(l||[],d||[],Rl)}var Sq=Xt(function(l){var d=l.length,_=d>1?l[d-1]:r;return _=typeof _=="function"?(l.pop(),_):r,sC(l,_)});function aC(l){var d=W(l);return d.__chain__=!0,d}function Rq(l,d){return d(l),l}function Wf(l,d){return d(l)}var Cq=Gs(function(l){var d=l.length,_=d?l[0]:0,L=this.__wrapped__,F=function(ee){return xg(ee,l)};return d>1||this.__actions__.length||!(L instanceof Jt)||!Ks(_)?this.thru(F):(L=L.slice(_,+_+(d?1:0)),L.__actions__.push({func:Wf,args:[F],thisArg:r}),new Bi(L,this.__chain__).thru(function(ee){return d&&!ee.length&&ee.push(r),ee}))});function wq(){return aC(this)}function Lq(){return new Bi(this.value(),this.__chain__)}function Iq(){this.__values__===r&&(this.__values__=vC(this.value()));var l=this.__index__>=this.__values__.length,d=l?r:this.__values__[this.__index__++];return{done:l,value:d}}function Bq(){return this}function Pq(l){for(var d,_=this;_ instanceof Of;){var L=JR(_);L.__index__=0,L.__values__=r,d?F.__wrapped__=L:d=L;var F=L;_=_.__wrapped__}return F.__wrapped__=l,d}function Oq(){var l=this.__wrapped__;if(l instanceof Jt){var d=l;return this.__actions__.length&&(d=new Jt(this)),d=d.reverse(),d.__actions__.push({func:Wf,args:[zg],thisArg:r}),new Bi(d,this.__chain__)}return this.thru(zg)}function Dq(){return yR(this.__wrapped__,this.__actions__)}var kq=Gf(function(l,d,_){mr.call(l,_)?++l[_]:Ns(l,_,1)});function Uq(l,d,_){var L=Vt(l)?k2:R$;return _&&kn(l,d,_)&&(d=r),L(l,It(d,3))}function Mq(l,d){var _=Vt(l)?_a:sR;return _(l,It(d,3))}var Nq=OR(eC),Fq=OR(tC);function Gq(l,d){return En(jf(l,d),1)}function Kq(l,d){return En(jf(l,d),ie)}function Vq(l,d,_){return _=_===r?1:$t(_),En(jf(l,d),_)}function oC(l,d){var _=Vt(l)?Li:Ea;return _(l,It(d,3))}function uC(l,d){var _=Vt(l)?oV:iR;return _(l,It(d,3))}var $q=Gf(function(l,d,_){mr.call(l,_)?l[_].push(d):Ns(l,_,[d])});function Hq(l,d,_,L){l=zn(l)?l:ou(l),_=_&&!L?$t(_):0;var F=l.length;return _<0&&(_=an(F+_,0)),eh(l)?_<=F&&l.indexOf(d,_)>-1:!!F&&jo(l,d,_)>-1}var qq=Xt(function(l,d,_){var L=-1,F=typeof d=="function",ee=zn(l)?Fe(l.length):[];return Ea(l,function(he){ee[++L]=F?li(d,he,_):Al(he,d,_)}),ee}),Xq=Gf(function(l,d,_){Ns(l,_,d)});function jf(l,d){var _=Vt(l)?Ur:fR;return _(l,It(d,3))}function zq(l,d,_,L){return l==null?[]:(Vt(d)||(d=d==null?[]:[d]),_=L?r:_,Vt(_)||(_=_==null?[]:[_]),gR(l,d,_))}var Wq=Gf(function(l,d,_){l[_?0:1].push(d)},function(){return[[],[]]});function jq(l,d,_){var L=Vt(l)?ag:F2,F=arguments.length<3;return L(l,It(d,4),_,F,Ea)}function Yq(l,d,_){var L=Vt(l)?uV:F2,F=arguments.length<3;return L(l,It(d,4),_,F,iR)}function Zq(l,d){var _=Vt(l)?_a:sR;return _(l,Qf(It(d,3)))}function Qq(l){var d=Vt(l)?eR:H$;return d(l)}function Jq(l,d,_){(_?kn(l,d,_):d===r)?d=1:d=$t(d);var L=Vt(l)?E$:q$;return L(l,d)}function eX(l){var d=Vt(l)?y$:z$;return d(l)}function tX(l){if(l==null)return 0;if(zn(l))return eh(l)?Zo(l):l.length;var d=wn(l);return d==oe||d==X?l.size:Sg(l).length}function rX(l,d,_){var L=Vt(l)?og:W$;return _&&kn(l,d,_)&&(d=r),L(l,It(d,3))}var nX=Xt(function(l,d){if(l==null)return[];var _=d.length;return _>1&&kn(l,d[0],d[1])?d=[]:_>2&&kn(d[0],d[1],d[2])&&(d=[d[0]]),gR(l,En(d,1),[])}),Yf=MV||function(){return vn.Date.now()};function iX(l,d){if(typeof d!="function")throw new Ii(n);return l=$t(l),function(){if(--l<1)return d.apply(this,arguments)}}function lC(l,d,_){return d=_?r:d,d=l&&d==null?l.length:d,Fs(l,C,r,r,r,r,d)}function cC(l,d){var _;if(typeof d!="function")throw new Ii(n);return l=$t(l),function(){return--l>0&&(_=d.apply(this,arguments)),l<=1&&(d=r),_}}var jg=Xt(function(l,d,_){var L=x;if(_.length){var F=xa(_,su(jg));L|=k}return Fs(l,L,d,_,F)}),fC=Xt(function(l,d,_){var L=x|v;if(_.length){var F=xa(_,su(fC));L|=k}return Fs(d,L,l,_,F)});function hC(l,d,_){d=_?r:d;var L=Fs(l,R,r,r,r,r,r,d);return L.placeholder=hC.placeholder,L}function dC(l,d,_){d=_?r:d;var L=Fs(l,A,r,r,r,r,r,d);return L.placeholder=dC.placeholder,L}function pC(l,d,_){var L,F,ee,he,xe,we,We=0,je=!1,rt=!1,ht=!0;if(typeof l!="function")throw new Ii(n);d=ki(d)||0,Gr(_)&&(je=!!_.leading,rt="maxWait"in _,ee=rt?an(ki(_.maxWait)||0,d):ee,ht="trailing"in _?!!_.trailing:ht);function yt(en){var Ji=L,Hs=F;return L=F=r,We=en,he=l.apply(Hs,Ji),he}function Bt(en){return We=en,xe=Ll(jt,d),je?yt(en):he}function Ht(en){var Ji=en-we,Hs=en-We,OC=d-Ji;return rt?Cn(OC,ee-Hs):OC}function Pt(en){var Ji=en-we,Hs=en-We;return we===r||Ji>=d||Ji<0||rt&&Hs>=ee}function jt(){var en=Yf();if(Pt(en))return rr(en);xe=Ll(jt,Ht(en))}function rr(en){return xe=r,ht&&L?yt(en):(L=F=r,he)}function di(){xe!==r&&AR(xe),We=0,L=we=F=xe=r}function Un(){return xe===r?he:rr(Yf())}function pi(){var en=Yf(),Ji=Pt(en);if(L=arguments,F=this,we=en,Ji){if(xe===r)return Bt(we);if(rt)return AR(xe),xe=Ll(jt,d),yt(we)}return xe===r&&(xe=Ll(jt,d)),he}return pi.cancel=di,pi.flush=Un,pi}var sX=Xt(function(l,d){return nR(l,1,d)}),aX=Xt(function(l,d,_){return nR(l,ki(d)||0,_)});function oX(l){return Fs(l,O)}function Zf(l,d){if(typeof l!="function"||d!=null&&typeof d!="function")throw new Ii(n);var _=function(){var L=arguments,F=d?d.apply(this,L):L[0],ee=_.cache;if(ee.has(F))return ee.get(F);var he=l.apply(this,L);return _.cache=ee.set(F,he)||ee,he};return _.cache=new(Zf.Cache||Ms),_}Zf.Cache=Ms;function Qf(l){if(typeof l!="function")throw new Ii(n);return function(){var d=arguments;switch(d.length){case 0:return!l.call(this);case 1:return!l.call(this,d[0]);case 2:return!l.call(this,d[0],d[1]);case 3:return!l.call(this,d[0],d[1],d[2])}return!l.apply(this,d)}}function uX(l){return cC(2,l)}var lX=j$(function(l,d){d=d.length==1&&Vt(d[0])?Ur(d[0],ci(It())):Ur(En(d,1),ci(It()));var _=d.length;return Xt(function(L){for(var F=-1,ee=Cn(L.length,_);++F<ee;)L[F]=d[F].call(this,L[F]);return li(l,this,L)})}),Yg=Xt(function(l,d){var _=xa(d,su(Yg));return Fs(l,k,r,d,_)}),gC=Xt(function(l,d){var _=xa(d,su(gC));return Fs(l,b,r,d,_)}),cX=Gs(function(l,d){return Fs(l,w,r,r,r,d)});function fX(l,d){if(typeof l!="function")throw new Ii(n);return d=d===r?d:$t(d),Xt(l,d)}function hX(l,d){if(typeof l!="function")throw new Ii(n);return d=d==null?0:an($t(d),0),Xt(function(_){var L=_[d],F=Aa(_,0,d);return L&&ba(F,L),li(l,this,F)})}function dX(l,d,_){var L=!0,F=!0;if(typeof l!="function")throw new Ii(n);return Gr(_)&&(L="leading"in _?!!_.leading:L,F="trailing"in _?!!_.trailing:F),pC(l,d,{leading:L,maxWait:d,trailing:F})}function pX(l){return lC(l,1)}function gX(l,d){return Yg(Dg(d),l)}function mX(){if(!arguments.length)return[];var l=arguments[0];return Vt(l)?l:[l]}function _X(l){return Pi(l,g)}function bX(l,d){return d=typeof d=="function"?d:r,Pi(l,g,d)}function xX(l){return Pi(l,h|g)}function vX(l,d){return d=typeof d=="function"?d:r,Pi(l,h|g,d)}function EX(l,d){return d==null||rR(l,d,ln(d))}function Qi(l,d){return l===d||l!==l&&d!==d}var yX=Hf(yg),TX=Hf(function(l,d){return l>=d}),co=uR(function(){return arguments}())?uR:function(l){return zr(l)&&mr.call(l,"callee")&&!W2.call(l,"callee")},Vt=Fe.isArray,AX=L2?ci(L2):P$;function zn(l){return l!=null&&Jf(l.length)&&!Vs(l)}function Jr(l){return zr(l)&&zn(l)}function SX(l){return l===!0||l===!1||zr(l)&&Dn(l)==qe}var Sa=FV||om,RX=I2?ci(I2):O$;function CX(l){return zr(l)&&l.nodeType===1&&!Il(l)}function wX(l){if(l==null)return!0;if(zn(l)&&(Vt(l)||typeof l=="string"||typeof l.splice=="function"||Sa(l)||au(l)||co(l)))return!l.length;var d=wn(l);if(d==oe||d==X)return!l.size;if(wl(l))return!Sg(l).length;for(var _ in l)if(mr.call(l,_))return!1;return!0}function LX(l,d){return Sl(l,d)}function IX(l,d,_){_=typeof _=="function"?_:r;var L=_?_(l,d):r;return L===r?Sl(l,d,r,_):!!L}function Zg(l){if(!zr(l))return!1;var d=Dn(l);return d==lt||d==at||typeof l.message=="string"&&typeof l.name=="string"&&!Il(l)}function BX(l){return typeof l=="number"&&Y2(l)}function Vs(l){if(!Gr(l))return!1;var d=Dn(l);return d==j||d==ue||d==pt||d==ke}function mC(l){return typeof l=="number"&&l==$t(l)}function Jf(l){return typeof l=="number"&&l>-1&&l%1==0&&l<=le}function Gr(l){var d=typeof l;return l!=null&&(d=="object"||d=="function")}function zr(l){return l!=null&&typeof l=="object"}var _C=B2?ci(B2):k$;function PX(l,d){return l===d||Ag(l,d,Kg(d))}function OX(l,d,_){return _=typeof _=="function"?_:r,Ag(l,d,Kg(d),_)}function DX(l){return bC(l)&&l!=+l}function kX(l){if(bH(l))throw new Ft(a);return lR(l)}function UX(l){return l===null}function MX(l){return l==null}function bC(l){return typeof l=="number"||zr(l)&&Dn(l)==be}function Il(l){if(!zr(l)||Dn(l)!=ye)return!1;var d=Rf(l);if(d===null)return!0;var _=mr.call(d,"constructor")&&d.constructor;return typeof _=="function"&&_ instanceof _&&yf.call(_)==OV}var Qg=P2?ci(P2):U$;function NX(l){return mC(l)&&l>=-9007199254740991&&l<=le}var xC=O2?ci(O2):M$;function eh(l){return typeof l=="string"||!Vt(l)&&zr(l)&&Dn(l)==_e}function hi(l){return typeof l=="symbol"||zr(l)&&Dn(l)==Ie}var au=D2?ci(D2):N$;function FX(l){return l===r}function GX(l){return zr(l)&&wn(l)==Ve}function KX(l){return zr(l)&&Dn(l)==Ce}var VX=Hf(Rg),$X=Hf(function(l,d){return l<=d});function vC(l){if(!l)return[];if(zn(l))return eh(l)?Yi(l):Xn(l);if(_l&&l[_l])return EV(l[_l]());var d=wn(l),_=d==oe?dg:d==X?xf:ou;return _(l)}function $s(l){if(!l)return l===0?l:0;if(l=ki(l),l===ie||l===-1/0){var d=l<0?-1:1;return d*Te}return l===l?l:0}function $t(l){var d=$s(l),_=d%1;return d===d?_?d-_:d:0}function EC(l){return l?ao($t(l),0,Ee):0}function ki(l){if(typeof l=="number")return l;if(hi(l))return Me;if(Gr(l)){var d=typeof l.valueOf=="function"?l.valueOf():l;l=Gr(d)?d+"":d}if(typeof l!="string")return l===0?l:+l;l=G2(l);var _=ds.test(l);return _||Ds.test(l)?iV(l.slice(2),_?2:8):Os.test(l)?Me:+l}function yC(l){return gs(l,Wn(l))}function HX(l){return l?ao($t(l),-9007199254740991,le):l===0?l:0}function dr(l){return l==null?"":fi(l)}var qX=nu(function(l,d){if(wl(d)||zn(d)){gs(d,ln(d),l);return}for(var _ in d)mr.call(d,_)&&yl(l,_,d[_])}),TC=nu(function(l,d){gs(d,Wn(d),l)}),th=nu(function(l,d,_,L){gs(d,Wn(d),l,L)}),XX=nu(function(l,d,_,L){gs(d,ln(d),l,L)}),zX=Gs(xg);function WX(l,d){var _=ru(l);return d==null?_:tR(_,d)}var jX=Xt(function(l,d){l=vr(l);var _=-1,L=d.length,F=L>2?d[2]:r;for(F&&kn(d[0],d[1],F)&&(L=1);++_<L;)for(var ee=d[_],he=Wn(ee),xe=-1,we=he.length;++xe<we;){var We=he[xe],je=l[We];(je===r||Qi(je,Jo[We])&&!mr.call(l,We))&&(l[We]=ee[We])}return l}),YX=Xt(function(l){return l.push(r,GR),li(AC,r,l)});function ZX(l,d){return U2(l,It(d,3),ps)}function QX(l,d){return U2(l,It(d,3),Eg)}function JX(l,d){return l==null?l:vg(l,It(d,3),Wn)}function ez(l,d){return l==null?l:aR(l,It(d,3),Wn)}function tz(l,d){return l&&ps(l,It(d,3))}function rz(l,d){return l&&Eg(l,It(d,3))}function nz(l){return l==null?[]:Uf(l,ln(l))}function iz(l){return l==null?[]:Uf(l,Wn(l))}function Jg(l,d,_){var L=l==null?r:oo(l,d);return L===r?_:L}function sz(l,d){return l!=null&&$R(l,d,w$)}function em(l,d){return l!=null&&$R(l,d,L$)}var az=kR(function(l,d,_){d!=null&&typeof d.toString!="function"&&(d=Tf.call(d)),l[d]=_},rm(jn)),oz=kR(function(l,d,_){d!=null&&typeof d.toString!="function"&&(d=Tf.call(d)),mr.call(l,d)?l[d].push(_):l[d]=[_]},It),uz=Xt(Al);function ln(l){return zn(l)?J2(l):Sg(l)}function Wn(l){return zn(l)?J2(l,!0):F$(l)}function lz(l,d){var _={};return d=It(d,3),ps(l,function(L,F,ee){Ns(_,d(L,F,ee),L)}),_}function cz(l,d){var _={};return d=It(d,3),ps(l,function(L,F,ee){Ns(_,F,d(L,F,ee))}),_}var fz=nu(function(l,d,_){Mf(l,d,_)}),AC=nu(function(l,d,_,L){Mf(l,d,_,L)}),hz=Gs(function(l,d){var _={};if(l==null)return _;var L=!1;d=Ur(d,function(ee){return ee=Ta(ee,l),L||(L=ee.length>1),ee}),gs(l,Fg(l),_),L&&(_=Pi(_,h|p|g,aH));for(var F=d.length;F--;)Bg(_,d[F]);return _});function dz(l,d){return SC(l,Qf(It(d)))}var pz=Gs(function(l,d){return l==null?{}:K$(l,d)});function SC(l,d){if(l==null)return{};var _=Ur(Fg(l),function(L){return[L]});return d=It(d),mR(l,_,function(L,F){return d(L,F[0])})}function gz(l,d,_){d=Ta(d,l);var L=-1,F=d.length;for(F||(F=1,l=r);++L<F;){var ee=l==null?r:l[ms(d[L])];ee===r&&(L=F,ee=_),l=Vs(ee)?ee.call(l):ee}return l}function mz(l,d,_){return l==null?l:Rl(l,d,_)}function _z(l,d,_,L){return L=typeof L=="function"?L:r,l==null?l:Rl(l,d,_,L)}var RC=NR(ln),CC=NR(Wn);function bz(l,d,_){var L=Vt(l),F=L||Sa(l)||au(l);if(d=It(d,4),_==null){var ee=l&&l.constructor;F?_=L?new ee:[]:Gr(l)?_=Vs(ee)?ru(Rf(l)):{}:_={}}return(F?Li:ps)(l,function(he,xe,we){return d(_,he,xe,we)}),_}function xz(l,d){return l==null?!0:Bg(l,d)}function vz(l,d,_){return l==null?l:ER(l,d,Dg(_))}function Ez(l,d,_,L){return L=typeof L=="function"?L:r,l==null?l:ER(l,d,Dg(_),L)}function ou(l){return l==null?[]:hg(l,ln(l))}function yz(l){return l==null?[]:hg(l,Wn(l))}function Tz(l,d,_){return _===r&&(_=d,d=r),_!==r&&(_=ki(_),_=_===_?_:0),d!==r&&(d=ki(d),d=d===d?d:0),ao(ki(l),d,_)}function Az(l,d,_){return d=$s(d),_===r?(_=d,d=0):_=$s(_),l=ki(l),I$(l,d,_)}function Sz(l,d,_){if(_&&typeof _!="boolean"&&kn(l,d,_)&&(d=_=r),_===r&&(typeof d=="boolean"?(_=d,d=r):typeof l=="boolean"&&(_=l,l=r)),l===r&&d===r?(l=0,d=1):(l=$s(l),d===r?(d=l,l=0):d=$s(d)),l>d){var L=l;l=d,d=L}if(_||l%1||d%1){var F=Z2();return Cn(l+F*(d-l+nV("1e-"+((F+"").length-1))),d)}return wg(l,d)}var Rz=iu(function(l,d,_){return d=d.toLowerCase(),l+(_?wC(d):d)});function wC(l){return tm(dr(l).toLowerCase())}function LC(l){return l=dr(l),l&&l.replace(Ke,mV).replace(zK,"")}function Cz(l,d,_){l=dr(l),d=fi(d);var L=l.length;_=_===r?L:ao($t(_),0,L);var F=_;return _-=d.length,_>=0&&l.slice(_,F)==d}function wz(l){return l=dr(l),l&&q.test(l)?l.replace(N,_V):l}function Lz(l){return l=dr(l),l&&Ct.test(l)?l.replace(ft,"\\$&"):l}var Iz=iu(function(l,d,_){return l+(_?"-":"")+d.toLowerCase()}),Bz=iu(function(l,d,_){return l+(_?" ":"")+d.toLowerCase()}),Pz=PR("toLowerCase");function Oz(l,d,_){l=dr(l),d=$t(d);var L=d?Zo(l):0;if(!d||L>=d)return l;var F=(d-L)/2;return $f(If(F),_)+l+$f(Lf(F),_)}function Dz(l,d,_){l=dr(l),d=$t(d);var L=d?Zo(l):0;return d&&L<d?l+$f(d-L,_):l}function kz(l,d,_){l=dr(l),d=$t(d);var L=d?Zo(l):0;return d&&L<d?$f(d-L,_)+l:l}function Uz(l,d,_){return _||d==null?d=0:d&&(d=+d),$V(dr(l).replace(wt,""),d||0)}function Mz(l,d,_){return(_?kn(l,d,_):d===r)?d=1:d=$t(d),Lg(dr(l),d)}function Nz(){var l=arguments,d=dr(l[0]);return l.length<3?d:d.replace(l[1],l[2])}var Fz=iu(function(l,d,_){return l+(_?"_":"")+d.toLowerCase()});function Gz(l,d,_){return _&&typeof _!="number"&&kn(l,d,_)&&(d=_=r),_=_===r?Ee:_>>>0,_?(l=dr(l),l&&(typeof d=="string"||d!=null&&!Qg(d))&&(d=fi(d),!d&&Yo(l))?Aa(Yi(l),0,_):l.split(d,_)):[]}var Kz=iu(function(l,d,_){return l+(_?" ":"")+tm(d)});function Vz(l,d,_){return l=dr(l),_=_==null?0:ao($t(_),0,l.length),d=fi(d),l.slice(_,_+d.length)==d}function $z(l,d,_){var L=W.templateSettings;_&&kn(l,d,_)&&(d=r),l=dr(l),d=th({},d,L,FR);var F=th({},d.imports,L.imports,FR),ee=ln(F),he=hg(F,ee),xe,we,We=0,je=d.interpolate||pa,rt="__p += '",ht=pg((d.escape||pa).source+"|"+je.source+"|"+(je===Qe?Xr:pa).source+"|"+(d.evaluate||pa).source+"|$","g"),yt="//# sourceURL="+(mr.call(d,"sourceURL")?(d.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++QK+"]")+`
`;l.replace(ht,function(Pt,jt,rr,di,Un,pi){return rr||(rr=di),rt+=l.slice(We,pi).replace(Jp,bV),jt&&(xe=!0,rt+=`' +
__e(`+jt+`) +
'`),Un&&(we=!0,rt+=`';
`+Un+`;
__p += '`),rr&&(rt+=`' +
((__t = (`+rr+`)) == null ? '' : __t) +
'`),We=pi+Pt.length,Pt}),rt+=`';
`;var Bt=mr.call(d,"variable")&&d.variable;if(!Bt)rt=`with (obj) {
`+rt+`
}
`;else if(kr.test(Bt))throw new Ft(o);rt=(we?rt.replace(Ae,""):rt).replace(Ne,"$1").replace(S,"$1;"),rt="function("+(Bt||"obj")+`) {
`+(Bt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(xe?", __e = _.escape":"")+(we?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+rt+`return __p
}`;var Ht=BC(function(){return fr(ee,yt+"return "+rt).apply(r,he)});if(Ht.source=rt,Zg(Ht))throw Ht;return Ht}function Hz(l){return dr(l).toLowerCase()}function qz(l){return dr(l).toUpperCase()}function Xz(l,d,_){if(l=dr(l),l&&(_||d===r))return G2(l);if(!l||!(d=fi(d)))return l;var L=Yi(l),F=Yi(d),ee=K2(L,F),he=V2(L,F)+1;return Aa(L,ee,he).join("")}function zz(l,d,_){if(l=dr(l),l&&(_||d===r))return l.slice(0,H2(l)+1);if(!l||!(d=fi(d)))return l;var L=Yi(l),F=V2(L,Yi(d))+1;return Aa(L,0,F).join("")}function Wz(l,d,_){if(l=dr(l),l&&(_||d===r))return l.replace(wt,"");if(!l||!(d=fi(d)))return l;var L=Yi(l),F=K2(L,Yi(d));return Aa(L,F).join("")}function jz(l,d){var _=M,L=$;if(Gr(d)){var F="separator"in d?d.separator:F;_="length"in d?$t(d.length):_,L="omission"in d?fi(d.omission):L}l=dr(l);var ee=l.length;if(Yo(l)){var he=Yi(l);ee=he.length}if(_>=ee)return l;var xe=_-Zo(L);if(xe<1)return L;var we=he?Aa(he,0,xe).join(""):l.slice(0,xe);if(F===r)return we+L;if(he&&(xe+=we.length-xe),Qg(F)){if(l.slice(xe).search(F)){var We,je=we;for(F.global||(F=pg(F.source,dr(Nr.exec(F))+"g")),F.lastIndex=0;We=F.exec(je);)var rt=We.index;we=we.slice(0,rt===r?xe:rt)}}else if(l.indexOf(fi(F),xe)!=xe){var ht=we.lastIndexOf(F);ht>-1&&(we=we.slice(0,ht))}return we+L}function Yz(l){return l=dr(l),l&&I.test(l)?l.replace(D,SV):l}var Zz=iu(function(l,d,_){return l+(_?" ":"")+d.toUpperCase()}),tm=PR("toUpperCase");function IC(l,d,_){return l=dr(l),d=_?r:d,d===r?vV(l)?wV(l):fV(l):l.match(d)||[]}var BC=Xt(function(l,d){try{return li(l,r,d)}catch(_){return Zg(_)?_:new Ft(_)}}),Qz=Gs(function(l,d){return Li(d,function(_){_=ms(_),Ns(l,_,jg(l[_],l))}),l});function Jz(l){var d=l==null?0:l.length,_=It();return l=d?Ur(l,function(L){if(typeof L[1]!="function")throw new Ii(n);return[_(L[0]),L[1]]}):[],Xt(function(L){for(var F=-1;++F<d;){var ee=l[F];if(li(ee[0],this,L))return li(ee[1],this,L)}})}function eW(l){return S$(Pi(l,h))}function rm(l){return function(){return l}}function tW(l,d){return l==null||l!==l?d:l}var rW=DR(),nW=DR(!0);function jn(l){return l}function nm(l){return cR(typeof l=="function"?l:Pi(l,h))}function iW(l){return hR(Pi(l,h))}function sW(l,d){return dR(l,Pi(d,h))}var aW=Xt(function(l,d){return function(_){return Al(_,l,d)}}),oW=Xt(function(l,d){return function(_){return Al(l,_,d)}});function im(l,d,_){var L=ln(d),F=Uf(d,L);_==null&&!(Gr(d)&&(F.length||!L.length))&&(_=d,d=l,l=this,F=Uf(d,ln(d)));var ee=!(Gr(_)&&"chain"in _)||!!_.chain,he=Vs(l);return Li(F,function(xe){var we=d[xe];l[xe]=we,he&&(l.prototype[xe]=function(){var We=this.__chain__;if(ee||We){var je=l(this.__wrapped__),rt=je.__actions__=Xn(this.__actions__);return rt.push({func:we,args:arguments,thisArg:l}),je.__chain__=We,je}return we.apply(l,ba([this.value()],arguments))})}),l}function uW(){return vn._===this&&(vn._=DV),this}function sm(){}function lW(l){return l=$t(l),Xt(function(d){return pR(d,l)})}var cW=Ug(Ur),fW=Ug(k2),hW=Ug(og);function PC(l){return $g(l)?ug(ms(l)):V$(l)}function dW(l){return function(d){return l==null?r:oo(l,d)}}var pW=UR(),gW=UR(!0);function am(){return[]}function om(){return!1}function mW(){return{}}function _W(){return""}function bW(){return!0}function xW(l,d){if(l=$t(l),l<1||l>le)return[];var _=Ee,L=Cn(l,Ee);d=It(d),l-=Ee;for(var F=fg(L,d);++_<l;)d(_);return F}function vW(l){return Vt(l)?Ur(l,ms):hi(l)?[l]:Xn(QR(dr(l)))}function EW(l){var d=++PV;return dr(l)+d}var yW=Vf(function(l,d){return l+d},0),TW=Mg("ceil"),AW=Vf(function(l,d){return l/d},1),SW=Mg("floor");function RW(l){return l&&l.length?kf(l,jn,yg):r}function CW(l,d){return l&&l.length?kf(l,It(d,2),yg):r}function wW(l){return N2(l,jn)}function LW(l,d){return N2(l,It(d,2))}function IW(l){return l&&l.length?kf(l,jn,Rg):r}function BW(l,d){return l&&l.length?kf(l,It(d,2),Rg):r}var PW=Vf(function(l,d){return l*d},1),OW=Mg("round"),DW=Vf(function(l,d){return l-d},0);function kW(l){return l&&l.length?cg(l,jn):0}function UW(l,d){return l&&l.length?cg(l,It(d,2)):0}return W.after=iX,W.ary=lC,W.assign=qX,W.assignIn=TC,W.assignInWith=th,W.assignWith=XX,W.at=zX,W.before=cC,W.bind=jg,W.bindAll=Qz,W.bindKey=fC,W.castArray=mX,W.chain=aC,W.chunk=SH,W.compact=RH,W.concat=CH,W.cond=Jz,W.conforms=eW,W.constant=rm,W.countBy=kq,W.create=WX,W.curry=hC,W.curryRight=dC,W.debounce=pC,W.defaults=jX,W.defaultsDeep=YX,W.defer=sX,W.delay=aX,W.difference=wH,W.differenceBy=LH,W.differenceWith=IH,W.drop=BH,W.dropRight=PH,W.dropRightWhile=OH,W.dropWhile=DH,W.fill=kH,W.filter=Mq,W.flatMap=Gq,W.flatMapDeep=Kq,W.flatMapDepth=Vq,W.flatten=rC,W.flattenDeep=UH,W.flattenDepth=MH,W.flip=oX,W.flow=rW,W.flowRight=nW,W.fromPairs=NH,W.functions=nz,W.functionsIn=iz,W.groupBy=$q,W.initial=GH,W.intersection=KH,W.intersectionBy=VH,W.intersectionWith=$H,W.invert=az,W.invertBy=oz,W.invokeMap=qq,W.iteratee=nm,W.keyBy=Xq,W.keys=ln,W.keysIn=Wn,W.map=jf,W.mapKeys=lz,W.mapValues=cz,W.matches=iW,W.matchesProperty=sW,W.memoize=Zf,W.merge=fz,W.mergeWith=AC,W.method=aW,W.methodOf=oW,W.mixin=im,W.negate=Qf,W.nthArg=lW,W.omit=hz,W.omitBy=dz,W.once=uX,W.orderBy=zq,W.over=cW,W.overArgs=lX,W.overEvery=fW,W.overSome=hW,W.partial=Yg,W.partialRight=gC,W.partition=Wq,W.pick=pz,W.pickBy=SC,W.property=PC,W.propertyOf=dW,W.pull=zH,W.pullAll=iC,W.pullAllBy=WH,W.pullAllWith=jH,W.pullAt=YH,W.range=pW,W.rangeRight=gW,W.rearg=cX,W.reject=Zq,W.remove=ZH,W.rest=fX,W.reverse=zg,W.sampleSize=Jq,W.set=mz,W.setWith=_z,W.shuffle=eX,W.slice=QH,W.sortBy=nX,W.sortedUniq=sq,W.sortedUniqBy=aq,W.split=Gz,W.spread=hX,W.tail=oq,W.take=uq,W.takeRight=lq,W.takeRightWhile=cq,W.takeWhile=fq,W.tap=Rq,W.throttle=dX,W.thru=Wf,W.toArray=vC,W.toPairs=RC,W.toPairsIn=CC,W.toPath=vW,W.toPlainObject=yC,W.transform=bz,W.unary=pX,W.union=hq,W.unionBy=dq,W.unionWith=pq,W.uniq=gq,W.uniqBy=mq,W.uniqWith=_q,W.unset=xz,W.unzip=Wg,W.unzipWith=sC,W.update=vz,W.updateWith=Ez,W.values=ou,W.valuesIn=yz,W.without=bq,W.words=IC,W.wrap=gX,W.xor=xq,W.xorBy=vq,W.xorWith=Eq,W.zip=yq,W.zipObject=Tq,W.zipObjectDeep=Aq,W.zipWith=Sq,W.entries=RC,W.entriesIn=CC,W.extend=TC,W.extendWith=th,im(W,W),W.add=yW,W.attempt=BC,W.camelCase=Rz,W.capitalize=wC,W.ceil=TW,W.clamp=Tz,W.clone=_X,W.cloneDeep=xX,W.cloneDeepWith=vX,W.cloneWith=bX,W.conformsTo=EX,W.deburr=LC,W.defaultTo=tW,W.divide=AW,W.endsWith=Cz,W.eq=Qi,W.escape=wz,W.escapeRegExp=Lz,W.every=Uq,W.find=Nq,W.findIndex=eC,W.findKey=ZX,W.findLast=Fq,W.findLastIndex=tC,W.findLastKey=QX,W.floor=SW,W.forEach=oC,W.forEachRight=uC,W.forIn=JX,W.forInRight=ez,W.forOwn=tz,W.forOwnRight=rz,W.get=Jg,W.gt=yX,W.gte=TX,W.has=sz,W.hasIn=em,W.head=nC,W.identity=jn,W.includes=Hq,W.indexOf=FH,W.inRange=Az,W.invoke=uz,W.isArguments=co,W.isArray=Vt,W.isArrayBuffer=AX,W.isArrayLike=zn,W.isArrayLikeObject=Jr,W.isBoolean=SX,W.isBuffer=Sa,W.isDate=RX,W.isElement=CX,W.isEmpty=wX,W.isEqual=LX,W.isEqualWith=IX,W.isError=Zg,W.isFinite=BX,W.isFunction=Vs,W.isInteger=mC,W.isLength=Jf,W.isMap=_C,W.isMatch=PX,W.isMatchWith=OX,W.isNaN=DX,W.isNative=kX,W.isNil=MX,W.isNull=UX,W.isNumber=bC,W.isObject=Gr,W.isObjectLike=zr,W.isPlainObject=Il,W.isRegExp=Qg,W.isSafeInteger=NX,W.isSet=xC,W.isString=eh,W.isSymbol=hi,W.isTypedArray=au,W.isUndefined=FX,W.isWeakMap=GX,W.isWeakSet=KX,W.join=HH,W.kebabCase=Iz,W.last=Di,W.lastIndexOf=qH,W.lowerCase=Bz,W.lowerFirst=Pz,W.lt=VX,W.lte=$X,W.max=RW,W.maxBy=CW,W.mean=wW,W.meanBy=LW,W.min=IW,W.minBy=BW,W.stubArray=am,W.stubFalse=om,W.stubObject=mW,W.stubString=_W,W.stubTrue=bW,W.multiply=PW,W.nth=XH,W.noConflict=uW,W.noop=sm,W.now=Yf,W.pad=Oz,W.padEnd=Dz,W.padStart=kz,W.parseInt=Uz,W.random=Sz,W.reduce=jq,W.reduceRight=Yq,W.repeat=Mz,W.replace=Nz,W.result=gz,W.round=OW,W.runInContext=Re,W.sample=Qq,W.size=tX,W.snakeCase=Fz,W.some=rX,W.sortedIndex=JH,W.sortedIndexBy=eq,W.sortedIndexOf=tq,W.sortedLastIndex=rq,W.sortedLastIndexBy=nq,W.sortedLastIndexOf=iq,W.startCase=Kz,W.startsWith=Vz,W.subtract=DW,W.sum=kW,W.sumBy=UW,W.template=$z,W.times=xW,W.toFinite=$s,W.toInteger=$t,W.toLength=EC,W.toLower=Hz,W.toNumber=ki,W.toSafeInteger=HX,W.toString=dr,W.toUpper=qz,W.trim=Xz,W.trimEnd=zz,W.trimStart=Wz,W.truncate=jz,W.unescape=Yz,W.uniqueId=EW,W.upperCase=Zz,W.upperFirst=tm,W.each=oC,W.eachRight=uC,W.first=nC,im(W,function(){var l={};return ps(W,function(d,_){mr.call(W.prototype,_)||(l[_]=d)}),l}(),{chain:!1}),W.VERSION=i,Li(["bind","bindKey","curry","curryRight","partial","partialRight"],function(l){W[l].placeholder=W}),Li(["drop","take"],function(l,d){Jt.prototype[l]=function(_){_=_===r?1:an($t(_),0);var L=this.__filtered__&&!d?new Jt(this):this.clone();return L.__filtered__?L.__takeCount__=Cn(_,L.__takeCount__):L.__views__.push({size:Cn(_,Ee),type:l+(L.__dir__<0?"Right":"")}),L},Jt.prototype[l+"Right"]=function(_){return this.reverse()[l](_).reverse()}}),Li(["filter","map","takeWhile"],function(l,d){var _=d+1,L=_==ce||_==J;Jt.prototype[l]=function(F){var ee=this.clone();return ee.__iteratees__.push({iteratee:It(F,3),type:_}),ee.__filtered__=ee.__filtered__||L,ee}}),Li(["head","last"],function(l,d){var _="take"+(d?"Right":"");Jt.prototype[l]=function(){return this[_](1).value()[0]}}),Li(["initial","tail"],function(l,d){var _="drop"+(d?"":"Right");Jt.prototype[l]=function(){return this.__filtered__?new Jt(this):this[_](1)}}),Jt.prototype.compact=function(){return this.filter(jn)},Jt.prototype.find=function(l){return this.filter(l).head()},Jt.prototype.findLast=function(l){return this.reverse().find(l)},Jt.prototype.invokeMap=Xt(function(l,d){return typeof l=="function"?new Jt(this):this.map(function(_){return Al(_,l,d)})}),Jt.prototype.reject=function(l){return this.filter(Qf(It(l)))},Jt.prototype.slice=function(l,d){l=$t(l);var _=this;return _.__filtered__&&(l>0||d<0)?new Jt(_):(l<0?_=_.takeRight(-l):l&&(_=_.drop(l)),d!==r&&(d=$t(d),_=d<0?_.dropRight(-d):_.take(d-l)),_)},Jt.prototype.takeRightWhile=function(l){return this.reverse().takeWhile(l).reverse()},Jt.prototype.toArray=function(){return this.take(Ee)},ps(Jt.prototype,function(l,d){var _=/^(?:filter|find|map|reject)|While$/.test(d),L=/^(?:head|last)$/.test(d),F=W[L?"take"+(d=="last"?"Right":""):d],ee=L||/^find/.test(d);F&&(W.prototype[d]=function(){var he=this.__wrapped__,xe=L?[1]:arguments,we=he instanceof Jt,We=xe[0],je=we||Vt(he),rt=function(jt){var rr=F.apply(W,ba([jt],xe));return L&&ht?rr[0]:rr};je&&_&&typeof We=="function"&&We.length!=1&&(we=je=!1);var ht=this.__chain__,yt=!!this.__actions__.length,Bt=ee&&!ht,Ht=we&&!yt;if(!ee&&je){he=Ht?he:new Jt(this);var Pt=l.apply(he,xe);return Pt.__actions__.push({func:Wf,args:[rt],thisArg:r}),new Bi(Pt,ht)}return Bt&&Ht?l.apply(this,xe):(Pt=this.thru(rt),Bt?L?Pt.value()[0]:Pt.value():Pt)})}),Li(["pop","push","shift","sort","splice","unshift"],function(l){var d=vf[l],_=/^(?:push|sort|unshift)$/.test(l)?"tap":"thru",L=/^(?:pop|shift)$/.test(l);W.prototype[l]=function(){var F=arguments;if(L&&!this.__chain__){var ee=this.value();return d.apply(Vt(ee)?ee:[],F)}return this[_](function(he){return d.apply(Vt(he)?he:[],F)})}}),ps(Jt.prototype,function(l,d){var _=W[d];if(_){var L=_.name+"";mr.call(tu,L)||(tu[L]=[]),tu[L].push({name:d,func:_})}}),tu[Kf(r,v).name]=[{name:"wrapper",func:r}],Jt.prototype.clone=YV,Jt.prototype.reverse=ZV,Jt.prototype.value=QV,W.prototype.at=Cq,W.prototype.chain=wq,W.prototype.commit=Lq,W.prototype.next=Iq,W.prototype.plant=Pq,W.prototype.reverse=Oq,W.prototype.toJSON=W.prototype.valueOf=W.prototype.value=Dq,W.prototype.first=W.prototype.head,_l&&(W.prototype[_l]=Bq),W},Qo=LV();ro?((ro.exports=Qo)._=Qo,ng._=Qo):vn._=Qo}).call(cte)}(Ql,Ql.exports)),Ql.exports}var hte=fte();const dte=or({props:{cancelText:String,classes:Object,messageLocation:String,shouldStart:Function,startText:String,gameStartedOptions:Object,canStart:{type:Boolean,default:!0},player:{type:Object,required:!0}},computed:{joinedCountText(){return this.$tc("LOBBY.JOINED_COUNT",this.player.joinedPlayers,{count:this.player.joinedPlayers,maxPlayers:this.player.maxPlayers})},localClasses(){var t,e,r;return{message:((t=this.classes)==null?void 0:t.message)??"message",status:((e=this.classes)==null?void 0:e.status)??"status",action:((r=this.classes)==null?void 0:r.action)??"action"}},neededText(){return this.$tc("LOBBY.PLAYERS_NEEDED",this.player.minPlayers-this.player.joinedPlayers)},waitingForVIPText(){return this.$t("LOBBY.WAITING_FOR_VIP",{name:this.player.vipName})}},methods:{async onCancelClick(){if(this.player.responseKey)try{await this.$ecast.updateObject(this.player.responseKey,{action:"cancel"})}catch(t){this.$handleEcastError(t)}},async onStartClick(){var t;if(this.player.responseKey&&this.canStart&&!(this.shouldStart&&!await Promise.resolve(this.shouldStart())))try{if(await this.$ecast.updateObject(this.player.responseKey,{action:"start"}),this.$ecastRoom.appTag){const e=this.gameStartedOptions||{};e.numberOfPlayer=this.player.joinedPlayers,e.locale=this.$ecastRoom.locale,(t=window.tv.analytics)==null||t.gameStarted(this.$ecastRoom.appTag,e)}}catch(e){this.$handleEcastError(e)}}}}),pte=["textContent"],gte=["disabled","textContent"],mte=["textContent"],_te=["textContent"];function bte(t,e,r,i,s,a){const n=ls("t");return Pe(),Ge("div",{class:kt(["lobby-actions",{vip:t.player.hasControls}])},[!t.messageLocation||t.messageLocation==="top"?(Pe(),Ge("p",{key:0,class:kt(t.localClasses.message),textContent:xt(t.joinedCountText)},null,10,pte)):Ot("",!0),Kh(t.$slots,"default"),t.player.hasControls?(Pe(),Ge(Wt,{key:1},[t.player.status==="waitingForMore"?(Pe(),Ge("p",{key:0,class:kt(t.localClasses.status)},xt(t.neededText),3)):Ot("",!0),t.player.status==="canStart"?(Pe(),Ge("button",{key:1,class:kt(t.localClasses.action),disabled:t.canStart===!1,onClick:e[0]||(e[0]=(...o)=>t.onStartClick&&t.onStartClick(...o)),textContent:xt(t.startText||t.$t("LOBBY.BUTTON_START"))},null,10,gte)):Ot("",!0),t.player.status==="countdown"?(Pe(),Ge("button",{key:2,class:kt(t.localClasses.action),onClick:e[1]||(e[1]=(...o)=>t.onCancelClick&&t.onCancelClick(...o)),textContent:xt(t.cancelText||t.$t("LOBBY.BUTTON_CANCEL"))},null,10,mte)):Ot("",!0)],64)):t.player.gamepadStart?(Pe(),Ge(Wt,{key:2},[t.player.status==="waitingForMore"?(Pe(),Ge("p",{key:0,class:kt(t.localClasses.status)},xt(t.neededText),3)):Ot("",!0),t.player.status==="canStart"?gr((Pe(),Ge("p",{key:1,class:kt(t.localClasses.status)},null,2)),[[n,"LOBBY.WAITING_FOR_GAMEPAD"]]):Ot("",!0),t.player.status==="countdown"?gr((Pe(),Ge("p",{key:2,class:kt(t.localClasses.status)},null,2)),[[n,"LOBBY.GAME_STARTING"]]):Ot("",!0)],64)):(Pe(),Ge(Wt,{key:3},[t.player.status==="waitingForMore"?(Pe(),Ge("p",{key:0,class:kt(t.localClasses.status)},xt(t.neededText),3)):Ot("",!0),t.player.status==="canStart"?(Pe(),Ge("p",{key:1,class:kt(t.localClasses.status)},xt(t.waitingForVIPText),3)):Ot("",!0),t.player.status==="countdown"?gr((Pe(),Ge("p",{key:2,class:kt(t.localClasses.status)},null,2)),[[n,"LOBBY.GAME_STARTING"]]):Ot("",!0)],64)),t.messageLocation==="bottom"?(Pe(),Ge("p",{key:4,class:kt(t.localClasses.message),textContent:xt(t.joinedCountText)},null,10,_te)):Ot("",!0)],2)}const xte=er(dte,[["render",bte]]),vte=or({props:{modelValue:String,sanitizers:Array},emits:{"update:modelValue":t=>!0},watch:{modelValue(t,e){if(t!==e){const r=this.$refs.input;r.value=t}}},methods:{focus(){this.$refs.input.focus()},async onInput(t){const e=t.target,r=e.maxLength===-1?Number.MAX_SAFE_INTEGER:e.maxLength;if(this.sanitizers&&(e.value=bJ.withTypes(e.value,[...this.sanitizers])),e.value.length>r){e.value=e.value.substring(0,r);return}this.$emit("update:modelValue",e.value),await this.$nextTick(),e.value!==this.modelValue&&(e.value=this.modelValue)}}}),Ete=["value"];function yte(t,e,r,i,s,a){return Pe(),Ge("input",{ref:"input",value:t.modelValue,onInput:e[0]||(e[0]=(...n)=>t.onInput&&t.onInput(...n))},null,40,Ete)}const Tte=er(vte,[["render",yte]]);var cc=new Map;function Ate(t){var e=cc.get(t);e&&e.destroy()}function Ste(t){var e=cc.get(t);e&&e.update()}var ch=null;typeof window>"u"?((ch=function(t){return t}).destroy=function(t){return t},ch.update=function(t){return t}):((ch=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(r){return function(i){if(i&&i.nodeName&&i.nodeName==="TEXTAREA"&&!cc.has(i)){var s,a=null,n=window.getComputedStyle(i),o=(s=i.value,function(){c({testForHeightReduction:s===""||!i.value.startsWith(s),restoreTextAlign:null}),s=i.value}),u=(function(h){i.removeEventListener("autosize:destroy",u),i.removeEventListener("autosize:update",f),i.removeEventListener("input",o),window.removeEventListener("resize",f),Object.keys(h).forEach(function(p){return i.style[p]=h[p]}),cc.delete(i)}).bind(i,{height:i.style.height,resize:i.style.resize,textAlign:i.style.textAlign,overflowY:i.style.overflowY,overflowX:i.style.overflowX,wordWrap:i.style.wordWrap});i.addEventListener("autosize:destroy",u),i.addEventListener("autosize:update",f),i.addEventListener("input",o),window.addEventListener("resize",f),i.style.overflowX="hidden",i.style.wordWrap="break-word",cc.set(i,{destroy:u,update:f}),f()}function c(h){var p,g,m=h.restoreTextAlign,T=m===void 0?null:m,x=h.testForHeightReduction,v=x===void 0||x,y=n.overflowY;if(i.scrollHeight!==0&&(n.resize==="vertical"?i.style.resize="none":n.resize==="both"&&(i.style.resize="horizontal"),v&&(p=function(A){for(var k=[];A&&A.parentNode&&A.parentNode instanceof Element;)A.parentNode.scrollTop&&k.push([A.parentNode,A.parentNode.scrollTop]),A=A.parentNode;return function(){return k.forEach(function(b){var C=b[0],w=b[1];C.style.scrollBehavior="auto",C.scrollTop=w,C.style.scrollBehavior=null})}}(i),i.style.height=""),g=n.boxSizing==="content-box"?i.scrollHeight-(parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)):i.scrollHeight+parseFloat(n.borderTopWidth)+parseFloat(n.borderBottomWidth),n.maxHeight!=="none"&&g>parseFloat(n.maxHeight)?(n.overflowY==="hidden"&&(i.style.overflow="scroll"),g=parseFloat(n.maxHeight)):n.overflowY!=="hidden"&&(i.style.overflow="hidden"),i.style.height=g+"px",T&&(i.style.textAlign=T),p&&p(),a!==g&&(i.dispatchEvent(new Event("autosize:resized",{bubbles:!0})),a=g),y!==n.overflow&&!T)){var R=n.textAlign;n.overflow==="hidden"&&(i.style.textAlign=R==="start"?"end":"start"),c({restoreTextAlign:R,testForHeightReduction:!0})}}function f(){c({testForHeightReduction:!0,restoreTextAlign:null})}}(r)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],Ate),t},ch.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],Ste),t});var UI={},MI={},Ol,NI;function ai(){if(NI)return Ol;NI=1;var t=function(e){return e&&e.Math===Math&&e};return Ol=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof $r=="object"&&$r)||t(typeof Ol=="object"&&Ol)||function(){return this}()||Function("return this")(),Ol}var Sb={},Rb,FI;function Ti(){return FI||(FI=1,Rb=function(t){try{return!!t()}catch{return!0}}),Rb}var Cb,GI;function Wa(){if(GI)return Cb;GI=1;var t=Ti();return Cb=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Cb}var wb,KI;function MT(){if(KI)return wb;KI=1;var t=Ti();return wb=!t(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),wb}var Lb,VI;function ha(){if(VI)return Lb;VI=1;var t=MT(),e=Function.prototype.call;return Lb=t?e.bind(e):function(){return e.apply(e,arguments)},Lb}var Ib={},$I;function Rte(){if($I)return Ib;$I=1;var t={}.propertyIsEnumerable,e=Object.getOwnPropertyDescriptor,r=e&&!t.call({1:2},1);return Ib.f=r?function(s){var a=e(this,s);return!!a&&a.enumerable}:t,Ib}var Bb,HI;function U4(){return HI||(HI=1,Bb=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}),Bb}var Pb,qI;function qn(){if(qI)return Pb;qI=1;var t=MT(),e=Function.prototype,r=e.call,i=t&&e.bind.bind(r,r);return Pb=t?i:function(s){return function(){return r.apply(s,arguments)}},Pb}var Ob,XI;function np(){if(XI)return Ob;XI=1;var t=qn(),e=t({}.toString),r=t("".slice);return Ob=function(i){return r(e(i),8,-1)},Ob}var Db,zI;function Cte(){if(zI)return Db;zI=1;var t=qn(),e=Ti(),r=np(),i=Object,s=t("".split);return Db=e(function(){return!i("z").propertyIsEnumerable(0)})?function(a){return r(a)==="String"?s(a,""):i(a)}:i,Db}var kb,WI;function ip(){return WI||(WI=1,kb=function(t){return t==null}),kb}var Ub,jI;function tf(){if(jI)return Ub;jI=1;var t=ip(),e=TypeError;return Ub=function(r){if(t(r))throw new e("Can't call method on "+r);return r},Ub}var Mb,YI;function sp(){if(YI)return Mb;YI=1;var t=Cte(),e=tf();return Mb=function(r){return t(e(r))},Mb}var Nb,ZI;function oi(){if(ZI)return Nb;ZI=1;var t=typeof document=="object"&&document.all;return Nb=typeof t>"u"&&t!==void 0?function(e){return typeof e=="function"||e===t}:function(e){return typeof e=="function"},Nb}var Fb,QI;function al(){if(QI)return Fb;QI=1;var t=oi();return Fb=function(e){return typeof e=="object"?e!==null:t(e)},Fb}var Gb,JI;function NT(){if(JI)return Gb;JI=1;var t=ai(),e=oi(),r=function(i){return e(i)?i:void 0};return Gb=function(i,s){return arguments.length<2?r(t[i]):t[i]&&t[i][s]},Gb}var Kb,eB;function M4(){if(eB)return Kb;eB=1;var t=qn();return Kb=t({}.isPrototypeOf),Kb}var Vb,tB;function wte(){return tB||(tB=1,Vb=typeof navigator<"u"&&String(navigator.userAgent)||""),Vb}var $b,rB;function Lte(){if(rB)return $b;rB=1;var t=ai(),e=wte(),r=t.process,i=t.Deno,s=r&&r.versions||i&&i.version,a=s&&s.v8,n,o;return a&&(n=a.split("."),o=n[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&e&&(n=e.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=e.match(/Chrome\/(\d+)/),n&&(o=+n[1]))),$b=o,$b}var Hb,nB;function N4(){if(nB)return Hb;nB=1;var t=Lte(),e=Ti(),r=ai(),i=r.String;return Hb=!!Object.getOwnPropertySymbols&&!e(function(){var s=Symbol("symbol detection");return!i(s)||!(Object(s)instanceof Symbol)||!Symbol.sham&&t&&t<41}),Hb}var qb,iB;function F4(){if(iB)return qb;iB=1;var t=N4();return qb=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol",qb}var Xb,sB;function G4(){if(sB)return Xb;sB=1;var t=NT(),e=oi(),r=M4(),i=F4(),s=Object;return Xb=i?function(a){return typeof a=="symbol"}:function(a){var n=t("Symbol");return e(n)&&r(n.prototype,s(a))},Xb}var zb,aB;function Ite(){if(aB)return zb;aB=1;var t=String;return zb=function(e){try{return t(e)}catch{return"Object"}},zb}var Wb,oB;function Bte(){if(oB)return Wb;oB=1;var t=oi(),e=Ite(),r=TypeError;return Wb=function(i){if(t(i))return i;throw new r(e(i)+" is not a function")},Wb}var jb,uB;function FT(){if(uB)return jb;uB=1;var t=Bte(),e=ip();return jb=function(r,i){var s=r[i];return e(s)?void 0:t(s)},jb}var Yb,lB;function Pte(){if(lB)return Yb;lB=1;var t=ha(),e=oi(),r=al(),i=TypeError;return Yb=function(s,a){var n,o;if(a==="string"&&e(n=s.toString)&&!r(o=t(n,s))||e(n=s.valueOf)&&!r(o=t(n,s))||a!=="string"&&e(n=s.toString)&&!r(o=t(n,s)))return o;throw new i("Can't convert object to primitive value")},Yb}var Zb={exports:{}},Qb,cB;function K4(){return cB||(cB=1,Qb=!1),Qb}var Jb,fB;function GT(){if(fB)return Jb;fB=1;var t=ai(),e=Object.defineProperty;return Jb=function(r,i){try{e(t,r,{value:i,configurable:!0,writable:!0})}catch{t[r]=i}return i},Jb}var hB;function KT(){if(hB)return Zb.exports;hB=1;var t=K4(),e=ai(),r=GT(),i="__core-js_shared__",s=Zb.exports=e[i]||r(i,{});return(s.versions||(s.versions=[])).push({version:"3.37.1",mode:t?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.1/LICENSE",source:"https://github.com/zloirock/core-js"}),Zb.exports}var ex,dB;function VT(){if(dB)return ex;dB=1;var t=KT();return ex=function(e,r){return t[e]||(t[e]=r||{})},ex}var tx,pB;function V4(){if(pB)return tx;pB=1;var t=tf(),e=Object;return tx=function(r){return e(t(r))},tx}var rx,gB;function ja(){if(gB)return rx;gB=1;var t=qn(),e=V4(),r=t({}.hasOwnProperty);return rx=Object.hasOwn||function(s,a){return r(e(s),a)},rx}var nx,mB;function $4(){if(mB)return nx;mB=1;var t=qn(),e=0,r=Math.random(),i=t(1 .toString);return nx=function(s){return"Symbol("+(s===void 0?"":s)+")_"+i(++e+r,36)},nx}var ix,_B;function $o(){if(_B)return ix;_B=1;var t=ai(),e=VT(),r=ja(),i=$4(),s=N4(),a=F4(),n=t.Symbol,o=e("wks"),u=a?n.for||n:n&&n.withoutSetter||i;return ix=function(c){return r(o,c)||(o[c]=s&&r(n,c)?n[c]:u("Symbol."+c)),o[c]},ix}var sx,bB;function Ote(){if(bB)return sx;bB=1;var t=ha(),e=al(),r=G4(),i=FT(),s=Pte(),a=$o(),n=TypeError,o=a("toPrimitive");return sx=function(u,c){if(!e(u)||r(u))return u;var f=i(u,o),h;if(f){if(c===void 0&&(c="default"),h=t(f,u,c),!e(h)||r(h))return h;throw new n("Can't convert object to primitive value")}return c===void 0&&(c="number"),s(u,c)},sx}var ax,xB;function H4(){if(xB)return ax;xB=1;var t=Ote(),e=G4();return ax=function(r){var i=t(r,"string");return e(i)?i:i+""},ax}var ox,vB;function q4(){if(vB)return ox;vB=1;var t=ai(),e=al(),r=t.document,i=e(r)&&e(r.createElement);return ox=function(s){return i?r.createElement(s):{}},ox}var ux,EB;function X4(){if(EB)return ux;EB=1;var t=Wa(),e=Ti(),r=q4();return ux=!t&&!e(function(){return Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a!==7}),ux}var yB;function z4(){if(yB)return Sb;yB=1;var t=Wa(),e=ha(),r=Rte(),i=U4(),s=sp(),a=H4(),n=ja(),o=X4(),u=Object.getOwnPropertyDescriptor;return Sb.f=t?u:function(f,h){if(f=s(f),h=a(h),o)try{return u(f,h)}catch{}if(n(f,h))return i(!e(r.f,f,h),f[h])},Sb}var lx={},cx,TB;function W4(){if(TB)return cx;TB=1;var t=Wa(),e=Ti();return cx=t&&e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),cx}var fx,AB;function Ho(){if(AB)return fx;AB=1;var t=al(),e=String,r=TypeError;return fx=function(i){if(t(i))return i;throw new r(e(i)+" is not an object")},fx}var SB;function ap(){if(SB)return lx;SB=1;var t=Wa(),e=X4(),r=W4(),i=Ho(),s=H4(),a=TypeError,n=Object.defineProperty,o=Object.getOwnPropertyDescriptor,u="enumerable",c="configurable",f="writable";return lx.f=t?r?function(p,g,m){if(i(p),g=s(g),i(m),typeof p=="function"&&g==="prototype"&&"value"in m&&f in m&&!m[f]){var T=o(p,g);T&&T[f]&&(p[g]=m.value,m={configurable:c in m?m[c]:T[c],enumerable:u in m?m[u]:T[u],writable:!1})}return n(p,g,m)}:n:function(p,g,m){if(i(p),g=s(g),i(m),e)try{return n(p,g,m)}catch{}if("get"in m||"set"in m)throw new a("Accessors not supported");return"value"in m&&(p[g]=m.value),p},lx}var hx,RB;function $T(){if(RB)return hx;RB=1;var t=Wa(),e=ap(),r=U4();return hx=t?function(i,s,a){return e.f(i,s,r(1,a))}:function(i,s,a){return i[s]=a,i},hx}var dx={exports:{}},px,CB;function Dte(){if(CB)return px;CB=1;var t=Wa(),e=ja(),r=Function.prototype,i=t&&Object.getOwnPropertyDescriptor,s=e(r,"name"),a=s&&(function(){}).name==="something",n=s&&(!t||t&&i(r,"name").configurable);return px={EXISTS:s,PROPER:a,CONFIGURABLE:n},px}var gx,wB;function kte(){if(wB)return gx;wB=1;var t=qn(),e=oi(),r=KT(),i=t(Function.toString);return e(r.inspectSource)||(r.inspectSource=function(s){return i(s)}),gx=r.inspectSource,gx}var mx,LB;function Ute(){if(LB)return mx;LB=1;var t=ai(),e=oi(),r=t.WeakMap;return mx=e(r)&&/native code/.test(String(r)),mx}var _x,IB;function j4(){if(IB)return _x;IB=1;var t=VT(),e=$4(),r=t("keys");return _x=function(i){return r[i]||(r[i]=e(i))},_x}var bx,BB;function HT(){return BB||(BB=1,bx={}),bx}var xx,PB;function Y4(){if(PB)return xx;PB=1;var t=Ute(),e=ai(),r=al(),i=$T(),s=ja(),a=KT(),n=j4(),o=HT(),u="Object already initialized",c=e.TypeError,f=e.WeakMap,h,p,g,m=function(y){return g(y)?p(y):h(y,{})},T=function(y){return function(R){var A;if(!r(R)||(A=p(R)).type!==y)throw new c("Incompatible receiver, "+y+" required");return A}};if(t||a.state){var x=a.state||(a.state=new f);x.get=x.get,x.has=x.has,x.set=x.set,h=function(y,R){if(x.has(y))throw new c(u);return R.facade=y,x.set(y,R),R},p=function(y){return x.get(y)||{}},g=function(y){return x.has(y)}}else{var v=n("state");o[v]=!0,h=function(y,R){if(s(y,v))throw new c(u);return R.facade=y,i(y,v,R),R},p=function(y){return s(y,v)?y[v]:{}},g=function(y){return s(y,v)}}return xx={set:h,get:p,has:g,enforce:m,getterFor:T},xx}var OB;function Mte(){if(OB)return dx.exports;OB=1;var t=qn(),e=Ti(),r=oi(),i=ja(),s=Wa(),a=Dte().CONFIGURABLE,n=kte(),o=Y4(),u=o.enforce,c=o.get,f=String,h=Object.defineProperty,p=t("".slice),g=t("".replace),m=t([].join),T=s&&!e(function(){return h(function(){},"length",{value:8}).length!==8}),x=String(String).split("String"),v=dx.exports=function(y,R,A){p(f(R),0,7)==="Symbol("&&(R="["+g(f(R),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),A&&A.getter&&(R="get "+R),A&&A.setter&&(R="set "+R),(!i(y,"name")||a&&y.name!==R)&&(s?h(y,"name",{value:R,configurable:!0}):y.name=R),T&&A&&i(A,"arity")&&y.length!==A.arity&&h(y,"length",{value:A.arity});try{A&&i(A,"constructor")&&A.constructor?s&&h(y,"prototype",{writable:!1}):y.prototype&&(y.prototype=void 0)}catch{}var k=u(y);return i(k,"source")||(k.source=m(x,typeof R=="string"?R:"")),y};return Function.prototype.toString=v(function(){return r(this)&&c(this).source||n(this)},"toString"),dx.exports}var vx,DB;function Z4(){if(DB)return vx;DB=1;var t=oi(),e=ap(),r=Mte(),i=GT();return vx=function(s,a,n,o){o||(o={});var u=o.enumerable,c=o.name!==void 0?o.name:a;if(t(n)&&r(n,c,o),o.global)u?s[a]=n:i(a,n);else{try{o.unsafe?s[a]&&(u=!0):delete s[a]}catch{}u?s[a]=n:e.f(s,a,{value:n,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return s},vx}var Ex={},yx,kB;function Nte(){if(kB)return yx;kB=1;var t=Math.ceil,e=Math.floor;return yx=Math.trunc||function(i){var s=+i;return(s>0?e:t)(s)},yx}var Tx,UB;function op(){if(UB)return Tx;UB=1;var t=Nte();return Tx=function(e){var r=+e;return r!==r||r===0?0:t(r)},Tx}var Ax,MB;function Fte(){if(MB)return Ax;MB=1;var t=op(),e=Math.max,r=Math.min;return Ax=function(i,s){var a=t(i);return a<0?e(a+s,0):r(a,s)},Ax}var Sx,NB;function Q4(){if(NB)return Sx;NB=1;var t=op(),e=Math.min;return Sx=function(r){var i=t(r);return i>0?e(i,9007199254740991):0},Sx}var Rx,FB;function Gte(){if(FB)return Rx;FB=1;var t=Q4();return Rx=function(e){return t(e.length)},Rx}var Cx,GB;function Kte(){if(GB)return Cx;GB=1;var t=sp(),e=Fte(),r=Gte(),i=function(s){return function(a,n,o){var u=t(a),c=r(u);if(c===0)return!s&&-1;var f=e(o,c),h;if(s&&n!==n){for(;c>f;)if(h=u[f++],h!==h)return!0}else for(;c>f;f++)if((s||f in u)&&u[f]===n)return s||f||0;return!s&&-1}};return Cx={includes:i(!0),indexOf:i(!1)},Cx}var wx,KB;function J4(){if(KB)return wx;KB=1;var t=qn(),e=ja(),r=sp(),i=Kte().indexOf,s=HT(),a=t([].push);return wx=function(n,o){var u=r(n),c=0,f=[],h;for(h in u)!e(s,h)&&e(u,h)&&a(f,h);for(;o.length>c;)e(u,h=o[c++])&&(~i(f,h)||a(f,h));return f},wx}var Lx,VB;function qT(){return VB||(VB=1,Lx=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),Lx}var $B;function Vte(){if($B)return Ex;$B=1;var t=J4(),e=qT(),r=e.concat("length","prototype");return Ex.f=Object.getOwnPropertyNames||function(s){return t(s,r)},Ex}var Ix={},HB;function $te(){return HB||(HB=1,Ix.f=Object.getOwnPropertySymbols),Ix}var Bx,qB;function Hte(){if(qB)return Bx;qB=1;var t=NT(),e=qn(),r=Vte(),i=$te(),s=Ho(),a=e([].concat);return Bx=t("Reflect","ownKeys")||function(o){var u=r.f(s(o)),c=i.f;return c?a(u,c(o)):u},Bx}var Px,XB;function qte(){if(XB)return Px;XB=1;var t=ja(),e=Hte(),r=z4(),i=ap();return Px=function(s,a,n){for(var o=e(a),u=i.f,c=r.f,f=0;f<o.length;f++){var h=o[f];!t(s,h)&&!(n&&t(n,h))&&u(s,h,c(a,h))}},Px}var Ox,zB;function Xte(){if(zB)return Ox;zB=1;var t=Ti(),e=oi(),r=/#|\.prototype\./,i=function(u,c){var f=a[s(u)];return f===o?!0:f===n?!1:e(c)?t(c):!!c},s=i.normalize=function(u){return String(u).replace(r,".").toLowerCase()},a=i.data={},n=i.NATIVE="N",o=i.POLYFILL="P";return Ox=i,Ox}var Dx,WB;function eN(){if(WB)return Dx;WB=1;var t=ai(),e=z4().f,r=$T(),i=Z4(),s=GT(),a=qte(),n=Xte();return Dx=function(o,u){var c=o.target,f=o.global,h=o.stat,p,g,m,T,x,v;if(f?g=t:h?g=t[c]||s(c,{}):g=t[c]&&t[c].prototype,g)for(m in u){if(x=u[m],o.dontCallGetSet?(v=e(g,m),T=v&&v.value):T=g[m],p=n(f?m:c+(h?".":"#")+m,o.forced),!p&&T!==void 0){if(typeof x==typeof T)continue;a(x,T)}(o.sham||T&&T.sham)&&r(x,"sham",!0),i(g,m,x,o)}},Dx}var kx,jB;function zte(){if(jB)return kx;jB=1;var t=al(),e=np(),r=$o(),i=r("match");return kx=function(s){var a;return t(s)&&((a=s[i])!==void 0?!!a:e(s)==="RegExp")},kx}var Ux,YB;function Wte(){if(YB)return Ux;YB=1;var t=$o(),e=t("toStringTag"),r={};return r[e]="z",Ux=String(r)==="[object z]",Ux}var Mx,ZB;function jte(){if(ZB)return Mx;ZB=1;var t=Wte(),e=oi(),r=np(),i=$o(),s=i("toStringTag"),a=Object,n=r(function(){return arguments}())==="Arguments",o=function(u,c){try{return u[c]}catch{}};return Mx=t?r:function(u){var c,f,h;return u===void 0?"Undefined":u===null?"Null":typeof(f=o(c=a(u),s))=="string"?f:n?r(c):(h=r(c))==="Object"&&e(c.callee)?"Arguments":h},Mx}var Nx,QB;function up(){if(QB)return Nx;QB=1;var t=jte(),e=String;return Nx=function(r){if(t(r)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return e(r)},Nx}var Fx,JB;function tN(){if(JB)return Fx;JB=1;var t=Ho();return Fx=function(){var e=t(this),r="";return e.hasIndices&&(r+="d"),e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.unicodeSets&&(r+="v"),e.sticky&&(r+="y"),r},Fx}var Gx,eP;function Yte(){if(eP)return Gx;eP=1;var t=ha(),e=ja(),r=M4(),i=tN(),s=RegExp.prototype;return Gx=function(a){var n=a.flags;return n===void 0&&!("flags"in s)&&!e(a,"flags")&&r(s,a)?t(i,a):n},Gx}var Kx,tP;function rN(){if(tP)return Kx;tP=1;var t=qn(),e=V4(),r=Math.floor,i=t("".charAt),s=t("".replace),a=t("".slice),n=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,o=/\$([$&'`]|\d{1,2})/g;return Kx=function(u,c,f,h,p,g){var m=f+u.length,T=h.length,x=o;return p!==void 0&&(p=e(p),x=n),s(g,x,function(v,y){var R;switch(i(y,0)){case"$":return"$";case"&":return u;case"`":return a(c,0,f);case"'":return a(c,m);case"<":R=p[a(y,1,-1)];break;default:var A=+y;if(A===0)return v;if(A>T){var k=r(A/10);return k===0?v:k<=T?h[k-1]===void 0?i(y,1):h[k-1]+i(y,1):v}R=h[A-1]}return R===void 0?"":R})},Kx}var rP;function nN(){if(rP)return MI;rP=1;var t=eN(),e=ha(),r=qn(),i=tf(),s=oi(),a=ip(),n=zte(),o=up(),u=FT(),c=Yte(),f=rN(),h=$o(),p=K4(),g=h("replace"),m=TypeError,T=r("".indexOf),x=r("".replace),v=r("".slice),y=Math.max;return t({target:"String",proto:!0},{replaceAll:function(A,k){var b=i(this),C,w,O,M,$,G,Z,ce,Y,J=0,ie=0,le="";if(!a(A)){if(C=n(A),C&&(w=o(i(c(A))),!~T(w,"g")))throw new m("`.replaceAll` does not allow non-global regexes");if(O=u(A,g),O)return e(O,A,b,k);if(p&&C)return x(o(b),A,k)}for(M=o(b),$=o(A),G=s(k),G||(k=o(k)),Z=$.length,ce=y(1,Z),J=T(M,$);J!==-1;)Y=G?o(k($,J,M)):f($,M,J,[],void 0,k),le+=v(M,ie,J)+Y,ie=J+Z,J=J+ce>M.length?-1:T(M,$,J+ce);return ie<M.length&&(le+=v(M,ie)),le}}),MI}var nP;function Zte(){return nP||(nP=1,nN()),UI}var iP={},Vx,sP;function Qte(){if(sP)return Vx;sP=1;var t=Ti(),e=ai(),r=e.RegExp,i=t(function(){var n=r("a","y");return n.lastIndex=2,n.exec("abcd")!==null}),s=i||t(function(){return!r("a","y").sticky}),a=i||t(function(){var n=r("^r","gy");return n.lastIndex=2,n.exec("str")!==null});return Vx={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:i},Vx}var $x={},Hx,aP;function Jte(){if(aP)return Hx;aP=1;var t=J4(),e=qT();return Hx=Object.keys||function(i){return t(i,e)},Hx}var oP;function ere(){if(oP)return $x;oP=1;var t=Wa(),e=W4(),r=ap(),i=Ho(),s=sp(),a=Jte();return $x.f=t&&!e?Object.defineProperties:function(o,u){i(o);for(var c=s(u),f=a(u),h=f.length,p=0,g;h>p;)r.f(o,g=f[p++],c[g]);return o},$x}var qx,uP;function tre(){if(uP)return qx;uP=1;var t=NT();return qx=t("document","documentElement"),qx}var Xx,lP;function rre(){if(lP)return Xx;lP=1;var t=Ho(),e=ere(),r=qT(),i=HT(),s=tre(),a=q4(),n=j4(),o=">",u="<",c="prototype",f="script",h=n("IE_PROTO"),p=function(){},g=function(y){return u+f+o+y+u+"/"+f+o},m=function(y){y.write(g("")),y.close();var R=y.parentWindow.Object;return y=null,R},T=function(){var y=a("iframe"),R="java"+f+":",A;return y.style.display="none",s.appendChild(y),y.src=String(R),A=y.contentWindow.document,A.open(),A.write(g("document.F=Object")),A.close(),A.F},x,v=function(){try{x=new ActiveXObject("htmlfile")}catch{}v=typeof document<"u"?document.domain&&x?m(x):T():m(x);for(var y=r.length;y--;)delete v[c][r[y]];return v()};return i[h]=!0,Xx=Object.create||function(R,A){var k;return R!==null?(p[c]=t(R),k=new p,p[c]=null,k[h]=R):k=v(),A===void 0?k:e.f(k,A)},Xx}var zx,cP;function nre(){if(cP)return zx;cP=1;var t=Ti(),e=ai(),r=e.RegExp;return zx=t(function(){var i=r(".","s");return!(i.dotAll&&i.test(`
`)&&i.flags==="s")}),zx}var Wx,fP;function ire(){if(fP)return Wx;fP=1;var t=Ti(),e=ai(),r=e.RegExp;return Wx=t(function(){var i=r("(?<a>b)","g");return i.exec("b").groups.a!=="b"||"b".replace(i,"$<a>c")!=="bc"}),Wx}var jx,hP;function XT(){if(hP)return jx;hP=1;var t=ha(),e=qn(),r=up(),i=tN(),s=Qte(),a=VT(),n=rre(),o=Y4().get,u=nre(),c=ire(),f=a("native-string-replace",String.prototype.replace),h=RegExp.prototype.exec,p=h,g=e("".charAt),m=e("".indexOf),T=e("".replace),x=e("".slice),v=function(){var k=/a/,b=/b*/g;return t(h,k,"a"),t(h,b,"a"),k.lastIndex!==0||b.lastIndex!==0}(),y=s.BROKEN_CARET,R=/()??/.exec("")[1]!==void 0,A=v||R||y||u||c;return A&&(p=function(b){var C=this,w=o(C),O=r(b),M=w.raw,$,G,Z,ce,Y,J,ie;if(M)return M.lastIndex=C.lastIndex,$=t(p,M,O),C.lastIndex=M.lastIndex,$;var le=w.groups,Te=y&&C.sticky,Me=t(i,C),Ee=C.source,se=0,me=O;if(Te&&(Me=T(Me,"y",""),m(Me,"g")===-1&&(Me+="g"),me=x(O,C.lastIndex),C.lastIndex>0&&(!C.multiline||C.multiline&&g(O,C.lastIndex-1)!==`
`)&&(Ee="(?: "+Ee+")",me=" "+me,se++),G=new RegExp("^(?:"+Ee+")",Me)),R&&(G=new RegExp("^"+Ee+"$(?!\\s)",Me)),v&&(Z=C.lastIndex),ce=t(h,Te?G:C,me),Te?ce?(ce.input=x(ce.input,se),ce[0]=x(ce[0],se),ce.index=C.lastIndex,C.lastIndex+=ce[0].length):C.lastIndex=0:v&&ce&&(C.lastIndex=C.global?ce.index+ce[0].length:Z),R&&ce&&ce.length>1&&t(f,ce[0],G,function(){for(Y=1;Y<arguments.length-2;Y++)arguments[Y]===void 0&&(ce[Y]=void 0)}),ce&&le)for(ce.groups=J=n(null),Y=0;Y<le.length;Y++)ie=le[Y],J[ie[0]]=ce[ie[1]];return ce}),jx=p,jx}var dP;function iN(){if(dP)return iP;dP=1;var t=eN(),e=XT();return t({target:"RegExp",proto:!0,forced:/./.exec!==e},{exec:e}),iP}var pP={},Yx,gP;function sre(){if(gP)return Yx;gP=1;var t=MT(),e=Function.prototype,r=e.apply,i=e.call;return Yx=typeof Reflect=="object"&&Reflect.apply||(t?i.bind(r):function(){return i.apply(r,arguments)}),Yx}var Zx,mP;function are(){if(mP)return Zx;mP=1,iN();var t=ha(),e=Z4(),r=XT(),i=Ti(),s=$o(),a=$T(),n=s("species"),o=RegExp.prototype;return Zx=function(u,c,f,h){var p=s(u),g=!i(function(){var v={};return v[p]=function(){return 7},""[u](v)!==7}),m=g&&!i(function(){var v=!1,y=/a/;return u==="split"&&(y={},y.constructor={},y.constructor[n]=function(){return y},y.flags="",y[p]=/./[p]),y.exec=function(){return v=!0,null},y[p](""),!v});if(!g||!m||f){var T=/./[p],x=c(p,""[u],function(v,y,R,A,k){var b=y.exec;return b===r||b===o.exec?g&&!k?{done:!0,value:t(T,y,R,A)}:{done:!0,value:t(v,R,y,A)}:{done:!1}});e(String.prototype,u,x[0]),e(o,p,x[1])}h&&a(o[p],"sham",!0)},Zx}var Qx,_P;function ore(){if(_P)return Qx;_P=1;var t=qn(),e=op(),r=up(),i=tf(),s=t("".charAt),a=t("".charCodeAt),n=t("".slice),o=function(u){return function(c,f){var h=r(i(c)),p=e(f),g=h.length,m,T;return p<0||p>=g?u?"":void 0:(m=a(h,p),m<55296||m>56319||p+1===g||(T=a(h,p+1))<56320||T>57343?u?s(h,p):m:u?n(h,p,p+2):(m-55296<<10)+(T-56320)+65536)}};return Qx={codeAt:o(!1),charAt:o(!0)},Qx}var Jx,bP;function ure(){if(bP)return Jx;bP=1;var t=ore().charAt;return Jx=function(e,r,i){return r+(i?t(e,r).length:1)},Jx}var ev,xP;function lre(){if(xP)return ev;xP=1;var t=ha(),e=Ho(),r=oi(),i=np(),s=XT(),a=TypeError;return ev=function(n,o){var u=n.exec;if(r(u)){var c=t(u,n,o);return c!==null&&e(c),c}if(i(n)==="RegExp")return t(s,n,o);throw new a("RegExp#exec called on incompatible receiver")},ev}var vP;function cre(){if(vP)return pP;vP=1;var t=sre(),e=ha(),r=qn(),i=are(),s=Ti(),a=Ho(),n=oi(),o=ip(),u=op(),c=Q4(),f=up(),h=tf(),p=ure(),g=FT(),m=rN(),T=lre(),x=$o(),v=x("replace"),y=Math.max,R=Math.min,A=r([].concat),k=r([].push),b=r("".indexOf),C=r("".slice),w=function(G){return G===void 0?G:String(G)},O=function(){return"a".replace(/./,"$0")==="$0"}(),M=function(){return/./[v]?/./[v]("a","$0")==="":!1}(),$=!s(function(){var G=/./;return G.exec=function(){var Z=[];return Z.groups={a:"7"},Z},"".replace(G,"$<a>")!=="7"});return i("replace",function(G,Z,ce){var Y=M?"$":"$0";return[function(ie,le){var Te=h(this),Me=o(ie)?void 0:g(ie,v);return Me?e(Me,ie,Te,le):e(Z,f(Te),ie,le)},function(J,ie){var le=a(this),Te=f(J);if(typeof ie=="string"&&b(ie,Y)===-1&&b(ie,"$<")===-1){var Me=ce(Z,le,Te,ie);if(Me.done)return Me.value}var Ee=n(ie);Ee||(ie=f(ie));var se=le.global,me;se&&(me=le.unicode,le.lastIndex=0);for(var Xe=[],nt;nt=T(le,Te),!(nt===null||(k(Xe,nt),!se));){var ot=f(nt[0]);ot===""&&(le.lastIndex=p(Te,c(le.lastIndex),me))}for(var pt="",qe=0,Ye=0;Ye<Xe.length;Ye++){nt=Xe[Ye];for(var at=f(nt[0]),lt=y(R(u(nt.index),Te.length),0),j=[],ue,oe=1;oe<nt.length;oe++)k(j,w(nt[oe]));var be=nt.groups;if(Ee){var Le=A([at],j,lt,Te);be!==void 0&&k(Le,be),ue=f(t(ie,void 0,Le))}else ue=m(at,Te,lt,j,be,ie);lt>=qe&&(pt+=C(Te,qe,lt)+ue,qe=lt+at.length)}return pt+C(Te,qe)}]},!$||!O||M),pP}var tv,EP;function fre(){if(EP)return tv;EP=1;var t=ai(),e=qn();return tv=function(r,i){return e(t[r].prototype[i])},tv}var rv,yP;function hre(){if(yP)return rv;yP=1,iN(),cre(),nN();var t=fre();return rv=t("String","replaceAll"),rv}var nv,TP;function dre(){if(TP)return nv;TP=1;var t=hre();return nv=t,nv}var iv,AP;function pre(){if(AP)return iv;AP=1;var t=dre();return iv=t,iv}var sv,SP;function gre(){if(SP)return sv;SP=1,Zte();var t=pre();return sv=t,sv}var av,RP;function mre(){return RP||(RP=1,av=gre()),av}mre();const _re=or({props:{count:{type:Number,required:!1}},computed:{displayCount(){return this.count?this.count<0?"X":this.count:null}}}),bre={viewBox:"0 0 100 100"},xre={key:0,cx:"83",cy:"70",r:"28"},vre={key:1,x:"83",y:"86","text-anchor":"middle",lengthAdjust:"spacing",textLength:"46"};function Ere(t,e,r,i,s,a){return Pe(),Ge("svg",bre,[e[0]||(e[0]=Se("path",{class:"handle",d:"m0,9.52c0-2.3,1.87-4.17,4.17-4.17h12.51c2,0,3.72,1.42,4.1,3.39l10.48,55h53.54c2.31,0,4.17,1.86,4.17,4.17s-1.86,4.17-4.17,4.17H27.65c-1.84,0-3.56-1.42-3.94-3.39L13.23,13.69H4.17c-2.3,0-4.17-1.87-4.17-4.17Zm38.93,76.47c0,4.61-3.74,8.34-8.34,8.34s-8.34-3.74-8.34-8.34,3.74-8.34,8.34-8.34,8.34,3.74,8.34,8.34Zm33.37,0c0-4.61,3.74-8.34,8.34-8.34s8.34,3.74,8.34,8.34-3.74,8.34-8.34,8.34-8.34-3.74-8.34-8.34Z"},null,-1)),e[1]||(e[1]=Se("path",{class:"basket",d:"m21.05,10.91h73.11c3.53,0,6.34,3.52,5.35,7.07l-9.38,33.37c-.68,2.4-2.87,4.05-5.35,4.05H29.66L21.05,10.91Z"},null,-1)),t.displayCount?(Pe(),Ge("circle",xre)):Ot("",!0),t.displayCount?(Pe(),Ge("text",vre,xt(t.displayCount),1)):Ot("",!0)])}const sN=er(_re,[["render",Ere],["__scopeId","data-v-1177328a"]]),yre={},Tre={viewBox:"0 0 100 100"};function Are(t,e){return Pe(),Ge("svg",Tre,e[0]||(e[0]=[Se("path",{d:"m80,25.25l-5.25-5.25-24.75,24.75-24.75-24.75-5.25,5.25,24.75,24.75-24.75,24.75,5.25,5.25,24.75-24.75,24.75,24.75,5.25-5.25-24.75-24.75,24.75-24.75Z"},null,-1)]))}const Sre=er(yre,[["render",Are],["__scopeId","data-v-110d22cc"]]),Rre={},Cre={viewBox:"0 0 100 100"};function wre(t,e){return Pe(),Ge("svg",Cre,e[0]||(e[0]=[Se("path",{d:"m89.06,15.62c2.6,0,4.69,2.1,4.69,4.69s-2.09,4.69-4.69,4.69h-2.27l-4.69,63.42c-.49,6.52-5.92,11.58-12.46,11.58H30.35c-6.54,0-11.97-5.06-12.46-11.58l-4.7-63.42h-2.26c-2.59,0-4.69-2.09-4.69-4.69s2.1-4.69,4.69-4.69h13.64l7.16-10.75c2.03-3.04,5.45-4.87,9.1-4.87h18.32c3.65,0,7.07,1.83,9.1,4.87l7.17,10.75h13.63Zm-48.22-6.25c-.51,0-1.17.26-1.29.7l-3.71,5.55h28.32l-3.71-5.55c-.29-.43-.78-.7-1.29-.7h-18.32Zm36.56,15.62H22.6l4.65,62.73c.12,1.62,1.48,2.89,3.11,2.89h39.3c1.62,0,2.99-1.27,3.11-2.89l4.65-62.73Z"},null,-1)]))}const Lre=er(Rre,[["render",wre]]),Ire=or({components:{CartSVG:sN,CloseSVG:Sre,TrashSVG:Lre},props:{artifactId:{type:String,required:!0},categoryId:{type:String,required:!0},shopify:{type:Object,required:!0}},emits:{resolve:()=>!0},computed:{items(){return this.shopify.cart.lines.map(t=>{var s,a,n,o,u,c,f,h;const e=((a=(s=t.merchandise)==null?void 0:s.price)==null?void 0:a.amount)??"0",r=((o=(n=t.merchandise)==null?void 0:n.price)==null?void 0:o.currencyCode)??"USD",i=(c=(u=t.merchandise)==null?void 0:u.image)==null?void 0:c.url;return{id:t.id,image:i,title:((h=(f=t.merchandise)==null?void 0:f.product)==null?void 0:h.title)??"Product",price:parseFloat(e).toLocaleString(this.$i18n.locale,{style:"currency",currency:r}),quantity:`${t.quantity}x`}})},currency(){var t;return((t=this.shopify.cart)==null?void 0:t.currency)??"USD"},total(){var e,r;const t=((r=(e=this.shopify.cart)==null?void 0:e.subtotal)==null?void 0:r.amount)??"0";return parseFloat(t).toLocaleString(this.$i18n.locale,{style:"currency",currency:this.currency})}},methods:{onCloseClick(){this.$emit("resolve")},async onTrashClick(t){try{await this.shopify.cart.removeItem([t.id])}catch(e){console.error(e)}},onCheckoutClick(){var e,r,i,s;const t=((r=(e=this.shopify.cart)==null?void 0:e.subtotal)==null?void 0:r.amount)??"0";(s=window.tv.analytics)==null||s.galleryCheckout(this.categoryId,{locale:this.$i18n.locale,artifactId:this.artifactId,itemCount:((i=this.shopify.cart)==null?void 0:i.totalQuantity)??0,subtotal:parseFloat(t)})}}}),Bre={class:"gallery-ui"},Pre={key:0,class:"empty"},Ore={class:"graphic"},Dre={class:"title"},kre={class:"form-section"},Ure=["src","alt"],Mre={class:"info"},Nre={class:"name"},Fre={class:"price"},Gre={class:"quantity"},Kre=["onClick"],Vre={class:"form-group"},$re={class:"total"},Hre={class:"form-group"},qre=["href"];function Xre(t,e,r,i,s,a){var f;const n=wr("CartSVG"),o=wr("TrashSVG"),u=wr("CloseSVG"),c=ls("t");return Pe(),Ge("div",Bre,[t.shopify.cart.lines.length?(Pe(),Ge(Wt,{key:1},[Se("h2",Dre,xt(t.$t("GALLERY.CART.TITLE")),1),Se("section",kre,[(Pe(!0),Ge(Wt,null,Vn(t.items,h=>(Pe(),Ge("div",{key:h.id,class:"item"},[Se("img",{src:h.image??"",alt:h.title},null,8,Ure),Se("div",Mre,[Se("p",Nre,xt(h.title),1),Se("p",Fre,xt(h.price),1)]),Se("div",Gre,[Se("p",null,xt(h.quantity),1)]),Se("button",{class:"trash",onClick:p=>t.onTrashClick(h)},[Zt(o)],8,Kre)]))),128)),Se("div",Vre,[Se("p",$re,[ys(xt(t.$t("GALLERY.CART.TOTAL"))+" ("+xt(t.currency)+") ",1),Se("span",null,xt(t.total),1)])]),Se("div",Hre,[Se("a",{class:"button submit",href:((f=t.shopify.cart)==null?void 0:f.checkoutUrl)??"",target:"_blank",onClick:e[0]||(e[0]=(...h)=>t.onCheckoutClick&&t.onCheckoutClick(...h))},xt(t.$t("GALLERY.CART.CHECK_OUT")),9,qre)])])],64)):(Pe(),Ge("section",Pre,[Se("div",Ore,[Zt(n,{count:-1}),gr(Se("p",null,null,512),[[c,"GALLERY.CART.EMPTY"]])])])),Se("button",{class:"close",onClick:e[1]||(e[1]=(...h)=>t.onCloseClick&&t.onCloseClick(...h))},[Zt(u)])])}const zre=er(Ire,[["render",Xre],["__scopeId","data-v-3f309e29"]]),Wre=or({props:{classes:{type:Object,required:!1},gameStartedOptions:{type:Object,required:!1},newGameCheckFn:{type:Function},player:{type:Object,required:!0}},data({player:t}){return{controlMenuView:"main",initialKind:t.kind,status:"waiting"}},computed:{wrapperClasses(){const t=[];return this.player.hasControls&&t.push("vip"),this.status==="progressed"&&t.push("attention"),t},messageItem(){return this.status==="disconnected"?{t:"POST_GAME.THANKS_FOR_PLAYING"}:this.status==="progressed"?{t:"POST_GAME.NEW_GAME_STARTED"}:this.controlMenuView==="games"?{t:"POST_GAME.WHICH_GAME"}:this.controlMenuView==="players"?{t:"POST_GAME.WHICH_PLAYERS"}:{t:"POST_GAME.PLAY_AGAIN"}},statusItem(){return this.status!=="waiting"||this.player.hasControls?null:this.player.gamepadStart?{t:"LOBBY.WAITING_FOR_GAMEPAD"}:this.player.vipName?{t:{path:"LOBBY.WAITING_FOR_VIP",args:{name:this.player.vipName}}}:{t:"LOBBY.WAITING_FOR_NEW_GAME"}},actionItems(){let t=[];return this.status==="disconnected"&&(t=[{t:"POST_GAME.BUTTON_GO_TO_JACKBOX",fn:this.onReload}]),this.status==="progressed"&&(t=[{t:"POST_GAME.BUTTON_GO_TO_GAME",fn:this.onNewGame}]),t},controlItems(){var e;if(this.status==="disconnected")return[];if(this.status==="progressed")return[];if(!this.player.hasControls)return[];let t=[];return this.player.status==="waiting"?(!((e=this.player.gamesToLaunch)!=null&&e.length)||this.controlMenuView==="players"?t=[{t:"POST_GAME.BUTTON_SAME_PLAYERS",fn:()=>{this.onSamePlayers()}},{t:"POST_GAME.BUTTON_NEW_PLAYERS",fn:()=>{this.onNewPlayers()}}]:this.controlMenuView==="main"?t=[{t:"POST_GAME.BUTTON_PLAY_AGAIN",fn:()=>{this.controlMenuView="players"}},{t:"POST_GAME.BUTTON_CHANGE_GAME",fn:()=>{this.controlMenuView="games"}}]:this.controlMenuView==="games"&&(t=this.player.gamesToLaunch.map(r=>{const i=Wu(r);return{t:{path:"POST_GAME.BUTTON_NEXT_GAME",args:{gameName:(i==null?void 0:i.name)||r}},fn:()=>{this.onChangeGame(r)}}})),t):this.player.status==="countdown"?[{t:"LOBBY.BUTTON_CANCEL",fn:()=>{this.onCancel()}}]:t}},mounted(){this.player.hasControls?this.$pauseEcastUpdates(null,["didDisconnect","roomDidExit"]):this.$pauseEcastUpdates([],["didDisconnect","roomDidExit"]),this.$ecastManager.on("didReceivePausedEntities",this.onDidReceivePausedEntities),this.$ecastManager.on("didEmitPausedEvent",this.onDidEmitPausedEvent)},beforeUnmount(){this.$ecastManager.off("didReceivePausedEntities",this.onDidReceivePausedEntities),this.$ecastManager.off("didEmitPausedEvent",this.onDidEmitPausedEvent)},methods:{async onSamePlayers(){var t;if(this.player.responseKey)try{if(await this.$ecast.updateObject(this.player.responseKey,{action:"samePlayers"}),this.$ecastRoom.appTag){const e=this.gameStartedOptions||{};e.isSequel=!0,e.locale=this.$ecastRoom.locale,(t=window.tv.analytics)==null||t.gameStarted(this.$ecastRoom.appTag,e)}}catch(e){this.$handleEcastError(e)}},async onNewPlayers(){if(this.player.responseKey)try{await this.$ecast.updateObject(this.player.responseKey,{action:"newPlayers"}),this.onReload()}catch(t){this.$handleEcastError(t)}},async onCancel(){if(this.player.responseKey)try{await this.$ecast.updateObject(this.player.responseKey,{action:"cancel"})}catch(t){this.$handleEcastError(t)}},async onChangeGame(t){if(this.player.responseKey)try{await this.$ecast.updateObject(this.player.responseKey,{action:t}),this.onReload()}catch(e){this.$handleEcastError(e)}},onNewGame(){this.$resumeEcastUpdates()},onReload(){window.location.reload()},onDidEmitPausedEvent(t){this.status!=="disconnected"&&(t!=="didDisconnect"&&t!=="roomDidExit"||(this.status="disconnected"))},onDidReceivePausedEntities(t){if(this.status!=="waiting")return;if(this.newGameCheckFn){this.newGameCheckFn(t)&&(this.status="progressed");return}const e=this.$ecast.role==="audience"?"audiencePlayer":`player:${this.$ecast.id}`;t[e]&&t[e].val.kind!==this.initialKind?this.status="progressed":this.$ecastManager.flush()}}}),jre=["onClick"],Yre=["onClick"];function Zre(t,e,r,i,s,a){var o,u;const n=ls("t");return t.player?(Pe(),Ge("div",{key:0,class:kt(["post-game-actions",t.wrapperClasses])},[gr(Se("p",{class:kt(((o=t.classes)==null?void 0:o.message)??["message"])},null,2),[[n,t.messageItem.t]]),t.statusItem?gr((Pe(),Ge("p",{key:0,class:kt(((u=t.classes)==null?void 0:u.status)??["status"])},null,2)),[[n,t.statusItem.t]]):Ot("",!0),(Pe(!0),Ge(Wt,null,Vn(t.actionItems,(c,f)=>{var h;return gr((Pe(),Ge("button",{key:f,class:kt(((h=t.classes)==null?void 0:h.action)??["action"]),onClick:c.fn},null,10,jre)),[[n,c.t]])}),128)),(Pe(!0),Ge(Wt,null,Vn(t.controlItems,(c,f)=>{var h;return gr((Pe(),Ge("button",{key:f,class:kt(((h=t.classes)==null?void 0:h.action)??["action"]),onClick:c.fn},null,10,Yre)),[[n,c.t]])}),128))],2)):Ot("",!0)}const Qre=er(Wre,[["render",Zre]]);function lp(t){if(!t)return console.warn("Cannot parse empty json inside parseImage"),{};const e={};return t.id&&(e.id=t.id),t.url&&(e.url=t.url),t.width&&(e.width=t.width),t.height&&(e.height=t.height),e}function Jre(t){if(!t)return console.warn("Cannot parse empty json inside parseReference"),{};const e={};return t.id&&(e.id=t.id),t.fields&&(e.fields=t.fields),e}function zT(t){if(!t)return console.warn("Cannot parse empty json inside parseMetafield"),{};const e={};return t.id&&(e.id=t.id),t.key&&(e.key=t.key),t.namespace&&(e.namespace=t.namespace),t.value&&(e.value=t.value),t.reference&&(e.reference=Jre(t.reference)),e}function aN(t){if(!t)return console.warn("Cannot parse empty json inside parseSelectedOption"),{};const e={};return t.name&&(e.name=t.name),t.value&&(e.value=t.value),e}function oN(t){var r;if(!t)return console.warn("Cannot parse empty json inside parseVariant"),{};const e={};return t.id&&(e.id=t.id),t.title&&(e.title=t.title),t.price&&(e.price=t.price),t.compareAtPrice&&(e.compareAtPrice=t.compareAtPrice),(r=t.product)!=null&&r.id&&(e.productId=t.product.id),t.image&&(e.image=lp(t.image)),t.metafields&&(e.metafields=t.metafields.map(zT)),t.selectedOptions&&(e.selectedOptions=t.selectedOptions.map(aN)),e}function ene(t){if(!t)return console.warn("Cannot parse empty json inside parseCollections"),{};const e={};return t.id&&(e.id=t.id),t.title&&(e.title=t.title),t.description&&(e.description=t.description),e}function tne(t){if(!t)return console.warn("Cannot parse empty json inside parseOption"),{};const e={};return t.id&&(e.id=t.id),t.name&&(e.name=t.name),t.values&&(e.values=t.values),e}function fc(t){if(!t)return console.warn("Cannot parse empty json inside parseProduct"),{};const e={};return t.id&&(e.id=t.id),t.description&&(e.description=t.description),t.descriptionHtml&&(e.descriptionHtml=t.descriptionHtml),t.handle&&(e.handle=t.handle),t.title&&(e.title=t.title),t.priceRange&&(e.priceRange=t.priceRange),t.compareAtPriceRange&&(e.compareAtPriceRange=t.compareAtPriceRange),t.options&&(e.options=t.options.map(tne)),t.images&&(e.images=t.images.nodes.map(lp)),t.featuredImage&&(e.featuredImage=t.featuredImage),t.metafields&&(e.metafields=t.metafields.map(zT)),t.variants&&(e.variants=t.variants.nodes.map(oN)),t.collections&&(e.collections=t.collections.nodes.map(ene)),t.tags&&(e.tags=t.tags),e}function rne(t){if(!t)return console.warn("Cannot parse empty json inside parseProductVariant"),{};const e={};return t.id&&(e.id=t.id),t.price&&(e.price=t.price),t.product&&(e.product=fc(t.product)),t.image&&(e.image=lp(t.image)),t.selectedOptions&&(e.selectedOptions=t.selectedOptions.map(aN)),t.sku&&(e.sku=t.sku),e}function nne(t){if(!t)return console.warn("Cannot parse empty json inside parseLine"),{};const e={};return t.id&&(e.id=t.id),t.attributes&&(e.attributes=t.attributes),t.quantity!==void 0&&(e.quantity=t.quantity),t.merchandise&&(e.merchandise=rne(t.merchandise)),e}function ov(t){if(!t)return console.warn("Cannot parse empty json inside parseCollection"),{};const e={};return t.id&&(e.id=t.id),t.description&&(e.description=t.description),t.title&&(e.title=t.title),t.image&&(e.image=lp(t.image)),t.metafields&&(e.metafields=t.metafields.map(zT)),t.products&&(e.products=t.products.nodes.map(fc)),e}function fu(t){var r,i;if(!t)return console.warn("Cannot parse empty json inside parseCart"),{};const e={};return t.id&&(e.id=t.id),t.checkoutUrl&&(e.checkoutUrl=t.checkoutUrl),((r=t.cost)==null?void 0:r.subtotalAmount)!==void 0&&(e.subtotal=(i=t.cost)==null?void 0:i.subtotalAmount),t.totalQuantity!==void 0&&(e.totalQuantity=t.totalQuantity),t.lines&&(e.lines=t.lines.nodes.map(nne)),e}class ine{constructor(e,r){Be(this,"locale");Be(this,"makeRequest");Be(this,"checkoutUrl");Be(this,"lines",[]);Be(this,"currency","USD");Be(this,"subtotal");Be(this,"totalQuantity",0);Be(this,"sharedGetCartProperties",`
        checkoutUrl
        id
        totalQuantity
        cost {
            subtotalAmount {
                amount
                currencyCode
            }
        }
        lines(first: 100) {
            nodes {
                id
                quantity
                merchandise {
                    ... on ProductVariant {
                        id
                        sku
                        price {
                            amount
                            currencyCode
                        }
                        selectedOptions {
                            name
                            value
                        }
                        product {
                            id
                            title
                            tags
                            handle
                            collections(first: 100) {
                                nodes {
                                    id
                                    title
                                }
                            }
                        }
                        image {
                            url
                        }
                    }
                }
                attributes {
                    key
                    value
                }
            }
        }`);this.locale=r,this.makeRequest=e}get localeDirective(){return`@inContext(language: ${this.locale})`}getCartId(){const e=localStorage.getItem("cartId");return e||(this.resetCart(),null)}resetCart(){delete this.checkoutUrl,this.lines=[],delete this.subtotal,this.totalQuantity=0,localStorage.removeItem("cartId")}setCartValues(e){var r,i;e.checkoutUrl&&(this.checkoutUrl=e.checkoutUrl),e.lines&&(this.lines=e.lines),e.subtotal&&(this.subtotal=e.subtotal),((r=e.subtotal)==null?void 0:r.currencyCode)!=="XXX"&&(this.currency=((i=e.subtotal)==null?void 0:i.currencyCode)??"USD"),e.totalQuantity&&(this.totalQuantity=e.totalQuantity)}async createCart(){const e=`mutation {
            cartCreate(input: {}) {
                cart {
                    ${this.sharedGetCartProperties}
                }
            }
        }`,r=await this.makeRequest(e),i=fu(r.data.cartCreate.cart);return localStorage.setItem("cartId",i.id),this.setCartValues(i),i}async refresh(){const e=this.getCartId();if(!e)return null;const r=`query getCart($cartId: ID!) @inContext(language: EN) {
            cart(id: $cartId) {
                ${this.sharedGetCartProperties}
            }
        }`,i=await this.makeRequest(r,{cartId:e});if(!i.data.cart)return this.resetCart(),null;const s=fu(i.data.cart);return this.setCartValues(s),s}async addItems(e){let r=this.getCartId();r||(await this.createCart(),r=this.getCartId());const i=`mutation add($cartId: ID!, $lines: [CartLineInput!]!) {
            cartLinesAdd(cartId: $cartId, lines: $lines) {
                cart {
                    ${this.sharedGetCartProperties}
                }
            }
        }`,s=await this.makeRequest(i,{cartId:r,lines:e}),a=fu(s.data.cartLinesAdd.cart);return this.setCartValues(a),a}async removeItem(e){const r=this.getCartId();if(!r)throw new Error("No cart is available");const i=`mutation remove($cartId: ID!, $lineIds: [ID!]!) {
            cartLinesRemove(cartId: $cartId, lineIds: $lineIds) {
                cart {
                    ${this.sharedGetCartProperties}
                }
            }
        }`,s=await this.makeRequest(i,{cartId:r,lineIds:e}),a=fu(s.data.cartLinesRemove.cart);return this.setCartValues(a),a}async updateItems(e){const r=this.getCartId();if(!r)throw new Error("No cart is available");const i=`mutation cartLinesUpdate($cartId: ID!, $lines: [CartLineUpdateInput!]!) {
            cartLinesUpdate(cartId: $cartId, lines: $lines) {
                cart {
                    ${this.sharedGetCartProperties}
                }
            }
        }`,s=await this.makeRequest(i,{cartId:r,lines:e}),a=fu(s.data.cartLinesUpdate.cart);return this.setCartValues(a),a}async setCountryCode(e){let r=this.getCartId();r||(await this.createCart(),r=this.getCartId());const i=`mutation cartBuyerIdentityUpdate($buyerIdentity: CartBuyerIdentityInput!, $cartId: ID!) {
            cartBuyerIdentityUpdate(buyerIdentity: $buyerIdentity, cartId: $cartId)  {
                cart {
                  ${this.sharedGetCartProperties}
                }
                userErrors {
                      field
                      message
                    }
                }
            }`,s={countryCode:e},a=await this.makeRequest(i,{cartId:r,buyerIdentity:s}),n=fu(a.data.cartBuyerIdentityUpdate.cart);return this.setCartValues(n),n}}class sne{constructor(e,r="EN",i="US"){Be(this,"locale");Be(this,"countryCode");Be(this,"makeRequest");this.locale=r,this.countryCode=i,this.makeRequest=e}get localeDirective(){return`@inContext(language: ${this.locale}, country: ${this.countryCode})`}async getStorefrontPricing(e){const r=`query getProductBy($id: ID!) ${this.localeDirective} {
            product(id: $id) {
                title
                variants(first: 1) {
                    nodes {
                        id
                        title
                        price {
                            amount
                        }
                    }
                }
                metafields(
                    identifiers: [{ namespace: "custom", key: "storefront_pricing" }]
                ) {
                    key
                        reference {
                        ... on Metaobject {
                            fields {
                                key
                                value
                            }
                        }
                    }
                }
                priceRange {
                    minVariantPrice {
                        amount
                        currencyCode
                    }
                }
                compareAtPriceRange {
                    maxVariantPrice {
                        amount
                        currencyCode
                    }
                }
            }
        }`,i=await this.makeRequest(r,{id:`gid://shopify/Product/${e}`});return fc(i.data.product)}async getCollectionProducts(e){const r=`query ${this.localeDirective} {
            collection(id: "gid://shopify/Collection/${e}") {
                products(first: 100) {
                    nodes {
                        handle
                        title
                        options {
                            id
                            name
                            values
                        }
                        priceRange {
                            minVariantPrice {
                                amount
                                currencyCode
                            }
                            maxVariantPrice {
                                amount
                                currencyCode
                            }
                        }
                        compareAtPriceRange {
                            minVariantPrice {
                                amount
                                currencyCode
                            }
                            maxVariantPrice {
                                amount
                                currencyCode
                            }
                        }
                        featuredImage {
                            url
                            width
                            height
                        }
                        variants(first: 100) {
                            nodes {
                                id
                                title
                                image {
                                    url
                                    height
                                    width
                                }
                                selectedOptions {
                                    name
                                    value
                                }
                                price {
                                    amount
                                    currencyCode
                                }
                                compareAtPrice {
                                    amount
                                    currencyCode
                                }
                            }
                        }
                    }
                }
            }
        }`,i=await this.makeRequest(r);return ov(i.data.collection)}async getProduct(e,r){let i="";r&&(i=`metafields(identifiers: [
                ${r.map(o=>`{ namespace: "${o.namespace}", key: "${o.key}"}`).join(",")}
            ]) {
                    key
                        reference {
                        ... on Metaobject {
                            fields {
                                key
                                value
                            }
                        }
                    }
                }
            `);const s=`query ${this.localeDirective} {
            product(handle: "${e}") {
                id
                handle
                title
                descriptionHtml
                description
                images(first: 20) {
                    nodes {
                        id
                        url
                        width
                        height
                        altText
                    }
                }
                options {
                    id
                    name
                    values
                }
                ${i}
                priceRange {
                    minVariantPrice {
                        amount
                        currencyCode
                    }
                    maxVariantPrice {
                        amount
                        currencyCode
                    }
                }
                compareAtPriceRange {
                    minVariantPrice {
                        amount
                        currencyCode
                    }
                    maxVariantPrice {
                        amount
                        currencyCode
                    }
                }
                featuredImage {
                    url
                    width
                    height
                }                    
                variants(first: 100) {
                    nodes {
                        id
                        title
                        selectedOptions {
                            name
                            value
                        }
                        image {
                            url
                            height
                            width
                        }
                        price {
                            amount
                            currencyCode
                        }
                        compareAtPrice {
                            amount
                            currencyCode
                        }
                    }
                }
            }
        }`,a=await this.makeRequest(s);return fc(a.data.product)}async getTeeKO2Products(){const e=`query ${this.localeDirective} {
            collection(id: "gid://shopify/Collection/269996851334") {
                products(first: 100) {
                    nodes {
                        handle
                        metafields(identifiers: [
                            { namespace: "custom", key: "teeko2_metadata" },
                            { namespace: "custom", key: "product_type" }
                        ]) {
                            key
                            value
                            reference {
                                ... on Metaobject {
                                    fields {
                                        key
                                        value
                                    }
                                }
                            }
                        }
                        variants(first: 100) {
                            nodes {
                                id
                                title
                                price {
                                    amount
                                    currencyCode
                                }
                                metafields(
                                    identifiers: [
                                        { namespace: "gooten", key: "layout_image" }
                                    ]
                                ) {
                                    key
                                    value
                                }
                            }
                        }
                    }
                }
            }
        }`,r=await this.makeRequest(e);return ov(r.data.collection)}async getTeeKO1Products(){const e=`query ${this.localeDirective} {
            collection(id: "gid://shopify/Collection/279592632454") {
                products(first: 100) {
                    nodes {
                        handle
                        metafields(identifiers: [
                            { namespace: "custom", key: "teeko2_metadata" },
                            { namespace: "custom", key: "product_type" }
                        ]) {
                            key
                            value
                            reference {
                                ... on Metaobject {
                                    fields {
                                        key
                                        value
                                    }
                                }
                            }
                        }
                        variants(first: 100) {
                            nodes {
                                id
                                title
                                price {
                                    amount
                                    currencyCode
                                }
                                metafields(
                                    identifiers: [
                                        { namespace: "gooten", key: "layout_image" }
                                    ]
                                ) {
                                    key
                                    value
                                }
                            }
                        }
                    }
                }
            }
        }`,r=await this.makeRequest(e);return ov(r.data.collection)}async getProductWithMetafields(e,r){const i=`query productWithMetafields($id: ID!, $metafields: [HasMetafieldsIdentifier!]!) ${this.localeDirective} {
            node(id: $id) {
                ... on Product {
                    metafields(identifiers: $metafields) {
                        key
                        value
                        reference {
                        ... on Metaobject {
                                fields {
                                    key
                                    value
                                }
                            }
                        }
                    }
                }
            }
        }`,s=await this.makeRequest(i,{id:`gid://shopify/Product/${e}`,metafields:r});return fc(s.data.node)}async getVariantWithMetafields(e,r){const i=`query variantWithMetafields($id: ID!, $metafields: [HasMetafieldsIdentifier!]!) ${this.localeDirective} {
            node(id: $id) {
                ... on ProductVariant {
                    product {
                        id
                    }
                    metafields(identifiers: $metafields) {
                        key
                        value
                        reference {
                        ... on Metaobject {
                                fields {
                                    key
                                    value
                                }
                            }
                        }
                    }
                }
            }
        }`,s=await this.makeRequest(i,{id:`gid://shopify/ProductVariant/${e}`,metafields:r});return oN(s.data.node)}}class ane{constructor(e){Be(this,"shopUrl");Be(this,"apiToken");Be(this,"isDebug");Be(this,"locale");Be(this,"countryCode");Be(this,"query");Be(this,"cart");this.shopUrl=`https://${e.shopName}.myshopify.com/api/2025-04/graphql.json`,this.apiToken=e.apiToken,this.locale=this.parseLocale(e.locale),this.countryCode=e.countryCode||"US",this.isDebug=e.debug??!1,this.query=new sne(this.makeRequest.bind(this),this.locale,this.countryCode),e.enableCart&&(this.cart=new ine(this.makeRequest.bind(this),this.locale))}setLocale(e){this.locale=this.parseLocale(e)}parseLocale(e){return e?{"es-XL":"ES","pt-BR":"PT_BR","pt-br":"PT_BR"}[e]||e.toLocaleUpperCase():"EN"}async makeRequest(e,r={}){const i={method:"POST",headers:new Headers({"Content-Type":"application/json",Accept:"application/json","X-Shopify-Storefront-Access-Token":this.apiToken}),body:JSON.stringify({query:e,variables:r})},s=await fetch(this.shopUrl,i);if(!s.ok)throw console.error(s),new Error("Shopify response is not okay");let a;try{a=await s.json()}catch(n){throw new Error("Failed to parse Shopify response as JSON",{cause:n})}if(this.isDebug&&console.log(a),a.errors)throw console.error(a.errors),new Error("Errors returned in Shopify response");return a}static getMetaValue(e,r){const i=r.split(".");if(i.length>2){console.warn("getMetaValue only supports 1 level of reference fields");return}const s=e.find(n=>n.key===i[0]);if(!s){console.warn(`getMetaValue could find a field with key ${i[0]}`);return}if(i.length===1){if(!s.value){console.warn(`getMetaValue could find a value for key ${i[0]}`);return}return s.value}if(!s.reference){console.warn(`getMetaValue could find reference for key ${i[0]}`);return}if(!s.reference.fields){console.warn(`getMetaValue could find a fields for key ${i[0]}`);return}const a=s.reference.fields.find(n=>n.key===i[1]);if(!a){console.warn(`getMetaValue could find a field for key ${i[1]}`);return}if(!a.value){console.warn(`getMetaValue could find a value for key ${i[1]}`);return}return a.value}}const one={},une={viewBox:"0 0 100 100"};function lne(t,e){return Pe(),Ge("svg",une,e[0]||(e[0]=[Se("path",{d:"m71.43,100.05c-3.1,3-45.42-43.71-47.91-44.95-2.79-2.79-2.79-7.31,0-10.1L66.38,2.15c6.45-6.63,16.76,3.63,10.1,10.1,0,0-37.81,37.81-37.81,37.81l37.81,37.81c4.55,4.24,1.06,12.41-5.06,12.19Z"},null,-1)]))}const cne=er(one,[["render",lne],["__scopeId","data-v-8a441c8b"]]),fne={},hne={viewBox:"0 0 450 170"};function dne(t,e){return Pe(),Ge("svg",hne,e[0]||(e[0]=[Xd('<path d="m125.22,148.61c-3.8,10.71,14.07,8.66,14.51-4.66,0,0,.76-6.07.76-6.07h-.65c-11.11,10.26-31.98,7.94-32.16-14.19-1.85-27.91,29.59-42.89,41.49-24.04h.65l3.79-7.15h13.97l-9.1,51.44c-2.6,14.84-10.62,24.37-29.57,24.37-20.48-.04-26.86-8.42-21.24-20.04,0,0,17.55.33,17.55.33Zm17.22-21.78l3.35-17.22c-6.25-12.46-19.63.91-18.3,12.56.14,11.01,9.67,11.01,14.94,4.66h0Z" data-v-16eba653></path><path d="m165.94,125c-1.72-26.97,26.98-45.33,40.73-25.45h.65l3.79-7.04h14.3l-6.29,35.96c-1.35,4.75,1.4,6.23,5.63,4.22l-1.74,12.24c-6.89,2.04-22.54,4.11-22.64-5.85h-.54c-9.93,11.62-34.55,11.48-33.9-14.08h0Zm37.47-16.03c-6.44-10.75-17.57.3-17,15.17-.36,11.33,8.81,11.4,13.43,5.3,0,0,3.57-20.47,3.57-20.47Z" data-v-16eba653></path><path d="m252.28,101.6c4.42-12.87,28.7-14.17,31.63.22h.65c5.51-14.74,32.91-14.34,31.84,5.09.15,4.28-2.71,17.11-3.35,21.56-1.3,4.58,1.77,6.12,5.74,4.11l-1.74,12.34c-34.19,8.67-21.76-14.97-19.93-35.42,0-3.14-1.3-4.76-4.55-4.76-3.68,0-7.69,3.35-9.64,14.4l-4.55,26.43h-19.06l5.74-32.27c.78-3.85.99-8.78-4.12-8.55-10.61-1.45-12.12,32.87-14.41,40.83h-19.17l6.39-36.18c1.21-4.47-2.17-5.66-5.74-3.9l1.52-12.56c8.04-2.59,24.49-2.8,22.09,8.66.02,0,.65-.02.67,0Z" data-v-16eba653></path><path d="m353.55,91.43c20.8-.36,28.06,14.61,21.01,29.46h-33.57c-4.34,16.32,14.4,16.73,15.16,6.08l17.43.11c0,13.64-11.81,19.6-26.65,19.6-40.37,1.13-28.87-58.07,6.61-55.24h.01Zm5.74,20.47c3.92-12.52-15.1-12.22-16.68,0h16.68Z" data-v-16eba653></path><path d="m394.5,128.03c-4.38,9.29,14.81,10.75,15.06,2.92.44-4.29-8.84-5.01-12.14-6.07-11.27-2.7-16.14-6.83-16.14-14.3-3.22-24.42,57.55-26.61,49.5-.98l-16.68.11c4.14-9.01-13.94-9.7-14.09-2.38,0,2.92,2.81,3.79,6.07,4.55,10.57,1.76,23.87,5.95,22.96,15.6,3.86,24.26-59.53,26.83-51.67.65l17.12-.11h0Z" data-v-16eba653></path><path d="m37.75,86.06c-2.29,20.58-21.35,26.17-37.37,20.78l4.06-13.69c6.65,2.32,11.4,2.88,13-7.77,0,0,10.1-57.91,10.1-57.91h20.54l-10.33,58.61h0ZM31.84,3.65h20.43l-2.78,15.55h-20.43l2.78-15.55Z" data-v-16eba653></path><path d="m47.04,62.26c-1.84-28.91,28.89-48.57,43.64-27.27h.7l4.06-7.54h15.32l-6.74,38.53c-1.46,5.09,1.5,6.68,6.03,4.53l-1.86,13.11c-7.38,2.18-24.15,4.39-24.26-6.27h-.58c-10.63,12.44-37.02,12.3-36.33-15.09h0Zm40.16-17.17c-6.89-11.53-18.82.31-18.21,16.25-.39,12.15,9.42,12.22,14.39,5.69,0,0,3.83-21.94,3.83-21.94h0Z" data-v-16eba653></path><path d="m146.26,26.28c23.79,1.01,27.73,12.42,23.68,24.02l-20.08.23c4.26-17.57-17.81-11.55-16.49,11.48-.73,13.3,15.25,11.41,14.74-.7l19.96.12c5.09,29.5-56.87,34.36-55.71,1.16,0-19.15,9.98-36.33,33.89-36.33v.02Z" data-v-16eba653></path><path d="m226.57,70.74c1.05,0,2.32-.23,3.36-.58l-2.44,13.69c-24.48,7.36-21.86-8.84-28.31-22.98h-5.46l-4.06,23.44h-20.54L183.86.75h20.55l-8.35,47.12,4.41-.46c2.44-2.33,12.3-17.99,14.62-19.96h21.59l-.47,2.33c-2.44,2.09-15.55,20.43-19.03,24.26,1.83,1.3,4.65,16.99,9.4,16.71h0Z" data-v-16eba653></path><path d="m246.3.75h20.43l-5.81,32.26h.58c10.83-12.1,33.79-8.54,33.54,15.43.8,34.11-30.04,47.15-43.87,29.13h-.58l-3.94,6.74h-15.32L246.3.75Zm8.59,66.61c7.66,10.18,19.51-.27,19.26-16.83,0-7.55-3.71-9.98-7.31-9.98-2.78,0-6.15,1.98-8.12,4.53l-3.83,22.28h0Z" data-v-16eba653></path><path d="m329.86,26.28c44.54-1.33,30.54,62.33-5.34,59.19-44.34,1.39-30.24-62.31,5.34-59.19Zm6.62,23.32c0-6.15-2.67-9.05-6.85-9.05-10.49-2.62-18.27,30.4-4.87,30.76,7.32,0,11.73-7.55,11.73-21.71h0Z" data-v-16eba653></path><path d="m387.77,37.2c1.05,3.36,1.98,6.5,2.55,9.28h.47c2.87-6.04,8.83-13.46,12.65-19.03h21.82l-.35,1.98-21.48,25.77,6.39,12.65c2.13,3.84,5.23,3.16,8.12,2.1l-2.44,13.93c-19.63,5.42-22.79-2.11-26.47-19.5h-.58c-2.84,6.34-9.23,14.26-13.11,19.96h-21.82l.35-1.86,21.94-26.82-5.81-11.72c-1.84-3.78-5.56-3.18-8.47-2.1l2.55-13.92c10.53-2.64,21.58-3.83,23.67,9.29v-.02Z" data-v-16eba653></path><path d="m441.34,94.3c3.47.57,3.38-3.01,0-2.21v2.21h0Zm-.04,4.31h-1.78v-7.68c1.08-.2,4.75-.53,5.58.37,1.33.88.9,3.14-.79,3.46v.09c1.29.08,1.53,3.22,1.92,3.75h-1.88c-.72-1.38-.33-3.52-3.04-3.04v3.04h0Zm-4.73-3.98c-.21,7.89,12.05,8.05,11.85.04.23-7.99-12.01-8.04-11.85-.04m13.81,0c.21,10.07-15.96,10.03-15.79,0-.23-9.93,15.98-10.06,15.78,0" data-v-16eba653></path>',13)]))}const pne=er(fne,[["render",dne],["__scopeId","data-v-16eba653"]]),gne=or({components:{BackSVG:cne,CartSVG:sN,LogoSVG:pne},props:{artifactId:{type:String,required:!1},categoryId:{type:String,required:!1},itemId:{type:String,required:!1},context:{type:String,required:!0},view:{type:Object,required:!0}},themeColor:"#000000",data(){return{isError:!1,isLoading:!0,artifact:null,shopify:new ane({shopName:"jackbox-games",apiToken:"272f9467112ef071c8d5622704def9a9",enableCart:!0})}},computed:{propsToPass(){const t={};return this.view.props.artifactId&&(t.artifactId=this.artifactId),this.view.props.itemId&&(t.itemId=this.itemId),this.view.props.artifact&&(t.artifact=this.artifact),this.view.props.context&&(t.context=this.context),this.view.props.shopify&&(t.shopify=this.shopify),t},cart(){return this.shopify.cart}},mounted(){this.fetchArtifact(),this.fetchCart();const t=Wu(this.categoryId??"");t&&(this.$setMeta({title:`Jackbox.TV | ${t.name} Past Game`,"og:title":`Jackbox.TV | ${t.name} Past Game`,description:`See what happened in this crazy game of ${t.name}. Jackbox Games are available on a wide variety of digital platforms. We make irreverent party games including Quiplash, Fibbage, and Drawful.`,"og:description":`See what happened in this crazy game of ${t.name}. Jackbox Games are available on a wide variety of digital platforms. We make irreverent party games including Quiplash, Fibbage, and Drawful.`}),this.itemId&&setTimeout(()=>{var e;(e=document.getElementById(`${this.itemId}`))==null||e.scrollIntoView({behavior:"smooth"})},250))},beforeUnmount(){this.$resetMeta()},methods:{async fetchArtifact(){try{const t=`https://jbg-blobcast-artifacts.s3.amazonaws.com/${this.categoryId}/${this.artifactId}/data.json.gz`;this.artifact=await m4.hydrateFromUrl(t)}catch(t){this.isError=!0,console.error(t)}finally{this.isLoading=!1}},async fetchCart(){try{await this.cart.refresh()}catch(t){console.error(t)}},onCartClick(){this.$showModal(Bu(zre),{artifactId:this.artifactId,categoryId:this.categoryId,shopify:this.shopify},{classes:["gallery-modal","is-tab"]})}}}),mne={class:"gallery-root"},_ne={class:"topbar"},bne={class:"back"},xne={key:0,href:"/past-games","aria-label":"back"},vne={class:"logo"},Ene={key:0,href:"/","aria-label":"Jackbox Games"},yne={class:"cart"},Tne={class:"content"},Ane={key:0,class:"empty"},Sne={key:1,class:"loading"},Rne={key:2,class:"error"},Cne={class:"post-game"};function wne(t,e,r,i,s,a){const n=wr("BackSVG"),o=wr("LogoSVG"),u=wr("CartSVG"),c=ls("t");return Pe(),Ge("div",mne,[Se("nav",_ne,[Se("div",bne,[t.context==="standalone"?(Pe(),Ge("a",xne,[Zt(n)])):Ot("",!0)]),Se("div",vne,[t.context==="standalone"?(Pe(),Ge("a",Ene,[Zt(o)])):Ot("",!0)]),Se("div",yne,[Se("button",{onClick:e[0]||(e[0]=(...f)=>t.onCartClick&&t.onCartClick(...f))},[Zt(u,{count:t.shopify.cart.totalQuantity},null,8,["count"])])])]),Se("div",Tne,[Kh(t.$slots,"pre",{},void 0,!0),t.artifactId?t.isLoading?gr((Pe(),Ge("div",Sne,null,512)),[[c,"LOADING"]]):t.isError?gr((Pe(),Ge("div",Rne,null,512)),[[c,"ERROR.TITLE"]]):(Pe(),$n(Hd(t.view),jW(Zc({key:3},t.propsToPass)),null,16)):gr((Pe(),Ge("div",Ane,null,512)),[[c,"POST_GAME.THANKS_FOR_PLAYING"]]),Kh(t.$slots,"post",{},void 0,!0)]),Se("div",Cne,[Kh(t.$slots,"default",{},void 0,!0)])])}const uN=er(gne,[["render",wne],["__scopeId","data-v-50af3417"]]),Lne=or({props:{alt:{type:String,required:!1},item:{type:Object,required:!0}},computed:{src(){var t,e,r;return!this.item||this.item.status==="pending"||this.item.status==="running"?new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACGFjVEwAAAADAAAAAM7tusAAAAAaZmNUTAAAAAAAAAAyAAAAMgAAAAAAAAAAADIAZAAAtf0UswAAAbJJREFUeAHt18GKgzAQBmChsIggCN6EQmAh1EMh0BfoI+yxxx577NHjvoZvu3EZl+wYYzRJE8sE/sNudcavSdomy2jQoBFl9H1fyTCUak8AIfOQ+Z7J8JpIGZDL3A0AnOHaPEXEYwVCnZ10MBsRf5hUEFcHxJhrCpDOA6SLjTh5QIw57X1ZxV9eBCGIf0AF38w3j5Ab1KxeCfE5E/FmZncQWfRDptD8XwSECE2/YniWrYgCHvgiw/HahfOF7z3CNHuRwzMI3Ztqs5lHhJqzTK259mvjT5UO7sVvUg29cH9h/WEARS4LGQo2Mgflvhz2ztMC8IRrc+X+A9QUFv3rJcTRoggGMbx+DafEyekQ9iGzBKg5ziHYykI4nzKlpuYdgtd/Cfe49GQZmtLWsaAabpp6WLrcY7/2d4l7RuAPhhLNwDlQr3ZswAM1aBRIE6gH/7ekA4FCQjjek5lmE/KEIWZAIJBPyDqABpQEJHMdBCEIQQiyO8j4MzsWZHJMiAFygfgFOIK2QMICDCDhASJeDtCATGftJcjk7B99zIDmIOkBFkAYkj5gBlQofxe7AtCg8WbjBxkc62uFI8SDAAAAGmZjVEwAAAABAAAAMgAAADIAAAAAAAAAAAAyAGQAAC6O/mcAAAGyZmRBVAAAAAJ4Ae3YvWrDMBAHcEHAhIAh4CUYCoaAiYeAoC/QsaPHjhk7ZvSY1/DbVoJzUQ7JH/IplsId/Ic48cfPJ2ErQnBxcW1Sfd9nKjlKlhKgUGlUPh3R3xUxA3Yq9QgAR/92FyOiWYAwuxMPxhPxj4kFUa5ADCljgEgCiNwacSRADDmmPqy2H14MYQg9IIMn85kQcoZjZq+EUHZiu84kB4EhdLBsLwJCCsv5Tt7PGQ0wnto1PhCsL6jnSI7OcVG5qTxUOg1aijg6Xj2u+I5B1yrPVxUJ+2bomHr7HQBmNOYyF1HMvIDSfAWHV/kSsFP7Xy3771W+4GIfE5FTiA+iO+paJTaWjurutzMBZr5diCrAGM9hftWW7/T5fhZePE4r0JBoerpJW4+tyaGLt5UAM796WApiBJ4HOerAnRDwhDHbH/ThBhM5BEJ3t7KN51QgzwDLGKYEhYCMAwKBKCHLABZQFBCxthjCEIYwJDnIsHDaCtL2lH+neoLWQGgBK0E+kLCAEZAkgHQvB1hAw1pdekA62L4XsZQD5ILEB5gAYUj8AAfoYHw+JQXg4nqz+gMef+7wY+azRQAAABpmY1RMAAAAAwAAADIAAAAyAAAAAAAAAAAAMgBkAADDGC2OAAABr2ZkQVQAAAAEeAHt189rgzAUB3BBkCIIgpdSGAgFqQchsH+gxx173NHjjjt63L/hf7uExZE9E6fJi4nlPfgeWn+0H5OYJEmoqKiC1DiOGU8Bkh0JUPG0PK+GiGNVzICUp1kAwIhz0xgR7QaE2jrxYCwRv5hYEBcHxJRLDBCGAGGhESUCYkp59G4VvnsRhCD4gEzOzFdEyFXeM9sTgtkS4VrmcBA5T5w131ceIZXm93LrLicAPAPPF0/PcwPHCw9jpNA8yGlFLVYQ+VbETUGo+YTLCTnwa8ulCpPXZpoW7wznl2sRTAOAEcg7z0m5LpVjp1sB6OS5qeZ6ZtP9IOJtBQKCHvApLewSZ7tDhxZ9MSEeGxEw7+IPacZRI1N4GGO1esMTz4cjQk2/tCyXrdWMeC+Jn10mMgK+GGrQAt3o55XdJrJ/9p4w9x0m0b/d1hPIJ2Q27mAfxgT5gCwDPIEwIdsAGlAUkMS1CEIQghDkcJDSYWWMAZltvEKAXCC4AEeQDcQvYAE0IEDY7gAN6CT374MFhMG9e/AygEyQ+AD/gCAkfoABdFY+54cCUFE9WX0D98Lu8KhDSIIAAAAASUVORK5CYII=",import.meta.url).href:this.item.status==="complete"&&((t=this.item.renderData)!=null&&t.dataURL)?(r=(e=this.item)==null?void 0:e.renderData)==null?void 0:r.dataURL:new URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyBAMAAADsEZWCAAAAG1BMVEWZmZkAAACZmZmZmZmZmZmZmZmZmZmZmZmZmZnhgFnnAAAACXRSTlMzACkuEQsbJiP4EPhLAAABAUlEQVQ4y4WUPQ7CMAyFHz8qjLgUibHlBGVArHRhL1ygAwdA4gJwc0ptKyntU9/Sny/PcRLHENf1BeD8EJeT7A3VuuqTrIRrUcVkp8BQHZEGsZJAbuirMBJihXhG7vjXyYhZYpOSFEMVHWkwVPIjO4ypbslWX0ufQh/Hlly6t2XqM9i3wDKrJO+ec8ksO2Q2RFJPSk0V9hZWJO8sYhN/sAHsT6oWCzuDevWXDdD4aBBMkQUJngimQ7BghRJuUuXxioNpfHvnbhmqIBZCSDSSAc+ar5TvDt9Rfgr85Php0wrhVcUrkVcvrXh+S+jN4rdx6gYPZypop+DdhXakqS7GO98XXo8wVctVCLQAAAAASUVORK5CYII=",import.meta.url).href}}}),Ine=["src","alt"];function Bne(t,e,r,i,s,a){var n;return Pe(),Ge("img",{ref:"el",src:t.src,alt:t.alt,class:kt({fit:((n=t.item)==null?void 0:n.status)!=="complete"})},null,10,Ine)}const Pne=er(Lne,[["render",Bne],["__scopeId","data-v-77ea35d8"]]);var uv={},Dl={},lv={},kl={},cv={},CP;function lN(){return CP||(CP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Token=void 0;var e=function(){function r(i,s,a,n){this.type=i,this.content=s,this.attributes=a,this.text=n}return r.prototype.toString=function(){return this.content+" ("+this.type+")"},r.prototype.equals=function(i){return this.type===i.type&&this.content===i.content},r.prototype.convertToTextToken=function(){var i;this.type===r.Type.startTag?(this.content=(i=this.text)!==null&&i!==void 0?i:"",this.type=r.Type.text):this.type===r.Type.endTag&&(this.content="[/"+this.content+"]",this.type=r.Type.text)},r}();t.Token=e,function(r){(function(i){i[i.text=0]="text",i[i.startTag=1]="startTag",i[i.endTag=2]="endTag"})(r.Type||(r.Type={}))}(e=t.Token||(t.Token={})),t.Token=e}(cv)),cv}var wP;function One(){if(wP)return kl;wP=1,Object.defineProperty(kl,"__esModule",{value:!0}),kl.Tokenizer=void 0;var t=lN(),e=function(){function r(i){this.tags=i}return r.prototype.tokenizeString=function(i){var s=this,a=this.getTokens(i),n=[],o=!1,u="",c="";return a.forEach(function(f){var h=s.tags[f.content],p=!0;!h&&!o?f.convertToTextToken():o?f.type===t.Token.Type.endTag&&f.content===u?(o=!1,n.push(r.createTextToken(c))):(f.convertToTextToken(),c+=f.content,p=!1):h.noNesting&&f.type===t.Token.Type.startTag&&(o=!0,u=f.content,c=""),p&&n.push(f)}),n},r.prototype.getTokens=function(i){for(var s='\\[(/\\w*)\\]|\\[(\\w*)+(=(["])'+r.valueChars+"*\\4)?( ("+r.nameChars+'+)?=(["])('+r.valueChars+"+)\\7)*\\]",a=new RegExp(s,"g"),n=[],o=a.exec(i),u=0;o;){var c=o.index-u;c>0&&n.push(r.createTextToken(i.substr(u,c))),n.push(r.createTagToken(o)),u=a.lastIndex,o=a.exec(i)}var f=i.length-u;return f>0&&n.push(r.createTextToken(i.substr(u,f))),n},r.createTextToken=function(i){return new t.Token(t.Token.Type.text,i)},r.createTagToken=function(i){if(!i[1]){for(var s=i[2],a={},n=new RegExp("("+r.nameChars+'+)?=(["])('+r.valueChars+"+)\\2","g"),o=i[0].substr(1+s.length,i[0].length-2-s.length),u=n.exec(o);u;)u[1]?a[u[1]]=u[3]:a[s]=u[3],u=n.exec(o);return new t.Token(t.Token.Type.startTag,s,a,i[0])}return new t.Token(t.Token.Type.endTag,i[1].substr(1,i[1].length-1))},r.nameChars="[a-zA-Z0-9\\.\\-_:;/]",r.valueChars="[a-zA-Z0-9\\.\\-_:;#/\\s]",r}();return kl.Tokenizer=e,kl}var LP;function Dne(){return LP||(LP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ParseTree=void 0;var e=One(),r=lN(),i=function(){function s(a){this.subTrees=[],this.type=a.type,this.content=a.content,a.attributes&&(this.attributes=a.attributes),a.subTrees&&(this.subTrees=a.subTrees)}return Object.defineProperty(s.prototype,"isValid",{get:function(){return this.subTrees.length?this.subTrees.every(function(a){return a.isValid}):!0},enumerable:!1,configurable:!0}),s.prototype.toString=function(){return this.type+" - "+this.content},s.buildTree=function(a,n){var o=new e.Tokenizer(n),u=o.tokenizeString(a),c=new s({type:s.Type.root,content:a});return this.buildTreeFromTokens(c,u.reverse())},s.buildTreeFromTokens=function(a,n,o){if(o===void 0&&(o=""),!a)return null;if(!n.length)return a;var u=n.pop();if(!u)return null;if(u.type===r.Token.Type.text){var c=new s({type:s.Type.text,content:u.content});a.subTrees.push(c)}if(u.type===r.Token.Type.startTag){var f=u.content,c=new s({type:s.Type.tag,content:f,attributes:u.attributes}),h=s.buildTreeFromTokens(c,n,f);if(!h)return null;a.subTrees.push(h)}if(u.type===r.Token.Type.endTag){var f=u.content;return f===o?a:null}return!n.length&&o!==""?null:this.buildTreeFromTokens(a,n,o)},s}();t.ParseTree=i,function(s){(function(a){a[a.root=0]="root",a[a.text=1]="text",a[a.tag=2]="tag"})(s.Type||(s.Type={}))}(i=t.ParseTree||(t.ParseTree={})),t.ParseTree=i}(lv)),lv}var Ul={},IP;function cN(){if(IP)return Ul;IP=1,Object.defineProperty(Ul,"__esModule",{value:!0}),Ul.Tag=void 0;var t=function(){function e(r){var i;this.tagName=r.tagName,this.insertLineBreaks=r.insertLineBreaks,this.suppressLineBreaks=r.suppressLineBreaks,this.noNesting=r.noNesting,this.markupGenerator=(i=r.markupGenerator)!==null&&i!==void 0?i:function(s,a){return"<"+s.tagName+">"+a+"</"+s.tagName+">"}}return e.create=function(r,i,s){var a,n,o;return s===void 0&&(s={}),new e({tagName:r,insertLineBreaks:(a=s.insertLineBreaks)!==null&&a!==void 0?a:!0,suppressLineBreaks:(n=s.suppressLineBreaks)!==null&&n!==void 0?n:!1,noNesting:(o=s.noNesting)!==null&&o!==void 0?o:!1,markupGenerator:i})},e}();return Ul.Tag=t,Ul}var BP;function kne(){if(BP)return Dl;BP=1,Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.BBCodeParser=void 0;var t=Dne(),e=cN(),r=function(){function i(s,a){this.options=a,this.escapeHTML=!1,this.tags=s,a&&(this.escapeHTML=a.escapeHTML)}return Object.defineProperty(i,"defaultTags",{get:function(){return{b:e.Tag.create("b"),i:e.Tag.create("i")}},enumerable:!1,configurable:!0}),i.prototype.parse=function(s,a,n,o){a===void 0&&(a=!1),n===void 0&&(n=!0),o===void 0&&(o=!0);var u=t.ParseTree.buildTree(s,this.tags);return!u||!u.isValid?s:this.treeToHtml(u.subTrees,n,o,a)},i.prototype.addTag=function(s,a){this.tags[s]=a},i.prototype.treeToHtml=function(s,a,n,o){var u=this;o===void 0&&(o=!1);var c="",f=!1;return s.forEach(function(h){var p;if(h.type===t.ParseTree.Type.text){var g=h.content;n&&(g=u.escapeHTML?i.escapeHTML(g):g),a&&!f&&(g=g.replace(/(\r\n|\n|\r)/gm,"<br>"),f=!1),c+=g}else{var m=u.tags[h.content],T=u.treeToHtml(h.subTrees,m.insertLineBreaks,n,o);o?c+=T:c+=m.markupGenerator(m,T,(p=h.attributes)!==null&&p!==void 0?p:{}),f=m.suppressLineBreaks}}),c},i.escapeHTML=function(s){return s.replace(/[&<>]/g,function(a){return i.tagsToReplace[a]||a})},i.tagsToReplace={"&":"&amp;","<":"&lt;",">":"&gt;"},i}();return Dl.BBCodeParser=r,Dl}var PP;function Une(){return PP||(PP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Tag=t.BBCodeParser=void 0;var e=kne();Object.defineProperty(t,"BBCodeParser",{enumerable:!0,get:function(){return e.BBCodeParser}});var r=cN();Object.defineProperty(t,"Tag",{enumerable:!0,get:function(){return r.Tag}})}(uv)),uv}var Ca=Une();const Mne={install:t=>{const e={section:Ca.Tag.create("section",(a,n,{section:o})=>`<div ${o?`class="section ${o}"`:'class="section"'}>${n}</div>`)};["b","bold","B"].forEach(a=>{e[a]=Ca.Tag.create(a,(n,o)=>`<strong>${o}</strong>`)}),["i","italic","I"].forEach(a=>{e[a]=Ca.Tag.create(a,(n,o)=>`<em>${o}</em>`)}),e.tos=Ca.Tag.create("tos",(a,n)=>`<a class="tosLink" href="https://jackboxgames.com/terms-of-service/" target="_blank">${n}</a>`),e.pp=Ca.Tag.create("pp",(a,n)=>`<a class="ppLink" href="https://jackboxgames.com/privacy-policy/" target="_blank">${n}</a>`);const s=new Ca.BBCodeParser(e);t.directive("bb",{mounted(a,n){const o=document.createElement("div");o.textContent=n.value,a.innerHTML=s.parse(o.innerHTML)},updated(a,n){const o=document.createElement("div");o.textContent=n.value,a.innerHTML=s.parse(o.innerHTML)}}),t.mixin({beforeCreate(){this.$options.bb&&Object.keys(this.$options.bb).forEach(a=>{const n=this.$options.bb[a];if(n instanceof Function){s.addTag(a,Ca.Tag.create(a,n));return}s.addTag(a,Ca.Tag.create(a,n.generator,n.options))})}}),t.config.globalProperties.$bb=a=>(typeof a!="string"&&console.warn(`[BBCodePlugin] Received unexpected ${typeof a} with value ${a};converting to string before parsing.`),s.parse(String(a)))}},Nne=or({data(){return{showPowerNav:!1}},computed:{debugNav(){return this.$refs.debugNav},replayer(){return this.$debugReplayer}},mounted(){window.addEventListener("keydown",t=>{var e,r,i,s;return t.key===","?(e=this.replayer)==null?void 0:e.toPreviousEntity():t.key==="."?(r=this.replayer)==null?void 0:r.toNextEntity():t.key==="q"?(i=this.replayer)==null?void 0:i.toPreviousMarker():t.key==="w"?(s=this.replayer)==null?void 0:s.toNextMarker():null})},methods:{onPreviousClick(){var t;(t=this.replayer)==null||t.toPreviousMarker()},onNextClick(){var t;(t=this.replayer)==null||t.toNextMarker()},onOpenPowerNavClick(){this.showPowerNav=!0,this.debugNav.focus()},onClosePowerNavClick(){this.showPowerNav=!1,this.debugNav.focus()},onMarkerClick(t){var e;(e=this.replayer)==null||e.toMarkerIndex(t)},onKillClick(){var t;(t=this.replayer)==null||t.kill()},onDisconnectClick(){var t;(t=this.replayer)==null||t.disconnect()}}}),Fne={key:0,ref:"debugNav",class:"debug-nav",tabindex:"0"},Gne={key:0,class:"power-nav"},Kne=["onClick"],Vne={key:1,class:"title focused"},$ne={key:2,class:"title focused"};function Hne(t,e,r,i,s,a){return t.replayer?(Pe(),Ge("div",Fne,[t.showPowerNav?(Pe(),Ge("div",Gne,[Se("button",{class:"close",onClick:e[0]||(e[0]=(...n)=>t.onClosePowerNavClick&&t.onClosePowerNavClick(...n))},"X"),e[7]||(e[7]=Se("p",null,"MARKERS",-1)),Se("ul",null,[(Pe(!0),Ge(Wt,null,Vn(t.replayer.markerMap,(n,o)=>(Pe(),Ge("li",{key:o,class:kt({active:o===t.replayer.currentMarkerItemIndex}),onClick:u=>t.onMarkerClick(o)},xt(n[1].marker),11,Kne))),128))]),Se("button",{class:"option",onClick:e[1]||(e[1]=(...n)=>t.onKillClick&&t.onKillClick(...n))},e[6]||(e[6]=[ys("KILL"),Se("br",null,null,-1),ys("ROOM")])),Se("button",{class:"option",onClick:e[2]||(e[2]=(...n)=>t.onDisconnectClick&&t.onDisconnectClick(...n))},"DISCONNECT")])):Ot("",!0),e[11]||(e[11]=Se("p",{class:"title blurred"},"DEBUG",-1)),t.replayer.markerMap.length?(Pe(),Ge("p",$ne,xt(t.replayer.currentMarkerItemIndex)+" : "+xt(t.replayer.currentMarkerItem[1].marker)+" ("+xt(t.replayer.currentEntityItemIndex)+") ",1)):(Pe(),Ge("p",Vne,"Item #"+xt(t.replayer.currentEntityItemIndex),1)),t.showPowerNav?Ot("",!0):(Pe(),Ge("button",{key:3,class:"open-power-nav",onClick:e[3]||(e[3]=(...n)=>t.onOpenPowerNavClick&&t.onOpenPowerNavClick(...n))},e[8]||(e[8]=[Se("svg",{viewBox:"0 0 20 10"},[Se("polygon",{points:"0,10 10,0 20,10"})],-1),Se("div",{class:"visually-hidden"},"Open debug menu",-1)]))),Se("button",{class:"direction previous",onClick:e[4]||(e[4]=(...n)=>t.onPreviousClick&&t.onPreviousClick(...n))},e[9]||(e[9]=[Se("svg",{viewBox:"0 0 60 50"},[Se("polygon",{class:"outline",points:"40,35.6 20,25 40,14.4"}),Se("polygon",{points:"40,35.6 20,25 40,14.4"})],-1),Se("div",{class:"visually-hidden"},"Previous",-1)])),Se("button",{class:"direction next",onClick:e[5]||(e[5]=(...n)=>t.onNextClick&&t.onNextClick(...n))},e[10]||(e[10]=[Se("svg",{viewBox:"0 0 60 50"},[Se("polygon",{class:"outline",points:"40,35.6 20,25 40,14.4"}),Se("polygon",{points:"40,35.6 20,25 40,14.4"})],-1),Se("div",{class:"visually-hidden"},"Next",-1)]))],512)):Ot("",!0)}const qne=er(Nne,[["render",Hne],["__scopeId","data-v-220ec4c0"]]);var fv,OP;function Xne(){if(OP)return fv;OP=1;function t(e,r){for(var i=-1,s=e==null?0:e.length;++i<s&&r(e[i],i,e)!==!1;);return e}return fv=t,fv}var hv,DP;function zne(){if(DP)return hv;DP=1;var t=u4(),e=t(Object.keys,Object);return hv=e,hv}var dv,kP;function Wne(){if(kP)return dv;kP=1;var t=_T(),e=zne(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!t(a))return e(a);var n=[];for(var o in Object(a))i.call(a,o)&&o!="constructor"&&n.push(o);return n}return dv=s,dv}var pv,UP;function cp(){if(UP)return pv;UP=1;var t=p4(),e=Wne(),r=ep();function i(s){return r(s)?t(s):e(s)}return pv=i,pv}var gv,MP;function jne(){if(MP)return gv;MP=1;var t=Jc(),e=cp();function r(i,s){return i&&t(s,e(s),i)}return gv=r,gv}var mv,NP;function Yne(){if(NP)return mv;NP=1;var t=Jc(),e=ef();function r(i,s){return i&&t(s,e(s),i)}return mv=r,mv}var _v,FP;function Zne(){if(FP)return _v;FP=1;function t(e,r){for(var i=-1,s=e==null?0:e.length,a=0,n=[];++i<s;){var o=e[i];r(o,i,e)&&(n[a++]=o)}return n}return _v=t,_v}var bv,GP;function fN(){if(GP)return bv;GP=1;function t(){return[]}return bv=t,bv}var xv,KP;function WT(){if(KP)return xv;KP=1;var t=Zne(),e=fN(),r=Object.prototype,i=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(n){return n==null?[]:(n=Object(n),t(s(n),function(o){return i.call(n,o)}))}:e;return xv=a,xv}var vv,VP;function Qne(){if(VP)return vv;VP=1;var t=Jc(),e=WT();function r(i,s){return t(i,e(i),s)}return vv=r,vv}var Ev,$P;function hN(){if($P)return Ev;$P=1;function t(e,r){for(var i=-1,s=r.length,a=e.length;++i<s;)e[a+i]=r[i];return e}return Ev=t,Ev}var yv,HP;function dN(){if(HP)return yv;HP=1;var t=hN(),e=mT(),r=WT(),i=fN(),s=Object.getOwnPropertySymbols,a=s?function(n){for(var o=[];n;)t(o,r(n)),n=e(n);return o}:i;return yv=a,yv}var Tv,qP;function Jne(){if(qP)return Tv;qP=1;var t=Jc(),e=dN();function r(i,s){return t(i,e(i),s)}return Tv=r,Tv}var Av,XP;function pN(){if(XP)return Av;XP=1;var t=hN(),e=za();function r(i,s,a){var n=s(i);return e(i)?n:t(n,a(i))}return Av=r,Av}var Sv,zP;function eie(){if(zP)return Sv;zP=1;var t=pN(),e=WT(),r=cp();function i(s){return t(s,r,e)}return Sv=i,Sv}var Rv,WP;function tie(){if(WP)return Rv;WP=1;var t=pN(),e=dN(),r=ef();function i(s){return t(s,r,e)}return Rv=i,Rv}var Cv,jP;function rie(){if(jP)return Cv;jP=1;var t=Vo(),e=hs(),r=t(e,"DataView");return Cv=r,Cv}var wv,YP;function nie(){if(YP)return wv;YP=1;var t=Vo(),e=hs(),r=t(e,"Promise");return wv=r,wv}var Lv,ZP;function iie(){if(ZP)return Lv;ZP=1;var t=Vo(),e=hs(),r=t(e,"Set");return Lv=r,Lv}var Iv,QP;function sie(){if(QP)return Iv;QP=1;var t=Vo(),e=hs(),r=t(e,"WeakMap");return Iv=r,Iv}var Bv,JP;function jT(){if(JP)return Bv;JP=1;var t=rie(),e=dT(),r=nie(),i=iie(),s=sie(),a=il(),n=e4(),o="[object Map]",u="[object Object]",c="[object Promise]",f="[object Set]",h="[object WeakMap]",p="[object DataView]",g=n(t),m=n(e),T=n(r),x=n(i),v=n(s),y=a;return(t&&y(new t(new ArrayBuffer(1)))!=p||e&&y(new e)!=o||r&&y(r.resolve())!=c||i&&y(new i)!=f||s&&y(new s)!=h)&&(y=function(R){var A=a(R),k=A==u?R.constructor:void 0,b=k?n(k):"";if(b)switch(b){case g:return p;case m:return o;case T:return c;case x:return f;case v:return h}return A}),Bv=y,Bv}var Pv,eO;function aie(){if(eO)return Pv;eO=1;var t=Object.prototype,e=t.hasOwnProperty;function r(i){var s=i.length,a=new i.constructor(s);return s&&typeof i[0]=="string"&&e.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return Pv=r,Pv}var Ov,tO;function oie(){if(tO)return Ov;tO=1;var t=gT();function e(r,i){var s=i?t(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.byteLength)}return Ov=e,Ov}var Dv,rO;function uie(){if(rO)return Dv;rO=1;var t=/\w*$/;function e(r){var i=new r.constructor(r.source,t.exec(r));return i.lastIndex=r.lastIndex,i}return Dv=e,Dv}var kv,nO;function lie(){if(nO)return kv;nO=1;var t=Zd(),e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function i(s){return r?Object(r.call(s)):{}}return kv=i,kv}var Uv,iO;function cie(){if(iO)return Uv;iO=1;var t=gT(),e=oie(),r=uie(),i=lie(),s=a4(),a="[object Boolean]",n="[object Date]",o="[object Map]",u="[object Number]",c="[object RegExp]",f="[object Set]",h="[object String]",p="[object Symbol]",g="[object ArrayBuffer]",m="[object DataView]",T="[object Float32Array]",x="[object Float64Array]",v="[object Int8Array]",y="[object Int16Array]",R="[object Int32Array]",A="[object Uint8Array]",k="[object Uint8ClampedArray]",b="[object Uint16Array]",C="[object Uint32Array]";function w(O,M,$){var G=O.constructor;switch(M){case g:return t(O);case a:case n:return new G(+O);case m:return e(O,$);case T:case x:case v:case y:case R:case A:case k:case b:case C:return s(O,$);case o:return new G;case u:case h:return new G(O);case c:return r(O);case f:return new G;case p:return i(O)}}return Uv=w,Uv}var Mv,sO;function fie(){if(sO)return Mv;sO=1;var t=jT(),e=Xa(),r="[object Map]";function i(s){return e(s)&&t(s)==r}return Mv=i,Mv}var Nv,aO;function hie(){if(aO)return Nv;aO=1;var t=fie(),e=xT(),r=vT(),i=r&&r.isMap,s=i?e(i):t;return Nv=s,Nv}var Fv,oO;function die(){if(oO)return Fv;oO=1;var t=jT(),e=Xa(),r="[object Set]";function i(s){return e(s)&&t(s)==r}return Fv=i,Fv}var Gv,uO;function pie(){if(uO)return Gv;uO=1;var t=die(),e=xT(),r=vT(),i=r&&r.isSet,s=i?e(i):t;return Gv=s,Gv}var Kv,lO;function gie(){if(lO)return Kv;lO=1;var t=r4(),e=Xne(),r=ET(),i=jne(),s=Yne(),a=s4(),n=o4(),o=Qne(),u=Jne(),c=eie(),f=tie(),h=jT(),p=aie(),g=cie(),m=l4(),T=za(),x=bT(),v=hie(),y=qi(),R=pie(),A=cp(),k=ef(),b=1,C=2,w=4,O="[object Arguments]",M="[object Array]",$="[object Boolean]",G="[object Date]",Z="[object Error]",ce="[object Function]",Y="[object GeneratorFunction]",J="[object Map]",ie="[object Number]",le="[object Object]",Te="[object RegExp]",Me="[object Set]",Ee="[object String]",se="[object Symbol]",me="[object WeakMap]",Xe="[object ArrayBuffer]",nt="[object DataView]",ot="[object Float32Array]",pt="[object Float64Array]",qe="[object Int8Array]",Ye="[object Int16Array]",at="[object Int32Array]",lt="[object Uint8Array]",j="[object Uint8ClampedArray]",ue="[object Uint16Array]",oe="[object Uint32Array]",be={};be[O]=be[M]=be[Xe]=be[nt]=be[$]=be[G]=be[ot]=be[pt]=be[qe]=be[Ye]=be[at]=be[J]=be[ie]=be[le]=be[Te]=be[Me]=be[Ee]=be[se]=be[lt]=be[j]=be[ue]=be[oe]=!0,be[Z]=be[ce]=be[me]=!1;function Le(ye,De,ke,z,X,_e){var Ie,Ze=De&b,Ve=De&C,Ce=De&w;if(ke&&(Ie=X?ke(ye,z,X,_e):ke(ye)),Ie!==void 0)return Ie;if(!y(ye))return ye;var Oe=T(ye);if(Oe){if(Ie=p(ye),!Ze)return n(ye,Ie)}else{var st=h(ye),ae=st==ce||st==Y;if(x(ye))return a(ye,Ze);if(st==le||st==O||ae&&!X){if(Ie=Ve||ae?{}:m(ye),!Ze)return Ve?u(ye,s(Ie,ye)):o(ye,i(Ie,ye))}else{if(!be[st])return X?ye:{};Ie=g(ye,st,Ze)}}_e||(_e=new t);var ne=_e.get(ye);if(ne)return ne;_e.set(ye,Ie),R(ye)?ye.forEach(function(te){Ie.add(Le(te,De,ke,te,ye,_e))}):v(ye)&&ye.forEach(function(te,ge){Ie.set(ge,Le(te,De,ke,ge,ye,_e))});var U=Ce?Ve?f:c:Ve?k:A,K=Oe?void 0:U(ye);return e(K||ye,function(te,ge){K&&(ge=te,te=ye[ge]),r(Ie,ge,Le(te,De,ke,ge,ye,_e))}),Ie}return Kv=Le,Kv}var Vv,cO;function mie(){if(cO)return Vv;cO=1;var t=gie(),e=1,r=4;function i(s){return t(s,e|r)}return Vv=i,Vv}var _ie=mie();const gN=fs(_ie),bie=or({emits:{resolve:()=>!0},data(){return{screen:"options",vibe:null,message:"",content:null,isContent:!0,values:{}}},mounted(){var e,r;const t=(r=(e=this.$debugRecorder)==null?void 0:e.room)==null?void 0:r.appTag;t&&(this.values=gN(this.$ecastValues),this.content=DI.getPromptGuess(this.values,t)??null)},methods:{onFeedbackClick(){this.screen="feedback"},onDebugClick(){this.screen="debug"},onVibeClick(t){this.vibe=t},async onSubmitClick(){this.$debugRecorder&&(this.screen==="debug"&&(await this.$debugRecorder.send(this.message),this.$emit("resolve")),this.screen==="feedback"&&(await DI.send({room:this.$debugRecorder.room,name:this.$ecast.name,role:this.$ecast.role,content:this.isContent?this.content:null,message:this.message??"",vibe:this.vibe??"none",values:this.values}),this.$emit("resolve")))}}}),fO="./assets/DLGomgNm.png",hO="./assets/B8C13_5i.png",xie="./assets/DaAsZ-1o.png",vie="./assets/C0nA0hrp.png",Eie="./assets/_LZDgMYc.png",yie={class:"jbg"},Tie={key:0,class:"options"},Aie={key:1,class:"feedback"},Sie={class:"buttons"},Rie={class:"actions"},Cie={key:0,class:"content-guess"},wie={key:2,class:"debug"},Lie={class:"actions"};function Iie(t,e,r,i,s,a){return Pe(),Ge("div",yie,[t.screen==="options"?(Pe(),Ge("div",Tie,[Se("button",{class:"feedback-button",onClick:e[0]||(e[0]=(...n)=>t.onFeedbackClick&&t.onFeedbackClick(...n))},e[10]||(e[10]=[Se("img",{src:fO,alt:"Leave Feedback"},null,-1),Se("span",null,[ys("LEAVE"),Se("br"),ys("FEEDBACK")],-1)])),Se("button",{onClick:e[1]||(e[1]=(...n)=>t.onDebugClick&&t.onDebugClick(...n))},e[11]||(e[11]=[Se("img",{src:hO,alt:"Send Debug"},null,-1),Se("span",null,[ys("SEND A"),Se("br"),ys("DEBUG")],-1)]))])):t.screen==="feedback"?(Pe(),Ge("div",Aie,[e[17]||(e[17]=Se("img",{class:"image",src:fO,alt:"Feedback"},null,-1)),e[18]||(e[18]=Se("h3",{class:"text"},"Send Feedback",-1)),Se("div",{class:kt(["vibes",{"has-selected":t.vibe}])},[e[15]||(e[15]=Se("p",{class:"cta"},"CHOOSE A VIBE",-1)),Se("div",Sie,[Se("button",{class:kt({selected:t.vibe==="good"}),onClick:e[2]||(e[2]=n=>t.onVibeClick("good"))},e[12]||(e[12]=[Se("img",{src:xie,alt:"good"},null,-1)]),2),Se("button",{class:kt({selected:t.vibe==="meh"}),onClick:e[3]||(e[3]=n=>t.onVibeClick("meh"))},e[13]||(e[13]=[Se("img",{src:vie,alt:"good"},null,-1)]),2),Se("button",{class:kt({selected:t.vibe==="bad"}),onClick:e[4]||(e[4]=n=>t.onVibeClick("bad"))},e[14]||(e[14]=[Se("img",{src:Eie,alt:"bad"},null,-1)]),2)])],2),Se("div",Rie,[t.content?(Pe(),Ge("div",Cie,[gr(Se("input",{"onUpdate:modelValue":e[5]||(e[5]=n=>t.isContent=n),type:"checkbox"},null,512),[[iZ,t.isContent]]),Se("span",null,[e[16]||(e[16]=ys("Feedback is about: ")),Se("em",null,xt(t.content),1)])])):Ot("",!0),gr(Se("textarea",{"onUpdate:modelValue":e[6]||(e[6]=n=>t.message=n),rows:"3",placeholder:"(optional) more details","aria-label":"Details"},null,512),[[wy,t.message]]),Se("button",{onClick:e[7]||(e[7]=Fa((...n)=>t.onSubmitClick&&t.onSubmitClick(...n),["prevent"]))},xt(t.$t("ACTION.SUBMIT")),1)])])):t.screen==="debug"?(Pe(),Ge("div",wie,[e[19]||(e[19]=Se("img",{class:"image",src:hO,alt:"Debug"},null,-1)),e[20]||(e[20]=Se("h3",{class:"text"},"What is Happening?",-1)),Se("div",Lie,[gr(Se("textarea",{"onUpdate:modelValue":e[8]||(e[8]=n=>t.message=n),rows:"3",placeholder:"Enter details","aria-label":"Details"},null,512),[[wy,t.message]]),Se("button",{onClick:e[9]||(e[9]=Fa((...n)=>t.onSubmitClick&&t.onSubmitClick(...n),["prevent"]))},xt(t.$t("ACTION.OK")),1)])])):Ot("",!0)])}const Bie=er(bie,[["render",Iie],["__scopeId","data-v-2c53389f"]]),Pie=or({methods:{onFeedbackClick(){this.$showModal(Bie)}}});function Oie(t,e,r,i,s,a){return Pe(),Ge("div",{class:"feedback-button",onClick:e[0]||(e[0]=(...n)=>t.onFeedbackClick&&t.onFeedbackClick(...n))},"SEND FEEDBACK")}const Die=er(Pie,[["render",Oie],["__scopeId","data-v-6f2f1788"]]),kie={install:(t,e)=>{if(!t.config.globalProperties.$debugRecorder&&!t.config.globalProperties.$debugReplayer){if(e.replayer){t.config.globalProperties.$debugReplayer=e.replayer,t.component("Debug",qne);return}if(t.config.globalProperties.$debugRecorder=new lJ(e.client,e.room),!t.config.globalProperties.$showModal){console.warn("[debugPlugin] Sending debug and feedback messages is disabled because the modalPlugin is missing.");return}(!Yr.isProduction()||Yr.getQueryParam("feedback"))&&t.component("Debug",Die)}}};var $v,dO;function Uie(){if(dO)return $v;dO=1;var t=hs(),e=function(){return t.Date.now()};return $v=e,$v}var Hv,pO;function Mie(){if(pO)return Hv;pO=1;var t=/\s/;function e(r){for(var i=r.length;i--&&t.test(r.charAt(i)););return i}return Hv=e,Hv}var qv,gO;function Nie(){if(gO)return qv;gO=1;var t=Mie(),e=/^\s+/;function r(i){return i&&i.slice(0,t(i)+1).replace(e,"")}return qv=r,qv}var Xv,mO;function fp(){if(mO)return Xv;mO=1;var t=il(),e=Xa(),r="[object Symbol]";function i(s){return typeof s=="symbol"||e(s)&&t(s)==r}return Xv=i,Xv}var zv,_O;function Fie(){if(_O)return zv;_O=1;var t=Nie(),e=qi(),r=fp(),i=NaN,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,n=/^0o[0-7]+$/i,o=parseInt;function u(c){if(typeof c=="number")return c;if(r(c))return i;if(e(c)){var f=typeof c.valueOf=="function"?c.valueOf():c;c=e(f)?f+"":f}if(typeof c!="string")return c===0?c:+c;c=t(c);var h=a.test(c);return h||n.test(c)?o(c.slice(2),h?2:8):s.test(c)?i:+c}return zv=u,zv}var Wv,bO;function mN(){if(bO)return Wv;bO=1;var t=qi(),e=Uie(),r=Fie(),i="Expected a function",s=Math.max,a=Math.min;function n(o,u,c){var f,h,p,g,m,T,x=0,v=!1,y=!1,R=!0;if(typeof o!="function")throw new TypeError(i);u=r(u)||0,t(c)&&(v=!!c.leading,y="maxWait"in c,p=y?s(r(c.maxWait)||0,u):p,R="trailing"in c?!!c.trailing:R);function A(Z){var ce=f,Y=h;return f=h=void 0,x=Z,g=o.apply(Y,ce),g}function k(Z){return x=Z,m=setTimeout(w,u),v?A(Z):g}function b(Z){var ce=Z-T,Y=Z-x,J=u-ce;return y?a(J,p-Y):J}function C(Z){var ce=Z-T,Y=Z-x;return T===void 0||ce>=u||ce<0||y&&Y>=p}function w(){var Z=e();if(C(Z))return O(Z);m=setTimeout(w,b(Z))}function O(Z){return m=void 0,R&&f?A(Z):(f=h=void 0,g)}function M(){m!==void 0&&clearTimeout(m),x=0,f=T=h=m=void 0}function $(){return m===void 0?g:O(e())}function G(){var Z=e(),ce=C(Z);if(f=arguments,h=this,T=Z,ce){if(m===void 0)return k(T);if(y)return clearTimeout(m),m=setTimeout(w,u),A(T)}return m===void 0&&(m=setTimeout(w,u)),g}return G.cancel=M,G.flush=$,G}return Wv=n,Wv}var Gie=mN();const Kie=fs(Gie);var jv,xO;function Vie(){if(xO)return jv;xO=1;var t=za(),e=fp(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function s(a,n){if(t(a))return!1;var o=typeof a;return o=="number"||o=="symbol"||o=="boolean"||a==null||e(a)?!0:i.test(a)||!r.test(a)||n!=null&&a in Object(n)}return jv=s,jv}var Yv,vO;function $ie(){if(vO)return Yv;vO=1;var t=t4(),e="Expected a function";function r(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var a=function(){var n=arguments,o=s?s.apply(this,n):n[0],u=a.cache;if(u.has(o))return u.get(o);var c=i.apply(this,n);return a.cache=u.set(o,c)||u,c};return a.cache=new(r.Cache||t),a}return r.Cache=t,Yv=r,Yv}var Zv,EO;function Hie(){if(EO)return Zv;EO=1;var t=$ie(),e=500;function r(i){var s=t(i,function(n){return a.size===e&&a.clear(),n}),a=s.cache;return s}return Zv=r,Zv}var Qv,yO;function qie(){if(yO)return Qv;yO=1;var t=Hie(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=t(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(e,function(n,o,u,c){a.push(u?c.replace(r,"$1"):o||n)}),a});return Qv=i,Qv}var Jv,TO;function _N(){if(TO)return Jv;TO=1;function t(e,r){for(var i=-1,s=e==null?0:e.length,a=Array(s);++i<s;)a[i]=r(e[i],i,e);return a}return Jv=t,Jv}var eE,AO;function Xie(){if(AO)return eE;AO=1;var t=Zd(),e=_N(),r=za(),i=fp(),s=t?t.prototype:void 0,a=s?s.toString:void 0;function n(o){if(typeof o=="string")return o;if(r(o))return e(o,n)+"";if(i(o))return a?a.call(o):"";var u=o+"";return u=="0"&&1/o==-1/0?"-0":u}return eE=n,eE}var tE,SO;function zie(){if(SO)return tE;SO=1;var t=Xie();function e(r){return r==null?"":t(r)}return tE=e,tE}var rE,RO;function bN(){if(RO)return rE;RO=1;var t=za(),e=Vie(),r=qie(),i=zie();function s(a,n){return t(a)?a:e(a,n)?[a]:r(i(a))}return rE=s,rE}var nE,CO;function xN(){if(CO)return nE;CO=1;var t=fp();function e(r){if(typeof r=="string"||t(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}return nE=e,nE}var iE,wO;function Wie(){if(wO)return iE;wO=1;var t=ET(),e=bN(),r=yT(),i=qi(),s=xN();function a(n,o,u,c){if(!i(n))return n;o=e(o,n);for(var f=-1,h=o.length,p=h-1,g=n;g!=null&&++f<h;){var m=s(o[f]),T=u;if(m==="__proto__"||m==="constructor"||m==="prototype")return n;if(f!=p){var x=g[m];T=c?c(x,m,g):void 0,T===void 0&&(T=i(x)?x:r(o[f+1])?[]:{})}t(g,m,T),g=g[m]}return n}return iE=a,iE}var sE,LO;function jie(){if(LO)return sE;LO=1;var t=Wie();function e(r,i,s){return r==null?r:t(r,i,s)}return sE=e,sE}var Yie=jie();const Zie=fs(Yie);class Qie{constructor(){Be(this,"wsClient");Be(this,"isKicked",!1);Be(this,"isHostPaused",!1);Be(this,"watchStopHandler");Be(this,"keyMap");Be(this,"providerMap");Be(this,"mappedValues",Uo({}));Be(this,"shouldParseBlobcast",!1);Be(this,"callbackMap",new Map);Be(this,"pausedKeys",null);Be(this,"pausedEvents",null);Be(this,"keyMapKeys");Be(this,"providerMapKeys");Be(this,"hotValues");Be(this,"newValues");Be(this,"pause",(e=[],r=null)=>{if(e){const i=this.pausedKeys??[];i.push(...e),this.pausedKeys=i}if(r){const i=this.pausedEvents??[];i.push(...r),this.pausedEvents=i}});Be(this,"resume",()=>{this.pausedKeys=null,this.pausedEvents=null,this.rawSync()});Be(this,"flush",()=>{const e=this.pausedKeys,r=this.pausedEvents;this.resume(),this.pausedKeys=e,this.pausedEvents=r});Be(this,"sync",Kie(this.rawSync.bind(this),50))}setWSClient(e){this.wsClient=e,this.setupWatcher(),e.on("connection",this.onConnection.bind(this)),e.on("room/exit",this.onRoomExit.bind(this)),e.on("room/lock",this.onRoomLock.bind(this)),e.on("room/migrate",this.onRoomMigrate.bind(this)),e.on("client/connected",this.onClientConnected.bind(this)),e.on("client/disconnected",this.onClientDisconnected.bind(this)),e.on("client/kicked",this.onClientKicked.bind(this)),e.on("socketClose",this.onSocketClose.bind(this))}setupWatcher(){this.wsClient.entities=Uo(this.wsClient.entities),this.watchStopHandler=Do(this.wsClient.entities,this.sync)}rawSync(){if(this.wsClient&&!(!this.keyMap&&!this.providerMap)){if(this.pausedKeys&&!this.pausedKeys.length){this.emit("didReceivePausedEntities",this.wsClient.entities);return}this.hotValues={},this.newValues={},this.normalize().mapKeysToValues().mapProvidersToValues().deleteDropped().hydrateRefs().syncExisting(),delete this.hotValues,delete this.newValues,this.checkHostIsPausedChange()}}valueForEntity(e){return e instanceof fn.ArtifactEntity||e instanceof fn.DoodleEntity||e instanceof fn.TextMapEntity||e instanceof fn.NumberEntity?e:e instanceof fn.ObjectEntity?gN(e.val):e instanceof fn.TextEntity?e.text:null}normalize(){var r;const e=Object.keys(this.wsClient.entities);for(let i=0;i<e.length;i++){let s=e[i];if((r=this.pausedKeys)!=null&&r.includes(s)){this.emit("didReceivePausedEntities",{[s]:this.wsClient.entities[s]});continue}const a=this.valueForEntity(this.wsClient.entities[s]);if(a!=null){if(this.shouldParseBlobcast){const n=s.split(":");if(n[0]==="bc")if(n[1]==="customer"){if(n[2]!==`${this.wsClient.id}`)continue;s="player"}else n[1]==="room"&&(s="room")}this.hotValues[s]=a}}return this}hydrateRefs(){const e=(r,i,s=!1,a=!1)=>{const n=r.$ref??r.ref;if(n){const o=this.hotValues[n];if(o===void 0)if(a)console.warn(`[ecastPlugin] entity "${i}" referenced nonexistent optional entity "${n}"`);else throw new Error(`[ecastPlugin] entity "${i}" referenced entity "${n}" but it does not exist`);Zie(this.newValues,i,o)}else s&&Object.entries(r).forEach(([o,u])=>{u!==null&&typeof u=="object"&&e(u,`${i}.${o}`,s,a)})};return Object.entries(this.newValues).forEach(([r,i])=>{i&&Object.entries(i).forEach(([s,a])=>{a!==null&&typeof a=="object"&&e(a,`${r}.${s}`,this.keyHasDeepRefs(r),this.keyHasOptionalRefs(r))})}),this}keyHasDeepRefs(e){var r,i,s,a;return!!((i=(r=this.keyMap)==null?void 0:r[e])!=null&&i.hasDeepRefs||(a=(s=this.providerMap)==null?void 0:s[e])!=null&&a.hasDeepRefs)}keyHasOptionalRefs(e){var r,i,s,a;return!!((i=(r=this.keyMap)==null?void 0:r[e])!=null&&i.hasOptionalRefs||(a=(s=this.providerMap)==null?void 0:s[e])!=null&&a.hasOptionalRefs)}mapKeysToValues(){if(!this.keyMap)return this;for(let e=0;e<this.keyMapKeys.length;e++)this.newValues[this.keyMapKeys[e]]=this.hotValues[this.keyMap[this.keyMapKeys[e]].key];return this}mapProvidersToValues(){if(!this.providerMap)return this;for(let e=0;e<this.providerMapKeys.length;e++)this.newValues[this.providerMapKeys[e]]=this.providerMap[this.providerMapKeys[e]].fn(this.hotValues,this.wsClient);return this}deleteDropped(){const e=Object.keys(this.mappedValues);for(let r=0;r<e.length;r++)this.newValues[e[r]]||delete this.mappedValues[e[r]];return this}syncExisting(){const e=Object.keys(this.newValues);for(let r=0;r<e.length;r++)this.mappedValues[e[r]]=this.newValues[e[r]];return this.mappedValues}checkHostIsPausedChange(){const e=this.mappedValues.hostIsPaused;e&&!this.isHostPaused?(this.isHostPaused=!0,this.emit("hostDidPause")):!e&&this.isHostPaused&&(this.isHostPaused=!1,this.emit("hostDidUnpause"))}addKeys(e){this.keyMap||(this.keyMap={}),Object.keys(e).forEach(r=>{if(typeof e[r]=="function"){const i=e[r];this.keyMap[r]={key:i(this.wsClient),hasDeepRefs:!1,hasOptionalRefs:!1};return}if(typeof e[r]=="object"){const i=e[r];this.keyMap[r]={key:i.fn?i.fn(this.wsClient):i.key,hasDeepRefs:i.hasDeepRefs??!1,hasOptionalRefs:i.hasOptionalRefs??!1};return}this.keyMap[r]={key:e[r]}}),this.keyMapKeys=Object.keys(this.keyMap),this.sync()}purgeKeys(e){this.keyMap&&(Object.keys(e).forEach(r=>{this.keyMap[r]&&delete this.keyMap[r]}),this.keyMapKeys=Object.keys(this.keyMap),this.sync())}addProviders(e){this.providerMap||(this.providerMap={}),Object.keys(e).forEach(r=>{if(typeof e[r]=="object"){const i=e[r];this.providerMap[r]={fn:i.fn,hasDeepRefs:i.hasDeepRefs??!1};return}this.providerMap[r]={fn:e[r]}}),this.providerMapKeys=Object.keys(this.providerMap),this.sync()}purgeProviders(e){this.providerMap&&(Object.keys(e).forEach(r=>{this.providerMap[r]&&delete this.providerMap[r]}),this.providerMapKeys=Object.keys(this.providerMap),this.sync())}meta(e){var r,i;return((i=(r=this.wsClient)==null?void 0:r.entities[e])==null?void 0:i.meta)??null}restrictions(e){var i;const r=(i=this.wsClient)==null?void 0:i.entities[e];return!r||!(r instanceof fn.NumberEntity)?null:r.restrictions??null}keyForRef(...e){var a,n,o,u;const r=(n=(a=this.keyMap)==null?void 0:a[e[0]])==null?void 0:n.key;if(!r)return null;const i=(o=this.wsClient)==null?void 0:o.entities[r];if(!i||!(i instanceof fn.ObjectEntity))return null;const s=(u=i==null?void 0:i.val)==null?void 0:u[e[1]];return(s==null?void 0:s.ref)??(s==null?void 0:s.$ref)??null}on(e,r){const i=this.callbackMap.get(e)??new Set;i.size||this.callbackMap.set(e,i),i.add(r)}off(e,r){const i=this.callbackMap.get(e);i&&i.delete(r)}emit(e,r){var i,s;if(this.pausedEvents&&this.pausedEvents.includes(e)){(i=this.callbackMap.get("didEmitPausedEvent"))==null||i.forEach(a=>a(e));return}(s=this.callbackMap.get(e))==null||s.forEach(a=>a(r))}onConnection(e){if(e.status==="connected"){this.emit("didReconnect");return}this.emit("isReconnecting",e.attempt??0)}onClientConnected(e){e.role==="host"&&e.reconnect&&this.emit("hostDidReconnect")}onClientDisconnected(e){e.role==="host"&&this.emit("hostDidDisconnect")}onRoomExit(){this.emit("roomDidExit")}onRoomLock(){this.emit("roomDidLock")}onRoomMigrate(e){this.emit("roomDidMigrate",e)}onClientKicked(){var e;this.isKicked=!0,(e=this.watchStopHandler)==null||e.call(this),this.emit("wasKicked")}onSocketClose(){this.isKicked||this.emit("didDisconnect")}}const gi=new Qie,Jie={install:(t,e)=>{t.config.globalProperties.$setupEcast=r=>{gi.setWSClient(r.wsClient),r.wsClient.on("artifact",i=>lc.add(i)),r.wsClient.on("connection",i=>{i.status==="connected"&&gi.setupWatcher()}),gi.sync(),t.config.globalProperties.$ecast=gi.wsClient,t.config.globalProperties.$ecastManager=gi,t.config.globalProperties.$ecastValues=gi.mappedValues,t.config.globalProperties.$ecastRoom=r.room,t.config.globalProperties.$ecastWelcome=r.welcome,t.config.globalProperties.$syncEcast=gi.sync,t.config.globalProperties.$pauseEcastUpdates=gi.pause,t.config.globalProperties.$resumeEcastUpdates=gi.resume,t.mixin({beforeCreate(){this.$options.ecastKeys&&gi.addKeys(this.$options.ecastKeys),this.$options.ecastProviders&&gi.addProviders(this.$options.ecastProviders)},beforeDestroy(){this.$options.ecastKeys&&gi.purgeKeys(this.$options.ecastKeys),this.$options.ecastProviders&&gi.purgeProviders(this.$options.ecastProviders)}})},e!=null&&e.wsClient&&t.config.globalProperties.$setupEcast(e)}};var hc=RT();const ol={fatal:{error:Symbol("fatal.error")},textDescriptions:{announcement:Symbol("textDescriptions.announcement")}},ese=Object.prototype.toString;function tse(t,e){return ese.call(t)===`[object ${e}]`}function rse(t){return tse(t,"Object")}function nse(t){return!!(t&&t.then&&typeof t.then=="function")}const dc="8.38.0",Ls=globalThis;function YT(t,e,r){const i=r||Ls,s=i.__SENTRY__=i.__SENTRY__||{},a=s[dc]=s[dc]||{};return a[t]||(a[t]=e())}const ZT=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ise="Sentry Logger ",IO=["debug","info","warn","error","log","assert","trace"],BO={};function vN(t){if(!("console"in Ls))return t();const e=Ls.console,r={},i=Object.keys(BO);i.forEach(s=>{const a=BO[s];r[s]=e[s],e[s]=a});try{return t()}finally{i.forEach(s=>{e[s]=r[s]})}}function sse(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return ZT?IO.forEach(r=>{e[r]=(...i)=>{t&&vN(()=>{Ls.console[r](`${ise}[${r}]:`,...i)})}}):IO.forEach(r=>{e[r]=()=>{}}),e}const ns=YT("logger",sse),ase=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function ose(t){return t==="http"||t==="https"}function use(t,e=!1){const{host:r,path:i,pass:s,port:a,projectId:n,protocol:o,publicKey:u}=t;return`${o}://${u}${e&&s?`:${s}`:""}@${r}${a?`:${a}`:""}/${i&&`${i}/`}${n}`}function lse(t){const e=ase.exec(t);if(!e){vN(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[r,i,s="",a="",n="",o=""]=e.slice(1);let u="",c=o;const f=c.split("/");if(f.length>1&&(u=f.slice(0,-1).join("/"),c=f.pop()),c){const h=c.match(/^\d+/);h&&(c=h[0])}return EN({host:a,pass:s,path:u,projectId:c,port:n,protocol:r,publicKey:i})}function EN(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function cse(t){if(!ZT)return!0;const{port:e,projectId:r,protocol:i}=t;return["protocol","publicKey","host","projectId"].find(n=>t[n]?!1:(ns.error(`Invalid Sentry Dsn: ${n} missing`),!0))?!1:r.match(/^\d+$/)?ose(i)?e&&isNaN(parseInt(e,10))?(ns.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(ns.error(`Invalid Sentry Dsn: Invalid protocol ${i}`),!1):(ns.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function fse(t){const e=typeof t=="string"?lse(t):EN(t);if(!(!e||!cse(e)))return e}function hse(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{ZT&&ns.log(`Failed to add non-enumerable property "${e}" to object`,t)}}const yN=1e3;function TN(){return Date.now()/yN}function dse(){const{performance:t}=Ls;if(!t||!t.now)return TN;const e=Date.now()-t.now(),r=t.timeOrigin==null?e:t.timeOrigin;return()=>(r+t.now())/yN}const pse=dse();(()=>{const{performance:t}=Ls;if(!t||!t.now)return;const e=3600*1e3,r=t.now(),i=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+r-i):e,a=s<e,n=t.timing&&t.timing.navigationStart,u=typeof n=="number"?Math.abs(n+r-i):e,c=u<e;return a||c?s<=u?t.timeOrigin:n:i})();function Mu(){const t=Ls,e=t.crypto||t.msCrypto;let r=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(r=()=>{const i=new Uint8Array(1);return e.getRandomValues(i),i[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,i=>(i^(r()&15)>>i/4).toString(16))}function PO(){return{traceId:Mu(),spanId:Mu().substring(16)}}function QT(){return JT(Ls),Ls}function JT(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||dc,e[dc]=e[dc]||{}}function gse(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||pse(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Mu()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}const By="_sentrySpan";function OO(t,e){e?hse(t,By,e):delete t[By]}function DO(t){return t[By]}const mse=100;class eA{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=PO()}clone(){const e=new eA;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,OO(e,DO(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&gse(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,[i,s]=r instanceof Ic?[r.getScopeData(),r.getRequestSession()]:rse(r)?[e,e.requestSession]:[],{tags:a,extra:n,user:o,contexts:u,level:c,fingerprint:f=[],propagationContext:h}=i||{};return this._tags={...this._tags,...a},this._extra={...this._extra,...n},this._contexts={...this._contexts,...u},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),f.length&&(this._fingerprint=f),h&&(this._propagationContext=h),s&&(this._requestSession=s),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,OO(this,void 0),this._attachments=[],this._propagationContext=PO(),this._notifyScopeListeners(),this}addBreadcrumb(e,r){const i=typeof r=="number"?r:mse;if(i<=0)return this;const s={timestamp:TN(),...e},a=this._breadcrumbs;return a.push(s),this._breadcrumbs=a.length>i?a.slice(-i):a,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:DO(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,r){const i=r&&r.event_id?r.event_id:Mu();if(!this._client)return ns.warn("No client configured on scope - will not capture exception!"),i;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureMessage(e,r,i){const s=i&&i.event_id?i.event_id:Mu();if(!this._client)return ns.warn("No client configured on scope - will not capture message!"),s;const a=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:a,...i,event_id:s},this),s}captureEvent(e,r){const i=r&&r.event_id?r.event_id:Mu();return this._client?(this._client.captureEvent(e,{...r,event_id:i},this),i):(ns.warn("No client configured on scope - will not capture event!"),i)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Ic=eA;function _se(){return YT("defaultCurrentScope",()=>new Ic)}function bse(){return YT("defaultIsolationScope",()=>new Ic)}class xse{constructor(e,r){let i;e?i=e:i=new Ic;let s;r?s=r:s=new Ic,this._stack=[{scope:i}],this._isolationScope=s}withScope(e){const r=this._pushScope();let i;try{i=e(r)}catch(s){throw this._popScope(),s}return nse(i)?i.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),i)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function ju(){const t=QT(),e=JT(t);return e.stack=e.stack||new xse(_se(),bse())}function vse(t){return ju().withScope(t)}function Ese(t,e){const r=ju();return r.withScope(()=>(r.getStackTop().scope=t,e(t)))}function kO(t){return ju().withScope(()=>t(ju().getIsolationScope()))}function yse(){return{withIsolationScope:kO,withScope:vse,withSetScope:Ese,withSetIsolationScope:(t,e)=>kO(e),getCurrentScope:()=>ju().getScope(),getIsolationScope:()=>ju().getIsolationScope()}}function AN(t){const e=JT(t);return e.acs?e.acs:yse()}function Tse(){const t=QT();return AN(t).getCurrentScope()}function Ase(){const t=QT();return AN(t).getIsolationScope()}function Sse(){return Ase().lastEventId()}function Rse(t){const e=t.protocol?`${t.protocol}:`:"",r=t.port?`:${t.port}`:"";return`${e}//${t.host}${r}${t.path?`/${t.path}`:""}/api/`}function Cse(t,e){const r=fse(t);if(!r)return"";const i=`${Rse(r)}embed/error-page/`;let s=`dsn=${use(r)}`;for(const a in e)if(a!=="dsn"&&a!=="onClose")if(a==="user"){const n=e.user;if(!n)continue;n.name&&(s+=`&name=${encodeURIComponent(n.name)}`),n.email&&(s+=`&email=${encodeURIComponent(n.email)}`)}else s+=`&${encodeURIComponent(a)}=${encodeURIComponent(e[a])}`;return`${i}?${s}`}const hu=Ls,aE=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function wse(t={}){if(!hu.document){aE&&ns.error("Global document not defined in showReportDialog call");return}const e=Tse(),r=e.getClient(),i=r&&r.getDsn();if(!i){aE&&ns.error("DSN not configured for showReportDialog call");return}if(e&&(t.user={...e.getUser(),...t.user}),!t.eventId){const o=Sse();o&&(t.eventId=o)}const s=hu.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=Cse(i,t),t.onLoad&&(s.onload=t.onLoad);const{onClose:a}=t;if(a){const o=u=>{if(u.data==="__sentry_reportdialog_closed__")try{a()}finally{hu.removeEventListener("message",o)}};hu.addEventListener("message",o)}const n=hu.document.head||hu.document.body;n?n.appendChild(s):aE&&ns.error("Not injecting report dialog. No injection point found in HTML")}const Lse=or({setup(){return{fatalError:ia(ol.fatal.error)}},computed:{message(){var i,s,a,n;const t=((s=(i=this.fatalError)==null?void 0:i.event)==null?void 0:s.event_id)??"Unknown";let e="";const r=(n=(a=this.fatalError)==null?void 0:a.hint)==null?void 0:n.originalException;return r?typeof r=="string"?e=r:e=r.message:e="An unknown error occured",`Version:
${window.tv.manifest.loader.version}

Event ID:
${t}

${e}`}},methods:{onFeedbackClick(){var t,e;wse({id:((e=(t=this.fatalError)==null?void 0:t.event)==null?void 0:e.event_id)??"Unknown"})}}}),Ise={class:"jbg fatal"},Bse={class:"constrain"},Pse={class:"content"},Ose={class:"error"};function Dse(t,e,r,i,s,a){return Pe(),Ge("div",Ise,[Se("div",Bse,[e[5]||(e[5]=Se("a",{class:"logo",href:"/","aria-label":"Jackbox Games Logo"},null,-1)),Se("div",Pse,[e[1]||(e[1]=Se("h1",null,"You have encountered an error",-1)),e[2]||(e[2]=Se("p",null,"Something went wrong! But don't worry, you can try a few things to get going.",-1)),e[3]||(e[3]=Se("ul",null,[Se("li",null,"Refresh the page"),Se("li",null,"Turn off adblockers or other browser extensions."),Se("li",null,"Check your connection to the Internet."),Se("li",null,"Make sure you're using an up-to-date browser."),Se("li",null,"If that doesn't work, let us know.")],-1)),Se("button",{onClick:e[0]||(e[0]=(...n)=>t.onFeedbackClick&&t.onFeedbackClick(...n))},"Tell us what happened"),e[4]||(e[4]=Se("hr",null,null,-1)),Se("pre",Ose,xt(t.message),1)])])])}const kse=er(Lse,[["render",Dse],["__scopeId","data-v-a7272d53"]]),fh=Uo({hasCrashed:!1}),Use={install:t=>{if(t.config.globalProperties.$handleEcastError)return;t.provide(ol.fatal.error,vi(()=>fh));const e=(r,i)=>{var s,a;if(r instanceof hc.EcastEntityNotFound||r instanceof hc.EcastFilterError||r instanceof hc.EcastRateLimitExceeded||r instanceof Error&&((s=r.message)!=null&&s.includes("Socket not ready to send"))||r instanceof Error&&((a=r.message)!=null&&a.includes("No connection available")))return console.warn(r);throw i?console.error(i,r):console.error(r),r};window.tv.onError=async(r,i)=>{if(r.level==="error"&&(fh.hasCrashed=!0,fh.event=r,fh.hint=i),t.config.globalProperties.$debugRecorder)return await t.config.globalProperties.$debugRecorder.sendToEcast()},t.component("Fatal",kse),t.config.globalProperties.$handleEcastError=e}};var oE,UO;function Mse(){if(UO)return oE;UO=1;var t=bN(),e=xN();function r(i,s){s=t(s,i);for(var a=0,n=s.length;i!=null&&a<n;)i=i[e(s[a++])];return a&&a==n?i:void 0}return oE=r,oE}var uE,MO;function Nse(){if(MO)return uE;MO=1;var t=Mse();function e(r,i,s){var a=r==null?void 0:t(r,i);return a===void 0?s:a}return uE=e,uE}var Fse=Nse();const Gse=fs(Fse);var lE,NO;function Kse(){if(NO)return lE;NO=1;var t=Math.floor,e=Math.random;function r(i,s){return i+t(e()*(s-i+1))}return lE=r,lE}var cE,FO;function SN(){if(FO)return cE;FO=1;var t=Kse();function e(r){var i=r.length;return i?r[t(0,i-1)]:void 0}return cE=e,cE}var fE,GO;function Vse(){if(GO)return fE;GO=1;var t=_N();function e(r,i){return t(i,function(s){return r[s]})}return fE=e,fE}var hE,KO;function $se(){if(KO)return hE;KO=1;var t=Vse(),e=cp();function r(i){return i==null?[]:t(i,e(i))}return hE=r,hE}var dE,VO;function Hse(){if(VO)return dE;VO=1;var t=SN(),e=$se();function r(i){return t(e(i))}return dE=r,dE}var pE,$O;function qse(){if($O)return pE;$O=1;var t=SN(),e=Hse(),r=za();function i(s){var a=r(s)?t:e;return a(s)}return pE=i,pE}var Xse=qse();const zse=fs(Xse);function HO(t,e){const r=t.global.locale,i=t.global.messages[r],s=Gse(i,e);return Array.isArray(s)||console.warn(`[i18nPlugin] Translation with key ${e} is not an array`),zse(s)}const Wse={install:(t,e)=>{t.directive("ts",(r,i)=>{const s=HO(e.i18n,i.value);r.textContent=s||""}),t.config.globalProperties.$ts=function(i){return HO(e.i18n,i)||""},t.config.globalProperties.$messages=e.i18n.global.messages,t.config.globalProperties.$t=e.i18n.global.t,t.config.globalProperties.$tc=e.i18n.global.tc,t.config.globalProperties.$te=e.i18n.global.te,t.config.globalProperties.$tm=e.i18n.global.tm}},jse=or({props:{image:String,text:String,subtext:String,classes:{type:[Array,String],default:()=>"jbg"},dismissText:String}}),Yse="./assets/Bwlnl62i.png",Zse="./assets/DN8YV_ih.png",Qse="./assets/Dv-2T4fF.png",Jse={key:0,class:"image",src:Yse,alt:"Kicked"},eae={key:1,class:"image",src:Zse,alt:"Thank You"},tae={key:2,class:"image",src:Qse,alt:"Error"},rae={class:"text"},nae={key:3,class:"subtext"},iae={class:"actions"};function sae(t,e,r,i,s,a){const n=ls("bb");return Pe(),Ge("div",{class:kt(["error-model",t.classes])},[t.image==="tear"?(Pe(),Ge("img",Jse)):t.image==="moon"?(Pe(),Ge("img",eae)):(Pe(),Ge("img",tae)),gr(Se("h3",rae,null,512),[[n,t.text]]),t.subtext?gr((Pe(),Ge("h3",nae,null,512)),[[n,t.subtext]]):Ot("",!0),Se("div",iae,[gr(Se("button",{onClick:e[0]||(e[0]=Fa(o=>t.$emit("resolve"),["prevent"]))},null,512),[[n,t.dismissText]])])],2)}const aae=er(jse,[["render",sae],["__scopeId","data-v-39debcb6"]]),oae=or({props:{text:String,subtext:String,classes:{type:[Array,String],default:()=>"jbg"},options:Array},emits:["resolve"]}),uae={class:"text"},lae={key:0,class:"subtext"},cae={class:"actions"},fae=["onClick"];function hae(t,e,r,i,s,a){const n=ls("bb");return Pe(),Ge("div",{class:kt(["options-modal",t.classes])},[gr(Se("h3",uae,null,512),[[n,t.text]]),t.subtext?gr((Pe(),Ge("h3",lae,null,512)),[[n,t.subtext]]):Ot("",!0),Se("div",cae,[(Pe(!0),Ge(Wt,null,Vn(t.options,(o,u)=>gr((Pe(),Ge("button",{key:u,class:kt(o.classes),onClick:Fa(c=>t.$emit("resolve",o.value),["prevent"])},null,10,fae)),[[n,o.text]])),128))])],2)}const dae=er(oae,[["render",hae],["__scopeId","data-v-adb60058"]]),pae=or({data(){return{classes:"jbg",props:null,resolve:null,content:null}},beforeMount(){this.$registerModal(this)},methods:{show(t,e={},r={}){return this.props=e,this.classes=r.classes||"jbg",t==="Error"?this.content=Bu(aae):t==="Options"?this.content=Bu(dae):this.content=Bu(t),new Promise(i=>{this.resolve=i})},hide(){this.props=null,this.resolve&&this.resolve()},onResolve(...t){this.props=null,this.resolve(...t)},onBackgroundClick(){this.props=null,this.resolve()}}}),gae={class:"sandbox"};function mae(t,e,r,i,s,a){return Pe(),$n(ZM,{name:"modal-transition"},{default:Kd(()=>[t.props?(Pe(),Ge("div",{key:0,class:kt(["modal",t.classes]),onKeyup:e[0]||(e[0]=cT((...n)=>t.onBackgroundClick&&t.onBackgroundClick(...n),["esc"])),onClick:e[1]||(e[1]=Fa((...n)=>t.onBackgroundClick&&t.onBackgroundClick(...n),["self"]))},[Se("div",gae,[t.content?(Pe(),$n(Hd(t.content),Zc({key:0,class:"content"},t.props,{onResolve:t.onResolve}),null,16,["onResolve"])):Ot("",!0)])],34)):Ot("",!0)]),_:1})}const _ae=er(pae,[["render",mae],["__scopeId","data-v-f709c8e5"]]),bae={install:t=>{let e;const r=()=>{if(!e)throw new Error("No ModalComponent is registered");return e.hide()},i=(a,n,o)=>{if(!e)throw new Error("No ModalComponent is registered");return e.show(a,n,o)},s=a=>{e=a};t.component("Modal",_ae),t.config.globalProperties.$hideModal=r,t.config.globalProperties.$showModal=i,t.config.globalProperties.$registerModal=s}},xae={install:t=>{const e=new Map;t.directive("pointerbox",{mounted(r,i){const s=new Iy(r,{isMultitouch:i.modifiers.multi,restrictToBox:i.modifiers.restrict,...i.value});e.set(r,s)},unmounted(r){var i;(i=e.get(r))==null||i.destroy(),e.delete(r)}}),t.directive("pointerbox-translate",{mounted(r,i){r.setAttribute("data-pointerboxtranslateid",i.value.id??""),r.setAttribute("data-pointerboxtranslatewidth",i.value.width??""),r.setAttribute("data-pointerboxtranslateheight",i.value.height??""),r.setAttribute("data-pointerboxtranslaterotation",i.value.rotation??"")},unmounted(r){r.removeAttribute("data-pointerboxtranslateid"),r.removeAttribute("data-pointerboxtranslatewidth"),r.removeAttribute("data-pointerboxtranslateheight"),r.removeAttribute("data-pointerboxtranslaterotation")},updated(r,i){r.setAttribute("data-pointerboxtranslateid",i.value.id??""),r.setAttribute("data-pointerboxtranslatewidth",i.value.width??""),r.setAttribute("data-pointerboxtranslateheight",i.value.height??""),r.setAttribute("data-pointerboxtranslaterotation",i.value.rotation??"")}})}},vae=or({setup(){return{announcment:ia(ol.textDescriptions.announcement)}},ecastKeys:{textDescriptions:"textDescriptions"},data(){return{lines:[]}},computed:{textDescriptions(){return!this.$ecastValues||!this.$ecastValues.textDescriptions?null:this.$ecastValues.textDescriptions}},watch:{announcment:function(e){this.lines.push({id:Math.random(),category:"announce",text:e})},"textDescriptions.latestDescriptions":function(e){!e||!e.length||e.forEach(r=>{r.id!==void 0&&this.lines.find(i=>i.id===r.id)||this.lines.push(r)})}}}),Eae={class:"text-descriptions",role:"log","aria-atomic":"false","aria-relevant":"additions","aria-live":"polite"};function yae(t,e,r,i,s,a){return Pe(),Ge("div",Eae,[(Pe(!0),Ge(Wt,null,Vn(t.lines,n=>(Pe(),Ge("p",{key:n.id},xt(n.text),1))),128))])}const Tae=er(vae,[["render",yae]]),qO=Lo(""),Aae={install:t=>{if(t.config.globalProperties.$announce)return;t.provide(ol.textDescriptions.announcement,vi(()=>qO.value));const e=r=>{qO.value=r};t.component("TextDescriptions",Tae),t.config.globalProperties.$announce=e}},Sae={install:t=>{let e="",r="";const i=a=>a instanceof Function?a():a,s=a=>{const n=document.querySelector('meta[name="theme-color"]');n&&(document.body&&(document.body.style.background=a),n.setAttribute("content",a),r=a)};t.config.globalProperties.$setThemeColor=function(n){this.$options.themeColor=n,s(n)},t.mixin({mounted(){if(!this.$options.themeColor)return;const a=i(this.$options.themeColor);s(a),this.$attrs.name==="game"&&(e=a)},beforeDestroy(){!this.$options.themeColor||i(this.$options.themeColor)!==r||s(e)}})}},Rae={install:t=>{t.config.globalProperties.$vibrate=(e=[100,100])=>{var r;if(!((r=window.navigator)!=null&&r.vibrate))return!1;try{return window.navigator.vibrate(e),!0}catch{return!1}}}};function Cae(t,e){return{lines:t.map((r,i)=>({index:i,color:r.color,points:r.points,weight:r.thickness})),size:{width:e.width,height:e.height}}}function wae(t,e,r,i,s,a,n={},o=0){n.fontFamily=n.fontFamily??"sans-serif",n.fontSize=n.fontSize??12,n.fontStyle=n.fontStyle??"normal",n.fontVariant=n.fontVariant??"normal",n.fontWeight=n.fontWeight??"normal",n.indent=n.indent??0,n.lineHeight=n.lineHeight??1,n.stroke=n.stroke??"#000000",n.textAlign=n.textAlign??"left",n.verticalAlign=n.verticalAlign??"center";const u=[];let c=0;t.save(),t.rotate(o*Math.PI/180);let f=!0;for(;f;){let h=0,p=e.length;t.font=`${n.fontStyle} ${n.fontVariant} ${n.fontWeight} ${n.fontSize}px ${n.fontFamily}`;const{fontBoundingBoxAscent:g,fontBoundingBoxDescent:m}=t.measureText(e);for(;h<p;){const T=e.substring(h,p);let x=t.measureText(T).width;h===0&&(x+=n.indent),x>s?(p=T.lastIndexOf(" ")+h,p<h&&(p=T.length-2+h),p<=h&&(p=h+1)):(u.push(T),h+=T.length+1,p=e.length,c=Math.max(c,x))}(g+m)*(u.length*n.lineHeight)>a?(f=!0,n.fontSize-=1,u.length=0):f=!1}return u.forEach((h,p)=>{const g=p===0?n.indent:0,m=t.measureText(h).width+g;let T=0;switch(n.textAlign){case"center":T=r+(s-m)/2;break;case"right":T=r+(s-m);break;case"left":default:T=r+g;break}let x=0;switch(n.verticalAlign){case"center":{let v=(a-n.lineHeight*n.fontSize*u.length)/2;v<0&&(v=0),x=i+v+p*n.lineHeight*n.fontSize;break}default:x=i+p*n.lineHeight*n.fontSize;break}n.strokeWidth&&(t.strokeStyle=n.stroke,t.lineWidth=n.strokeWidth,t.strokeText(h,T,x)),t.fillText(h,T,x)}),t.restore(),{width:c,lines:u.length}}function RN(t){return t.map(e=>{const i=(Array.isArray(e.sources)?e.sources:[e.sources]).map(s=>{const a=s.split("."),n=a[a.length-1].replace("ttf","truetype");return`url('${s}') format('${n}')`}).join(",");return{fontFace:new FontFace(e.family,i,e.descriptors),sourceString:i}})}async function Lae(t){if(!t.length)return[];const r=RN(t).map(({fontFace:i})=>(document.fonts.add(i),i.load()));return Promise.all(r)}function CN(t){if(!t.length)return"";const e=RN(t);let r="";return e.forEach(({fontFace:i,sourceString:s})=>{r+="@font-face {",r+=`font-family: "${i.family}";`,r+=`src: ${s};`,i.ascentOverride&&(r+=`ascent-override: ${i.ascentOverride};`),i.descentOverride&&(r+=`descent-override: ${i.descentOverride};`),i.display&&(r+=`font-display: ${i.display};`),i.featureSettings&&(r+=`font-feature-settings: ${i.featureSettings};`),i.lineGapOverride&&(r+=`line-gap-override: ${i.lineGapOverride};`),i.stretch&&(r+=`font-stretch: ${i.stretch};`),i.style&&(r+=`font-style: ${i.style};`),i.unicodeRange&&(r+=`unicode-range: ${i.unicodeRange};`),i.variant&&(r+=`font-variation-settings: ${i.variant};`),i.weight&&(r+=`font-weight: ${i.weight};`),r+="}"}),r}function wN(t){const[,e]=t.type.split("/"),r=`file.${e}`;return new File([t],r,{type:t.type})}async function LN(t){const e=await t.arrayBuffer();return new Blob([new Uint8Array(e)],{type:t.type})}function IN(t){return URL.createObjectURL(t)}async function Iae(t){const e=await LN(t);return IN(e)}function BN(t){const[e,r]=t.split(","),i=e.replace("data:","").replace(";base64",""),s=window.atob(r),a=new Uint8Array(s.length);for(let n=0;n<s.length;n++)a[n]=s.charCodeAt(n);return new Blob([a],{type:i})}function Bae(t){const e=BN(t);return wN(e)}async function Pae(t){if(!t.dataURL&&!t.blob&&!t.file)throw new Error("No useable render data created");return t.dataURL||(t.dataURL=t.blob?IN(t.blob):await Iae(t.file)),t.blob||(t.blob=t.file?await LN(t.file):BN(t.dataURL)),t.file||(t.file=t.blob?wN(t.blob):Bae(t.dataURL)),t}async function tA(t){return new Promise((e,r)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>e(i),i.onerror=r,i.src=t})}async function PN(t,e,r,i,s,a,n,o,u,c){const f=await tA(e);n!==void 0?t.drawImage(f,r,i,s,a,n,o,u,c):s!==void 0?t.drawImage(f,r,i,s,a):t.drawImage(f,r,i)}async function Oae(t,e,r,i){const a=new DOMParser().parseFromString(e,"image/svg+xml").documentElement;if(a.tagName!=="svg")throw new Error("drawSvgString requires an <svg> tag as it's root");if(a.hasAttribute("xmlns")||a.setAttribute("xmlns","http://www.w3.org/2000/svg"),!a.hasAttribute("width")||!a.hasAttribute("height")){const o=a.getAttribute("viewBox");if(!o)throw new Error("drawSvgString requires a viewBox");const[u,c,f,h]=o.split(" ");a.setAttribute("width",f),a.setAttribute("height",h)}const n=`data:image/svg+xml;base64,${window.btoa(a.outerHTML)}`;await PN(t,n,r,i)}async function Dae(t,e,r,i,s,a,n,o,u,c){e.startsWith("data:image")||(e=`data:image/png;base64,${e}`);const f=await tA(e);n!==void 0?t.drawImage(f,r,i,s,a,n,o,u,c):s!==void 0?t.drawImage(f,r,i,s,a):t.drawImage(f,r,i)}function kae(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const r=document.implementation.createHTMLDocument(),i=r.createElement("base"),s=r.createElement("a");return r.head.appendChild(i),r.body.appendChild(s),e&&(i.href=e),s.href=t,s.href}const Uae=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function sa(t){const e=[];for(let r=0,i=t.length;r<i;r++)e.push(t[r]);return e}function cd(t,e){const i=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return i?parseFloat(i.replace("px","")):0}function Mae(t){const e=cd(t,"border-left-width"),r=cd(t,"border-right-width");return t.clientWidth+e+r}function Nae(t){const e=cd(t,"border-top-width"),r=cd(t,"border-bottom-width");return t.clientHeight+e+r}function ON(t,e={}){const r=e.width||Mae(t),i=e.height||Nae(t);return{width:r,height:i}}function Fae(){let t,e;try{e=process}catch{}const r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const mi=16384;function Gae(t){(t.width>mi||t.height>mi)&&(t.width>mi&&t.height>mi?t.width>t.height?(t.height*=mi/t.width,t.width=mi):(t.width*=mi/t.height,t.height=mi):t.width>mi?(t.height*=mi/t.width,t.width=mi):(t.width*=mi/t.height,t.height=mi))}function fd(t){return new Promise((e,r)=>{const i=new Image;i.decode=()=>e(i),i.onload=()=>e(i),i.onerror=r,i.crossOrigin="anonymous",i.decoding="async",i.src=t})}async function Kae(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function Vae(t,e,r){const i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${r}`),s.setAttribute("viewBox",`0 0 ${e} ${r}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),Kae(s)}const ei=(t,e)=>{if(t instanceof e)return!0;const r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name===e.name||ei(r,e)};function $ae(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Hae(t){return sa(t).map(e=>{const r=t.getPropertyValue(e),i=t.getPropertyPriority(e);return`${e}: ${r}${i?" !important":""};`}).join(" ")}function qae(t,e,r){const i=`.${t}:${e}`,s=r.cssText?$ae(r):Hae(r);return document.createTextNode(`${i}{${s}}`)}function XO(t,e,r){const i=window.getComputedStyle(t,r),s=i.getPropertyValue("content");if(s===""||s==="none")return;const a=Uae();try{e.className=`${e.className} ${a}`}catch{return}const n=document.createElement("style");n.appendChild(qae(a,r,i)),e.appendChild(n)}function Xae(t,e){XO(t,e,":before"),XO(t,e,":after")}const zO="application/font-woff",WO="image/jpeg",zae={woff:zO,woff2:zO,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:WO,jpeg:WO,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Wae(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function rA(t){const e=Wae(t).toLowerCase();return zae[e]||""}function jae(t){return t.split(/,/)[1]}function Py(t){return t.search(/^(data:)/)!==-1}function Yae(t,e){return`data:${e};base64,${t}`}async function DN(t,e,r){const i=await fetch(t,e);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);const s=await i.blob();return new Promise((a,n)=>{const o=new FileReader;o.onerror=n,o.onloadend=()=>{try{a(r({res:i,result:o.result}))}catch(u){n(u)}},o.readAsDataURL(s)})}const gE={};function Zae(t,e,r){let i=t.replace(/\?.*/,"");return r&&(i=t),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),e?`[${e}]${i}`:i}async function nA(t,e,r){const i=Zae(t,e,r.includeQueryParams);if(gE[i]!=null)return gE[i];r.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await DN(t,r.fetchRequestInit,({res:n,result:o})=>(e||(e=n.headers.get("Content-Type")||""),jae(o)));s=Yae(a,e)}catch(a){s=r.imagePlaceholder||"";let n=`Failed to fetch resource: ${t}`;a&&(n=typeof a=="string"?a:a.message),n&&console.warn(n)}return gE[i]=s,s}async function Qae(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):fd(e)}async function Jae(t,e){if(t.currentSrc){const a=document.createElement("canvas"),n=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,n==null||n.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return fd(o)}const r=t.poster,i=rA(r),s=await nA(r,i,e);return fd(s)}async function eoe(t){var e;try{if(!((e=t==null?void 0:t.contentDocument)===null||e===void 0)&&e.body)return await hp(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function toe(t,e){return ei(t,HTMLCanvasElement)?Qae(t):ei(t,HTMLVideoElement)?Jae(t,e):ei(t,HTMLIFrameElement)?eoe(t):t.cloneNode(!1)}const roe=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function noe(t,e,r){var i,s;let a=[];return roe(t)&&t.assignedNodes?a=sa(t.assignedNodes()):ei(t,HTMLIFrameElement)&&(!((i=t.contentDocument)===null||i===void 0)&&i.body)?a=sa(t.contentDocument.body.childNodes):a=sa(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||ei(t,HTMLVideoElement)||await a.reduce((n,o)=>n.then(()=>hp(o,r)).then(u=>{u&&e.appendChild(u)}),Promise.resolve()),e}function ioe(t,e){const r=e.style;if(!r)return;const i=window.getComputedStyle(t);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):sa(i).forEach(s=>{let a=i.getPropertyValue(s);s==="font-size"&&a.endsWith("px")&&(a=`${Math.floor(parseFloat(a.substring(0,a.length-2)))-.1}px`),ei(t,HTMLIFrameElement)&&s==="display"&&a==="inline"&&(a="block"),s==="d"&&e.getAttribute("d")&&(a=`path(${e.getAttribute("d")})`),r.setProperty(s,a,i.getPropertyPriority(s))})}function soe(t,e){ei(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),ei(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function aoe(t,e){if(ei(t,HTMLSelectElement)){const r=e,i=Array.from(r.children).find(s=>t.value===s.getAttribute("value"));i&&i.setAttribute("selected","")}}function ooe(t,e){return ei(e,Element)&&(ioe(t,e),Xae(t,e),soe(t,e),aoe(t,e)),e}async function uoe(t,e){const r=t.querySelectorAll?t.querySelectorAll("use"):[];if(r.length===0)return t;const i={};for(let a=0;a<r.length;a++){const o=r[a].getAttribute("xlink:href");if(o){const u=t.querySelector(o),c=document.querySelector(o);!u&&c&&!i[o]&&(i[o]=await hp(c,e,!0))}}const s=Object.values(i);if(s.length){const a="http://www.w3.org/1999/xhtml",n=document.createElementNS(a,"svg");n.setAttribute("xmlns",a),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const o=document.createElementNS(a,"defs");n.appendChild(o);for(let u=0;u<s.length;u++)o.appendChild(s[u]);t.appendChild(n)}return t}async function hp(t,e,r){return!r&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(i=>toe(i,e)).then(i=>noe(t,i,e)).then(i=>ooe(t,i)).then(i=>uoe(i,e))}const kN=/url\((['"]?)([^'"]+?)\1\)/g,loe=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,coe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function foe(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function hoe(t){const e=[];return t.replace(kN,(r,i,s)=>(e.push(s),r)),e.filter(r=>!Py(r))}async function doe(t,e,r,i,s){try{const a=r?kae(e,r):e,n=rA(e);let o;return s||(o=await nA(a,n,i)),t.replace(foe(e),`$1${o}$3`)}catch{}return t}function poe(t,{preferredFontFormat:e}){return e?t.replace(coe,r=>{for(;;){const[i,,s]=loe.exec(r)||[];if(!s)return"";if(s===e)return`src: ${i};`}}):t}function UN(t){return t.search(kN)!==-1}async function MN(t,e,r){if(!UN(t))return t;const i=poe(t,r);return hoe(i).reduce((a,n)=>a.then(o=>doe(o,n,e,r)),Promise.resolve(i))}async function hh(t,e,r){var i;const s=(i=e.style)===null||i===void 0?void 0:i.getPropertyValue(t);if(s){const a=await MN(s,null,r);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function goe(t,e){await hh("background",t,e)||await hh("background-image",t,e),await hh("mask",t,e)||await hh("mask-image",t,e)}async function moe(t,e){const r=ei(t,HTMLImageElement);if(!(r&&!Py(t.src))&&!(ei(t,SVGImageElement)&&!Py(t.href.baseVal)))return;const i=r?t.src:t.href.baseVal,s=await nA(i,rA(i),e);await new Promise((a,n)=>{t.onload=a,t.onerror=n;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),r?(t.srcset="",t.src=s):t.href.baseVal=s})}async function _oe(t,e){const i=sa(t.childNodes).map(s=>NN(s,e));await Promise.all(i).then(()=>t)}async function NN(t,e){ei(t,Element)&&(await goe(t,e),await moe(t,e),await _oe(t,e))}function boe(t,e){const{style:r}=t;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width=`${e.width}px`),e.height&&(r.height=`${e.height}px`);const i=e.style;return i!=null&&Object.keys(i).forEach(s=>{r[s]=i[s]}),t}const jO={};async function YO(t){let e=jO[t];if(e!=null)return e;const i=await(await fetch(t)).text();return e={url:t,cssText:i},jO[t]=e,e}async function ZO(t,e){let r=t.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,a=(r.match(/url\([^)]+\)/g)||[]).map(async n=>{let o=n.replace(i,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),DN(o,e.fetchRequestInit,({result:u})=>(r=r.replace(n,`url(${u})`),[n,u]))});return Promise.all(a).then(()=>r)}function QO(t){if(t==null)return[];const e=[],r=/(\/\*[\s\S]*?\*\/)/gi;let i=t.replace(r,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=s.exec(i);if(u===null)break;e.push(u[0])}i=i.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,n="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(n,"gi");for(;;){let u=a.exec(i);if(u===null){if(u=o.exec(i),u===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(u[0])}return e}async function xoe(t,e){const r=[],i=[];return t.forEach(s=>{if("cssRules"in s)try{sa(s.cssRules||[]).forEach((a,n)=>{if(a.type===CSSRule.IMPORT_RULE){let o=n+1;const u=a.href,c=YO(u).then(f=>ZO(f,e)).then(f=>QO(f).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?o+=1:s.cssRules.length)}catch(p){console.error("Error inserting rule from remote css",{rule:h,error:p})}})).catch(f=>{console.error("Error loading remote css",f.toString())});i.push(c)}})}catch(a){const n=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&i.push(YO(s.href).then(o=>ZO(o,e)).then(o=>QO(o).forEach(u=>{n.insertRule(u,s.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(i).then(()=>(t.forEach(s=>{if("cssRules"in s)try{sa(s.cssRules||[]).forEach(a=>{r.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),r))}function voe(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>UN(e.style.getPropertyValue("src")))}async function Eoe(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=sa(t.ownerDocument.styleSheets),i=await xoe(r,e);return voe(i)}async function yoe(t,e){const r=await Eoe(t,e);return(await Promise.all(r.map(s=>{const a=s.parentStyleSheet?s.parentStyleSheet.href:null;return MN(s.cssText,a,e)}))).join(`
`)}async function Toe(t,e){const r=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await yoe(t,e);if(r){const i=document.createElement("style"),s=document.createTextNode(r);i.appendChild(s),t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)}}async function Aoe(t,e={}){const{width:r,height:i}=ON(t,e),s=await hp(t,e,!0);return await Toe(s,e),await NN(s,e),boe(s,e),await Vae(s,r,i)}async function Soe(t,e={}){const{width:r,height:i}=ON(t,e),s=await Aoe(t,e),a=await fd(s),n=document.createElement("canvas"),o=n.getContext("2d"),u=e.pixelRatio||Fae(),c=e.canvasWidth||r,f=e.canvasHeight||i;return n.width=c*u,n.height=f*u,e.skipAutoScale||Gae(n),n.style.width=`${c}`,n.style.height=`${f}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,n.width,n.height)),o.drawImage(a,0,0,n.width,n.height),n}const FN=`/* reset css */
*, *::before, *::after {
    box-sizing: border-box;
    position: relative;
}

div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    -moz-osx-font-smoothing: grayscale;
    -webkit-font-smoothing: antialiased;
}

article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}

body {
    line-height: 1;
}

ol, ul {
    list-style: none;
}

blockquote, q {
    quotes: none;
}

blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}

table {
    border-collapse: collapse;
    border-spacing: 0;
}

.render {
    position: absolute;
    top: 0px;
    left: 0px;
    height: auto;
}`;function Roe(t,e){let r=t;return Object.keys(e).forEach(i=>{const s=new RegExp(`{{\\s*${i}\\s*}}`,"g");r=r.replace(s,`${e[i]}`)}),r}function Coe(t,e=""){let r="<style>";return r+=CN(t),r+=FN,r+=e,r+="</style>",r}function JO(t,e){const r=t.x<0?-t.x:t.x,i=t.y<0?-t.y:t.y;return new DOMRect(e.x+r,e.y+i,e.width,e.height)}function woe(t,e=[]){const r=t.getBoundingClientRect(),i={};let s=r.width,a=r.height;return t.querySelectorAll("*").forEach(n=>{if(n.tagName.toLowerCase()==="style")return;const o=JO(r,n.getBoundingClientRect());s<o.right&&(s=o.right),a<o.bottom&&(a=o.bottom)}),e.forEach(n=>{const o=t.querySelectorAll(n);i[n]=Array.from(o).map(u=>JO(r,u.getBoundingClientRect()))}),{rootRect:new DOMRect(0,0,s,a),elementRects:i}}function GN(t,e){const r=document.createElement("div");e.debug?r.setAttribute("style","position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; background: rgba(33, 33, 33, 0.95);"):r.setAttribute("style","position: absolute; top: -9999px; left: -9999px");const i=document.createElement("div");i.classList.add("render");let s=`width: ${e.windowWidth??t}px;`;return e.windowHeight&&(s+=`height: ${e.windowHeight}px`),i.setAttribute("style",s),r.append(i),document.body.append(r),[r,i]}async function KN(t,e,r,i,s,a){const n=woe(e[1],a.metricsSelectors),o=s/n.rootRect.width*(a.windowHeight??n.rootRect.height),u=await Soe(e[1],{backgroundColor:a.backgroundColor??"transparent",width:n.rootRect.width,height:n.rootRect.height,canvasWidth:s,canvasHeight:o,cacheBust:!0,useCORS:!0});return a.debug||e[0].remove(),t.drawImage(u,r,i,n.rootRect.width,n.rootRect.height),n}async function Loe(t,e,r,i,s,a){const n=GN(s,a),o=a.data?Roe(e,a.data):e,u=Coe(this.fonts,a.css);return n[1].innerHTML=`${u}${o}`,KN(t,n,r,i,s,a)}async function Ioe(t,e,r,i,s,a){const n=GN(s,a),o=document.createElement("style");let u="";return u+=CN(this.fonts),u+=FN,o.innerHTML=u,n[0].prepend(o),fT(e,a.props).mount(n[1]),KN(t,n,r,i,s,a)}class iA{constructor(e){Be(this,"awaitingForReady",[]);Be(this,"data");Be(this,"params");Be(this,"fonts",[]);Be(this,"isReady",!1);Be(this,"hasError",!1);Be(this,"messages",{});Be(this,"locale","en");Be(this,"renderData");Be(this,"convertDrawingToDoodle",Cae);Be(this,"fillMultilineText",wae.bind(this));Be(this,"loadImage",tA);Be(this,"drawAsyncImage",PN);Be(this,"drawBase64Image",Dae);Be(this,"drawHTML",Loe.bind(this));Be(this,"drawSvgString",Oae);Be(this,"drawVueComponent",Ioe.bind(this));var r;this.data=e.data,this.params=e.params??{},e.messages&&(this.messages=e.messages),e.locale?this.locale=e.locale:(r=e.data.blob)!=null&&r.locale&&(this.locale=e.data.blob.locale)}async run(){var e,r;try{await((e=this.setup)==null?void 0:e.call(this)),await Lae(this.fonts);const i=await this.render();this.renderData=await Pae(i),this.isReady=!0,this.awaitingForReady.forEach(([s,a])=>s())}catch(i){this.hasError=!0,console.error(i),this.awaitingForReady.forEach(([s,a])=>a(i))}finally{await((r=this.cleanup)==null?void 0:r.call(this))}}async ready(){return new Promise((e,r)=>{if(this.isReady){e();return}if(this.hasError){r();return}this.awaitingForReady.push([e,r])})}getTranslation(e,r){try{return e.split(".").reduce((s,a)=>s[a],this.messages[r])}catch{return r==="en"?(console.warn(`Missing translation key "${e}" for locale "${this.locale}"`),null):this.getTranslation(e,"en")}}t(e,r){let i=this.getTranslation(e,this.locale);return i?(r&&Object.keys(r).forEach(s=>{i=i.replaceAll(`{${s}}`,r[s])}),i):e}}class eD{constructor(e){Be(this,"renderer");Be(this,"key");Be(this,"type");Be(this,"renderData");Be(this,"data",Uo({status:"pending",hasCopied:!1}));e.type&&(this.type=e.type),this.key=e.key??`${Math.random()}`,this.renderer=e.renderer instanceof iA?e.renderer:this.createRenderer(e)}get status(){return this.data.status}set status(e){this.data.status=e}get hasCopied(){return this.data.hasCopied}set hasCopied(e){this.data.hasCopied=e}createRenderer(e){var i;let r;if(typeof e.renderer=="string"){const s=(i=No())==null?void 0:i.proxy;if(!s)throw new Error("Unable to accesses find global $renderers");if(!s.$renderers[e.renderer])throw new Error(`Unable to find renderer class from string value: ${e.renderer}`);r=s.$renderers[e.renderer]}else r=e.renderer;if(!e.data)throw new Error("Cannot create Renderer without data");return new r({data:e.data,params:e.params,messages:e.messages,locale:e.locale})}async share(e,r){this.renderData&&await ld.share(this.renderData.file,e,r)}async copy(e){this.renderData&&(await ld.copyToClipboard(this.renderData.file,e),this.hasCopied=!0,window.setTimeout(()=>{this.hasCopied=!1},2e3))}async run(){var e,r;if(!this.renderData)try{if(this.status="running",await((e=this.renderer)==null?void 0:e.run()),this.renderData=(r=this.renderer)==null?void 0:r.renderData,delete this.renderer,!this.renderData)throw new Error("No renderData generated");this.status="complete"}catch(i){this.status="error",console.error(i)}}}class Boe{constructor(e){Be(this,"artifact");Be(this,"locale","en");Be(this,"messages",{});Be(this,"delay",500);Be(this,"maxConcurrent",3);Be(this,"items",[]);Be(this,"status","pending");var i,s;this.artifact=e.artifact,e.delay!==void 0&&(this.delay=e.delay),e.maxConcurrent!==void 0&&(this.maxConcurrent=e.maxConcurrent);const r=(i=No())==null?void 0:i.proxy;r&&(e.locale||(this.locale=r.$i18n.locale),e.messages||(this.messages=r.$messages)),(s=e.items)==null||s.forEach(a=>this.add(a))}get activeCount(){return this.items.filter(e=>e.status==="running").length}static get canShare(){return ld.canShare}get canShare(){return ld.canShare}add(e){const r=e instanceof eD?e:new eD({type:e.type,key:e.key,data:e.data??this.artifact,messages:e.messages??this.messages,locale:e.locale??this.locale,params:e.params,renderer:e.renderer});return this.items.push(r),(this.status==="pending"||this.activeCount===0)&&this.run(),r}getItem(e,r){return r?this.items.find(i=>i.type===e&&i.key===r):this.items.find(i=>i.key===e)}getItems(e){return e?this.items.filter(r=>r.type):this.items}async share(e,r,i,s){if(typeof r=="string"){const n=this.getItem(e,r);if(!n){console.warn(`unable to find share item with type ${e} and key ${r}`);return}await n.share(i,s);return}const a=this.getItem(e);if(!a){console.warn(`unable to find share item with key ${e}`);return}await a.share(r,i)}async copy(e,r,i){if(typeof r=="string"){const a=this.getItem(e,r);if(!a){console.warn(`unable to find copy item with type ${e} and key ${r}`);return}await a.copy(i);return}const s=this.getItem(e);if(!s){console.warn(`unable to find copy item with key ${e}`);return}await s.copy(r)}async run(){if(this.status==="delayed"||this.activeCount>=this.maxConcurrent)return;if(this.status==="pending"){this.status="delayed",setTimeout(()=>{this.status="running",this.run()},this.delay);return}const e=this.items.find(r=>r.status==="pending");e&&(await e.run(),this.run())}}/*!
  * shared v9.14.5
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Poe(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const hd=typeof window<"u",Ya=(t,e=!1)=>e?Symbol.for(t):Symbol(t),Ooe=(t,e,r)=>Doe({l:t,k:e,s:r}),Doe=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),tn=t=>typeof t=="number"&&isFinite(t),koe=t=>$N(t)==="[object Date]",Ka=t=>$N(t)==="[object RegExp]",dp=t=>Nt(t)&&Object.keys(t).length===0,On=Object.assign,Uoe=Object.create,xr=(t=null)=>Uoe(t);let tD;const dd=()=>tD||(tD=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:xr());function rD(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function nD(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Moe(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(i,s,a)=>`${s}="${nD(a)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(i,s,a)=>`${s}='${nD(a)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(i=>{t=t.replace(i,"$1javascript&#58;")}),t}const Noe=Object.prototype.hasOwnProperty;function is(t,e){return Noe.call(t,e)}const Dr=Array.isArray,Cr=t=>typeof t=="function",dt=t=>typeof t=="string",zt=t=>typeof t=="boolean",ur=t=>t!==null&&typeof t=="object",Foe=t=>ur(t)&&Cr(t.then)&&Cr(t.catch),VN=Object.prototype.toString,$N=t=>VN.call(t),Nt=t=>{if(!ur(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},Goe=t=>t==null?"":Dr(t)||Nt(t)&&t.toString===VN?JSON.stringify(t,null,2):String(t);function Koe(t,e=""){return t.reduce((r,i,s)=>s===0?r+i:r+e+i,"")}function pp(t){let e=t;return()=>++e}const dh=t=>!ur(t)||Dr(t);function qh(t,e){if(dh(t)||dh(e))throw new Error("Invalid value");const r=[{src:t,des:e}];for(;r.length;){const{src:i,des:s}=r.pop();Object.keys(i).forEach(a=>{a!=="__proto__"&&(ur(i[a])&&!ur(s[a])&&(s[a]=Array.isArray(i[a])?[]:xr()),dh(s[a])||dh(i[a])?s[a]=i[a]:r.push({src:i[a],des:s[a]}))})}}/*!
  * message-compiler v9.14.5
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function Voe(t,e,r){return{line:t,column:e,offset:r}}function pd(t,e,r){return{start:t,end:e}}const $oe=/\{([0-9a-zA-Z]+)\}/g;function HN(t,...e){return e.length===1&&Hoe(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace($oe,(r,i)=>e.hasOwnProperty(i)?e[i]:"")}const qN=Object.assign,iD=t=>typeof t=="string",Hoe=t=>t!==null&&typeof t=="object";function XN(t,e=""){return t.reduce((r,i,s)=>s===0?r+i:r+e+i,"")}const sA={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},qoe={[sA.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function Xoe(t,e,...r){const i=HN(qoe[t],...r||[]),s={message:String(i),code:t};return e&&(s.location=e),s}const Dt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},zoe={[Dt.EXPECTED_TOKEN]:"Expected token: '{0}'",[Dt.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Dt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Dt.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Dt.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Dt.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Dt.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Dt.EMPTY_PLACEHOLDER]:"Empty placeholder",[Dt.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Dt.INVALID_LINKED_FORMAT]:"Invalid linked format",[Dt.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Dt.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Dt.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Dt.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Dt.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Dt.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function ul(t,e,r={}){const{domain:i,messages:s,args:a}=r,n=HN((s||zoe)[t]||"",...a||[]),o=new SyntaxError(String(n));return o.code=t,e&&(o.location=e),o.domain=i,o}function Woe(t){throw t}const zs=" ",joe="\r",Nn=`
`,Yoe="\u2028",Zoe="\u2029";function Qoe(t){const e=t;let r=0,i=1,s=1,a=0;const n=C=>e[C]===joe&&e[C+1]===Nn,o=C=>e[C]===Nn,u=C=>e[C]===Zoe,c=C=>e[C]===Yoe,f=C=>n(C)||o(C)||u(C)||c(C),h=()=>r,p=()=>i,g=()=>s,m=()=>a,T=C=>n(C)||u(C)||c(C)?Nn:e[C],x=()=>T(r),v=()=>T(r+a);function y(){return a=0,f(r)&&(i++,s=0),n(r)&&r++,r++,s++,e[r]}function R(){return n(r+a)&&a++,a++,e[r+a]}function A(){r=0,i=1,s=1,a=0}function k(C=0){a=C}function b(){const C=r+a;for(;C!==r;)y();a=0}return{index:h,line:p,column:g,peekOffset:m,charAt:T,currentChar:x,currentPeek:v,next:y,peek:R,reset:A,resetPeek:k,skipToPeek:b}}const wa=void 0,Joe=".",sD="'",eue="tokenizer";function tue(t,e={}){const r=e.location!==!1,i=Qoe(t),s=()=>i.index(),a=()=>Voe(i.line(),i.column(),i.index()),n=a(),o=s(),u={currentType:14,offset:o,startLoc:n,endLoc:n,lastType:14,lastOffset:o,lastStartLoc:n,lastEndLoc:n,braceNest:0,inLinked:!1,text:""},c=()=>u,{onError:f}=e;function h(z,X,_e,...Ie){const Ze=c();if(X.column+=_e,X.offset+=_e,f){const Ve=r?pd(Ze.startLoc,X):null,Ce=ul(z,Ve,{domain:eue,args:Ie});f(Ce)}}function p(z,X,_e){z.endLoc=a(),z.currentType=X;const Ie={type:X};return r&&(Ie.loc=pd(z.startLoc,z.endLoc)),_e!=null&&(Ie.value=_e),Ie}const g=z=>p(z,14);function m(z,X){return z.currentChar()===X?(z.next(),X):(h(Dt.EXPECTED_TOKEN,a(),0,X),"")}function T(z){let X="";for(;z.currentPeek()===zs||z.currentPeek()===Nn;)X+=z.currentPeek(),z.peek();return X}function x(z){const X=T(z);return z.skipToPeek(),X}function v(z){if(z===wa)return!1;const X=z.charCodeAt(0);return X>=97&&X<=122||X>=65&&X<=90||X===95}function y(z){if(z===wa)return!1;const X=z.charCodeAt(0);return X>=48&&X<=57}function R(z,X){const{currentType:_e}=X;if(_e!==2)return!1;T(z);const Ie=v(z.currentPeek());return z.resetPeek(),Ie}function A(z,X){const{currentType:_e}=X;if(_e!==2)return!1;T(z);const Ie=z.currentPeek()==="-"?z.peek():z.currentPeek(),Ze=y(Ie);return z.resetPeek(),Ze}function k(z,X){const{currentType:_e}=X;if(_e!==2)return!1;T(z);const Ie=z.currentPeek()===sD;return z.resetPeek(),Ie}function b(z,X){const{currentType:_e}=X;if(_e!==8)return!1;T(z);const Ie=z.currentPeek()===".";return z.resetPeek(),Ie}function C(z,X){const{currentType:_e}=X;if(_e!==9)return!1;T(z);const Ie=v(z.currentPeek());return z.resetPeek(),Ie}function w(z,X){const{currentType:_e}=X;if(!(_e===8||_e===12))return!1;T(z);const Ie=z.currentPeek()===":";return z.resetPeek(),Ie}function O(z,X){const{currentType:_e}=X;if(_e!==10)return!1;const Ie=()=>{const Ve=z.currentPeek();return Ve==="{"?v(z.peek()):Ve==="@"||Ve==="%"||Ve==="|"||Ve===":"||Ve==="."||Ve===zs||!Ve?!1:Ve===Nn?(z.peek(),Ie()):G(z,!1)},Ze=Ie();return z.resetPeek(),Ze}function M(z){T(z);const X=z.currentPeek()==="|";return z.resetPeek(),X}function $(z){const X=T(z),_e=z.currentPeek()==="%"&&z.peek()==="{";return z.resetPeek(),{isModulo:_e,hasSpace:X.length>0}}function G(z,X=!0){const _e=(Ze=!1,Ve="",Ce=!1)=>{const Oe=z.currentPeek();return Oe==="{"?Ve==="%"?!1:Ze:Oe==="@"||!Oe?Ve==="%"?!0:Ze:Oe==="%"?(z.peek(),_e(Ze,"%",!0)):Oe==="|"?Ve==="%"||Ce?!0:!(Ve===zs||Ve===Nn):Oe===zs?(z.peek(),_e(!0,zs,Ce)):Oe===Nn?(z.peek(),_e(!0,Nn,Ce)):!0},Ie=_e();return X&&z.resetPeek(),Ie}function Z(z,X){const _e=z.currentChar();return _e===wa?wa:X(_e)?(z.next(),_e):null}function ce(z){const X=z.charCodeAt(0);return X>=97&&X<=122||X>=65&&X<=90||X>=48&&X<=57||X===95||X===36}function Y(z){return Z(z,ce)}function J(z){const X=z.charCodeAt(0);return X>=97&&X<=122||X>=65&&X<=90||X>=48&&X<=57||X===95||X===36||X===45}function ie(z){return Z(z,J)}function le(z){const X=z.charCodeAt(0);return X>=48&&X<=57}function Te(z){return Z(z,le)}function Me(z){const X=z.charCodeAt(0);return X>=48&&X<=57||X>=65&&X<=70||X>=97&&X<=102}function Ee(z){return Z(z,Me)}function se(z){let X="",_e="";for(;X=Te(z);)_e+=X;return _e}function me(z){x(z);const X=z.currentChar();return X!=="%"&&h(Dt.EXPECTED_TOKEN,a(),0,X),z.next(),"%"}function Xe(z){let X="";for(;;){const _e=z.currentChar();if(_e==="{"||_e==="}"||_e==="@"||_e==="|"||!_e)break;if(_e==="%")if(G(z))X+=_e,z.next();else break;else if(_e===zs||_e===Nn)if(G(z))X+=_e,z.next();else{if(M(z))break;X+=_e,z.next()}else X+=_e,z.next()}return X}function nt(z){x(z);let X="",_e="";for(;X=ie(z);)_e+=X;return z.currentChar()===wa&&h(Dt.UNTERMINATED_CLOSING_BRACE,a(),0),_e}function ot(z){x(z);let X="";return z.currentChar()==="-"?(z.next(),X+=`-${se(z)}`):X+=se(z),z.currentChar()===wa&&h(Dt.UNTERMINATED_CLOSING_BRACE,a(),0),X}function pt(z){return z!==sD&&z!==Nn}function qe(z){x(z),m(z,"'");let X="",_e="";for(;X=Z(z,pt);)X==="\\"?_e+=Ye(z):_e+=X;const Ie=z.currentChar();return Ie===Nn||Ie===wa?(h(Dt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,a(),0),Ie===Nn&&(z.next(),m(z,"'")),_e):(m(z,"'"),_e)}function Ye(z){const X=z.currentChar();switch(X){case"\\":case"'":return z.next(),`\\${X}`;case"u":return at(z,X,4);case"U":return at(z,X,6);default:return h(Dt.UNKNOWN_ESCAPE_SEQUENCE,a(),0,X),""}}function at(z,X,_e){m(z,X);let Ie="";for(let Ze=0;Ze<_e;Ze++){const Ve=Ee(z);if(!Ve){h(Dt.INVALID_UNICODE_ESCAPE_SEQUENCE,a(),0,`\\${X}${Ie}${z.currentChar()}`);break}Ie+=Ve}return`\\${X}${Ie}`}function lt(z){return z!=="{"&&z!=="}"&&z!==zs&&z!==Nn}function j(z){x(z);let X="",_e="";for(;X=Z(z,lt);)_e+=X;return _e}function ue(z){let X="",_e="";for(;X=Y(z);)_e+=X;return _e}function oe(z){const X=_e=>{const Ie=z.currentChar();return Ie==="{"||Ie==="%"||Ie==="@"||Ie==="|"||Ie==="("||Ie===")"||!Ie||Ie===zs?_e:(_e+=Ie,z.next(),X(_e))};return X("")}function be(z){x(z);const X=m(z,"|");return x(z),X}function Le(z,X){let _e=null;switch(z.currentChar()){case"{":return X.braceNest>=1&&h(Dt.NOT_ALLOW_NEST_PLACEHOLDER,a(),0),z.next(),_e=p(X,2,"{"),x(z),X.braceNest++,_e;case"}":return X.braceNest>0&&X.currentType===2&&h(Dt.EMPTY_PLACEHOLDER,a(),0),z.next(),_e=p(X,3,"}"),X.braceNest--,X.braceNest>0&&x(z),X.inLinked&&X.braceNest===0&&(X.inLinked=!1),_e;case"@":return X.braceNest>0&&h(Dt.UNTERMINATED_CLOSING_BRACE,a(),0),_e=ye(z,X)||g(X),X.braceNest=0,_e;default:{let Ze=!0,Ve=!0,Ce=!0;if(M(z))return X.braceNest>0&&h(Dt.UNTERMINATED_CLOSING_BRACE,a(),0),_e=p(X,1,be(z)),X.braceNest=0,X.inLinked=!1,_e;if(X.braceNest>0&&(X.currentType===5||X.currentType===6||X.currentType===7))return h(Dt.UNTERMINATED_CLOSING_BRACE,a(),0),X.braceNest=0,De(z,X);if(Ze=R(z,X))return _e=p(X,5,nt(z)),x(z),_e;if(Ve=A(z,X))return _e=p(X,6,ot(z)),x(z),_e;if(Ce=k(z,X))return _e=p(X,7,qe(z)),x(z),_e;if(!Ze&&!Ve&&!Ce)return _e=p(X,13,j(z)),h(Dt.INVALID_TOKEN_IN_PLACEHOLDER,a(),0,_e.value),x(z),_e;break}}return _e}function ye(z,X){const{currentType:_e}=X;let Ie=null;const Ze=z.currentChar();switch((_e===8||_e===9||_e===12||_e===10)&&(Ze===Nn||Ze===zs)&&h(Dt.INVALID_LINKED_FORMAT,a(),0),Ze){case"@":return z.next(),Ie=p(X,8,"@"),X.inLinked=!0,Ie;case".":return x(z),z.next(),p(X,9,".");case":":return x(z),z.next(),p(X,10,":");default:return M(z)?(Ie=p(X,1,be(z)),X.braceNest=0,X.inLinked=!1,Ie):b(z,X)||w(z,X)?(x(z),ye(z,X)):C(z,X)?(x(z),p(X,12,ue(z))):O(z,X)?(x(z),Ze==="{"?Le(z,X)||Ie:p(X,11,oe(z))):(_e===8&&h(Dt.INVALID_LINKED_FORMAT,a(),0),X.braceNest=0,X.inLinked=!1,De(z,X))}}function De(z,X){let _e={type:14};if(X.braceNest>0)return Le(z,X)||g(X);if(X.inLinked)return ye(z,X)||g(X);switch(z.currentChar()){case"{":return Le(z,X)||g(X);case"}":return h(Dt.UNBALANCED_CLOSING_BRACE,a(),0),z.next(),p(X,3,"}");case"@":return ye(z,X)||g(X);default:{if(M(z))return _e=p(X,1,be(z)),X.braceNest=0,X.inLinked=!1,_e;const{isModulo:Ze,hasSpace:Ve}=$(z);if(Ze)return Ve?p(X,0,Xe(z)):p(X,4,me(z));if(G(z))return p(X,0,Xe(z));break}}return _e}function ke(){const{currentType:z,offset:X,startLoc:_e,endLoc:Ie}=u;return u.lastType=z,u.lastOffset=X,u.lastStartLoc=_e,u.lastEndLoc=Ie,u.offset=s(),u.startLoc=a(),i.currentChar()===wa?p(u,14):De(i,u)}return{nextToken:ke,currentOffset:s,currentPosition:a,context:c}}const rue="parser",nue=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function iue(t,e,r){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(e||r,16);return i<=55295||i>=57344?String.fromCodePoint(i):""}}}function sue(t={}){const e=t.location!==!1,{onError:r,onWarn:i}=t;function s(R,A,k,b,...C){const w=R.currentPosition();if(w.offset+=b,w.column+=b,r){const O=e?pd(k,w):null,M=ul(A,O,{domain:rue,args:C});r(M)}}function a(R,A,k,b,...C){const w=R.currentPosition();if(w.offset+=b,w.column+=b,i){const O=e?pd(k,w):null;i(Xoe(A,O,C))}}function n(R,A,k){const b={type:R};return e&&(b.start=A,b.end=A,b.loc={start:k,end:k}),b}function o(R,A,k,b){e&&(R.end=A,R.loc&&(R.loc.end=k))}function u(R,A){const k=R.context(),b=n(3,k.offset,k.startLoc);return b.value=A,o(b,R.currentOffset(),R.currentPosition()),b}function c(R,A){const k=R.context(),{lastOffset:b,lastStartLoc:C}=k,w=n(5,b,C);return w.index=parseInt(A,10),R.nextToken(),o(w,R.currentOffset(),R.currentPosition()),w}function f(R,A,k){const b=R.context(),{lastOffset:C,lastStartLoc:w}=b,O=n(4,C,w);return O.key=A,k===!0&&(O.modulo=!0),R.nextToken(),o(O,R.currentOffset(),R.currentPosition()),O}function h(R,A){const k=R.context(),{lastOffset:b,lastStartLoc:C}=k,w=n(9,b,C);return w.value=A.replace(nue,iue),R.nextToken(),o(w,R.currentOffset(),R.currentPosition()),w}function p(R){const A=R.nextToken(),k=R.context(),{lastOffset:b,lastStartLoc:C}=k,w=n(8,b,C);return A.type!==12?(s(R,Dt.UNEXPECTED_EMPTY_LINKED_MODIFIER,k.lastStartLoc,0),w.value="",o(w,b,C),{nextConsumeToken:A,node:w}):(A.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,es(A)),w.value=A.value||"",o(w,R.currentOffset(),R.currentPosition()),{node:w})}function g(R,A){const k=R.context(),b=n(7,k.offset,k.startLoc);return b.value=A,o(b,R.currentOffset(),R.currentPosition()),b}function m(R){const A=R.context(),k=n(6,A.offset,A.startLoc);let b=R.nextToken();if(b.type===9){const C=p(R);k.modifier=C.node,b=C.nextConsumeToken||R.nextToken()}switch(b.type!==10&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(b)),b=R.nextToken(),b.type===2&&(b=R.nextToken()),b.type){case 11:b.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(b)),k.key=g(R,b.value||"");break;case 5:b.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(b)),k.key=f(R,b.value||"");break;case 6:b.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(b)),k.key=c(R,b.value||"");break;case 7:b.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(b)),k.key=h(R,b.value||"");break;default:{s(R,Dt.UNEXPECTED_EMPTY_LINKED_KEY,A.lastStartLoc,0);const C=R.context(),w=n(7,C.offset,C.startLoc);return w.value="",o(w,C.offset,C.startLoc),k.key=w,o(k,C.offset,C.startLoc),{nextConsumeToken:b,node:k}}}return o(k,R.currentOffset(),R.currentPosition()),{node:k}}function T(R){const A=R.context(),k=A.currentType===1?R.currentOffset():A.offset,b=A.currentType===1?A.endLoc:A.startLoc,C=n(2,k,b);C.items=[];let w=null,O=null;do{const G=w||R.nextToken();switch(w=null,G.type){case 0:G.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(G)),C.items.push(u(R,G.value||""));break;case 6:G.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(G)),C.items.push(c(R,G.value||""));break;case 4:O=!0;break;case 5:G.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(G)),C.items.push(f(R,G.value||"",!!O)),O&&(a(R,sA.USE_MODULO_SYNTAX,A.lastStartLoc,0,es(G)),O=null);break;case 7:G.value==null&&s(R,Dt.UNEXPECTED_LEXICAL_ANALYSIS,A.lastStartLoc,0,es(G)),C.items.push(h(R,G.value||""));break;case 8:{const Z=m(R);C.items.push(Z.node),w=Z.nextConsumeToken||null;break}}}while(A.currentType!==14&&A.currentType!==1);const M=A.currentType===1?A.lastOffset:R.currentOffset(),$=A.currentType===1?A.lastEndLoc:R.currentPosition();return o(C,M,$),C}function x(R,A,k,b){const C=R.context();let w=b.items.length===0;const O=n(1,A,k);O.cases=[],O.cases.push(b);do{const M=T(R);w||(w=M.items.length===0),O.cases.push(M)}while(C.currentType!==14);return w&&s(R,Dt.MUST_HAVE_MESSAGES_IN_PLURAL,k,0),o(O,R.currentOffset(),R.currentPosition()),O}function v(R){const A=R.context(),{offset:k,startLoc:b}=A,C=T(R);return A.currentType===14?C:x(R,k,b,C)}function y(R){const A=tue(R,qN({},t)),k=A.context(),b=n(0,k.offset,k.startLoc);return e&&b.loc&&(b.loc.source=R),b.body=v(A),t.onCacheKey&&(b.cacheKey=t.onCacheKey(R)),k.currentType!==14&&s(A,Dt.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,R[k.offset]||""),o(b,A.currentOffset(),A.currentPosition()),b}return{parse:y}}function es(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function aue(t,e={}){const r={ast:t,helpers:new Set};return{context:()=>r,helper:a=>(r.helpers.add(a),a)}}function aD(t,e){for(let r=0;r<t.length;r++)aA(t[r],e)}function aA(t,e){switch(t.type){case 1:aD(t.cases,e),e.helper("plural");break;case 2:aD(t.items,e);break;case 6:{aA(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function oue(t,e={}){const r=aue(t);r.helper("normalize"),t.body&&aA(t.body,r);const i=r.context();t.helpers=Array.from(i.helpers)}function uue(t){const e=t.body;return e.type===2?oD(e):e.cases.forEach(r=>oD(r)),t}function oD(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let r=0;r<t.items.length;r++){const i=t.items[r];if(!(i.type===3||i.type===9)||i.value==null)break;e.push(i.value)}if(e.length===t.items.length){t.static=XN(e);for(let r=0;r<t.items.length;r++){const i=t.items[r];(i.type===3||i.type===9)&&delete i.value}}}}const lue="minifier";function vu(t){switch(t.t=t.type,t.type){case 0:{const e=t;vu(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,r=e.cases;for(let i=0;i<r.length;i++)vu(r[i]);e.c=r,delete e.cases;break}case 2:{const e=t,r=e.items;for(let i=0;i<r.length;i++)vu(r[i]);e.i=r,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;vu(e.key),e.k=e.key,delete e.key,e.modifier&&(vu(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw ul(Dt.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:lue,args:[t.type]})}delete t.type}const cue="parser";function fue(t,e){const{filename:r,breakLineCode:i,needIndent:s}=e,a=e.location!==!1,n={filename:r,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:i,needIndent:s,indentLevel:0};a&&t.loc&&(n.source=t.loc.source);const o=()=>n;function u(T,x){n.code+=T}function c(T,x=!0){const v=x?i:"";u(s?v+"  ".repeat(T):v)}function f(T=!0){const x=++n.indentLevel;T&&c(x)}function h(T=!0){const x=--n.indentLevel;T&&c(x)}function p(){c(n.indentLevel)}return{context:o,push:u,indent:f,deindent:h,newline:p,helper:T=>`_${T}`,needIndent:()=>n.needIndent}}function hue(t,e){const{helper:r}=t;t.push(`${r("linked")}(`),Yu(t,e.key),e.modifier?(t.push(", "),Yu(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function due(t,e){const{helper:r,needIndent:i}=t;t.push(`${r("normalize")}([`),t.indent(i());const s=e.items.length;for(let a=0;a<s&&(Yu(t,e.items[a]),a!==s-1);a++)t.push(", ");t.deindent(i()),t.push("])")}function pue(t,e){const{helper:r,needIndent:i}=t;if(e.cases.length>1){t.push(`${r("plural")}([`),t.indent(i());const s=e.cases.length;for(let a=0;a<s&&(Yu(t,e.cases[a]),a!==s-1);a++)t.push(", ");t.deindent(i()),t.push("])")}}function gue(t,e){e.body?Yu(t,e.body):t.push("null")}function Yu(t,e){const{helper:r}=t;switch(e.type){case 0:gue(t,e);break;case 1:pue(t,e);break;case 2:due(t,e);break;case 6:hue(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${r("interpolate")}(${r("list")}(${e.index}))`,e);break;case 4:t.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw ul(Dt.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:cue,args:[e.type]})}}const mue=(t,e={})=>{const r=iD(e.mode)?e.mode:"normal",i=iD(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:r==="arrow"?";":`
`,a=e.needIndent?e.needIndent:r!=="arrow",n=t.helpers||[],o=fue(t,{filename:i,breakLineCode:s,needIndent:a});o.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),o.indent(a),n.length>0&&(o.push(`const { ${XN(n.map(f=>`${f}: _${f}`),", ")} } = ctx`),o.newline()),o.push("return "),Yu(o,t),o.deindent(a),o.push("}"),delete t.helpers;const{code:u,map:c}=o.context();return{ast:t,code:u,map:c?c.toJSON():void 0}};function _ue(t,e={}){const r=qN({},e),i=!!r.jit,s=!!r.minify,a=r.optimize==null?!0:r.optimize,o=sue(r).parse(t);return i?(a&&uue(o),s&&vu(o),{ast:o,code:""}):(oue(o,r),mue(o,r))}/*!
  * core-base v9.14.5
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function bue(){typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(dd().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(dd().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function Ss(t){return ur(t)&&oA(t)===0&&(is(t,"b")||is(t,"body"))}const zN=["b","body"];function xue(t){return Za(t,zN)}const WN=["c","cases"];function vue(t){return Za(t,WN,[])}const jN=["s","static"];function Eue(t){return Za(t,jN)}const YN=["i","items"];function yue(t){return Za(t,YN,[])}const ZN=["t","type"];function oA(t){return Za(t,ZN)}const QN=["v","value"];function ph(t,e){const r=Za(t,QN);if(r!=null)return r;throw Bc(e)}const JN=["m","modifier"];function Tue(t){return Za(t,JN)}const e8=["k","key"];function Aue(t){const e=Za(t,e8);if(e)return e;throw Bc(6)}function Za(t,e,r){for(let i=0;i<e.length;i++){const s=e[i];if(is(t,s)&&t[s]!=null)return t[s]}return r}const t8=[...zN,...WN,...jN,...YN,...e8,...JN,...QN,...ZN];function Bc(t){return new Error(`unhandled node type: ${t}`)}const Qa=[];Qa[0]={w:[0],i:[3,0],"[":[4],o:[7]};Qa[1]={w:[1],".":[2],"[":[4],o:[7]};Qa[2]={w:[2],i:[3,0],0:[3,0]};Qa[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Qa[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Qa[5]={"'":[4,0],o:8,l:[5,0]};Qa[6]={'"':[4,0],o:8,l:[6,0]};const Sue=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function Rue(t){return Sue.test(t)}function Cue(t){const e=t.charCodeAt(0),r=t.charCodeAt(t.length-1);return e===r&&(e===34||e===39)?t.slice(1,-1):t}function wue(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Lue(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:Rue(e)?Cue(e):"*"+e}function Iue(t){const e=[];let r=-1,i=0,s=0,a,n,o,u,c,f,h;const p=[];p[0]=()=>{n===void 0?n=o:n+=o},p[1]=()=>{n!==void 0&&(e.push(n),n=void 0)},p[2]=()=>{p[0](),s++},p[3]=()=>{if(s>0)s--,i=4,p[0]();else{if(s=0,n===void 0||(n=Lue(n),n===!1))return!1;p[1]()}};function g(){const m=t[r+1];if(i===5&&m==="'"||i===6&&m==='"')return r++,o="\\"+m,p[0](),!0}for(;i!==null;)if(r++,a=t[r],!(a==="\\"&&g())){if(u=wue(a),h=Qa[i],c=h[u]||h.l||8,c===8||(i=c[0],c[1]!==void 0&&(f=p[c[1]],f&&(o=a,f()===!1))))return;if(i===7)return e}}const uD=new Map;function Bue(t,e){return ur(t)?t[e]:null}function Pue(t,e){if(!ur(t))return null;let r=uD.get(e);if(r||(r=Iue(e),r&&uD.set(e,r)),!r)return null;const i=r.length;let s=t,a=0;for(;a<i;){const n=r[a];if(t8.includes(n)&&Ss(s))return null;const o=s[n];if(o===void 0||Cr(s))return null;s=o,a++}return s}const Oue=t=>t,Due=t=>"",kue="text",Uue=t=>t.length===0?"":Koe(t),Mue=Goe;function lD(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function Nue(t){const e=tn(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(tn(t.named.count)||tn(t.named.n))?tn(t.named.count)?t.named.count:tn(t.named.n)?t.named.n:e:e}function Fue(t,e){e.count||(e.count=t),e.n||(e.n=t)}function Gue(t={}){const e=t.locale,r=Nue(t),i=ur(t.pluralRules)&&dt(e)&&Cr(t.pluralRules[e])?t.pluralRules[e]:lD,s=ur(t.pluralRules)&&dt(e)&&Cr(t.pluralRules[e])?lD:void 0,a=v=>v[i(r,v.length,s)],n=t.list||[],o=v=>n[v],u=t.named||xr();tn(t.pluralIndex)&&Fue(r,u);const c=v=>u[v];function f(v){const y=Cr(t.messages)?t.messages(v):ur(t.messages)?t.messages[v]:!1;return y||(t.parent?t.parent.message(v):Due)}const h=v=>t.modifiers?t.modifiers[v]:Oue,p=Nt(t.processor)&&Cr(t.processor.normalize)?t.processor.normalize:Uue,g=Nt(t.processor)&&Cr(t.processor.interpolate)?t.processor.interpolate:Mue,m=Nt(t.processor)&&dt(t.processor.type)?t.processor.type:kue,x={list:o,named:c,plural:a,linked:(v,...y)=>{const[R,A]=y;let k="text",b="";y.length===1?ur(R)?(b=R.modifier||b,k=R.type||k):dt(R)&&(b=R||b):y.length===2&&(dt(R)&&(b=R||b),dt(A)&&(k=A||k));const C=f(v)(x),w=k==="vnode"&&Dr(C)&&b?C[0]:C;return b?h(b)(w,k):w},message:f,type:m,interpolate:g,normalize:p,values:On(xr(),n,u)};return x}const Kue=sA.__EXTEND_POINT__,mo=pp(Kue),Vue={FALLBACK_TO_TRANSLATE:mo(),CANNOT_FORMAT_NUMBER:mo(),FALLBACK_TO_NUMBER_FORMAT:mo(),CANNOT_FORMAT_DATE:mo(),FALLBACK_TO_DATE_FORMAT:mo(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:mo(),__EXTEND_POINT__:mo()},r8=Dt.__EXTEND_POINT__,_o=pp(r8),ss={INVALID_ARGUMENT:r8,INVALID_DATE_ARGUMENT:_o(),INVALID_ISO_DATE_ARGUMENT:_o(),NOT_SUPPORT_NON_STRING_MESSAGE:_o(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:_o(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:_o(),NOT_SUPPORT_LOCALE_TYPE:_o(),__EXTEND_POINT__:_o()};function Ts(t){return ul(t,null,void 0)}function uA(t,e){return e.locale!=null?cD(e.locale):cD(t.locale)}let mE;function cD(t){if(dt(t))return t;if(Cr(t)){if(t.resolvedOnce&&mE!=null)return mE;if(t.constructor.name==="Function"){const e=t();if(Foe(e))throw Ts(ss.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return mE=e}else throw Ts(ss.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Ts(ss.NOT_SUPPORT_LOCALE_TYPE)}function $ue(t,e,r){return[...new Set([r,...Dr(e)?e:ur(e)?Object.keys(e):dt(e)?[e]:[r]])]}function n8(t,e,r){const i=dt(r)?r:Zu,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let a=s.__localeChainCache.get(i);if(!a){a=[];let n=[r];for(;Dr(n);)n=fD(a,n,e);const o=Dr(e)||!Nt(e)?e:e.default?e.default:null;n=dt(o)?[o]:o,Dr(n)&&fD(a,n,!1),s.__localeChainCache.set(i,a)}return a}function fD(t,e,r){let i=!0;for(let s=0;s<e.length&&zt(i);s++){const a=e[s];dt(a)&&(i=Hue(t,e[s],r))}return i}function Hue(t,e,r){let i;const s=e.split("-");do{const a=s.join("-");i=que(t,a,r),s.splice(-1,1)}while(s.length&&i===!0);return i}function que(t,e,r){let i=!1;if(!t.includes(e)&&(i=!0,e)){i=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(Dr(r)||Nt(r))&&r[s]&&(i=r[s])}return i}const Xue="9.14.5",gp=-1,Zu="en-US",hD="",dD=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function zue(){return{upper:(t,e)=>e==="text"&&dt(t)?t.toUpperCase():e==="vnode"&&ur(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&dt(t)?t.toLowerCase():e==="vnode"&&ur(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&dt(t)?dD(t):e==="vnode"&&ur(t)&&"__v_isVNode"in t?dD(t.children):t}}let i8;function pD(t){i8=t}let s8;function Wue(t){s8=t}let a8;function jue(t){a8=t}let o8=null;const gD=t=>{o8=t},Yue=()=>o8;let mD=0;function Zue(t={}){const e=Cr(t.onWarn)?t.onWarn:Poe,r=dt(t.version)?t.version:Xue,i=dt(t.locale)||Cr(t.locale)?t.locale:Zu,s=Cr(i)?Zu:i,a=Dr(t.fallbackLocale)||Nt(t.fallbackLocale)||dt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,n=Nt(t.messages)?t.messages:_E(s),o=Nt(t.datetimeFormats)?t.datetimeFormats:_E(s),u=Nt(t.numberFormats)?t.numberFormats:_E(s),c=On(xr(),t.modifiers,zue()),f=t.pluralRules||xr(),h=Cr(t.missing)?t.missing:null,p=zt(t.missingWarn)||Ka(t.missingWarn)?t.missingWarn:!0,g=zt(t.fallbackWarn)||Ka(t.fallbackWarn)?t.fallbackWarn:!0,m=!!t.fallbackFormat,T=!!t.unresolving,x=Cr(t.postTranslation)?t.postTranslation:null,v=Nt(t.processor)?t.processor:null,y=zt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,R=!!t.escapeParameter,A=Cr(t.messageCompiler)?t.messageCompiler:i8,k=Cr(t.messageResolver)?t.messageResolver:s8||Bue,b=Cr(t.localeFallbacker)?t.localeFallbacker:a8||$ue,C=ur(t.fallbackContext)?t.fallbackContext:void 0,w=t,O=ur(w.__datetimeFormatters)?w.__datetimeFormatters:new Map,M=ur(w.__numberFormatters)?w.__numberFormatters:new Map,$=ur(w.__meta)?w.__meta:{};mD++;const G={version:r,cid:mD,locale:i,fallbackLocale:a,messages:n,modifiers:c,pluralRules:f,missing:h,missingWarn:p,fallbackWarn:g,fallbackFormat:m,unresolving:T,postTranslation:x,processor:v,warnHtmlMessage:y,escapeParameter:R,messageCompiler:A,messageResolver:k,localeFallbacker:b,fallbackContext:C,onWarn:e,__meta:$};return G.datetimeFormats=o,G.numberFormats=u,G.__datetimeFormatters=O,G.__numberFormatters=M,G}const _E=t=>({[t]:xr()});function lA(t,e,r,i,s){const{missing:a,onWarn:n}=t;if(a!==null){const o=a(t,r,e,s);return dt(o)?o:e}else return e}function Ml(t,e,r){const i=t;i.__localeChainCache=new Map,t.localeFallbacker(t,r,e)}function Que(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function Jue(t,e){const r=e.indexOf(t);if(r===-1)return!1;for(let i=r+1;i<e.length;i++)if(Que(t,e[i]))return!0;return!1}function bE(t){return r=>ele(r,t)}function ele(t,e){const r=xue(e);if(r==null)throw Bc(0);if(oA(r)===1){const a=vue(r);return t.plural(a.reduce((n,o)=>[...n,_D(t,o)],[]))}else return _D(t,r)}function _D(t,e){const r=Eue(e);if(r!=null)return t.type==="text"?r:t.normalize([r]);{const i=yue(e).reduce((s,a)=>[...s,Oy(t,a)],[]);return t.normalize(i)}}function Oy(t,e){const r=oA(e);switch(r){case 3:return ph(e,r);case 9:return ph(e,r);case 4:{const i=e;if(is(i,"k")&&i.k)return t.interpolate(t.named(i.k));if(is(i,"key")&&i.key)return t.interpolate(t.named(i.key));throw Bc(r)}case 5:{const i=e;if(is(i,"i")&&tn(i.i))return t.interpolate(t.list(i.i));if(is(i,"index")&&tn(i.index))return t.interpolate(t.list(i.index));throw Bc(r)}case 6:{const i=e,s=Tue(i),a=Aue(i);return t.linked(Oy(t,a),s?Oy(t,s):void 0,t.type)}case 7:return ph(e,r);case 8:return ph(e,r);default:throw new Error(`unhandled node on format message part: ${r}`)}}const u8=t=>t;let Au=xr();function l8(t,e={}){let r=!1;const i=e.onError||Woe;return e.onError=s=>{r=!0,i(s)},{..._ue(t,e),detectError:r}}const tle=(t,e)=>{if(!dt(t))throw Ts(ss.NOT_SUPPORT_NON_STRING_MESSAGE);{zt(e.warnHtmlMessage)&&e.warnHtmlMessage;const i=(e.onCacheKey||u8)(t),s=Au[i];if(s)return s;const{code:a,detectError:n}=l8(t,e),o=new Function(`return ${a}`)();return n?o:Au[i]=o}};function rle(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&dt(t)){zt(e.warnHtmlMessage)&&e.warnHtmlMessage;const i=(e.onCacheKey||u8)(t),s=Au[i];if(s)return s;const{ast:a,detectError:n}=l8(t,{...e,location:!1,jit:!0}),o=bE(a);return n?o:Au[i]=o}else{const r=t.cacheKey;if(r){const i=Au[r];return i||(Au[r]=bE(t))}else return bE(t)}}const bD=()=>"",aa=t=>Cr(t);function xD(t,...e){const{fallbackFormat:r,postTranslation:i,unresolving:s,messageCompiler:a,fallbackLocale:n,messages:o}=t,[u,c]=Dy(...e),f=zt(c.missingWarn)?c.missingWarn:t.missingWarn,h=zt(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn,p=zt(c.escapeParameter)?c.escapeParameter:t.escapeParameter,g=!!c.resolvedMessage,m=dt(c.default)||zt(c.default)?zt(c.default)?a?u:()=>u:c.default:r?a?u:()=>u:"",T=r||m!=="",x=uA(t,c);p&&nle(c);let[v,y,R]=g?[u,x,o[x]||xr()]:c8(t,u,x,n,h,f),A=v,k=u;if(!g&&!(dt(A)||Ss(A)||aa(A))&&T&&(A=m,k=A),!g&&(!(dt(A)||Ss(A)||aa(A))||!dt(y)))return s?gp:u;let b=!1;const C=()=>{b=!0},w=aa(A)?A:f8(t,u,y,A,k,C);if(b)return A;const O=ale(t,y,R,c),M=Gue(O),$=ile(t,w,M);let G=i?i($,u):$;return p&&dt(G)&&(G=Moe(G)),G}function nle(t){Dr(t.list)?t.list=t.list.map(e=>dt(e)?rD(e):e):ur(t.named)&&Object.keys(t.named).forEach(e=>{dt(t.named[e])&&(t.named[e]=rD(t.named[e]))})}function c8(t,e,r,i,s,a){const{messages:n,onWarn:o,messageResolver:u,localeFallbacker:c}=t,f=c(t,i,r);let h=xr(),p,g=null;const m="translate";for(let T=0;T<f.length&&(p=f[T],h=n[p]||xr(),(g=u(h,e))===null&&(g=h[e]),!(dt(g)||Ss(g)||aa(g)));T++)if(!Jue(p,f)){const x=lA(t,e,p,a,m);x!==e&&(g=x)}return[g,p,h]}function f8(t,e,r,i,s,a){const{messageCompiler:n,warnHtmlMessage:o}=t;if(aa(i)){const c=i;return c.locale=c.locale||r,c.key=c.key||e,c}if(n==null){const c=()=>i;return c.locale=r,c.key=e,c}const u=n(i,sle(t,r,s,i,o,a));return u.locale=r,u.key=e,u.source=i,u}function ile(t,e,r){return e(r)}function Dy(...t){const[e,r,i]=t,s=xr();if(!dt(e)&&!tn(e)&&!aa(e)&&!Ss(e))throw Ts(ss.INVALID_ARGUMENT);const a=tn(e)?String(e):(aa(e),e);return tn(r)?s.plural=r:dt(r)?s.default=r:Nt(r)&&!dp(r)?s.named=r:Dr(r)&&(s.list=r),tn(i)?s.plural=i:dt(i)?s.default=i:Nt(i)&&On(s,i),[a,s]}function sle(t,e,r,i,s,a){return{locale:e,key:r,warnHtmlMessage:s,onError:n=>{throw a&&a(n),n},onCacheKey:n=>Ooe(e,r,n)}}function ale(t,e,r,i){const{modifiers:s,pluralRules:a,messageResolver:n,fallbackLocale:o,fallbackWarn:u,missingWarn:c,fallbackContext:f}=t,p={locale:e,modifiers:s,pluralRules:a,messages:g=>{let m=n(r,g);if(m==null&&f){const[,,T]=c8(f,g,e,o,u,c);m=n(T,g)}if(dt(m)||Ss(m)){let T=!1;const v=f8(t,g,e,m,g,()=>{T=!0});return T?bD:v}else return aa(m)?m:bD}};return t.processor&&(p.processor=t.processor),i.list&&(p.list=i.list),i.named&&(p.named=i.named),tn(i.plural)&&(p.pluralIndex=i.plural),p}function vD(t,...e){const{datetimeFormats:r,unresolving:i,fallbackLocale:s,onWarn:a,localeFallbacker:n}=t,{__datetimeFormatters:o}=t,[u,c,f,h]=ky(...e),p=zt(f.missingWarn)?f.missingWarn:t.missingWarn;zt(f.fallbackWarn)?f.fallbackWarn:t.fallbackWarn;const g=!!f.part,m=uA(t,f),T=n(t,s,m);if(!dt(u)||u==="")return new Intl.DateTimeFormat(m,h).format(c);let x={},v,y=null;const R="datetime format";for(let b=0;b<T.length&&(v=T[b],x=r[v]||{},y=x[u],!Nt(y));b++)lA(t,u,v,p,R);if(!Nt(y)||!dt(v))return i?gp:u;let A=`${v}__${u}`;dp(h)||(A=`${A}__${JSON.stringify(h)}`);let k=o.get(A);return k||(k=new Intl.DateTimeFormat(v,On({},y,h)),o.set(A,k)),g?k.formatToParts(c):k.format(c)}const h8=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function ky(...t){const[e,r,i,s]=t,a=xr();let n=xr(),o;if(dt(e)){const u=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!u)throw Ts(ss.INVALID_ISO_DATE_ARGUMENT);const c=u[3]?u[3].trim().startsWith("T")?`${u[1].trim()}${u[3].trim()}`:`${u[1].trim()}T${u[3].trim()}`:u[1].trim();o=new Date(c);try{o.toISOString()}catch{throw Ts(ss.INVALID_ISO_DATE_ARGUMENT)}}else if(koe(e)){if(isNaN(e.getTime()))throw Ts(ss.INVALID_DATE_ARGUMENT);o=e}else if(tn(e))o=e;else throw Ts(ss.INVALID_ARGUMENT);return dt(r)?a.key=r:Nt(r)&&Object.keys(r).forEach(u=>{h8.includes(u)?n[u]=r[u]:a[u]=r[u]}),dt(i)?a.locale=i:Nt(i)&&(n=i),Nt(s)&&(n=s),[a.key||"",o,a,n]}function ED(t,e,r){const i=t;for(const s in r){const a=`${e}__${s}`;i.__datetimeFormatters.has(a)&&i.__datetimeFormatters.delete(a)}}function yD(t,...e){const{numberFormats:r,unresolving:i,fallbackLocale:s,onWarn:a,localeFallbacker:n}=t,{__numberFormatters:o}=t,[u,c,f,h]=Uy(...e),p=zt(f.missingWarn)?f.missingWarn:t.missingWarn;zt(f.fallbackWarn)?f.fallbackWarn:t.fallbackWarn;const g=!!f.part,m=uA(t,f),T=n(t,s,m);if(!dt(u)||u==="")return new Intl.NumberFormat(m,h).format(c);let x={},v,y=null;const R="number format";for(let b=0;b<T.length&&(v=T[b],x=r[v]||{},y=x[u],!Nt(y));b++)lA(t,u,v,p,R);if(!Nt(y)||!dt(v))return i?gp:u;let A=`${v}__${u}`;dp(h)||(A=`${A}__${JSON.stringify(h)}`);let k=o.get(A);return k||(k=new Intl.NumberFormat(v,On({},y,h)),o.set(A,k)),g?k.formatToParts(c):k.format(c)}const d8=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Uy(...t){const[e,r,i,s]=t,a=xr();let n=xr();if(!tn(e))throw Ts(ss.INVALID_ARGUMENT);const o=e;return dt(r)?a.key=r:Nt(r)&&Object.keys(r).forEach(u=>{d8.includes(u)?n[u]=r[u]:a[u]=r[u]}),dt(i)?a.locale=i:Nt(i)&&(n=i),Nt(s)&&(n=s),[a.key||"",o,a,n]}function TD(t,e,r){const i=t;for(const s in r){const a=`${e}__${s}`;i.__numberFormatters.has(a)&&i.__numberFormatters.delete(a)}}bue();/*!
  * vue-i18n v9.14.5
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const ole="9.14.5";function ule(){typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(dd().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(dd().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const lle=Vue.__EXTEND_POINT__,Ws=pp(lle);Ws(),Ws(),Ws(),Ws(),Ws(),Ws(),Ws(),Ws(),Ws();const p8=ss.__EXTEND_POINT__,Yn=pp(p8),on={UNEXPECTED_RETURN_TYPE:p8,INVALID_ARGUMENT:Yn(),MUST_BE_CALL_SETUP_TOP:Yn(),NOT_INSTALLED:Yn(),NOT_AVAILABLE_IN_LEGACY_MODE:Yn(),REQUIRED_VALUE:Yn(),INVALID_VALUE:Yn(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Yn(),NOT_INSTALLED_WITH_PROVIDE:Yn(),UNEXPECTED_ERROR:Yn(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Yn(),BRIDGE_SUPPORT_VUE_2_ONLY:Yn(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Yn(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Yn(),__EXTEND_POINT__:Yn()};function pn(t,...e){return ul(t,null,void 0)}const My=Ya("__translateVNode"),Ny=Ya("__datetimeParts"),Fy=Ya("__numberParts"),g8=Ya("__setPluralRules"),m8=Ya("__injectWithOption"),Gy=Ya("__dispose");function Pc(t){if(!ur(t)||Ss(t))return t;for(const e in t)if(is(t,e))if(!e.includes("."))ur(t[e])&&Pc(t[e]);else{const r=e.split("."),i=r.length-1;let s=t,a=!1;for(let n=0;n<i;n++){if(r[n]==="__proto__")throw new Error(`unsafe key: ${r[n]}`);if(r[n]in s||(s[r[n]]=xr()),!ur(s[r[n]])){a=!0;break}s=s[r[n]]}if(a||(Ss(s)?t8.includes(r[i])||delete t[e]:(s[r[i]]=t[e],delete t[e])),!Ss(s)){const n=s[r[i]];ur(n)&&Pc(n)}}return t}function mp(t,e){const{messages:r,__i18n:i,messageResolver:s,flatJson:a}=e,n=Nt(r)?r:Dr(i)?xr():{[t]:xr()};if(Dr(i)&&i.forEach(o=>{if("locale"in o&&"resource"in o){const{locale:u,resource:c}=o;u?(n[u]=n[u]||xr(),qh(c,n[u])):qh(c,n)}else dt(o)&&qh(JSON.parse(o),n)}),s==null&&a)for(const o in n)is(n,o)&&Pc(n[o]);return n}function cle(t){return t.type}function _8(t,e,r){let i=ur(e.messages)?e.messages:xr();"__i18nGlobal"in r&&(i=mp(t.locale.value,{messages:i,__i18n:r.__i18nGlobal}));const s=Object.keys(i);s.length&&s.forEach(a=>{t.mergeLocaleMessage(a,i[a])});{if(ur(e.datetimeFormats)){const a=Object.keys(e.datetimeFormats);a.length&&a.forEach(n=>{t.mergeDateTimeFormat(n,e.datetimeFormats[n])})}if(ur(e.numberFormats)){const a=Object.keys(e.numberFormats);a.length&&a.forEach(n=>{t.mergeNumberFormat(n,e.numberFormats[n])})}}}function AD(t){return Zt(Yc,null,t,0)}const SD=()=>[],fle=()=>!1;let RD=0;function CD(t){return(e,r,i,s)=>t(r,i,No()||void 0,s)}function cA(t={},e){const{__root:r,__injectWithOption:i}=t,s=r===void 0,a=t.flatJson,n=hd?Lo:oM,o=!!t.translateExistCompatible;let u=zt(t.inheritLocale)?t.inheritLocale:!0;const c=n(r&&u?r.locale.value:dt(t.locale)?t.locale:Zu),f=n(r&&u?r.fallbackLocale.value:dt(t.fallbackLocale)||Dr(t.fallbackLocale)||Nt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:c.value),h=n(mp(c.value,t)),p=n(Nt(t.datetimeFormats)?t.datetimeFormats:{[c.value]:{}}),g=n(Nt(t.numberFormats)?t.numberFormats:{[c.value]:{}});let m=r?r.missingWarn:zt(t.missingWarn)||Ka(t.missingWarn)?t.missingWarn:!0,T=r?r.fallbackWarn:zt(t.fallbackWarn)||Ka(t.fallbackWarn)?t.fallbackWarn:!0,x=r?r.fallbackRoot:zt(t.fallbackRoot)?t.fallbackRoot:!0,v=!!t.fallbackFormat,y=Cr(t.missing)?t.missing:null,R=Cr(t.missing)?CD(t.missing):null,A=Cr(t.postTranslation)?t.postTranslation:null,k=r?r.warnHtmlMessage:zt(t.warnHtmlMessage)?t.warnHtmlMessage:!0,b=!!t.escapeParameter;const C=r?r.modifiers:Nt(t.modifiers)?t.modifiers:{};let w=t.pluralRules||r&&r.pluralRules,O;O=(()=>{s&&gD(null);const Ce={version:ole,locale:c.value,fallbackLocale:f.value,messages:h.value,modifiers:C,pluralRules:w,missing:R===null?void 0:R,missingWarn:m,fallbackWarn:T,fallbackFormat:v,unresolving:!0,postTranslation:A===null?void 0:A,warnHtmlMessage:k,escapeParameter:b,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};Ce.datetimeFormats=p.value,Ce.numberFormats=g.value,Ce.__datetimeFormatters=Nt(O)?O.__datetimeFormatters:void 0,Ce.__numberFormatters=Nt(O)?O.__numberFormatters:void 0;const Oe=Zue(Ce);return s&&gD(Oe),Oe})(),Ml(O,c.value,f.value);function $(){return[c.value,f.value,h.value,p.value,g.value]}const G=vi({get:()=>c.value,set:Ce=>{c.value=Ce,O.locale=c.value}}),Z=vi({get:()=>f.value,set:Ce=>{f.value=Ce,O.fallbackLocale=f.value,Ml(O,c.value,Ce)}}),ce=vi(()=>h.value),Y=vi(()=>p.value),J=vi(()=>g.value);function ie(){return Cr(A)?A:null}function le(Ce){A=Ce,O.postTranslation=Ce}function Te(){return y}function Me(Ce){Ce!==null&&(R=CD(Ce)),y=Ce,O.missing=R}const Ee=(Ce,Oe,st,ae,ne,U)=>{$();let K;try{s||(O.fallbackContext=r?Yue():void 0),K=Ce(O)}finally{s||(O.fallbackContext=void 0)}if(st!=="translate exists"&&tn(K)&&K===gp||st==="translate exists"&&!K){const[te,ge]=Oe();return r&&x?ae(r):ne(te)}else{if(U(K))return K;throw pn(on.UNEXPECTED_RETURN_TYPE)}};function se(...Ce){return Ee(Oe=>Reflect.apply(xD,null,[Oe,...Ce]),()=>Dy(...Ce),"translate",Oe=>Reflect.apply(Oe.t,Oe,[...Ce]),Oe=>Oe,Oe=>dt(Oe))}function me(...Ce){const[Oe,st,ae]=Ce;if(ae&&!ur(ae))throw pn(on.INVALID_ARGUMENT);return se(Oe,st,On({resolvedMessage:!0},ae||{}))}function Xe(...Ce){return Ee(Oe=>Reflect.apply(vD,null,[Oe,...Ce]),()=>ky(...Ce),"datetime format",Oe=>Reflect.apply(Oe.d,Oe,[...Ce]),()=>hD,Oe=>dt(Oe))}function nt(...Ce){return Ee(Oe=>Reflect.apply(yD,null,[Oe,...Ce]),()=>Uy(...Ce),"number format",Oe=>Reflect.apply(Oe.n,Oe,[...Ce]),()=>hD,Oe=>dt(Oe))}function ot(Ce){return Ce.map(Oe=>dt(Oe)||tn(Oe)||zt(Oe)?AD(String(Oe)):Oe)}const qe={normalize:ot,interpolate:Ce=>Ce,type:"vnode"};function Ye(...Ce){return Ee(Oe=>{let st;const ae=Oe;try{ae.processor=qe,st=Reflect.apply(xD,null,[ae,...Ce])}finally{ae.processor=null}return st},()=>Dy(...Ce),"translate",Oe=>Oe[My](...Ce),Oe=>[AD(Oe)],Oe=>Dr(Oe))}function at(...Ce){return Ee(Oe=>Reflect.apply(yD,null,[Oe,...Ce]),()=>Uy(...Ce),"number format",Oe=>Oe[Fy](...Ce),SD,Oe=>dt(Oe)||Dr(Oe))}function lt(...Ce){return Ee(Oe=>Reflect.apply(vD,null,[Oe,...Ce]),()=>ky(...Ce),"datetime format",Oe=>Oe[Ny](...Ce),SD,Oe=>dt(Oe)||Dr(Oe))}function j(Ce){w=Ce,O.pluralRules=w}function ue(Ce,Oe){return Ee(()=>{if(!Ce)return!1;const st=dt(Oe)?Oe:c.value,ae=Le(st),ne=O.messageResolver(ae,Ce);return o?ne!=null:Ss(ne)||aa(ne)||dt(ne)},()=>[Ce],"translate exists",st=>Reflect.apply(st.te,st,[Ce,Oe]),fle,st=>zt(st))}function oe(Ce){let Oe=null;const st=n8(O,f.value,c.value);for(let ae=0;ae<st.length;ae++){const ne=h.value[st[ae]]||{},U=O.messageResolver(ne,Ce);if(U!=null){Oe=U;break}}return Oe}function be(Ce){const Oe=oe(Ce);return Oe??(r?r.tm(Ce)||{}:{})}function Le(Ce){return h.value[Ce]||{}}function ye(Ce,Oe){if(a){const st={[Ce]:Oe};for(const ae in st)is(st,ae)&&Pc(st[ae]);Oe=st[Ce]}h.value[Ce]=Oe,O.messages=h.value}function De(Ce,Oe){h.value[Ce]=h.value[Ce]||{};const st={[Ce]:Oe};if(a)for(const ae in st)is(st,ae)&&Pc(st[ae]);Oe=st[Ce],qh(Oe,h.value[Ce]),O.messages=h.value}function ke(Ce){return p.value[Ce]||{}}function z(Ce,Oe){p.value[Ce]=Oe,O.datetimeFormats=p.value,ED(O,Ce,Oe)}function X(Ce,Oe){p.value[Ce]=On(p.value[Ce]||{},Oe),O.datetimeFormats=p.value,ED(O,Ce,Oe)}function _e(Ce){return g.value[Ce]||{}}function Ie(Ce,Oe){g.value[Ce]=Oe,O.numberFormats=g.value,TD(O,Ce,Oe)}function Ze(Ce,Oe){g.value[Ce]=On(g.value[Ce]||{},Oe),O.numberFormats=g.value,TD(O,Ce,Oe)}RD++,r&&hd&&(Do(r.locale,Ce=>{u&&(c.value=Ce,O.locale=Ce,Ml(O,c.value,f.value))}),Do(r.fallbackLocale,Ce=>{u&&(f.value=Ce,O.fallbackLocale=Ce,Ml(O,c.value,f.value))}));const Ve={id:RD,locale:G,fallbackLocale:Z,get inheritLocale(){return u},set inheritLocale(Ce){u=Ce,Ce&&r&&(c.value=r.locale.value,f.value=r.fallbackLocale.value,Ml(O,c.value,f.value))},get availableLocales(){return Object.keys(h.value).sort()},messages:ce,get modifiers(){return C},get pluralRules(){return w||{}},get isGlobal(){return s},get missingWarn(){return m},set missingWarn(Ce){m=Ce,O.missingWarn=m},get fallbackWarn(){return T},set fallbackWarn(Ce){T=Ce,O.fallbackWarn=T},get fallbackRoot(){return x},set fallbackRoot(Ce){x=Ce},get fallbackFormat(){return v},set fallbackFormat(Ce){v=Ce,O.fallbackFormat=v},get warnHtmlMessage(){return k},set warnHtmlMessage(Ce){k=Ce,O.warnHtmlMessage=Ce},get escapeParameter(){return b},set escapeParameter(Ce){b=Ce,O.escapeParameter=Ce},t:se,getLocaleMessage:Le,setLocaleMessage:ye,mergeLocaleMessage:De,getPostTranslationHandler:ie,setPostTranslationHandler:le,getMissingHandler:Te,setMissingHandler:Me,[g8]:j};return Ve.datetimeFormats=Y,Ve.numberFormats=J,Ve.rt=me,Ve.te=ue,Ve.tm=be,Ve.d=Xe,Ve.n=nt,Ve.getDateTimeFormat=ke,Ve.setDateTimeFormat=z,Ve.mergeDateTimeFormat=X,Ve.getNumberFormat=_e,Ve.setNumberFormat=Ie,Ve.mergeNumberFormat=Ze,Ve[m8]=i,Ve[My]=Ye,Ve[Ny]=lt,Ve[Fy]=at,Ve}function hle(t){const e=dt(t.locale)?t.locale:Zu,r=dt(t.fallbackLocale)||Dr(t.fallbackLocale)||Nt(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,i=Cr(t.missing)?t.missing:void 0,s=zt(t.silentTranslationWarn)||Ka(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,a=zt(t.silentFallbackWarn)||Ka(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,n=zt(t.fallbackRoot)?t.fallbackRoot:!0,o=!!t.formatFallbackMessages,u=Nt(t.modifiers)?t.modifiers:{},c=t.pluralizationRules,f=Cr(t.postTranslation)?t.postTranslation:void 0,h=dt(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,p=!!t.escapeParameterHtml,g=zt(t.sync)?t.sync:!0;let m=t.messages;if(Nt(t.sharedMessages)){const b=t.sharedMessages;m=Object.keys(b).reduce((w,O)=>{const M=w[O]||(w[O]={});return On(M,b[O]),w},m||{})}const{__i18n:T,__root:x,__injectWithOption:v}=t,y=t.datetimeFormats,R=t.numberFormats,A=t.flatJson,k=t.translateExistCompatible;return{locale:e,fallbackLocale:r,messages:m,flatJson:A,datetimeFormats:y,numberFormats:R,missing:i,missingWarn:s,fallbackWarn:a,fallbackRoot:n,fallbackFormat:o,modifiers:u,pluralRules:c,postTranslation:f,warnHtmlMessage:h,escapeParameter:p,messageResolver:t.messageResolver,inheritLocale:g,translateExistCompatible:k,__i18n:T,__root:x,__injectWithOption:v}}function Ky(t={},e){{const r=cA(hle(t)),{__extender:i}=t,s={id:r.id,get locale(){return r.locale.value},set locale(a){r.locale.value=a},get fallbackLocale(){return r.fallbackLocale.value},set fallbackLocale(a){r.fallbackLocale.value=a},get messages(){return r.messages.value},get datetimeFormats(){return r.datetimeFormats.value},get numberFormats(){return r.numberFormats.value},get availableLocales(){return r.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(a){},get missing(){return r.getMissingHandler()},set missing(a){r.setMissingHandler(a)},get silentTranslationWarn(){return zt(r.missingWarn)?!r.missingWarn:r.missingWarn},set silentTranslationWarn(a){r.missingWarn=zt(a)?!a:a},get silentFallbackWarn(){return zt(r.fallbackWarn)?!r.fallbackWarn:r.fallbackWarn},set silentFallbackWarn(a){r.fallbackWarn=zt(a)?!a:a},get modifiers(){return r.modifiers},get formatFallbackMessages(){return r.fallbackFormat},set formatFallbackMessages(a){r.fallbackFormat=a},get postTranslation(){return r.getPostTranslationHandler()},set postTranslation(a){r.setPostTranslationHandler(a)},get sync(){return r.inheritLocale},set sync(a){r.inheritLocale=a},get warnHtmlInMessage(){return r.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(a){r.warnHtmlMessage=a!=="off"},get escapeParameterHtml(){return r.escapeParameter},set escapeParameterHtml(a){r.escapeParameter=a},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(a){},get pluralizationRules(){return r.pluralRules||{}},__composer:r,t(...a){const[n,o,u]=a,c={};let f=null,h=null;if(!dt(n))throw pn(on.INVALID_ARGUMENT);const p=n;return dt(o)?c.locale=o:Dr(o)?f=o:Nt(o)&&(h=o),Dr(u)?f=u:Nt(u)&&(h=u),Reflect.apply(r.t,r,[p,f||h||{},c])},rt(...a){return Reflect.apply(r.rt,r,[...a])},tc(...a){const[n,o,u]=a,c={plural:1};let f=null,h=null;if(!dt(n))throw pn(on.INVALID_ARGUMENT);const p=n;return dt(o)?c.locale=o:tn(o)?c.plural=o:Dr(o)?f=o:Nt(o)&&(h=o),dt(u)?c.locale=u:Dr(u)?f=u:Nt(u)&&(h=u),Reflect.apply(r.t,r,[p,f||h||{},c])},te(a,n){return r.te(a,n)},tm(a){return r.tm(a)},getLocaleMessage(a){return r.getLocaleMessage(a)},setLocaleMessage(a,n){r.setLocaleMessage(a,n)},mergeLocaleMessage(a,n){r.mergeLocaleMessage(a,n)},d(...a){return Reflect.apply(r.d,r,[...a])},getDateTimeFormat(a){return r.getDateTimeFormat(a)},setDateTimeFormat(a,n){r.setDateTimeFormat(a,n)},mergeDateTimeFormat(a,n){r.mergeDateTimeFormat(a,n)},n(...a){return Reflect.apply(r.n,r,[...a])},getNumberFormat(a){return r.getNumberFormat(a)},setNumberFormat(a,n){r.setNumberFormat(a,n)},mergeNumberFormat(a,n){r.mergeNumberFormat(a,n)},getChoiceIndex(a,n){return-1}};return s.__extender=i,s}}const fA={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function dle({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((i,s)=>[...i,...s.type===Wt?s.children:[s]],[]):e.reduce((r,i)=>{const s=t[i];return s&&(r[i]=s()),r},xr())}function b8(t){return Wt}const ple=or({name:"i18n-t",props:On({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>tn(t)||!isNaN(t)}},fA),setup(t,e){const{slots:r,attrs:i}=e,s=t.i18n||hA({useScope:t.scope,__useComponent:!0});return()=>{const a=Object.keys(r).filter(h=>h!=="_"),n=xr();t.locale&&(n.locale=t.locale),t.plural!==void 0&&(n.plural=dt(t.plural)?+t.plural:t.plural);const o=dle(e,a),u=s[My](t.keypath,o,n),c=On(xr(),i),f=dt(t.tag)||ur(t.tag)?t.tag:b8();return lT(f,c,u)}}}),wD=ple;function gle(t){return Dr(t)&&!dt(t[0])}function x8(t,e,r,i){const{slots:s,attrs:a}=e;return()=>{const n={part:!0};let o=xr();t.locale&&(n.locale=t.locale),dt(t.format)?n.key=t.format:ur(t.format)&&(dt(t.format.key)&&(n.key=t.format.key),o=Object.keys(t.format).reduce((p,g)=>r.includes(g)?On(xr(),p,{[g]:t.format[g]}):p,xr()));const u=i(t.value,n,o);let c=[n.key];Dr(u)?c=u.map((p,g)=>{const m=s[p.type],T=m?m({[p.type]:p.value,index:g,parts:u}):[p.value];return gle(T)&&(T[0].key=`${p.type}-${g}`),T}):dt(u)&&(c=[u]);const f=On(xr(),a),h=dt(t.tag)||ur(t.tag)?t.tag:b8();return lT(h,f,c)}}const mle=or({name:"i18n-n",props:On({value:{type:Number,required:!0},format:{type:[String,Object]}},fA),setup(t,e){const r=t.i18n||hA({useScope:t.scope,__useComponent:!0});return x8(t,e,d8,(...i)=>r[Fy](...i))}}),LD=mle,_le=or({name:"i18n-d",props:On({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},fA),setup(t,e){const r=t.i18n||hA({useScope:t.scope,__useComponent:!0});return x8(t,e,h8,(...i)=>r[Ny](...i))}}),ID=_le;function ble(t,e){const r=t;if(t.mode==="composition")return r.__getInstance(e)||t.global;{const i=r.__getInstance(e);return i!=null?i.__composer:t.global.__composer}}function xle(t){const e=n=>{const{instance:o,modifiers:u,value:c}=n;if(!o||!o.$)throw pn(on.UNEXPECTED_ERROR);const f=ble(t,o.$),h=BD(c);return[Reflect.apply(f.t,f,[...PD(h)]),f]};return{created:(n,o)=>{const[u,c]=e(o);hd&&t.global===c&&(n.__i18nWatcher=Do(c.locale,()=>{o.instance&&o.instance.$forceUpdate()})),n.__composer=c,n.textContent=u},unmounted:n=>{hd&&n.__i18nWatcher&&(n.__i18nWatcher(),n.__i18nWatcher=void 0,delete n.__i18nWatcher),n.__composer&&(n.__composer=void 0,delete n.__composer)},beforeUpdate:(n,{value:o})=>{if(n.__composer){const u=n.__composer,c=BD(o);n.textContent=Reflect.apply(u.t,u,[...PD(c)])}},getSSRProps:n=>{const[o]=e(n);return{textContent:o}}}}function BD(t){if(dt(t))return{path:t};if(Nt(t)){if(!("path"in t))throw pn(on.REQUIRED_VALUE,"path");return t}else throw pn(on.INVALID_VALUE)}function PD(t){const{path:e,locale:r,args:i,choice:s,plural:a}=t,n={},o=i||{};return dt(r)&&(n.locale=r),tn(s)&&(n.plural=s),tn(a)&&(n.plural=a),[e,o,n]}function vle(t,e,...r){const i=Nt(r[0])?r[0]:{},s=!!i.useI18nComponentName;(zt(i.globalInstall)?i.globalInstall:!0)&&([s?"i18n":wD.name,"I18nT"].forEach(n=>t.component(n,wD)),[LD.name,"I18nN"].forEach(n=>t.component(n,LD)),[ID.name,"I18nD"].forEach(n=>t.component(n,ID))),t.directive("t",xle(e))}function Ele(t,e,r){return{beforeCreate(){const i=No();if(!i)throw pn(on.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const a=s.i18n;if(s.__i18n&&(a.__i18n=s.__i18n),a.__root=e,this===this.$root)this.$i18n=OD(t,a);else{a.__injectWithOption=!0,a.__extender=r.__vueI18nExtend,this.$i18n=Ky(a);const n=this.$i18n;n.__extender&&(n.__disposer=n.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=OD(t,s);else{this.$i18n=Ky({__i18n:s.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:e});const a=this.$i18n;a.__extender&&(a.__disposer=a.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&_8(e,s,s),this.$t=(...a)=>this.$i18n.t(...a),this.$rt=(...a)=>this.$i18n.rt(...a),this.$tc=(...a)=>this.$i18n.tc(...a),this.$te=(a,n)=>this.$i18n.te(a,n),this.$d=(...a)=>this.$i18n.d(...a),this.$n=(...a)=>this.$i18n.n(...a),this.$tm=a=>this.$i18n.tm(a),r.__setInstance(i,this.$i18n)},mounted(){},unmounted(){const i=No();if(!i)throw pn(on.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),r.__deleteInstance(i),delete this.$i18n}}}function OD(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[g8](e.pluralizationRules||t.pluralizationRules);const r=mp(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(r).forEach(i=>t.mergeLocaleMessage(i,r[i])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(i=>t.mergeDateTimeFormat(i,e.datetimeFormats[i])),e.numberFormats&&Object.keys(e.numberFormats).forEach(i=>t.mergeNumberFormat(i,e.numberFormats[i])),t}const yle=Ya("global-vue-i18n");function Tle(t={},e){const r=zt(t.legacy)?t.legacy:!0,i=zt(t.globalInjection)?t.globalInjection:!0,s=r?!!t.allowComposition:!0,a=new Map,[n,o]=Ale(t,r),u=Ya("");function c(p){return a.get(p)||null}function f(p,g){a.set(p,g)}function h(p){a.delete(p)}{const p={get mode(){return r?"legacy":"composition"},get allowComposition(){return s},async install(g,...m){if(g.__VUE_I18N_SYMBOL__=u,g.provide(g.__VUE_I18N_SYMBOL__,p),Nt(m[0])){const v=m[0];p.__composerExtend=v.__composerExtend,p.__vueI18nExtend=v.__vueI18nExtend}let T=null;!r&&i&&(T=Ole(g,p.global)),vle(g,p,...m),r&&g.mixin(Ele(o,o.__composer,p));const x=g.unmount;g.unmount=()=>{T&&T(),p.dispose(),x()}},get global(){return o},dispose(){n.stop()},__instances:a,__getInstance:c,__setInstance:f,__deleteInstance:h};return p}}function hA(t={}){const e=No();if(e==null)throw pn(on.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw pn(on.NOT_INSTALLED);const r=Sle(e),i=Cle(r),s=cle(e),a=Rle(t,s);if(r.mode==="legacy"&&!t.__useComponent){if(!r.allowComposition)throw pn(on.NOT_AVAILABLE_IN_LEGACY_MODE);return Ble(e,a,i,t)}if(a==="global")return _8(i,t,s),i;if(a==="parent"){let u=wle(r,e,t.__useComponent);return u==null&&(u=i),u}const n=r;let o=n.__getInstance(e);if(o==null){const u=On({},t);"__i18n"in s&&(u.__i18n=s.__i18n),i&&(u.__root=i),o=cA(u),n.__composerExtend&&(o[Gy]=n.__composerExtend(o)),Ile(n,e,o),n.__setInstance(e,o)}return o}function Ale(t,e,r){const i=JW();{const s=e?i.run(()=>Ky(t)):i.run(()=>cA(t));if(s==null)throw pn(on.UNEXPECTED_ERROR);return[i,s]}}function Sle(t){{const e=ia(t.isCE?yle:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw pn(t.isCE?on.NOT_INSTALLED_WITH_PROVIDE:on.UNEXPECTED_ERROR);return e}}function Rle(t,e){return dp(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function Cle(t){return t.mode==="composition"?t.global:t.global.__composer}function wle(t,e,r=!1){let i=null;const s=e.root;let a=Lle(e,r);for(;a!=null;){const n=t;if(t.mode==="composition")i=n.__getInstance(a);else{const o=n.__getInstance(a);o!=null&&(i=o.__composer,r&&i&&!i[m8]&&(i=null))}if(i!=null||s===a)break;a=a.parent}return i}function Lle(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function Ile(t,e,r){nT(()=>{},e),iT(()=>{const i=r;t.__deleteInstance(e);const s=i[Gy];s&&(s(),delete i[Gy])},e)}function Ble(t,e,r,i={}){const s=e==="local",a=oM(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw pn(on.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const n=zt(i.inheritLocale)?i.inheritLocale:!dt(i.locale),o=Lo(!s||n?r.locale.value:dt(i.locale)?i.locale:Zu),u=Lo(!s||n?r.fallbackLocale.value:dt(i.fallbackLocale)||Dr(i.fallbackLocale)||Nt(i.fallbackLocale)||i.fallbackLocale===!1?i.fallbackLocale:o.value),c=Lo(mp(o.value,i)),f=Lo(Nt(i.datetimeFormats)?i.datetimeFormats:{[o.value]:{}}),h=Lo(Nt(i.numberFormats)?i.numberFormats:{[o.value]:{}}),p=s?r.missingWarn:zt(i.missingWarn)||Ka(i.missingWarn)?i.missingWarn:!0,g=s?r.fallbackWarn:zt(i.fallbackWarn)||Ka(i.fallbackWarn)?i.fallbackWarn:!0,m=s?r.fallbackRoot:zt(i.fallbackRoot)?i.fallbackRoot:!0,T=!!i.fallbackFormat,x=Cr(i.missing)?i.missing:null,v=Cr(i.postTranslation)?i.postTranslation:null,y=s?r.warnHtmlMessage:zt(i.warnHtmlMessage)?i.warnHtmlMessage:!0,R=!!i.escapeParameter,A=s?r.modifiers:Nt(i.modifiers)?i.modifiers:{},k=i.pluralRules||s&&r.pluralRules;function b(){return[o.value,u.value,c.value,f.value,h.value]}const C=vi({get:()=>a.value?a.value.locale.value:o.value,set:oe=>{a.value&&(a.value.locale.value=oe),o.value=oe}}),w=vi({get:()=>a.value?a.value.fallbackLocale.value:u.value,set:oe=>{a.value&&(a.value.fallbackLocale.value=oe),u.value=oe}}),O=vi(()=>a.value?a.value.messages.value:c.value),M=vi(()=>f.value),$=vi(()=>h.value);function G(){return a.value?a.value.getPostTranslationHandler():v}function Z(oe){a.value&&a.value.setPostTranslationHandler(oe)}function ce(){return a.value?a.value.getMissingHandler():x}function Y(oe){a.value&&a.value.setMissingHandler(oe)}function J(oe){return b(),oe()}function ie(...oe){return a.value?J(()=>Reflect.apply(a.value.t,null,[...oe])):J(()=>"")}function le(...oe){return a.value?Reflect.apply(a.value.rt,null,[...oe]):""}function Te(...oe){return a.value?J(()=>Reflect.apply(a.value.d,null,[...oe])):J(()=>"")}function Me(...oe){return a.value?J(()=>Reflect.apply(a.value.n,null,[...oe])):J(()=>"")}function Ee(oe){return a.value?a.value.tm(oe):{}}function se(oe,be){return a.value?a.value.te(oe,be):!1}function me(oe){return a.value?a.value.getLocaleMessage(oe):{}}function Xe(oe,be){a.value&&(a.value.setLocaleMessage(oe,be),c.value[oe]=be)}function nt(oe,be){a.value&&a.value.mergeLocaleMessage(oe,be)}function ot(oe){return a.value?a.value.getDateTimeFormat(oe):{}}function pt(oe,be){a.value&&(a.value.setDateTimeFormat(oe,be),f.value[oe]=be)}function qe(oe,be){a.value&&a.value.mergeDateTimeFormat(oe,be)}function Ye(oe){return a.value?a.value.getNumberFormat(oe):{}}function at(oe,be){a.value&&(a.value.setNumberFormat(oe,be),h.value[oe]=be)}function lt(oe,be){a.value&&a.value.mergeNumberFormat(oe,be)}const j={get id(){return a.value?a.value.id:-1},locale:C,fallbackLocale:w,messages:O,datetimeFormats:M,numberFormats:$,get inheritLocale(){return a.value?a.value.inheritLocale:n},set inheritLocale(oe){a.value&&(a.value.inheritLocale=oe)},get availableLocales(){return a.value?a.value.availableLocales:Object.keys(c.value)},get modifiers(){return a.value?a.value.modifiers:A},get pluralRules(){return a.value?a.value.pluralRules:k},get isGlobal(){return a.value?a.value.isGlobal:!1},get missingWarn(){return a.value?a.value.missingWarn:p},set missingWarn(oe){a.value&&(a.value.missingWarn=oe)},get fallbackWarn(){return a.value?a.value.fallbackWarn:g},set fallbackWarn(oe){a.value&&(a.value.missingWarn=oe)},get fallbackRoot(){return a.value?a.value.fallbackRoot:m},set fallbackRoot(oe){a.value&&(a.value.fallbackRoot=oe)},get fallbackFormat(){return a.value?a.value.fallbackFormat:T},set fallbackFormat(oe){a.value&&(a.value.fallbackFormat=oe)},get warnHtmlMessage(){return a.value?a.value.warnHtmlMessage:y},set warnHtmlMessage(oe){a.value&&(a.value.warnHtmlMessage=oe)},get escapeParameter(){return a.value?a.value.escapeParameter:R},set escapeParameter(oe){a.value&&(a.value.escapeParameter=oe)},t:ie,getPostTranslationHandler:G,setPostTranslationHandler:Z,getMissingHandler:ce,setMissingHandler:Y,rt:le,d:Te,n:Me,tm:Ee,te:se,getLocaleMessage:me,setLocaleMessage:Xe,mergeLocaleMessage:nt,getDateTimeFormat:ot,setDateTimeFormat:pt,mergeDateTimeFormat:qe,getNumberFormat:Ye,setNumberFormat:at,mergeNumberFormat:lt};function ue(oe){oe.locale.value=o.value,oe.fallbackLocale.value=u.value,Object.keys(c.value).forEach(be=>{oe.mergeLocaleMessage(be,c.value[be])}),Object.keys(f.value).forEach(be=>{oe.mergeDateTimeFormat(be,f.value[be])}),Object.keys(h.value).forEach(be=>{oe.mergeNumberFormat(be,h.value[be])}),oe.escapeParameter=R,oe.fallbackFormat=T,oe.fallbackRoot=m,oe.fallbackWarn=g,oe.missingWarn=p,oe.warnHtmlMessage=y}return TM(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw pn(on.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const oe=a.value=t.proxy.$i18n.__composer;e==="global"?(o.value=oe.locale.value,u.value=oe.fallbackLocale.value,c.value=oe.messages.value,f.value=oe.datetimeFormats.value,h.value=oe.numberFormats.value):s&&ue(oe)}),j}const Ple=["locale","fallbackLocale","availableLocales"],DD=["t","rt","d","n","tm","te"];function Ole(t,e){const r=Object.create(null);return Ple.forEach(s=>{const a=Object.getOwnPropertyDescriptor(e,s);if(!a)throw pn(on.UNEXPECTED_ERROR);const n=Rn(a.value)?{get(){return a.value.value},set(o){a.value.value=o}}:{get(){return a.get&&a.get()}};Object.defineProperty(r,s,n)}),t.config.globalProperties.$i18n=r,DD.forEach(s=>{const a=Object.getOwnPropertyDescriptor(e,s);if(!a||!a.value)throw pn(on.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,a)}),()=>{delete t.config.globalProperties.$i18n,DD.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}ule();__INTLIFY_JIT_COMPILATION__?pD(rle):pD(tle);Wue(Pue);jue(n8);function kD(t,e){if(t==="title"){const s=document.title;return document.title=e,s}const r=document.querySelector(`meta[name="${t}"]`);if(r){const s=r.content;return r.content=e,s}const i=document.createElement("meta");i.name=t,i.content=e,document.head.append(i)}const Dle={install:t=>{const e={},r=s=>{Object.keys(s).forEach(a=>{const n=kD(a,s[a]);n&&!e[a]&&(e[a]=n)})},i=s=>{Object.keys(s||e).forEach(n=>{e[n]&&(kD(n,e[n]),delete e[n])})};t.config.globalProperties.$setMeta=r,t.config.globalProperties.$resetMeta=i}},kle={install:(t,e={})=>{t.config.globalProperties.$renderers=e}},Ule=or({data(){return{isVisible:!1,options:null,timeout:null}},beforeMount(){this.$registerToast(this)},methods:{show(t){this.isVisible=!0,this.options=t,this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null),t.duration&&(this.timeout=window.setTimeout(()=>{this.hide()},t.duration))},hide(){this.isVisible=!1,this.options=null,this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}}}),Mle="data:image/svg+xml,%3csvg%20width='22'%20height='22'%20viewBox='0%200%2022%2022'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M20%202.00006L2%2020'%20stroke='%230C0C0C'%20stroke-width='3'%3e%3c/path%3e%3cpath%20d='M2%202.00001L20%2020'%20stroke='%230C0C0C'%20stroke-width='3'%20/%3e%3c/svg%3e",Nle={class:"constrain"},Fle={class:"text"},Gle={class:"subtext"},Kle={key:0,class:"warning"},Vle={key:1,class:"spinner"},$le={key:2,class:"pause"};function Hle(t,e,r,i,s,a){return Pe(),$n(ZM,{name:"toast-transition"},{default:Kd(()=>[t.isVisible&&t.options?(Pe(),Ge("div",{key:0,class:kt([t.options.type,"jbg toast"])},[Se("div",Nle,[Se("img",{class:"close",alt:"close",src:Mle,onClick:e[0]||(e[0]=(...n)=>t.hide&&t.hide(...n)),onKeydown:e[1]||(e[1]=cT((...n)=>t.hide&&t.hide(...n),["esc"]))},null,32),Se("p",Fle,xt(t.options.text),1),Se("p",Gle,xt(t.options.subtext),1),t.options.warning?(Pe(),Ge("p",Kle,xt(t.options.warning),1)):Ot("",!0),t.options.type==="reconnecting"||t.options.type==="paused"?(Pe(),Ge("div",Vle)):Ot("",!0),t.options.type==="paused"?(Pe(),Ge("div",$le)):Ot("",!0)])],2)):Ot("",!0)]),_:1})}const qle=er(Ule,[["render",Hle],["__scopeId","data-v-6d2a2aa3"]]),Xle={install:t=>{if(t.config.globalProperties.$showToast)return;let e;const r=a=>{if(!e)throw new Error("No ToastComponent is registered to show");e.show(a)},i=()=>{if(!e)throw new Error("No ToastComponent is registered to hide");e.hide()},s=a=>{e=a};t.component("Toast",qle),t.config.globalProperties.$showToast=r,t.config.globalProperties.$hideToast=i,t.config.globalProperties.$registerToast=s}};async function UD(t,e){const r=`https://s3.amazonaws.com/jbg-blobcast-artifacts/${t}/${e}/data.json.gz`;return m4.hydrateFromUrl(r)}function zle(t){const e=atob(t);return JSON.parse(e)}async function Wle(){const t=Date.now(),e=5e3;return new Promise((r,i)=>{const s=()=>{if(window.incomingData){r(window.incomingData);return}if(Date.now()>t+e){i(new Error("Timed out waiting for incomingData to exist"));return}window.requestAnimationFrame(s)};s()})}function jle(t){if(!(t!=null&&t.blob))return;const e=URL.createObjectURL(t.blob),r=document.createElement("a");r.href=e,r.download="image.png",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}function Yle(t){if(!(t!=null&&t.blob))return;const e=URL.createObjectURL(t.blob);window.open(e,"_blank")}const Zle=async(t,e,r)=>{if(!e)throw new Error(`No renderers are available for app ${t.data.gameId}`);const i=e[t.data.renderer];if(!i)throw new Error(`No renderer found with type ${t.data.renderer}`);const s=t.parts[1];let a;if(s==="incoming"?a=await Wle():s==="payload"?a=zle(t.params.payload):s==="artifact"?a=await UD(t.data.gameId,t.data.artifactId):a=await UD(t.data.gameId,t.data.artifactId),!a)throw new Error("No data");const n=new i({data:a,params:t.params,messages:r});await n.ready(),window.tv.renderData=n.renderData,t.params.download&&jle(n.renderData),t.params.open&&Yle(n.renderData),delete window.incomingData},Qle=or({props:{options:{type:Object,required:!0},mainView:{type:Object,required:!0}},setup(){return{fatalError:ia(ol.fatal.error)}},data(){return{isKicked:!1}},computed:{ecast(){return this.$ecast},ecastValues(){return this.$ecastValues?this.$ecastValues:null},classes(){return[`locale-${this.$i18n.locale}`]},shouldShowFatal(){var t;return((t=this.fatalError)==null?void 0:t.hasCrashed)??!1}},beforeMount(){this.$ecastManager.on("didReconnect",this.onDidReconnect),this.$ecastManager.on("isReconnecting",this.onIsReconnecting),this.$ecastManager.on("roomDidExit",()=>{this.onRoomDidExit()}),this.$ecastManager.on("roomDidMigrate",t=>{this.onRoomDidMigrate(t)}),this.$ecastManager.on("didDisconnect",()=>{this.onDidDisconnect()}),this.$ecastManager.on("wasKicked",()=>{this.onWasKicked()}),this.$ecastManager.on("hostDidDisconnect",this.onHostDidDisconnect),this.$ecastManager.on("hostDidReconnect",this.onHostDidReconnect),this.$ecastManager.on("hostDidPause",this.onHostDidPause),this.$ecastManager.on("hostDidUnpause",this.onHostDidUnpause)},methods:{onDidReconnect(){this.$showToast({type:"generic",text:this.$t("TOAST.RECONNECTED.TEXT"),subtext:this.$t("TOAST.RECONNECTED.SUBTEXT"),duration:1500})},onIsReconnecting(t){this.$showToast({type:"reconnecting",text:this.$t("TOAST.RECONNECTING.CONTROLLER.TEXT"),subtext:this.$t("TOAST.RECONNECTING.CONTROLLER.SUBTEXT",{attempt:t})})},async onRoomDidExit(){this.$hideToast(),await this.$showModal("Error",{image:"moon",text:this.$t("ERROR.ROOM_DISCONNECTED"),subtext:this.$t("ERROR.ROOM_DESTROYED"),dismissText:this.$t("ACTION.OK")}),window.location.reload()},async onRoomDidMigrate(t){this.$hideToast();const r=await new fn.APIClient({host:t.host,scheme:"https"}).getRoom({code:t.code}),i={host:t.host,code:t.code,password:t.password,name:this.$ecast.name,role:this.$ecast.role,userId:this.$ecast.userId,debug:"false"};this.$ecast.twitchToken&&(i.twitchToken=this.$ecast.twitchToken);const s=new fn.WSClient(i);let a;try{a=await s.connect()}catch(o){console.error(`[room/migrate] Failed to migrate: ${o}`),await this.$showModal("Error",{image:"poop",text:"Failed to migrate room",subtext:"Try again later, I guess?",dismissText:this.$t("ACTION.OK")});return}this.$ecast.disconnect(),this.$setupEcast({wsClient:s,room:r,welcome:a}),yn.set("name",this.$ecast.name),yn.set("code",this.$ecast.code);const n=yn.get("branch");yn.set("reconnect",`${a.id}:${this.$ecast.role}:${a.secret}:${n}`)},async onDidDisconnect(){this.$hideToast(),await this.$showModal("Error",{image:"moon",text:this.$t("ERROR.ROOM_DISCONNECTED"),dismissText:this.$t("ACTION.OK")}),window.location.reload()},async onWasKicked(){this.$hideToast(),await this.$showModal("Error",{image:"tear",text:this.$t("ERROR.ROOM_DISCONNECTED"),subtext:this.$t("ERROR.PLAYER_KICKED"),dismissText:this.$t("ACTION.OK")}),window.location.reload()},onHostDidDisconnect(){this.$showToast({type:"reconnecting",text:this.$t("TOAST.RECONNECTING.GAME.TEXT"),subtext:this.$t("TOAST.RECONNECTING.GAME.SUBTEXT")})},onHostDidReconnect(){this.$showToast({type:"generic",text:this.$t("TOAST.RECONNECTED.TEXT"),subtext:this.$t("TOAST.RECONNECTED.SUBTEXT"),duration:1500})},onHostDidPause(){this.$showToast({type:"paused",text:this.$t("TOAST.PAUSED.TEXT"),subtext:this.$t("TOAST.PAUSED.SUBTEXT")})},onHostDidUnpause(){this.$hideToast()}}});function Jle(t,e,r,i,s,a){const n=wr("Fatal"),o=wr("TextDescriptions"),u=wr("Debug"),c=wr("Modal"),f=wr("Toast");return t.shouldShowFatal?(Pe(),$n(n,{key:0})):(Pe(),Ge(Wt,{key:1},[Zt(o),(Pe(),$n(Hd(t.mainView),Zc({id:"game",class:t.classes},t.ecastValues),null,16,["class"])),Zt(u),Zt(c),Zt(f)],64))}const MD=er(Qle,[["render",Jle]]),ece=or({components:{Gallery:uN},props:{options:{type:Object,required:!0},galleryView:{type:Object,required:!0}},setup(){return{fatalError:ia(ol.fatal.error)}},computed:{classes(){return[`locale-${this.$i18n.locale}`]},shouldShowFatal(){var t;return((t=this.fatalError)==null?void 0:t.hasCrashed)??!1},categoryId(){var t,e;return((e=(t=this.options.match)==null?void 0:t.data)==null?void 0:e.categoryId)??""},artifactId(){var t,e;return((e=(t=this.options.match)==null?void 0:t.data)==null?void 0:e.artifactId)??""},itemId(){var t,e;return((e=(t=this.options.match)==null?void 0:t.data)==null?void 0:e.itemId)??""}}});function tce(t,e,r,i,s,a){const n=wr("Fatal"),o=wr("Gallery"),u=wr("Modal"),c=wr("Toast");return t.shouldShowFatal?(Pe(),$n(n,{key:0})):(Pe(),Ge(Wt,{key:1},[Zt(o,{view:t.galleryView,"artifact-id":t.artifactId,"category-id":t.categoryId,"item-id":t.itemId,context:"standalone"},null,8,["view","artifact-id","category-id","item-id"]),Zt(u),Zt(c)],64))}const ND=er(ece,[["render",tce]]);function rce(t,e,r){MD.name=e.app;const i=fT(MD,{options:e,mainView:t.MainView});if(i.use(kie,{replayer:e.replayer,client:r,room:e.room}),i.use(Jie,{wsClient:r,room:e.room,welcome:e.welcome}),i.use(Aae),i.use(Rae),t.plugins){const s=a=>a.plugin===void 0;t.plugins.forEach(a=>{if(s(a)){i.use(a);return}i.use(a.plugin,...a.options)})}return i}function nce(t,e){return ND.name=e.app,fT(ND,{options:e,galleryView:t.GalleryView})}function ice(t){return t!=null&&t.parts?t.parts[0]==="gallery"?"gallery":t.parts[0]==="render"?"render":"game":"game"}const sce=t=>{let e;window.tv.register({connect:(r,i)=>(e=i?i.setClient(fn.WSClient,r):new fn.WSClient(r),e.connect()),mount:r=>{var o,u;const i=ice(r.match);if(i==="render"){Zle(r.match,t.renderers,t.messages);return}let s=i==="gallery"?nce(t,r):rce(t,r,e),a;(o=r.room)!=null&&o.locale&&(a=r.room.locale),(u=r.match)!=null&&u.params.locale&&(a=r.match.params.locale),Uu.set(a);const n=Tle({fallbackLocale:"en",locale:Uu.locale,messages:Uu.mergeMessages(lte,t.messages??{})});return s.use(Mne),s.use(kle,t.renderers),s.use(bae),s.use(Use),s.use(n),s.use(Wse,{i18n:n}),s.use(Sae),s.use(Xle),s.use(Dle),s.mount("#app"),()=>{s.unmount(),s=null}},info:r=>({tag:r.app,version:r.version,type:r.type,wrapper:"vue",branch:r.branch})})},ace={ARE_YOU_SURE:"Are you sure?",CHOOSE:"CHOOSE YOUR COOKIE",CHALLENGE:"CHALLENGE",FILL_IN_BLANK:"Fill In The Blank",HURRY:"HURRY UP!",KEEP_GOING:"Keep Decorating",NAME:"Name Your Cookie",READY:"I'm Ready!",RENAME:"Rename Your Cookie",SENDING:"Sending...",SUBMIT_AVATAR:"Submit Avatar",SUBMIT:"Submit",WAIT:"Wait! What should we name it?",WARNING:"Once you start naming your cookie you can't return to decorating.",YOUR_COOKIE:"your cookie"},oce={SELECT:"Select your favorite",THANK_YOU:"Thank you for voting"},uce={CHECK_NAME:"votes {count}",NO_VOTES:"votes {count}"},lce={SCORE_LIKE:{CHECK_NAME:"like {count}",DESCRIPTION:'Earn bonuses if your fellow players give you a "like"!',TIP_NAME:"Likes[br][/br]Bonus",TIP_SCORE:"+25 each"},SCORE_KUDOS:{CHECK_NAME:"kudos {count}",DESCRIPTION:`If your opponent in a head-to-head gives YOU a "like," you'll get a [callout]Kudos Bonus![/callout] Artistry transcends competition!`,TIP_NAME:"Kudos[br][/br]Bonus",TIP_SCORE:"+50 each"},SCORE_GOOD_SPORT:{CHECK_NAME:"good sport",DESCRIPTION:"Did you give kudos to your fellow decorator in your head-to-head? You get a [callout]Good Sport Bonus![/callout] How nice!",TIP_NAME:"Good Sport Bonus",TIP_SCORE:"+10"},SCORE_WINNER:{CHECK_NAME:"most votes",DESCRIPTION:"Earning the most votes in a head-to-head matchup will earn you a [callout]Most Votes Bonus[/callout]!",TIP_NAME:"Most Votes Bonus",TIP_SCORE:"+150"},SCORE_SWEEP:{CHECK_NAME:"unomimous",DESCRIPTION:"Did you sweep your head-to-head matchup? Congrats! You've earned the coveted [callout]UNOMINOUS Bonus[/callout]!",TIP_NAME:"UNOMIMOUS Bonus",TIP_SCORE:"+250"},SCORE_TIME:{CHECK_NAME:"speedbaker",DESCRIPTION:"Get bonuses for finishing your cookie early! Finish in under 90 seconds? You're a Speedbaker! Finish in under 60 seconds? You're a Super-Speedbaker, with a 2x bonus!",TIP_NAME:"Speedbaker[br][/br]Bonus",TIP_SCORE:"+25"},SCORE_DOUBLE_TIME:{CHECK_NAME:"speedbaker 2x",DESCRIPTION:"",TIP_NAME:"",TIP_SCORE:""},SCORE_DUO:{CHECK_NAME:"baker's duo",DESCRIPTION:"Stuck in a 3-cookie matchup? You get a [callout]Baker's Duo Bonus[/callout] for the hassle! <3",TIP_NAME:"Baker's Duo Bonus",TIP_SCORE:"+50"},SCORE_AUDIENCE:{CHECK_NAME:"audience",DESCRIPTION:"If your cookie is the most popular with the audience, you'll be awarded the [callout]Audience Bonus[/callout].",TIP_NAME:"Audience[br][/br]Bonus",TIP_SCORE:"+100"},SCORE_HARD_SHAPE:{CHECK_NAME:"challenge",DESCRIPTION:'Use a cookie shaped marked as "Challenge" and get a +50 bonus!',TIP_NAME:"Challenge Shape Bonus",TIP_SCORE:"+50"},SCORE_TODAY:{CHECK_NAME:"today",DESCRIPTION:"",TIP_NAME:"Today[br][/br]Bonus",TIP_SCORE:"+50"},SCORE_EGG:{CHECK_NAME:"other stuff"},SCORE_UH_OH_STINKY:{CHECK_NAME:" Uh Oh, Stinky!"},SCORE_POOR_BABY:{CHECK_NAME:" Poor Baby!"},SCORE_YOU_LOSE:{CHECK_NAME:" You Lose!"},SCORE_THANK:{CHECK_NAME:" thank"},SCORE_HAHA_YEAH:{CHECK_NAME:" haha.. yeah.. wow.. "}},cce={BUY:"BUY A MUG",HEADER:"TODAY'S COOKIES",INFO_0:"Design position in preview image may differ slightly from game. Purchased item will more closely reflect in-game garment. Lines may be hard to see if their color and the item's color are similar.",INFO_1:"Offensive material will NOT be printed and the order will be canceled and refunded.",INFO_2:"Please review our [link]REFUND POLICY[/link]. You are responsible for inputting the correct shipping information. Items shipped to an incorrect address cannot be refunded.",ITEM_NAME:"Cookie Haus Custom Mug",QUANTITY:"Quantity:",SHARE_TEXT:"Check out this cookie I decorated in Cookie Haus.",SHOP_ACTION:"Add to cart",SHOP_TITLE:"Add item to cart?"},fce={DECORATE:ace,VOTING:oce,VOTES:uce,BONUSES:lce,GALLERY:cce},hce={en:fce},dce="./assets/BeuXmved.png",pce="./assets/Dgoa1if9.png",gce="./assets/9HpXNMPM.png",mce="./assets/BbqCFaBA.png",_ce="./assets/DZJeP4Zx.png",bce="./assets/CV_SNZFh.png",xce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAylpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAzIDc5Ljk2OTBhODdmYywgMjAyNS8wMy8wNi0yMDo1MDoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI2LjEwIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlBQjI3NzQ2OTU4MjExRjA5NURCOEJBOTFFMDMwQTg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlBQjI3NzQ3OTU4MjExRjA5NURCOEJBOTFFMDMwQTg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUFCMjc3NDQ5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUFCMjc3NDU5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7LXlkWAAAHmUlEQVR42uydTUhVaRyHXx2zRUTRRij6gog+kCCEyCIIiVoYhTlYkC1s0UKIwEUQxDAEQYsgAhctcpFBxqQUuShCgigjiCCkDyLoC4M2YkQLi5k7v9v9NzCTx8m695z3fc/zwLMqKN///+l27se5VYVCwQHA5FRzBAAEAkAgAAQCQCAABAJAIAAEAkAgAAQCAAQCQCAABAJAIAAEAkAgAAQCQCAABAJAIABAIAAEAkAgAAQCQCAABAJAIAAEAkAgAEAgAAQCQCAABAJAIAAEAkAgAAQCQCAABAIABAJAIAAEAkAgAAQC4DE1HEEqzJPL5TK5RC6U82Wd/docOUvOtN8/IT/K93JMvpNv5Rv5Uj6Xz+zXoIJUFQoFTqH8FGNokGvlGllvMZSTYjQj8qF8IO9bNEAgXrJBbpIbZaOcm/KfPy6H5W15S95hJASSNavlVrlFNskZnvy9PssheUNel48YFYGkyTa5XTbLRZ7/XV/LQXlVXmN0BFJJdslW2SJrA/u7f5ID8pLsZ5QEUk6KjxZ75O7imQX+sxQH3icv2KMKEMgPs07uk+1ydmQ/2wfZK8/Je4yaQKZD8Rmo/bJDror8Z30se+RZV3omDAhkSjbLA7ItZz/3RXlG3mQFCGTSs5Cd5oqcnsFT2W2yGATyD0vlIXmQo/jCaXlKviAQAim+8t0ld9LFv7gsT7rSK/MEklN2yMNyPT1Myl15Ql4hkPyxVx6RK+lgSp7I4/I8geSH4lO4R+Vi9v+7eCWPudJTwQSSgzh+lwvY+2kxKn/LWyTVOfxv1VHi+CEW2NntJZB4L8iP8N+qn2KxneEOAnHRPZV7mAvysrDSznIjgbhoXgTs4qncsrLeznQpgbjg3z5yiBcBK8JOO9sqAgmXTt4+UlEO2hkTiAvzXbmd7HAq/whtJhAX3Oc5DuT4XblpssLOei6BuKBeDGxjd1Ojzc6cQFwYH5PtYGdTp8POnkA8Z18OPibrI6vs7AnE+X33kXZ2NTPabQYE4il7Irz7SEjMthk43s3rvLyp2x+xv3Dlwrjv1q8ukpvTxfQI0koc3rx7oZX/Yjnv7pXbwm56Q4vNhEA8ujivZS+9oTaWi/XqSL6CoJmd9I5mmw2BZMzWAL6CII8sstkQSMZsYReZDYG4xK89a2IPvaXJZkQgGbHJo689g2+ZYTMiEJfdZ82BGRGIm/yrlhvZP+9ptFkRSMo0xPohHRffh9caCCR91rJ7zIpAklnD3jErApmcebKevQuGepsZgaR4gV7H3gVDXagX6qEGsoydY2YEkswS9o2ZEUgyC9k3ZkYgycxn35gZgUx90QfMjEBc8tO8wMwIJIE57BszI5BkZrFvzMxxX6xE/szhF5CGzl/yFx5BABy3Hs2aCUbHzAgkmY/sGzMjkGTes2/MjECSGWPfmBmBJPOOfWNmBJLMW/aNmRFIMm/YN2ZGIMm8ZN+YGYEk85x9Y2YEkswzLtSDu0B/RiAu1acMR9i7YBjhad70ecjeMSsCSeYBe8esCCSZ+3Kc3fOecZsVgWRwoT7M/nnPcKgX6DF8HuQ2+8eMCCSZW/IzO+gtn21GBJIRd+QQe+gtQzYjAsmQG+whsyGQZK7L1+yid7y22RBIxjySg+yjdwzabAjEA67KT+ykN3yymTgC8YNrcoC99IYBmwmBeMQlWWA3M6dgs3AE4hf9so/9zJw+mwWBeMgF+YEdzYwPNgNHIP5erPeyp5nRG8vFecz35j0nH7OrqfPYzt4RiN/ckz3sa+r02NkTSACclRfZ2dS4aGfuCMQF8yGdM/Ipu1txntpZjxNIWNyU3exvxem2s3YEEubwTrPDFeN07P8IVefgVd1T8jK7XHYu29kWCCRsXsiT8i47XTbu2pm+cHwFm4vlc9En5BN2+6d5Ymd5m+8ojIsr8rh8xY7/MK/sDK84vsQzSs7LY3KUXZ82o3Z25/P0Q9fkcNBfX9A6Khez99/9yHEs1hcDp6KqUMjtRyj2yiNyJfv/v9ccx/P2yEEgJXbIw3I9HbikZ6tO5Omag0C+ZaPskjvpwf33dY6Teb97ZQ178GUBRu02NQc5Dvf1FfJTeXidg0eQaZyF7DRXuPy+8bDbZDEIZFI2ywOyzeXvLetnYn7jIYGUj7lyv+yQq1z8nwTssadw+b4VApkW6+Q+2S5nu/husNBrH5O9x6gJ5GfYLvfI3Xat4gJ/h3Of3X3kKqMlkHKyS7bKFlnrwrsd6IDd1K2fURJIJdlmjyrNcpHz/y7rg/ZocY3REUiarJZb5RbZJGc4f77Zaci+n+N6DHdZJ5Dw2SA3udIr842u9EyYS/lGFcP2wuet0L/ZiUDiZrlskGvlGlkv68r8Z7yTI/KhK30P+f2Qv02WQPLNPItmmVwiF8r5Fk3x1+bIWXKm/f4J+VG+l2MWw1v5Rr6Uzy2GMY6WQAAcnygEIBAAAgEgEAACASAQACAQAAIBIBAAAgEgEAACASAQAAIBIBAAIBAAAgEgEAACASAQAAIBIBAAAgEgEAACAQACASAQAAIBIBAAAgEgEAACASAQAAIBAAIBIBAAAgEgEAACASAQAAIBIBAAAgEgEAD4lr8FGAAJMYPuydb0MAAAAABJRU5ErkJggg==",vce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAylpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAzIDc5Ljk2OTBhODdmYywgMjAyNS8wMy8wNi0yMDo1MDoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI2LjEwIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzNTI1RUVGOTU4MjExRjA5NURCOEJBOTFFMDMwQTg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzNTI1RUYwOTU4MjExRjA5NURCOEJBOTFFMDMwQTg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTM1MjVFRUQ5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTM1MjVFRUU5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5+d81bAAAHmUlEQVR42uydTUhVaRyHXx2zRUTRRij6gog+kCCEyCIIiVoYhTlYkC1s0UKIwEUQxDAEQYsgAhctcpFBxqQUuShCgigjiCCkDyLoC4M2YkQLi5k7v9v9NzCTx8m695z3fc/zwLMqKN///+l27se5VYVCwQHA5FRzBAAEAkAgAAQCQCAABAJAIAAEAkAgAAQCAAQCQCAABAJAIAAEAkAgAAQCQCAABAJAIABAIAAEAkAgAAQCQCAABAJAIAAEAkAgAEAgAAQCQCAABAJAIAAEAkAgAAQCQCAABAIABAJAIAAEAkAgAAQC4DE1HEEqzJPL5TK5RC6U82Wd/docOUvOtN8/IT/K93JMvpNv5Rv5Uj6Xz+zXoIJUFQoFTqH8FGNokGvlGllvMZSTYjQj8qF8IO9bNEAgXrJBbpIbZaOcm/KfPy6H5W15S95hJASSNavlVrlFNskZnvy9PssheUNel48YFYGkyTa5XTbLRZ7/XV/LQXlVXmN0BFJJdslW2SJrA/u7f5ID8pLsZ5QEUk6KjxZ75O7imQX+sxQH3icv2KMKEMgPs07uk+1ydmQ/2wfZK8/Je4yaQKZD8Rmo/bJDror8Z30se+RZV3omDAhkSjbLA7ItZz/3RXlG3mQFCGTSs5Cd5oqcnsFT2W2yGATyD0vlIXmQo/jCaXlKviAQAim+8t0ld9LFv7gsT7rSK/MEklN2yMNyPT1Myl15Ql4hkPyxVx6RK+lgSp7I4/I8geSH4lO4R+Vi9v+7eCWPudJTwQSSgzh+lwvY+2kxKn/LWyTVOfxv1VHi+CEW2NntJZB4L8iP8N+qn2KxneEOAnHRPZV7mAvysrDSznIjgbhoXgTs4qncsrLeznQpgbjg3z5yiBcBK8JOO9sqAgmXTt4+UlEO2hkTiAvzXbmd7HAq/whtJhAX3Oc5DuT4XblpssLOei6BuKBeDGxjd1Ojzc6cQFwYH5PtYGdTp8POnkA8Z18OPibrI6vs7AnE+X33kXZ2NTPabQYE4il7Irz7SEjMthk43s3rvLyp2x+xv3Dlwrjv1q8ukpvTxfQI0koc3rx7oZX/Yjnv7pXbwm56Q4vNhEA8ujivZS+9oTaWi/XqSL6CoJmd9I5mmw2BZMzWAL6CII8sstkQSMZsYReZDYG4xK89a2IPvaXJZkQgGbHJo689g2+ZYTMiEJfdZ82BGRGIm/yrlhvZP+9ptFkRSMo0xPohHRffh9caCCR91rJ7zIpAklnD3jErApmcebKevQuGepsZgaR4gV7H3gVDXagX6qEGsoydY2YEkswS9o2ZEUgyC9k3ZkYgycxn35gZgUx90QfMjEBc8tO8wMwIJIE57BszI5BkZrFvzMxxX6xE/szhF5CGzl/yFx5BABy3Hs2aCUbHzAgkmY/sGzMjkGTes2/MjECSGWPfmBmBJPOOfWNmBJLMW/aNmRFIMm/YN2ZGIMm8ZN+YGYEk85x9Y2YEkswzLtSDu0B/RiAu1acMR9i7YBjhad70ecjeMSsCSeYBe8esCCSZ+3Kc3fOecZsVgWRwoT7M/nnPcKgX6DF8HuQ2+8eMCCSZW/IzO+gtn21GBJIRd+QQe+gtQzYjAsmQG+whsyGQZK7L1+yid7y22RBIxjySg+yjdwzabAjEA67KT+ykN3yymTgC8YNrcoC99IYBmwmBeMQlWWA3M6dgs3AE4hf9so/9zJw+mwWBeMgF+YEdzYwPNgNHIP5erPeyp5nRG8vFecz35j0nH7OrqfPYzt4RiN/ckz3sa+r02NkTSACclRfZ2dS4aGfuCMQF8yGdM/Ipu1txntpZjxNIWNyU3exvxem2s3YEEubwTrPDFeN07P8IVefgVd1T8jK7XHYu29kWCCRsXsiT8i47XTbu2pm+cHwFm4vlc9En5BN2+6d5Ymd5m+8ojIsr8rh8xY7/MK/sDK84vsQzSs7LY3KUXZ82o3Z25/P0Q9fkcNBfX9A6Khez99/9yHEs1hcDp6KqUMjtRyj2yiNyJfv/v9ccx/P2yEEgJXbIw3I9HbikZ6tO5Omag0C+ZaPskjvpwf33dY6Teb97ZQ178GUBRu02NQc5Dvf1FfJTeXidg0eQaZyF7DRXuPy+8bDbZDEIZFI2ywOyzeXvLetnYn7jIYGUj7lyv+yQq1z8nwTssadw+b4VApkW6+Q+2S5nu/husNBrH5O9x6gJ5GfYLvfI3Xat4gJ/h3Of3X3kKqMlkHKyS7bKFlnrwrsd6IDd1K2fURJIJdlmjyrNcpHz/y7rg/ZocY3REUiarJZb5RbZJGc4f77Zaci+n+N6DHdZJ5Dw2SA3udIr842u9EyYS/lGFcP2wuet0L/ZiUDiZrlskGvlGlkv68r8Z7yTI/KhK30P+f2Qv02WQPLNPItmmVwiF8r5Fk3x1+bIWXKm/f4J+VG+l2MWw1v5Rr6Uzy2GMY6WQAAcnygEIBAAAgEgEAACASAQACAQAAIBIBAAAgEgEAACASAQAAIBIBAAIBAAAgEgEAACASAQAAIBIBAAAgEgEAACAQACASAQAAIBIBAAAgEgEAACASAQAAIBAAIBIBAAAgEgEAACASAQAAIBIBAAAgEgEAD4lr8FGAAJMYPuydb0MAAAAABJRU5ErkJggg==",Ece="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAylpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAzIDc5Ljk2OTBhODdmYywgMjAyNS8wMy8wNi0yMDo1MDoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI2LjEwIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlBQjI3NzQyOTU4MjExRjA5NURCOEJBOTFFMDMwQTg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjlBQjI3NzQzOTU4MjExRjA5NURCOEJBOTFFMDMwQTg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUFCMjc3NDA5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUFCMjc3NDE5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4noj7OAAAHmUlEQVR42uydTUhVaRyHXx2zRUTRRij6gog+kCCEyCIIiVoYhTlYkC1s0UKIwEUQxDAEQYsgAhctcpFBxqQUuShCgigjiCCkDyLoC4M2YkQLi5k7v9v9NzCTx8m695z3fc/zwLMqKN///+l27se5VYVCwQHA5FRzBAAEAkAgAAQCQCAABAJAIAAEAkAgAAQCAAQCQCAABAJAIAAEAkAgAAQCQCAABAJAIABAIAAEAkAgAAQCQCAABAJAIAAEAkAgAEAgAAQCQCAABAJAIAAEAkAgAAQCQCAABAIABAJAIAAEAkAgAAQC4DE1HEEqzJPL5TK5RC6U82Wd/docOUvOtN8/IT/K93JMvpNv5Rv5Uj6Xz+zXoIJUFQoFTqH8FGNokGvlGllvMZSTYjQj8qF8IO9bNEAgXrJBbpIbZaOcm/KfPy6H5W15S95hJASSNavlVrlFNskZnvy9PssheUNel48YFYGkyTa5XTbLRZ7/XV/LQXlVXmN0BFJJdslW2SJrA/u7f5ID8pLsZ5QEUk6KjxZ75O7imQX+sxQH3icv2KMKEMgPs07uk+1ydmQ/2wfZK8/Je4yaQKZD8Rmo/bJDror8Z30se+RZV3omDAhkSjbLA7ItZz/3RXlG3mQFCGTSs5Cd5oqcnsFT2W2yGATyD0vlIXmQo/jCaXlKviAQAim+8t0ld9LFv7gsT7rSK/MEklN2yMNyPT1Myl15Ql4hkPyxVx6RK+lgSp7I4/I8geSH4lO4R+Vi9v+7eCWPudJTwQSSgzh+lwvY+2kxKn/LWyTVOfxv1VHi+CEW2NntJZB4L8iP8N+qn2KxneEOAnHRPZV7mAvysrDSznIjgbhoXgTs4qncsrLeznQpgbjg3z5yiBcBK8JOO9sqAgmXTt4+UlEO2hkTiAvzXbmd7HAq/whtJhAX3Oc5DuT4XblpssLOei6BuKBeDGxjd1Ojzc6cQFwYH5PtYGdTp8POnkA8Z18OPibrI6vs7AnE+X33kXZ2NTPabQYE4il7Irz7SEjMthk43s3rvLyp2x+xv3Dlwrjv1q8ukpvTxfQI0koc3rx7oZX/Yjnv7pXbwm56Q4vNhEA8ujivZS+9oTaWi/XqSL6CoJmd9I5mmw2BZMzWAL6CII8sstkQSMZsYReZDYG4xK89a2IPvaXJZkQgGbHJo689g2+ZYTMiEJfdZ82BGRGIm/yrlhvZP+9ptFkRSMo0xPohHRffh9caCCR91rJ7zIpAklnD3jErApmcebKevQuGepsZgaR4gV7H3gVDXagX6qEGsoydY2YEkswS9o2ZEUgyC9k3ZkYgycxn35gZgUx90QfMjEBc8tO8wMwIJIE57BszI5BkZrFvzMxxX6xE/szhF5CGzl/yFx5BABy3Hs2aCUbHzAgkmY/sGzMjkGTes2/MjECSGWPfmBmBJPOOfWNmBJLMW/aNmRFIMm/YN2ZGIMm8ZN+YGYEk85x9Y2YEkswzLtSDu0B/RiAu1acMR9i7YBjhad70ecjeMSsCSeYBe8esCCSZ+3Kc3fOecZsVgWRwoT7M/nnPcKgX6DF8HuQ2+8eMCCSZW/IzO+gtn21GBJIRd+QQe+gtQzYjAsmQG+whsyGQZK7L1+yid7y22RBIxjySg+yjdwzabAjEA67KT+ykN3yymTgC8YNrcoC99IYBmwmBeMQlWWA3M6dgs3AE4hf9so/9zJw+mwWBeMgF+YEdzYwPNgNHIP5erPeyp5nRG8vFecz35j0nH7OrqfPYzt4RiN/ckz3sa+r02NkTSACclRfZ2dS4aGfuCMQF8yGdM/Ipu1txntpZjxNIWNyU3exvxem2s3YEEubwTrPDFeN07P8IVefgVd1T8jK7XHYu29kWCCRsXsiT8i47XTbu2pm+cHwFm4vlc9En5BN2+6d5Ymd5m+8ojIsr8rh8xY7/MK/sDK84vsQzSs7LY3KUXZ82o3Z25/P0Q9fkcNBfX9A6Khez99/9yHEs1hcDp6KqUMjtRyj2yiNyJfv/v9ccx/P2yEEgJXbIw3I9HbikZ6tO5Omag0C+ZaPskjvpwf33dY6Teb97ZQ178GUBRu02NQc5Dvf1FfJTeXidg0eQaZyF7DRXuPy+8bDbZDEIZFI2ywOyzeXvLetnYn7jIYGUj7lyv+yQq1z8nwTssadw+b4VApkW6+Q+2S5nu/husNBrH5O9x6gJ5GfYLvfI3Xat4gJ/h3Of3X3kKqMlkHKyS7bKFlnrwrsd6IDd1K2fURJIJdlmjyrNcpHz/y7rg/ZocY3REUiarJZb5RbZJGc4f77Zaci+n+N6DHdZJ5Dw2SA3udIr842u9EyYS/lGFcP2wuet0L/ZiUDiZrlskGvlGlkv68r8Z7yTI/KhK30P+f2Qv02WQPLNPItmmVwiF8r5Fk3x1+bIWXKm/f4J+VG+l2MWw1v5Rr6Uzy2GMY6WQAAcnygEIBAAAgEgEAACASAQACAQAAIBIBAAAgEgEAACASAQAAIBIBAAIBAAAgEgEAACASAQAAIBIBAAAgEgEAACAQACASAQAAIBIBAAAgEgEAACASAQAAIBAAIBIBAAAgEgEAACASAQAAIBIBAAAgEgEAD4lr8FGAAJMYPuydb0MAAAAABJRU5ErkJggg==",yce="./assets/mUeEkFCX.png",Tce="./assets/BFxjp0aP.png",Ace="./assets/DmMbaJb6.png",Sce="./assets/BYQgF-Bc.png",Rce="./assets/DW5xJcDF.png",Cce="./assets/Bne569ZE.png",wce="./assets/BT-YN-QL.png",Lce="./assets/CGNkIP3F.png",Ice="./assets/EudTMopP.png",Bce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAylpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAzIDc5Ljk2OTBhODdmYywgMjAyNS8wMy8wNi0yMDo1MDoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI2LjEwIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlBQjI3NzRBOTU4MjExRjA5NURCOEJBOTFFMDMwQTg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzNTI1RUVDOTU4MjExRjA5NURCOEJBOTFFMDMwQTg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUFCMjc3NDg5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OUFCMjc3NDk5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7kZ585AAAHmUlEQVR42uydTUhVaRyHXx2zRUTRRij6gog+kCCEyCIIiVoYhTlYkC1s0UKIwEUQxDAEQYsgAhctcpFBxqQUuShCgigjiCCkDyLoC4M2YkQLi5k7v9v9NzCTx8m695z3fc/zwLMqKN///+l27se5VYVCwQHA5FRzBAAEAkAgAAQCQCAABAJAIAAEAkAgAAQCAAQCQCAABAJAIAAEAkAgAAQCQCAABAJAIABAIAAEAkAgAAQCQCAABAJAIAAEAkAgAEAgAAQCQCAABAJAIAAEAkAgAAQCQCAABAIABAJAIAAEAkAgAAQC4DE1HEEqzJPL5TK5RC6U82Wd/docOUvOtN8/IT/K93JMvpNv5Rv5Uj6Xz+zXoIJUFQoFTqH8FGNokGvlGllvMZSTYjQj8qF8IO9bNEAgXrJBbpIbZaOcm/KfPy6H5W15S95hJASSNavlVrlFNskZnvy9PssheUNel48YFYGkyTa5XTbLRZ7/XV/LQXlVXmN0BFJJdslW2SJrA/u7f5ID8pLsZ5QEUk6KjxZ75O7imQX+sxQH3icv2KMKEMgPs07uk+1ydmQ/2wfZK8/Je4yaQKZD8Rmo/bJDror8Z30se+RZV3omDAhkSjbLA7ItZz/3RXlG3mQFCGTSs5Cd5oqcnsFT2W2yGATyD0vlIXmQo/jCaXlKviAQAim+8t0ld9LFv7gsT7rSK/MEklN2yMNyPT1Myl15Ql4hkPyxVx6RK+lgSp7I4/I8geSH4lO4R+Vi9v+7eCWPudJTwQSSgzh+lwvY+2kxKn/LWyTVOfxv1VHi+CEW2NntJZB4L8iP8N+qn2KxneEOAnHRPZV7mAvysrDSznIjgbhoXgTs4qncsrLeznQpgbjg3z5yiBcBK8JOO9sqAgmXTt4+UlEO2hkTiAvzXbmd7HAq/whtJhAX3Oc5DuT4XblpssLOei6BuKBeDGxjd1Ojzc6cQFwYH5PtYGdTp8POnkA8Z18OPibrI6vs7AnE+X33kXZ2NTPabQYE4il7Irz7SEjMthk43s3rvLyp2x+xv3Dlwrjv1q8ukpvTxfQI0koc3rx7oZX/Yjnv7pXbwm56Q4vNhEA8ujivZS+9oTaWi/XqSL6CoJmd9I5mmw2BZMzWAL6CII8sstkQSMZsYReZDYG4xK89a2IPvaXJZkQgGbHJo689g2+ZYTMiEJfdZ82BGRGIm/yrlhvZP+9ptFkRSMo0xPohHRffh9caCCR91rJ7zIpAklnD3jErApmcebKevQuGepsZgaR4gV7H3gVDXagX6qEGsoydY2YEkswS9o2ZEUgyC9k3ZkYgycxn35gZgUx90QfMjEBc8tO8wMwIJIE57BszI5BkZrFvzMxxX6xE/szhF5CGzl/yFx5BABy3Hs2aCUbHzAgkmY/sGzMjkGTes2/MjECSGWPfmBmBJPOOfWNmBJLMW/aNmRFIMm/YN2ZGIMm8ZN+YGYEk85x9Y2YEkswzLtSDu0B/RiAu1acMR9i7YBjhad70ecjeMSsCSeYBe8esCCSZ+3Kc3fOecZsVgWRwoT7M/nnPcKgX6DF8HuQ2+8eMCCSZW/IzO+gtn21GBJIRd+QQe+gtQzYjAsmQG+whsyGQZK7L1+yid7y22RBIxjySg+yjdwzabAjEA67KT+ykN3yymTgC8YNrcoC99IYBmwmBeMQlWWA3M6dgs3AE4hf9so/9zJw+mwWBeMgF+YEdzYwPNgNHIP5erPeyp5nRG8vFecz35j0nH7OrqfPYzt4RiN/ckz3sa+r02NkTSACclRfZ2dS4aGfuCMQF8yGdM/Ipu1txntpZjxNIWNyU3exvxem2s3YEEubwTrPDFeN07P8IVefgVd1T8jK7XHYu29kWCCRsXsiT8i47XTbu2pm+cHwFm4vlc9En5BN2+6d5Ymd5m+8ojIsr8rh8xY7/MK/sDK84vsQzSs7LY3KUXZ82o3Z25/P0Q9fkcNBfX9A6Khez99/9yHEs1hcDp6KqUMjtRyj2yiNyJfv/v9ccx/P2yEEgJXbIw3I9HbikZ6tO5Omag0C+ZaPskjvpwf33dY6Teb97ZQ178GUBRu02NQc5Dvf1FfJTeXidg0eQaZyF7DRXuPy+8bDbZDEIZFI2ywOyzeXvLetnYn7jIYGUj7lyv+yQq1z8nwTssadw+b4VApkW6+Q+2S5nu/husNBrH5O9x6gJ5GfYLvfI3Xat4gJ/h3Of3X3kKqMlkHKyS7bKFlnrwrsd6IDd1K2fURJIJdlmjyrNcpHz/y7rg/ZocY3REUiarJZb5RbZJGc4f77Zaci+n+N6DHdZJ5Dw2SA3udIr842u9EyYS/lGFcP2wuet0L/ZiUDiZrlskGvlGlkv68r8Z7yTI/KhK30P+f2Qv02WQPLNPItmmVwiF8r5Fk3x1+bIWXKm/f4J+VG+l2MWw1v5Rr6Uzy2GMY6WQAAcnygEIBAAAgEgEAACASAQACAQAAIBIBAAAgEgEAACASAQAAIBIBAAIBAAAgEgEAACASAQAAIBIBAAAgEgEAACAQACASAQAAIBIBAAAgEgEAACASAQAAIBAAIBIBAAAgEgEAACASAQAAIBIBAAAgEgEAD4lr8FGAAJMYPuydb0MAAAAABJRU5ErkJggg==",Pce="./assets/YLO2GfMO.png",Oce="./assets/CZoIYFSh.png",Dce="./assets/iQJ6AFJ8.png",kce="./assets/CzI6yOau.png",Uce="./assets/ONDyvOLp.png",Mce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAylpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDkuMS1jMDAzIDc5Ljk2OTBhODdmYywgMjAyNS8wMy8wNi0yMDo1MDoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI2LjEwIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzNTI1RUYzOTU4MjExRjA5NURCOEJBOTFFMDMwQTg2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzNTI1RUY0OTU4MjExRjA5NURCOEJBOTFFMDMwQTg2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTM1MjVFRjE5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTM1MjVFRjI5NTgyMTFGMDk1REI4QkE5MUUwMzBBODYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz71bu1sAAAHmUlEQVR42uydTUhVaRyHXx2zRUTRRij6gog+kCCEyCIIiVoYhTlYkC1s0UKIwEUQxDAEQYsgAhctcpFBxqQUuShCgigjiCCkDyLoC4M2YkQLi5k7v9v9NzCTx8m695z3fc/zwLMqKN///+l27se5VYVCwQHA5FRzBAAEAkAgAAQCQCAABAJAIAAEAkAgAAQCAAQCQCAABAJAIAAEAkAgAAQCQCAABAJAIABAIAAEAkAgAAQCQCAABAJAIAAEAkAgAEAgAAQCQCAABAJAIAAEAkAgAAQCQCAABAIABAJAIAAEAkAgAAQC4DE1HEEqzJPL5TK5RC6U82Wd/docOUvOtN8/IT/K93JMvpNv5Rv5Uj6Xz+zXoIJUFQoFTqH8FGNokGvlGllvMZSTYjQj8qF8IO9bNEAgXrJBbpIbZaOcm/KfPy6H5W15S95hJASSNavlVrlFNskZnvy9PssheUNel48YFYGkyTa5XTbLRZ7/XV/LQXlVXmN0BFJJdslW2SJrA/u7f5ID8pLsZ5QEUk6KjxZ75O7imQX+sxQH3icv2KMKEMgPs07uk+1ydmQ/2wfZK8/Je4yaQKZD8Rmo/bJDror8Z30se+RZV3omDAhkSjbLA7ItZz/3RXlG3mQFCGTSs5Cd5oqcnsFT2W2yGATyD0vlIXmQo/jCaXlKviAQAim+8t0ld9LFv7gsT7rSK/MEklN2yMNyPT1Myl15Ql4hkPyxVx6RK+lgSp7I4/I8geSH4lO4R+Vi9v+7eCWPudJTwQSSgzh+lwvY+2kxKn/LWyTVOfxv1VHi+CEW2NntJZB4L8iP8N+qn2KxneEOAnHRPZV7mAvysrDSznIjgbhoXgTs4qncsrLeznQpgbjg3z5yiBcBK8JOO9sqAgmXTt4+UlEO2hkTiAvzXbmd7HAq/whtJhAX3Oc5DuT4XblpssLOei6BuKBeDGxjd1Ojzc6cQFwYH5PtYGdTp8POnkA8Z18OPibrI6vs7AnE+X33kXZ2NTPabQYE4il7Irz7SEjMthk43s3rvLyp2x+xv3Dlwrjv1q8ukpvTxfQI0koc3rx7oZX/Yjnv7pXbwm56Q4vNhEA8ujivZS+9oTaWi/XqSL6CoJmd9I5mmw2BZMzWAL6CII8sstkQSMZsYReZDYG4xK89a2IPvaXJZkQgGbHJo689g2+ZYTMiEJfdZ82BGRGIm/yrlhvZP+9ptFkRSMo0xPohHRffh9caCCR91rJ7zIpAklnD3jErApmcebKevQuGepsZgaR4gV7H3gVDXagX6qEGsoydY2YEkswS9o2ZEUgyC9k3ZkYgycxn35gZgUx90QfMjEBc8tO8wMwIJIE57BszI5BkZrFvzMxxX6xE/szhF5CGzl/yFx5BABy3Hs2aCUbHzAgkmY/sGzMjkGTes2/MjECSGWPfmBmBJPOOfWNmBJLMW/aNmRFIMm/YN2ZGIMm8ZN+YGYEk85x9Y2YEkswzLtSDu0B/RiAu1acMR9i7YBjhad70ecjeMSsCSeYBe8esCCSZ+3Kc3fOecZsVgWRwoT7M/nnPcKgX6DF8HuQ2+8eMCCSZW/IzO+gtn21GBJIRd+QQe+gtQzYjAsmQG+whsyGQZK7L1+yid7y22RBIxjySg+yjdwzabAjEA67KT+ykN3yymTgC8YNrcoC99IYBmwmBeMQlWWA3M6dgs3AE4hf9so/9zJw+mwWBeMgF+YEdzYwPNgNHIP5erPeyp5nRG8vFecz35j0nH7OrqfPYzt4RiN/ckz3sa+r02NkTSACclRfZ2dS4aGfuCMQF8yGdM/Ipu1txntpZjxNIWNyU3exvxem2s3YEEubwTrPDFeN07P8IVefgVd1T8jK7XHYu29kWCCRsXsiT8i47XTbu2pm+cHwFm4vlc9En5BN2+6d5Ymd5m+8ojIsr8rh8xY7/MK/sDK84vsQzSs7LY3KUXZ82o3Z25/P0Q9fkcNBfX9A6Khez99/9yHEs1hcDp6KqUMjtRyj2yiNyJfv/v9ccx/P2yEEgJXbIw3I9HbikZ6tO5Omag0C+ZaPskjvpwf33dY6Teb97ZQ178GUBRu02NQc5Dvf1FfJTeXidg0eQaZyF7DRXuPy+8bDbZDEIZFI2ywOyzeXvLetnYn7jIYGUj7lyv+yQq1z8nwTssadw+b4VApkW6+Q+2S5nu/husNBrH5O9x6gJ5GfYLvfI3Xat4gJ/h3Of3X3kKqMlkHKyS7bKFlnrwrsd6IDd1K2fURJIJdlmjyrNcpHz/y7rg/ZocY3REUiarJZb5RbZJGc4f77Zaci+n+N6DHdZJ5Dw2SA3udIr842u9EyYS/lGFcP2wuet0L/ZiUDiZrlskGvlGlkv68r8Z7yTI/KhK30P+f2Qv02WQPLNPItmmVwiF8r5Fk3x1+bIWXKm/f4J+VG+l2MWw1v5Rr6Uzy2GMY6WQAAcnygEIBAAAgEgEAACASAQACAQAAIBIBAAAgEgEAACASAQAAIBIBAAIBAAAgEgEAACASAQAAIBIBAAAgEgEAACAQACASAQAAIBIBAAAgEgEAACASAQAAIBAAIBIBAAAgEgEAACASAQAAIBIBAAAgEgEAD4lr8FGAAJMYPuydb0MAAAAABJRU5ErkJggg==",Nce="./assets/CXmoLSPM.png",Fce="./assets/DBjSkaR6.png",Gce={Weeabear:"Kyle Otakuma",NuggetKid:"Chicken Nugget Kid",CowFriend:"Heifer Locklear",KoalaKaren:"Mary Supial",AlienKid:"Blogorf The Alien (aka. Jayson)",Gingerbread:"Gingerbread Ma'am",GothGirl:"Natalie Feratu",UGCFriend:"Chaz's Phone",Zookeeper:"Chip Brisbane",Capybara:"Carrie Bara",SquidMan:"Trent A. Culls",HippyGal:"Holista Hemp",MushroomMan:"Fun Augustus",Crab:"Clawdia Fintour",Robotter:"R.O.B.O.T.T.E.R",KangarooFam:"Baby Joseph (NOT Joey!)",Inspector:"Health Inspector",NervousNellie:"Nervous Nellie",Doctor:"Dr. Benson Bawdypartz",TrenchCoat:"Dilly, Dally, & Devin",Sheriff:"Sheriff Samuel Cooks",Bull:"Bill Bullman",Gene:"Gene",DonutMan:"D.D. Donut",Pixi:"Mrs. Pixi",Frog:"Arthur Pod",Unicorn:"Whimsica Taylor Thomas"},Kce=or({components:{RenderedImage:Pne},bb:{br:()=>"<br>"},props:{artifact:{type:Object,required:!0},artifactId:{type:String,required:!0},shopify:{type:Object,required:!0}},data(){return{manager:new Boe({maxConcurrent:1,delay:500,artifact:this.artifact}),rounds:[],productId:7464136835206,isFetching:!1,product:null}},mounted(){this.artifact.blob.rounds.forEach((t,e)=>{if(Yr.isIOS&&this.manager.items.length>12)return;const r={index:e,prompt:t.prompt??Gce[t.customerKey],customer:t.customerKey,avatar:new URL(Object.assign({"../assets/avatars/AlienKid.png":dce,"../assets/avatars/Bull.png":pce,"../assets/avatars/Capybara.png":gce,"../assets/avatars/CowFriend.png":mce,"../assets/avatars/Crab.png":_ce,"../assets/avatars/Doctor.png":bce,"../assets/avatars/DonutMan.png":xce,"../assets/avatars/Frog.png":vce,"../assets/avatars/Gene.png":Ece,"../assets/avatars/Gingerbread.png":yce,"../assets/avatars/GothGirl.png":Tce,"../assets/avatars/HippyGal.png":Ace,"../assets/avatars/Inspector.png":Sce,"../assets/avatars/KangarooFam.png":Rce,"../assets/avatars/KoalaKaren.png":Cce,"../assets/avatars/MushroomMan.png":wce,"../assets/avatars/NervousNellie.png":Lce,"../assets/avatars/NuggetKid.png":Ice,"../assets/avatars/Pixi.png":Bce,"../assets/avatars/Robotter.png":Pce,"../assets/avatars/Sheriff.png":Oce,"../assets/avatars/SquidMan.png":Dce,"../assets/avatars/TrenchCoat.png":kce,"../assets/avatars/UGCFriend.png":Uce,"../assets/avatars/Unicorn.png":Mce,"../assets/avatars/Weeabear.png":Nce,"../assets/avatars/Zookeeper.png":Fce})[`../assets/avatars/${t.customerKey}.png`],import.meta.url).href,shareables:[]};t.cookies.forEach((i,s)=>{Yr.isIOS&&this.manager.items.length>12||r.shareables.push({alt:`Cookie drawn by ${i.player}`,shareItem:this.manager.add({type:"shareable",key:`${e}:${s}`,renderer:"shareable",params:{roundIndex:`${e}`,cookieIndex:`${s}`}})})}),this.rounds.push(r)})},methods:{async onShareClick(t){try{await t.share({title:this.$t("GALLERY.SHARE_TEXT"),url:`https://jackbox.tv/gallery/cookie-haus/${this.artifactId}/${t.key}`},{categoryId:this.artifact.categoryId,options:{locale:this.$i18n.locale,artifactId:this.artifactId,itemId:t.key,title:"Cookie"}})}catch(e){console.warn(e)}},async onCopyClick(t){try{await t.copy({categoryId:this.artifact.categoryId,options:{locale:this.$i18n.locale,artifactId:this.artifactId,itemId:t.key,title:"Cookie"}})}catch(e){console.warn(e)}}}}),Vce="./assets/DGZxuEzU.png",$ce={class:"cookies"},Hce={class:"awning"},qce={class:"dangle"},Xce={key:0,class:"constrain"},zce={class:"customer"},Wce=["src","alt"],jce={class:"bubble"},Yce=["id"],Zce={class:"actions"},Qce=["disabled","onClick"],Jce=["onClick"];function efe(t,e,r,i,s,a){const n=wr("RenderedImage"),o=ls("t");return Pe(),Ge("div",$ce,[Se("div",Hce,[e[0]||(e[0]=Se("div",{class:"angle"},[Se("img",{src:Vce,alt:"Cookie Haus"})],-1)),Se("div",qce,[gr(Se("p",null,null,512),[[o,"GALLERY.HEADER"]])])]),t.rounds?(Pe(),Ge("div",Xce,[(Pe(!0),Ge(Wt,null,Vn(t.rounds,u=>(Pe(),Ge("div",{key:u.index,class:"round"},[Se("div",zce,[Se("img",{src:u.avatar,alt:u.customer},null,8,Wce),Se("div",jce,xt(u.prompt),1)]),(Pe(!0),Ge(Wt,null,Vn(u.shareables,c=>(Pe(),Ge("div",{id:c.shareItem.key,key:c.shareItem.key,class:"shareable"},[Zt(n,{class:"plate",item:c.shareItem},null,8,["item"]),Se("div",Zce,[t.manager.canShare?gr((Pe(),Ge("button",{key:0,disabled:c.shareItem.status!=="complete",class:"share secondary cookie-button",onClick:f=>t.onShareClick(c.shareItem)},null,8,Qce)),[[o,"SHARE.SHARE"]]):gr((Pe(),Ge("button",{key:1,class:"share secondary cookie-button",onClick:f=>t.onCopyClick(c.shareItem)},null,8,Jce)),[[o,"SHARE.COPY_TO_CLIPBOARD"]])])],8,Yce))),128))]))),128))])):Ot("",!0)])}const v8=er(Kce,[["render",efe],["__scopeId","data-v-bf4748f7"]]);var xE,FD;function tfe(){if(FD)return xE;FD=1;var t=mN(),e=qi(),r="Expected a function";function i(s,a,n){var o=!0,u=!0;if(typeof s!="function")throw new TypeError(r);return e(n)&&(o="leading"in n?!!n.leading:o,u="trailing"in n?!!n.trailing:u),t(s,a,{leading:o,maxWait:a,trailing:u})}return xE=i,xE}var rfe=tfe();const nfe=fs(rfe),ife="modulepreload",sfe=function(t){return"./"+t},GD={},Oc=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){let n=function(c){return Promise.all(c.map(f=>Promise.resolve(f).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=n(r.map(c=>{if(c=sfe(c),c in GD)return;GD[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const p=document.createElement("link");if(p.rel=f?"stylesheet":ife,f||(p.as="script"),p.crossOrigin="",p.href=c,u&&p.setAttribute("nonce",u),document.head.appendChild(p),f)return new Promise((g,m)=>{p.addEventListener("load",g),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(n){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n}return s.then(n=>{for(const o of n||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};var pe=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(pe||{});const Vy=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Jl=(t,e)=>Vy(t).priority??e,br={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Vy).forEach(e=>{e.type.forEach(r=>{var i,s;return(s=(i=this._removeHandlers)[r])==null?void 0:s.call(i,e)})}),this},add(...t){return t.map(Vy).forEach(e=>{e.type.forEach(r=>{var a,n;const i=this._addHandlers,s=this._queue;i[r]?(n=i[r])==null||n.call(i,e):(s[r]=s[r]||[],(a=s[r])==null||a.push(e))})}),this},handle(t,e,r){var n;const i=this._addHandlers,s=this._removeHandlers;if(i[t]||s[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,s[t]=r;const a=this._queue;return a[t]&&((n=a[t])==null||n.forEach(o=>e(o)),delete a[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByNamedList(t,e,r=-1){return this.handle(t,i=>{e.findIndex(a=>a.name===i.name)>=0||(e.push({name:i.name,value:i.ref}),e.sort((a,n)=>Jl(n.value,r)-Jl(a.value,r)))},i=>{const s=e.findIndex(a=>a.name===i.name);s!==-1&&e.splice(s,1)})},handleByList(t,e,r=-1){return this.handle(t,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((s,a)=>Jl(a,r)-Jl(s,r)))},i=>{const s=e.indexOf(i.ref);s!==-1&&e.splice(s,1)})},mixin(t,...e){for(const r of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(r))}},E8={extension:{type:pe.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Oc(()=>import("./assets/browserAll-B3t-XKkh.js"),__vite__mapDeps([0,1]))}},y8={extension:{type:pe.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await Oc(()=>import("./assets/webworkerAll-DUzZPZ4s.js"),[])}};class Mr{constructor(e,r,i){this._x=r||0,this._y=i||0,this._observer=e}clone(e){return new Mr(e??this._observer,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var vE={exports:{}},KD;function afe(){return KD||(KD=1,function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function s(u,c,f){this.fn=u,this.context=c,this.once=f||!1}function a(u,c,f,h,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new s(f,h||u,p),m=r?r+c:c;return u._events[m]?u._events[m].fn?u._events[m]=[u._events[m],g]:u._events[m].push(g):(u._events[m]=g,u._eventsCount++),u}function n(u,c){--u._eventsCount===0?u._events=new i:delete u._events[c]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],f,h;if(this._eventsCount===0)return c;for(h in f=this._events)e.call(f,h)&&c.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(f)):c},o.prototype.listeners=function(c){var f=r?r+c:c,h=this._events[f];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,m=new Array(g);p<g;p++)m[p]=h[p].fn;return m},o.prototype.listenerCount=function(c){var f=r?r+c:c,h=this._events[f];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,f,h,p,g,m){var T=r?r+c:c;if(!this._events[T])return!1;var x=this._events[T],v=arguments.length,y,R;if(x.fn){switch(x.once&&this.removeListener(c,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,h),!0;case 4:return x.fn.call(x.context,f,h,p),!0;case 5:return x.fn.call(x.context,f,h,p,g),!0;case 6:return x.fn.call(x.context,f,h,p,g,m),!0}for(R=1,y=new Array(v-1);R<v;R++)y[R-1]=arguments[R];x.fn.apply(x.context,y)}else{var A=x.length,k;for(R=0;R<A;R++)switch(x[R].once&&this.removeListener(c,x[R].fn,void 0,!0),v){case 1:x[R].fn.call(x[R].context);break;case 2:x[R].fn.call(x[R].context,f);break;case 3:x[R].fn.call(x[R].context,f,h);break;case 4:x[R].fn.call(x[R].context,f,h,p);break;default:if(!y)for(k=1,y=new Array(v-1);k<v;k++)y[k-1]=arguments[k];x[R].fn.apply(x[R].context,y)}}return!0},o.prototype.on=function(c,f,h){return a(this,c,f,h,!1)},o.prototype.once=function(c,f,h){return a(this,c,f,h,!0)},o.prototype.removeListener=function(c,f,h,p){var g=r?r+c:c;if(!this._events[g])return this;if(!f)return n(this,g),this;var m=this._events[g];if(m.fn)m.fn===f&&(!p||m.once)&&(!h||m.context===h)&&n(this,g);else{for(var T=0,x=[],v=m.length;T<v;T++)(m[T].fn!==f||p&&!m[T].once||h&&m[T].context!==h)&&x.push(m[T]);x.length?this._events[g]=x.length===1?x[0]:x:n(this,g)}return this},o.prototype.removeAllListeners=function(c){var f;return c?(f=r?r+c:c,this._events[f]&&n(this,f)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o}(vE)),vE.exports}var ofe=afe();const ui=fs(ofe),T8=Math.PI*2,A8=180/Math.PI,S8=Math.PI/180;class _r{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new _r(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return EE.x=0,EE.y=0,EE}}const EE=new _r;class Et{constructor(e=1,r=0,i=0,s=1,a=0,n=0){this.array=null,this.a=e,this.b=r,this.c=i,this.d=s,this.tx=a,this.ty=n}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,i,s,a,n){return this.a=e,this.b=r,this.c=i,this.d=s,this.tx=a,this.ty=n,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const i=r||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,r){r=r||new _r;const i=e.x,s=e.y;return r.x=this.a*i+this.c*s+this.tx,r.y=this.b*i+this.d*s+this.ty,r}applyInverse(e,r){r=r||new _r;const i=this.a,s=this.b,a=this.c,n=this.d,o=this.tx,u=this.ty,c=1/(i*n+a*-s),f=e.x,h=e.y;return r.x=n*c*f+-a*c*h+(u*a-o*n)*c,r.y=i*c*h+-s*c*f+(-u*i+o*s)*c,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),i=Math.sin(e),s=this.a,a=this.c,n=this.tx;return this.a=s*r-this.b*i,this.b=s*i+this.b*r,this.c=a*r-this.d*i,this.d=a*i+this.d*r,this.tx=n*r-this.ty*i,this.ty=n*i+this.ty*r,this}append(e){const r=this.a,i=this.b,s=this.c,a=this.d;return this.a=e.a*r+e.b*s,this.b=e.a*i+e.b*a,this.c=e.c*r+e.d*s,this.d=e.c*i+e.d*a,this.tx=e.tx*r+e.ty*s+this.tx,this.ty=e.tx*i+e.ty*a+this.ty,this}appendFrom(e,r){const i=e.a,s=e.b,a=e.c,n=e.d,o=e.tx,u=e.ty,c=r.a,f=r.b,h=r.c,p=r.d;return this.a=i*c+s*h,this.b=i*f+s*p,this.c=a*c+n*h,this.d=a*f+n*p,this.tx=o*c+u*h+r.tx,this.ty=o*f+u*p+r.ty,this}setTransform(e,r,i,s,a,n,o,u,c){return this.a=Math.cos(o+c)*a,this.b=Math.sin(o+c)*a,this.c=-Math.sin(o-u)*n,this.d=Math.cos(o-u)*n,this.tx=e-(i*this.a+s*this.c),this.ty=r-(i*this.b+s*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,s=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=s*e.a+this.d*e.c,this.d=s*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,i=this.b,s=this.c,a=this.d,n=e.pivot,o=-Math.atan2(-s,a),u=Math.atan2(i,r),c=Math.abs(o+u);return c<1e-5||Math.abs(T8-c)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=u),e.scale.x=Math.sqrt(r*r+i*i),e.scale.y=Math.sqrt(s*s+a*a),e.position.x=this.tx+(n.x*r+n.y*s),e.position.y=this.ty+(n.x*i+n.y*a),e}invert(){const e=this.a,r=this.b,i=this.c,s=this.d,a=this.tx,n=e*s-r*i;return this.a=s/n,this.b=-r/n,this.c=-i/n,this.d=e/n,this.tx=(i*this.ty-s*a)/n,this.ty=-(e*this.ty-r*a)/n,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Et;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return lfe.identity()}static get shared(){return ufe.identity()}}const ufe=new Et,lfe=new Et,Ao=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],So=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ro=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Co=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],$y=[],R8=[],gh=Math.sign;function cfe(){for(let t=0;t<16;t++){const e=[];$y.push(e);for(let r=0;r<16;r++){const i=gh(Ao[t]*Ao[r]+Ro[t]*So[r]),s=gh(So[t]*Ao[r]+Co[t]*So[r]),a=gh(Ao[t]*Ro[r]+Ro[t]*Co[r]),n=gh(So[t]*Ro[r]+Co[t]*Co[r]);for(let o=0;o<16;o++)if(Ao[o]===i&&So[o]===s&&Ro[o]===a&&Co[o]===n){e.push(o);break}}}for(let t=0;t<16;t++){const e=new Et;e.set(Ao[t],So[t],Ro[t],Co[t],0,0),R8.push(e)}}cfe();const Yt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Ao[t],uY:t=>So[t],vX:t=>Ro[t],vY:t=>Co[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>$y[t][e],sub:(t,e)=>$y[t][Yt.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Yt.S:Yt.N:Math.abs(e)*2<=Math.abs(t)?t>0?Yt.E:Yt.W:e>0?t>0?Yt.SE:Yt.SW:t>0?Yt.NE:Yt.NW,matrixAppendRotationInv:(t,e,r=0,i=0)=>{const s=R8[Yt.inv(e)];s.tx=r,s.ty=i,t.append(s)}},mh=[new _r,new _r,new _r,new _r];class lr{constructor(e=0,r=0,i=0,s=0){this.type="rectangle",this.x=Number(e),this.y=Number(r),this.width=Number(i),this.height=Number(s)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new lr(0,0,0,0)}clone(){return new lr(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}strokeContains(e,r,i,s=.5){const{width:a,height:n}=this;if(a<=0||n<=0)return!1;const o=this.x,u=this.y,c=i*(1-s),f=i-c,h=o-c,p=o+a+c,g=u-c,m=u+n+c,T=o+f,x=o+a-f,v=u+f,y=u+n-f;return e>=h&&e<=p&&r>=g&&r<=m&&!(e>T&&e<x&&r>v&&r<y)}intersects(e,r){if(!r){const w=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=w)return!1;const M=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>M}const i=this.left,s=this.right,a=this.top,n=this.bottom;if(s<=i||n<=a)return!1;const o=mh[0].set(e.left,e.top),u=mh[1].set(e.left,e.bottom),c=mh[2].set(e.right,e.top),f=mh[3].set(e.right,e.bottom);if(c.x<=o.x||u.y<=o.y)return!1;const h=Math.sign(r.a*r.d-r.b*r.c);if(h===0||(r.apply(o,o),r.apply(u,u),r.apply(c,c),r.apply(f,f),Math.max(o.x,u.x,c.x,f.x)<=i||Math.min(o.x,u.x,c.x,f.x)>=s||Math.max(o.y,u.y,c.y,f.y)<=a||Math.min(o.y,u.y,c.y,f.y)>=n))return!1;const p=h*(u.y-o.y),g=h*(o.x-u.x),m=p*i+g*a,T=p*s+g*a,x=p*i+g*n,v=p*s+g*n;if(Math.max(m,T,x,v)<=p*o.x+g*o.y||Math.min(m,T,x,v)>=p*f.x+g*f.y)return!1;const y=h*(o.y-c.y),R=h*(c.x-o.x),A=y*i+R*a,k=y*s+R*a,b=y*i+R*n,C=y*s+R*n;return!(Math.max(A,k,b,C)<=y*o.x+R*o.y||Math.min(A,k,b,C)>=y*f.x+R*f.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),s=Math.max(this.y,e.y),a=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(i-r,0),this.y=s,this.height=Math.max(a-s,0),this}ceil(e=1,r=.001){const i=Math.ceil((this.x+this.width-r)*e)/e,s=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=i-this.x,this.height=s-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),s=Math.min(this.y,e.y),a=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=i-r,this.y=s,this.height=a-s,this}getBounds(e){return e||(e=new lr),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const r=e.x,i=e.y,s=e.x+e.width,a=e.y+e.height;return r>=this.x&&r<this.x+this.width&&i>=this.y&&i<this.y+this.height&&s>=this.x&&s<this.x+this.width&&a>=this.y&&a<this.y+this.height}set(e,r,i,s){return this.x=e,this.y=r,this.width=i,this.height=s,this}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const pc={default:-1};function Lr(t="default"){return pc[t]===void 0&&(pc[t]=-1),++pc[t]}function ffe(){for(const t in pc)delete pc[t]}const VD={},Gt="8.0.0",C8="8.3.4";function vt(t,e,r=3){if(VD[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(i=i.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(i))),VD[e]=!0}const dA=()=>{};function Fo(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function Hy(t){return!(t&t-1)&&!!t}function hfe(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function cs(t){const e={};for(const r in t)t[r]!==void 0&&(e[r]=t[r]);return e}const $D=Object.create(null);function dfe(t){const e=$D[t];return e===void 0&&($D[t]=Lr("resource")),e}const w8=class L8 extends ui{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...L8.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){vt(Gt,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=dfe(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};w8.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let Hi=w8;const I8=class B8 extends ui{constructor(e={}){super(),this.options=e,this.uid=Lr("textureSource"),this._resourceType="textureSource",this._resourceId=Lr("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...B8.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new Hi(cs(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var r,i;this.style!==e&&((r=this._style)==null||r.off("change",this._onStyleChange,this),this._style=e,(i=this._style)==null||i.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Lr("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,r,i){i||(i=this._resolution),e||(e=this.width),r||(r=this.height);const s=Math.round(e*i),a=Math.round(r*i);return this.width=s/i,this.height=a/i,this._resolution=i,this.pixelWidth===s&&this.pixelHeight===a?!1:(this._refreshPOT(),this.pixelWidth=s,this.pixelHeight=a,this.emit("resize",this),this._resourceId=Lr("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=Hy(this.pixelWidth)&&Hy(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};I8.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let Hr=I8;class _p extends Hr{constructor(e){const r=e.resource||new Float32Array(e.width*e.height*4);let i=e.format;i||(r instanceof Float32Array?i="rgba32float":r instanceof Int32Array||r instanceof Uint32Array?i="rgba32uint":r instanceof Int16Array||r instanceof Uint16Array?i="rgba16uint":(r instanceof Int8Array,i="bgra8unorm")),super({...e,resource:r,format:i}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}_p.extension=pe.TextureSource;const HD=new Et;class pA{constructor(e,r){this.mapCoord=new Et,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof r>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=r,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var r;this.texture!==e&&((r=this._texture)==null||r.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,r){r===void 0&&(r=e);const i=this.mapCoord;for(let s=0;s<e.length;s+=2){const a=e[s],n=e[s+1];r[s]=a*i.a+n*i.c+i.tx,r[s+1]=a*i.b+n*i.d+i.ty}return r}update(){const e=this._texture;this._updateID++;const r=e.uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=e.orig,s=e.trim;s&&(HD.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(HD));const a=e.source,n=this.uClampFrame,o=this.clampMargin/a._resolution,u=this.clampOffset/a._resolution;return n[0]=(e.frame.x+o+u)/a.width,n[1]=(e.frame.y+o+u)/a.height,n[2]=(e.frame.x+e.frame.width-o+u)/a.width,n[3]=(e.frame.y+e.frame.height-o+u)/a.height,this.uClampOffset[0]=this.clampOffset/a.pixelWidth,this.uClampOffset[1]=this.clampOffset/a.pixelHeight,this.isSimple=e.frame.width===a.width&&e.frame.height===a.height&&e.rotate===0,!0}}class ct extends ui{constructor({source:e,label:r,frame:i,orig:s,trim:a,defaultAnchor:n,defaultBorders:o,rotate:u,dynamic:c}={}){if(super(),this.uid=Lr("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new lr,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=r,this.source=(e==null?void 0:e.source)??new Hr,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:f,height:h}=this._source;this.frame.width=f,this.frame.height=h}this.orig=s||this.frame,this.trim=a,this.rotate=u??0,this.defaultAnchor=n,this.defaultBorders=o,this.destroyed=!1,this.dynamic=c||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new pA(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:r}=this,{width:i,height:s}=this._source,a=r.x/i,n=r.y/s,o=r.width/i,u=r.height/s;let c=this.rotate;if(c){const f=o/2,h=u/2,p=a+f,g=n+h;c=Yt.add(c,Yt.NW),e.x0=p+f*Yt.uX(c),e.y0=g+h*Yt.uY(c),c=Yt.add(c,2),e.x1=p+f*Yt.uX(c),e.y1=g+h*Yt.uY(c),c=Yt.add(c,2),e.x2=p+f*Yt.uX(c),e.y2=g+h*Yt.uY(c),c=Yt.add(c,2),e.x3=p+f*Yt.uX(c),e.y3=g+h*Yt.uY(c)}else e.x0=a,e.y0=n,e.x1=a+o,e.y1=n,e.x2=a+o,e.y2=n+u,e.x3=a,e.y3=n+u}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return vt(Gt,"Texture.baseTexture is now Texture.source"),this._source}}ct.EMPTY=new ct({label:"EMPTY",source:new Hr({label:"EMPTY"})});ct.EMPTY.destroy=dA;ct.WHITE=new ct({source:new _p({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});ct.WHITE.destroy=dA;function gA(t,e,r){const{width:i,height:s}=r.orig,a=r.trim;if(a){const n=a.width,o=a.height;t.minX=a.x-e._x*i,t.maxX=t.minX+n,t.minY=a.y-e._y*s,t.maxY=t.minY+o}else t.minX=-e._x*i,t.maxX=t.minX+i,t.minY=-e._y*s,t.maxY=t.minY+s}const qD=new Et;class un{constructor(e=1/0,r=1/0,i=-1/0,s=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=qD,this.minX=e,this.minY=r,this.maxX=i,this.maxY=s}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new lr);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=qD,this}set(e,r,i,s){this.minX=e,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,r,i,s,a){a||(a=this.matrix);const n=a.a,o=a.b,u=a.c,c=a.d,f=a.tx,h=a.ty;let p=this.minX,g=this.minY,m=this.maxX,T=this.maxY,x=n*e+u*r+f,v=o*e+c*r+h;x<p&&(p=x),v<g&&(g=v),x>m&&(m=x),v>T&&(T=v),x=n*i+u*r+f,v=o*i+c*r+h,x<p&&(p=x),v<g&&(g=v),x>m&&(m=x),v>T&&(T=v),x=n*e+u*s+f,v=o*e+c*s+h,x<p&&(p=x),v<g&&(g=v),x>m&&(m=x),v>T&&(T=v),x=n*i+u*s+f,v=o*i+c*s+h,x<p&&(p=x),v<g&&(g=v),x>m&&(m=x),v>T&&(T=v),this.minX=p,this.minY=g,this.maxX=m,this.maxY=T}addRect(e,r){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,r)}addBounds(e,r){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,r)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const r=this.minX,i=this.minY,s=this.maxX,a=this.maxY,{a:n,b:o,c:u,d:c,tx:f,ty:h}=e;let p=n*r+u*i+f,g=o*r+c*i+h;this.minX=p,this.minY=g,this.maxX=p,this.maxY=g,p=n*s+u*i+f,g=o*s+c*i+h,this.minX=p<this.minX?p:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=p>this.maxX?p:this.maxX,this.maxY=g>this.maxY?g:this.maxY,p=n*r+u*a+f,g=o*r+c*a+h,this.minX=p<this.minX?p:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=p>this.maxX?p:this.maxX,this.maxY=g>this.maxY?g:this.maxY,p=n*s+u*a+f,g=o*s+c*a+h,this.minX=p<this.minX?p:this.minX,this.minY=g<this.minY?g:this.minY,this.maxX=p>this.maxX?p:this.maxX,this.maxY=g>this.maxY?g:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,r,i,s){return this.minX<e&&(this.minX=e),this.maxX>r&&(this.maxX=r),this.minY<i&&(this.minY=i),this.maxY>s&&(this.maxY=s),this}pad(e,r=e){return this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new un(this.minX,this.minY,this.maxX,this.maxY)}scale(e,r=e){return this.minX*=e,this.minY*=r,this.maxX*=e,this.maxY*=r,this}get x(){return this.minX}set x(e){const r=this.maxX-this.minX;this.minX=e,this.maxX=e+r}get y(){return this.minY}set y(e){const r=this.maxY-this.minY;this.minY=e,this.maxY=e+r}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,r,i,s){let a=this.minX,n=this.minY,o=this.maxX,u=this.maxY;s||(s=this.matrix);const c=s.a,f=s.b,h=s.c,p=s.d,g=s.tx,m=s.ty;for(let T=r;T<i;T+=2){const x=e[T],v=e[T+1],y=c*x+h*v+g,R=f*x+p*v+m;a=y<a?y:a,n=R<n?R:n,o=y>o?y:o,u=R>u?R:u}this.minX=a,this.minY=n,this.maxX=o,this.maxY=u}containsPoint(e,r){return this.minX<=e&&this.minY<=r&&this.maxX>=e&&this.maxY>=r}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var pfe={grad:.9,turn:360,rad:360/(2*Math.PI)},js=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},hn=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},Gi=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},P8=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},XD=function(t){return{r:Gi(t.r,0,255),g:Gi(t.g,0,255),b:Gi(t.b,0,255),a:Gi(t.a)}},yE=function(t){return{r:hn(t.r),g:hn(t.g),b:hn(t.b),a:hn(t.a,3)}},gfe=/^#([0-9a-f]{3,8})$/i,_h=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},O8=function(t){var e=t.r,r=t.g,i=t.b,s=t.a,a=Math.max(e,r,i),n=a-Math.min(e,r,i),o=n?a===e?(r-i)/n:a===r?2+(i-e)/n:4+(e-r)/n:0;return{h:60*(o<0?o+6:o),s:a?n/a*100:0,v:a/255*100,a:s}},D8=function(t){var e=t.h,r=t.s,i=t.v,s=t.a;e=e/360*6,r/=100,i/=100;var a=Math.floor(e),n=i*(1-r),o=i*(1-(e-a)*r),u=i*(1-(1-e+a)*r),c=a%6;return{r:255*[i,o,n,n,u,i][c],g:255*[u,i,i,o,n,n][c],b:255*[n,n,u,i,i,o][c],a:s}},zD=function(t){return{h:P8(t.h),s:Gi(t.s,0,100),l:Gi(t.l,0,100),a:Gi(t.a)}},WD=function(t){return{h:hn(t.h),s:hn(t.s),l:hn(t.l),a:hn(t.a,3)}},jD=function(t){return D8((r=(e=t).s,{h:e.h,s:(r*=((i=e.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:e.a}));var e,r,i},gc=function(t){return{h:(e=O8(t)).h,s:(s=(200-(r=e.s))*(i=e.v)/100)>0&&s<200?r*i/100/(s<=100?s:200-s)*100:0,l:s/2,a:e.a};var e,r,i,s},mfe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_fe=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bfe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xfe=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,qy={string:[[function(t){var e=gfe.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?hn(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?hn(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=bfe.exec(t)||xfe.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:XD({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=mfe.exec(t)||_fe.exec(t);if(!e)return null;var r,i,s=zD({h:(r=e[1],i=e[2],i===void 0&&(i="deg"),Number(r)*(pfe[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return jD(s)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,i=t.b,s=t.a,a=s===void 0?1:s;return js(e)&&js(r)&&js(i)?XD({r:Number(e),g:Number(r),b:Number(i),a:Number(a)}):null},"rgb"],[function(t){var e=t.h,r=t.s,i=t.l,s=t.a,a=s===void 0?1:s;if(!js(e)||!js(r)||!js(i))return null;var n=zD({h:Number(e),s:Number(r),l:Number(i),a:Number(a)});return jD(n)},"hsl"],[function(t){var e=t.h,r=t.s,i=t.v,s=t.a,a=s===void 0?1:s;if(!js(e)||!js(r)||!js(i))return null;var n=function(o){return{h:P8(o.h),s:Gi(o.s,0,100),v:Gi(o.v,0,100),a:Gi(o.a)}}({h:Number(e),s:Number(r),v:Number(i),a:Number(a)});return D8(n)},"hsv"]]},YD=function(t,e){for(var r=0;r<e.length;r++){var i=e[r][0](t);if(i)return[i,e[r][1]]}return[null,void 0]},vfe=function(t){return typeof t=="string"?YD(t.trim(),qy.string):typeof t=="object"&&t!==null?YD(t,qy.object):[null,void 0]},TE=function(t,e){var r=gc(t);return{h:r.h,s:Gi(r.s+100*e,0,100),l:r.l,a:r.a}},AE=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},ZD=function(t,e){var r=gc(t);return{h:r.h,s:r.s,l:Gi(r.l+100*e,0,100),a:r.a}},Xy=function(){function t(e){this.parsed=vfe(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return hn(AE(this.rgba),2)},t.prototype.isDark=function(){return AE(this.rgba)<.5},t.prototype.isLight=function(){return AE(this.rgba)>=.5},t.prototype.toHex=function(){return e=yE(this.rgba),r=e.r,i=e.g,s=e.b,n=(a=e.a)<1?_h(hn(255*a)):"","#"+_h(r)+_h(i)+_h(s)+n;var e,r,i,s,a,n},t.prototype.toRgb=function(){return yE(this.rgba)},t.prototype.toRgbString=function(){return e=yE(this.rgba),r=e.r,i=e.g,s=e.b,(a=e.a)<1?"rgba("+r+", "+i+", "+s+", "+a+")":"rgb("+r+", "+i+", "+s+")";var e,r,i,s,a},t.prototype.toHsl=function(){return WD(gc(this.rgba))},t.prototype.toHslString=function(){return e=WD(gc(this.rgba)),r=e.h,i=e.s,s=e.l,(a=e.a)<1?"hsla("+r+", "+i+"%, "+s+"%, "+a+")":"hsl("+r+", "+i+"%, "+s+"%)";var e,r,i,s,a},t.prototype.toHsv=function(){return e=O8(this.rgba),{h:hn(e.h),s:hn(e.s),v:hn(e.v),a:hn(e.a,3)};var e},t.prototype.invert=function(){return bs({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),bs(TE(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),bs(TE(this.rgba,-e))},t.prototype.grayscale=function(){return bs(TE(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),bs(ZD(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),bs(ZD(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?bs({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):hn(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=gc(this.rgba);return typeof e=="number"?bs({h:e,s:r.s,l:r.l,a:r.a}):hn(r.h)},t.prototype.isEqual=function(e){return this.toHex()===bs(e).toHex()},t}(),bs=function(t){return t instanceof Xy?t:new Xy(t)},QD=[],Efe=function(t){t.forEach(function(e){QD.indexOf(e)<0&&(e(Xy,qy),QD.push(e))})};function yfe(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var s in r)i[r[s]]=s;var a={};t.prototype.toName=function(n){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var o,u,c=i[this.toHex()];if(c)return c;if(n!=null&&n.closest){var f=this.toRgb(),h=1/0,p="black";if(!a.length)for(var g in r)a[g]=new t(r[g]).toRgb();for(var m in r){var T=(o=f,u=a[m],Math.pow(o.r-u.r,2)+Math.pow(o.g-u.g,2)+Math.pow(o.b-u.b,2));T<h&&(h=T,p=m)}return p}},e.string.push([function(n){var o=n.toLowerCase(),u=o==="transparent"?"#0000":r[o];return u?new t(u).toRgb():null},"name"])}Efe([yfe]);const Qu=class ec{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof ec)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,r){const i=typeof e;if(i!==typeof r)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((a,n)=>a===r[n]);if(e!==null&&r!==null){const a=Object.keys(e),n=Object.keys(r);return a.length!==n.length?!1:a.every(o=>e[o]===r[o])}return e===r}toRgba(){const[e,r,i,s]=this._components;return{r:e,g:r,b:i,a:s}}toRgb(){const[e,r,i]=this._components;return{r:e,g:r,b:i}}toRgbaString(){const[e,r,i]=this.toUint8RgbArray();return`rgba(${e},${r},${i},${this.alpha})`}toUint8RgbArray(e){const[r,i,s]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(r*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[r,i,s,a]=this._components;return e[0]=r,e[1]=i,e[2]=s,e[3]=a,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[r,i,s]=this._components;return e[0]=r,e[1]=i,e[2]=s,e}toNumber(){return this._int}toBgrNumber(){const[e,r,i]=this.toUint8RgbArray();return(i<<16)+(r<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,i,s,a]=ec._temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=i,this._components[2]*=s,this._components[3]*=a,this._refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let i=this._int>>16&255,s=this._int>>8&255,a=this._int&255;return r&&(i=i*e+.5|0,s=s*e+.5|0,a=a*e+.5|0),(e*255<<24)+(i<<16)+(s<<8)+a}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const r=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-r.length)+r}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let r,i,s,a;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const n=e;r=(n>>16&255)/255,i=(n>>8&255)/255,s=(n&255)/255,a=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,i,s,a=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,i,s,a=255]=e,r/=255,i/=255,s/=255,a/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const o=ec.HEX_PATTERN.exec(e);o&&(e=`#${o[2]}`)}const n=bs(e);n.isValid()&&({r,g:i,b:s,a}=n.rgba,r/=255,i/=255,s/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=i,this._components[2]=s,this._components[3]=a,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,r,i]=this._components;this._int=(e*255<<16)+(r*255<<8)+(i*255|0)}_clamp(e,r=0,i=1){return typeof e=="number"?Math.min(Math.max(e,r),i):(e.forEach((s,a)=>{e[a]=Math.min(Math.max(s,r),i)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof ec||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Qu.shared=new Qu;Qu._temp=new Qu;Qu.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let qt=Qu;const k8={cullArea:null,cullable:!1,cullableChildren:!0};let SE=0;const JD=500;function Rt(...t){SE!==JD&&(SE++,SE===JD?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}class bp{constructor(e,r){this._pool=[],this._count=0,this._index=0,this._classType=e,r&&this.prepopulate(r)}prepopulate(e){for(let r=0;r<e;r++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var i;let r;return this._index>0?r=this._pool[--this._index]:r=new this._classType,(i=r.init)==null||i.call(r,e),r}return(e){var r;(r=e.reset)==null||r.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class U8{constructor(){this._poolsByClass=new Map}prepopulate(e,r){this.getPool(e).prepopulate(r)}get(e,r){return this.getPool(e).get(r)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new bp(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(r=>{const i=e[r._classType.name]?r._classType.name+r._classType.ID:r._classType.name;e[i]={free:r.totalFree,used:r.totalUsed,size:r.totalSize}}),e}}const gn=new U8,M8={get isCachedAsTexture(){var t;return!!((t=this.renderGroup)!=null&&t.isCachedAsTexture)},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){var t;(t=this.renderGroup)==null||t.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){vt("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};function mA(t,e,r){const i=t.length;let s;if(e>=i||r===0)return;r=e+r>i?i-e:r;const a=i-r;for(s=e;s<a;++s)t[s]=t[s+r];t.length=a}const N8={allowChildren:!0,removeChildren(t=0,e){var a;const r=e??this.children.length,i=r-t,s=[];if(i>0&&i<=r){for(let o=r-1;o>=t;o--){const u=this.children[o];u&&(s.push(u),u.parent=null)}mA(this.children,t,r);const n=this.renderGroup||this.parentRenderGroup;n&&n.removeChildren(s);for(let o=0;o<s.length;++o){const u=s[o];(a=u.parentRenderLayer)==null||a.detach(u),this.emit("childRemoved",u,this,o),s[o].emit("removed",this)}return s.length>0&&this._didViewChangeTick++,s}else if(i===0&&this.children.length===0)return s;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||vt(Gt,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:r}=this;if(e<0||e>r.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${r.length}`);if(t.parent){const s=t.parent.children.indexOf(t);if(t.parent===this&&s===e)return t;s!==-1&&t.parent.children.splice(s,1)}e===r.length?r.push(t):r.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const i=this.renderGroup||this.parentRenderGroup;return i&&i.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const r=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const i=this.worldTransform.clone();return i.invert(),r.prepend(i),t.setFromMatrix(r),t},replaceChild(t,e){t.updateLocalTransform(),this.addChildAt(e,this.getChildIndex(t)),e.setFromMatrix(t.localTransform),e.updateLocalTransform(),this.removeChild(t)}},F8={collectRenderables(t,e,r){this.parentRenderLayer&&this.parentRenderLayer!==r||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,r):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,r))},collectRenderablesSimple(t,e,r){const i=this.children,s=i.length;for(let a=0;a<s;a++)i[a].collectRenderables(t,e,r)},collectRenderablesWithEffects(t,e,r){const{renderPipes:i}=e;for(let s=0;s<this.effects.length;s++){const a=this.effects[s];i[a.pipe].push(a,this,t)}this.collectRenderablesSimple(t,e,r);for(let s=this.effects.length-1;s>=0;s--){const a=this.effects[s];i[a.pipe].pop(a,this,t)}}};class Dc{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class G8{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let r=0;r<this._tests.length;r++){const i=this._tests[r];if(i.test(e))return gn.get(i.maskClass,e)}return e}returnMaskEffect(e){gn.return(e)}}const gd=new G8;br.handleByList(pe.MaskEffect,gd._effectClasses);const K8={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((r,i)=>r.priority-i.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;(e==null?void 0:e.mask)!==t&&(e&&(this.removeEffect(e),gd.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=gd.getMaskEffect(t),this.addEffect(this._maskEffect)))},get mask(){var t;return(t=this._maskEffect)==null?void 0:t.mask},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},set filters(t){var a;!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new Dc);t=t;const r=(t==null?void 0:t.length)>0,i=((a=e.filters)==null?void 0:a.length)>0,s=r!==i;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),s&&(r?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){var t;return(t=this._filterEffect)==null?void 0:t.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new Dc),this._filterEffect.filterArea=t},get filterArea(){var t;return(t=this._filterEffect)==null?void 0:t.filterArea}},V8={label:null,get name(){return vt(Gt,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){vt(Gt,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const r=this.children;for(let i=0;i<r.length;i++){const s=r[i];if(s.label===t||t instanceof RegExp&&t.test(s.label))return s}if(e)for(let i=0;i<r.length;i++){const a=r[i].getChildByLabel(t,!0);if(a)return a}return null},getChildrenByLabel(t,e=!1,r=[]){const i=this.children;for(let s=0;s<i.length;s++){const a=i[s];(a.label===t||t instanceof RegExp&&t.test(a.label))&&r.push(a)}if(e)for(let s=0;s<i.length;s++)i[s].getChildrenByLabel(t,!0,r);return r}},Pn=new bp(Et),Rs=new bp(un),Tfe=new Et,$8={getFastGlobalBounds(t,e){e||(e=new un),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const r=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(r.worldTransform),e},_getGlobalBoundsRecursive(t,e,r){let i=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==r||this.localDisplayStatus!==7||!this.measurable)return;const s=!!this.effects.length;if((this.renderGroup||s)&&(i=Rs.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const n=this.bounds;i.addFrame(n.minX,n.minY,n.maxX,n.maxY,this.groupTransform)}const a=this.children;for(let n=0;n<a.length;n++)a[n]._getGlobalBoundsRecursive(t,i,r)}if(s){let a=!1;const n=this.renderGroup||this.parentRenderGroup;for(let o=0;o<this.effects.length;o++)this.effects[o].addBounds&&(a||(a=!0,i.applyMatrix(n.worldTransform)),this.effects[o].addBounds(i,!0));a&&(i.applyMatrix(n.worldTransform.copyTo(Tfe).invert()),e.addBounds(i,this.relativeGroupTransform)),e.addBounds(i),Rs.return(i)}else this.renderGroup&&(e.addBounds(i,this.relativeGroupTransform),Rs.return(i))}};function rf(t,e,r){r.clear();let i,s;return t.parent?e?i=t.parent.worldTransform:(s=Pn.get().identity(),i=xp(t,s)):i=Et.IDENTITY,H8(t,r,i,e),s&&Pn.return(s),r.isValid||r.set(0,0,0,0),r}function H8(t,e,r,i){var o,u;if(!t.visible||!t.measurable)return;let s;i?s=t.worldTransform:(t.updateLocalTransform(),s=Pn.get(),s.appendFrom(t.localTransform,r));const a=e,n=!!t.effects.length;if(n&&(e=Rs.get().clear()),t.boundsArea)e.addRect(t.boundsArea,s);else{t.bounds&&(e.matrix=s,e.addBounds(t.bounds));for(let c=0;c<t.children.length;c++)H8(t.children[c],e,s,i)}if(n){for(let c=0;c<t.effects.length;c++)(u=(o=t.effects[c]).addBounds)==null||u.call(o,e);a.addBounds(e,Et.IDENTITY),Rs.return(e)}i||Pn.return(s)}function xp(t,e){const r=t.parent;return r&&(xp(r,e),r.updateLocalTransform(),e.append(r.localTransform)),e}function _A(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;const r=t>>16&255,i=t>>8&255,s=t&255,a=e>>16&255,n=e>>8&255,o=e&255,u=r*a/255|0,c=i*n/255|0,f=s*o/255|0;return(u<<16)+(c<<8)+f}const ek=16777215;function kc(t,e){return t===ek?e:e===ek?t:_A(t,e)}function Nu(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}const q8={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,r=this.parent;for(;r;)e*=r.alpha,r=r.parent;return e},getGlobalTransform(t,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const r=xp(this,Pn.get().identity());return t.appendFrom(this.localTransform,r),Pn.return(r),t},getGlobalTint(t){if(t)return this.renderGroup?Nu(this.renderGroup.worldColor):this.parentRenderGroup?Nu(kc(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,r=this.parent;for(;r;)e=kc(e,r.localColor),r=r.parent;return Nu(e)}};function vp(t,e,r){return e.clear(),r||(r=Et.IDENTITY),X8(t,e,r,t,!0),e.isValid||e.set(0,0,0,0),e}function X8(t,e,r,i,s){var u,c;let a;if(s)a=Pn.get(),a=r.copyTo(a);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const f=t.localTransform;a=Pn.get(),a.appendFrom(f,r)}const n=e,o=!!t.effects.length;if(o&&(e=Rs.get().clear()),t.boundsArea)e.addRect(t.boundsArea,a);else{t.renderPipeId&&(e.matrix=a,e.addBounds(t.bounds));const f=t.children;for(let h=0;h<f.length;h++)X8(f[h],e,a,i,!1)}if(o){for(let f=0;f<t.effects.length;f++)(c=(u=t.effects[f]).addLocalBounds)==null||c.call(u,e,i);n.addBounds(e,Et.IDENTITY),Rs.return(e)}Pn.return(a)}function bA(t,e){const r=t.children;for(let i=0;i<r.length;i++){const s=r[i],a=s.uid,n=(s._didViewChangeTick&65535)<<16|s._didContainerChangeTick&65535,o=e.index;(e.data[o]!==a||e.data[o+1]!==n)&&(e.data[e.index]=a,e.data[e.index+1]=n,e.didChange=!0),e.index=o+2,s.children.length&&bA(s,e)}return e.didChange}const Afe=new Et,z8={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const r=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*r:this.scale.x=r},_setHeight(t,e){const r=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*r:this.scale.y=r},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new un});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),bA(this,t),t.didChange&&vp(this,t.localBounds,Afe),t.localBounds},getBounds(t,e){return rf(this,t,e||new un)}},W8={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},j8={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(Sfe))}};function Sfe(t,e){return t._zIndex-e._zIndex}const Y8={getGlobalPosition(t=new _r,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,r=!1){const i=this.getGlobalTransform(Pn.get(),r);return e=i.apply(t,e),Pn.return(i),e},toLocal(t,e,r,i){e&&(t=e.toGlobal(t,r,i));const s=this.getGlobalTransform(Pn.get(),i);return r=s.applyInverse(t,r),Pn.return(s),r}};class xA{constructor(){this.uid=Lr("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let Rfe=0;class Z8{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this.textureStyle=new Hi(this.textureOptions)}createTexture(e,r,i){const s=new Hr({...this.textureOptions,width:e,height:r,resolution:1,antialias:i,autoGarbageCollect:!1});return new ct({source:s,label:`texturePool_${Rfe++}`})}getOptimalTexture(e,r,i=1,s){let a=Math.ceil(e*i-1e-6),n=Math.ceil(r*i-1e-6);a=Fo(a),n=Fo(n);const o=(a<<17)+(n<<1)+(s?1:0);this._texturePool[o]||(this._texturePool[o]=[]);let u=this._texturePool[o].pop();return u||(u=this.createTexture(a,n,s)),u.source._resolution=i,u.source.width=a/i,u.source.height=n/i,u.source.pixelWidth=a,u.source.pixelHeight=n,u.frame.x=0,u.frame.y=0,u.frame.width=e,u.frame.height=r,u.updateUvs(),this._poolKeyHash[u.uid]=o,u}getSameSizeTexture(e,r=!1){const i=e.source;return this.getOptimalTexture(e.width,e.height,i._resolution,r)}returnTexture(e,r=!1){const i=this._poolKeyHash[e.uid];r&&(e.source.style=this.textureStyle),this._texturePool[i].push(e)}clear(e){if(e=e!==!1,e)for(const r in this._texturePool){const i=this._texturePool[r];if(i)for(let s=0;s<i.length;s++)i[s].destroy(!0)}this._texturePool={}}}const Or=new Z8;class Q8{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new Et,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new xA,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const r=e.children;for(let i=0;i<r.length;i++){const s=r[i];s._updateFlags=15,this.addChild(s)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Or.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const r=this.childrenToUpdate[e];r.list.fill(null),r.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const r=this.renderGroupChildren.indexOf(e);r>-1&&this.renderGroupChildren.splice(r,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const r=e.children;for(let i=0;i<r.length;i++)this.addChild(r[i])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const r=e.children;for(let i=0;i<r.length;i++)this.removeChild(r[i])}removeChildren(e){for(let r=0;r<e.length;r++)this.removeChild(e[r])}onChildUpdate(e){let r=this.childrenToUpdate[e.relativeRenderGroupDepth];r||(r=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),r.list[r.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let r=0;r<this._onRenderContainers.length;r++)this._onRenderContainers[r]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const r=this.root.children;for(let i=0;i<r.length;i++)this._getChildren(r[i],e);return e}_getChildren(e,r=[]){if(r.push(e),e.renderGroup)return r;const i=e.children;for(let s=0;s<i.length;s++)this._getChildren(i[s],r);return r}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return(this._matrixDirty&1)===0?this._inverseWorldTransform:(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new Et),this._inverseWorldTransform.copyFrom(this.worldTransform).invert())}get textureOffsetInverseTransform(){return(this._matrixDirty&2)===0?this._textureOffsetInverseTransform:(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new Et),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y))}get inverseParentTextureTransform(){if((this._matrixDirty&4)===0)return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new Et),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function md(t,e,r={}){for(const i in e)!r[i]&&e[i]!==void 0&&(t[i]=e[i])}const RE=new Mr(null),bh=new Mr(null),CE=new Mr(null,1,1),xh=new Mr(null),Uc=1,Ep=2,Fu=4,Cfe=8;class Ir extends ui{constructor(e={}){var r,i;super(),this.uid=Lr("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new Et,this.relativeGroupTransform=new Et,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Mr(this,0,0),this._scale=CE,this._pivot=bh,this._origin=xh,this._skew=RE,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],md(this,e,{children:!0,parent:!0,effects:!0}),(r=e.children)==null||r.forEach(s=>this.addChild(s)),(i=e.parent)==null||i.addChild(this)}static mixin(e){vt("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),br.mixin(Ir,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||vt(Gt,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let s=0;s<e.length;s++)this.addChild(e[s]);return e[0]}const r=e[0],i=this.renderGroup||this.parentRenderGroup;return r.parent===this?(this.children.splice(this.children.indexOf(r),1),this.children.push(r),i&&(i.structureDidChange=!0),r):(r.parent&&r.parent.removeChild(r),this.children.push(r),this.sortableChildren&&(this.sortDirty=!0),r.parent=this,r.didChange=!0,r._updateFlags=15,i&&i.addChild(r),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this),this._didViewChangeTick++,r._zIndex!==0&&r.depthOfChildModified(),r)}removeChild(...e){if(e.length>1){for(let s=0;s<e.length;s++)this.removeChild(e[s]);return e[0]}const r=e[0],i=this.children.indexOf(r);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(r):this.parentRenderGroup&&this.parentRenderGroup.removeChild(r),r.parentRenderLayer&&r.parentRenderLayer.detach(r),r.parent=null,this.emit("childRemoved",r,this,i),r.emit("removed",this)),r}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=gn.get(Q8,this),this.groupTransform=Et.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),gn.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new Et),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*A8}set angle(e){this.rotation=e*S8}get pivot(){return this._pivot===bh&&(this._pivot=new Mr(this,0,0)),this._pivot}set pivot(e){this._pivot===bh&&(this._pivot=new Mr(this,0,0),this._origin!==xh&&Rt("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===RE&&(this._skew=new Mr(this,0,0)),this._skew}set skew(e){this._skew===RE&&(this._skew=new Mr(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===CE&&(this._scale=new Mr(this,1,1)),this._scale}set scale(e){this._scale===CE&&(this._scale=new Mr(this,0,0)),typeof e=="string"&&(e=parseFloat(e)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get origin(){return this._origin===xh&&(this._origin=new Mr(this,0,0)),this._origin}set origin(e){this._origin===xh&&(this._origin=new Mr(this,0,0),this._pivot!==bh&&Rt("Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.")),typeof e=="number"?this._origin.set(e):this._origin.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const r=this.getLocalBounds().width;this._setWidth(e,r)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const r=this.getLocalBounds().height;this._setHeight(e,r)}getSize(e){e||(e={});const r=this.getLocalBounds();return e.width=Math.abs(this.scale.x*r.width),e.height=Math.abs(this.scale.y*r.height),e}setSize(e,r){const i=this.getLocalBounds();typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,i.width),r!==void 0&&this._setHeight(r,i.height)}_updateSkew(){const e=this._rotation,r=this._skew;this._cx=Math.cos(e+r._y),this._sx=Math.sin(e+r._y),this._cy=-Math.sin(e-r._x),this._sy=Math.cos(e-r._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this.origin.set(typeof e.originX=="number"?e.originX:this.origin.x,typeof e.originY=="number"?e.originY:this.origin.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const r=this.localTransform,i=this._scale,s=this._pivot,a=this._origin,n=this._position,o=i._x,u=i._y,c=s._x,f=s._y,h=-a._x,p=-a._y;r.a=this._cx*o,r.b=this._sx*o,r.c=this._cy*u,r.d=this._sy*u,r.tx=n._x-(c*r.a+f*r.c)+(h*r.a+p*r.c)-h*o,r.ty=n._y-(c*r.b+f*r.d)+(h*r.b+p*r.d)-p*u}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=Uc,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const i=qt.shared.setValue(e??16777215).toBgrNumber();i!==this.localColor&&(this.localColor=i,this._updateFlags|=Uc,this._onUpdate())}get tint(){return Nu(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Ep,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const r=e?2:0;(this.localDisplayStatus&2)!==r&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Fu,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const r=e?0:4;(this.localDisplayStatus&4)!==r&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Fu,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const r=e?1:0;(this.localDisplayStatus&1)!==r&&(this._updateFlags|=Fu,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var s;if(this.destroyed)return;this.destroyed=!0;let r;if(this.children.length&&(r=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._origin=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&r)for(let a=0;a<r.length;++a)r[a].destroy(e);(s=this.renderGroup)==null||s.destroy(),this.renderGroup=null}}br.mixin(Ir,N8,$8,Y8,W8,z8,K8,V8,j8,k8,M8,q8,F8);class Bs extends Ir{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._gpuData=Object.create(null),this._bounds=new un(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const r=this.bounds,{x:i,y:s}=e;return i>=r.minX&&i<=r.maxX&&s>=r.minY&&s<=r.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){var r,i;super.destroy(e),this._bounds=null;for(const s in this._gpuData)(i=(r=this._gpuData[s]).destroy)==null||i.call(r);this._gpuData=null}collectRenderablesSimple(e,r,i){const{renderPipes:s}=r;s.blendMode.setBlendMode(this,this.groupBlendMode,e),s[this.renderPipeId].addRenderable(this,e),this.didViewUpdate=!1;const n=this.children,o=n.length;for(let u=0;u<o;u++)n[u].collectRenderables(e,r,i)}}class An extends Bs{constructor(e=ct.EMPTY){e instanceof ct&&(e={texture:e});const{texture:r=ct.EMPTY,anchor:i,roundPixels:s,width:a,height:n,...o}=e;super({label:"Sprite",...o}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Mr({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:r.defaultAnchor&&(this.anchor=r.defaultAnchor),this.texture=r,this.allowChildren=!1,this.roundPixels=s??!1,a!==void 0&&(this.width=a),n!==void 0&&(this.height=n)}static from(e,r=!1){return e instanceof ct?new An(e):new An(ct.from(e,r))}set texture(e){e||(e=ct.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return gA(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return vt("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,r=this._texture,i=this._bounds,{width:s,height:a}=r.orig;i.minX=-e._x*s,i.maxX=i.minX+s,i.minY=-e._y*a,i.maxY=i.minY+a}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null,this._gpuData=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,r){typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),r!==void 0&&this._setHeight(r,this._texture.orig.height)}}const wfe=new un;function yp(t,e,r){const i=wfe;t.measurable=!0,rf(t,r,i),e.addBoundsMask(i),t.measurable=!1}function Tp(t,e,r){const i=Rs.get();t.measurable=!0;const s=Pn.get().identity(),a=J8(t,r,s);vp(t,i,a),t.measurable=!1,e.addBoundsMask(i),Pn.return(s),Rs.return(i)}function J8(t,e,r){return t?(t!==e&&(J8(t.parent,e,r),t.updateLocalTransform(),r.append(t.localTransform)),r):(Rt("Mask bounds, renderable is not inside the root container"),r)}class vA{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof An),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,r){this.inverse||yp(this.mask,e,r)}addLocalBounds(e,r){Tp(this.mask,e,r)}containsPoint(e,r){const i=this.mask;return r(i,e)}destroy(){this.reset()}static test(e){return e instanceof An}}vA.extension=pe.MaskEffect;class EA{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}EA.extension=pe.MaskEffect;class yA{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,r){yp(this.mask,e,r)}addLocalBounds(e,r){Tp(this.mask,e,r)}containsPoint(e,r){const i=this.mask;return r(i,e)}destroy(){this.reset()}static test(e){return e instanceof Ir}}yA.extension=pe.MaskEffect;const e5={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")};let tk=e5;const Qt={get(){return tk},set(t){tk=t}};class Cs extends Hr{constructor(e){e.resource||(e.resource=Qt.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,r=this.height,i=this._resolution){const s=super.resize(e,r,i);return s&&this.resizeCanvas(),s}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}Cs.extension=pe.TextureSource;class Va extends Hr{constructor(e){super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}Va.extension=pe.TextureSource;var oa=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(oa||{});class Xh{constructor(e,r=null,i=0,s=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=r,this.priority=i,this._once=s}match(e,r=null){return this._fn===e&&this._context===r}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const r=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const t5=class _i{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Xh(null,null,1/0),this.deltaMS=1/_i.targetFPMS,this.elapsedMS=1/_i.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,i=oa.NORMAL){return this._addListener(new Xh(e,r,i))}addOnce(e,r,i=oa.NORMAL){return this._addListener(new Xh(e,r,i,!0))}_addListener(e){let r=this._head.next,i=this._head;if(!r)e.connect(i);else{for(;r;){if(e.priority>r.priority){e.connect(i);break}i=r,r=r.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,r){let i=this._head.next;for(;i;)i.match(e,r)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const a=e-this._lastFrame|0;if(a<this._minElapsedMS)return;this._lastFrame=e-a%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*_i.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,r)/1e3,_i.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!_i._shared){const e=_i._shared=new _i;e.autoStart=!0,e._protected=!0}return _i._shared}static get system(){if(!_i._system){const e=_i._system=new _i;e.autoStart=!0,e._protected=!0}return _i._system}};t5.targetFPMS=.06;let Sn=t5,wE;async function TA(){return wE??(wE=(async()=>{var n;const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const r=await new Promise(o=>{const u=document.createElement("video");u.onloadeddata=()=>o(u),u.onerror=()=>o(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!r)return"premultiply-alpha-on-upload";const i=e.createTexture();e.bindTexture(e.TEXTURE_2D,i);const s=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,s),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r);const a=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,a),e.deleteFramebuffer(s),e.deleteTexture(i),(n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext(),a[0]<=a[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),wE}const Ap=class r5 extends Hr{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...r5.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=Sn.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,r=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(r.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await TA(),this._load=new Promise((i,s)=>{this.isValid?i(this):(this._resolve=i,this._reject=s,r.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${r.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(Sn.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Sn.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Sn.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Ap.extension=pe.TextureSource;Ap.defaultOptions={...Hr.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Ap.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let mc=Ap;const Fi=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(i=>typeof i=="string"||r?e(i):i):t);class Lfe{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||Rt(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const i=Fi(e);let s;for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];if(c.test(r)){s=c.getCacheableAssets(i,r);break}}const a=new Map(Object.entries(s||{}));s||i.forEach(u=>{a.set(u,r)});const n=[...a.keys()],o={cacheKeys:n,keys:i};i.forEach(u=>{this._cacheMap.set(u,o)}),n.forEach(u=>{const c=s?s[u]:r;this._cache.has(u)&&this._cache.get(u)!==c&&Rt("[Cache] already has key:",u),this._cache.set(u,a.get(u))})}remove(e){if(!this._cacheMap.has(e)){Rt(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(s=>{this._cache.delete(s)}),r.keys.forEach(s=>{this._cacheMap.delete(s)})}get parsers(){return this._parsers}}const yr=new Lfe,zy=[];br.handleByList(pe.TextureSource,zy);function Ife(t={}){return AA(t)}function AA(t={}){const e=t&&t.resource,r=e?t.resource:t,i=e?t:{resource:t};for(let s=0;s<zy.length;s++){const a=zy[s];if(a.test(r))return new a(i)}throw new Error(`Could not find a source type for resource: ${i.resource}`)}function n5(t={},e=!1){const r=t&&t.resource,i=r?t.resource:t,s=r?t:{resource:t};if(!e&&yr.has(i))return yr.get(i);const a=new ct({source:AA(s)});return a.on("destroy",()=>{yr.has(i)&&yr.remove(i)}),e||yr.set(i,a),a}function i5(t,e=!1){return typeof t=="string"?yr.get(t):t instanceof Hr?new ct({source:t}):n5(t,e)}ct.from=i5;Hr.from=AA;br.add(vA,EA,yA,mc,Va,Cs,_p);var Ai=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Ai||{});function ts(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Nl(t){return t.split("?")[0].split("#")[0]}function Bfe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Pfe(t,e,r){return t.replace(new RegExp(Bfe(e),"g"),r)}function Ofe(t,e){let r="",i=0,s=-1,a=0,n=-1;for(let o=0;o<=t.length;++o){if(o<t.length)n=t.charCodeAt(o);else{if(n===47)break;n=47}if(n===47){if(!(s===o-1||a===1))if(s!==o-1&&a===2){if(r.length<2||i!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",i=0):(r=r.slice(0,u),i=r.length-1-r.lastIndexOf("/")),s=o,a=0;continue}}else if(r.length===2||r.length===1){r="",i=0,s=o,a=0;continue}}}else r.length>0?r+=`/${t.slice(s+1,o)}`:r=t.slice(s+1,o),i=o-s-1;s=o,a=0}else n===46&&a!==-1?++a:a=-1}return r}const ti={toPosix(t){return Pfe(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){ts(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(ts(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const i=Nl(this.toPosix(e??Qt.get().getBaseUrl())),s=Nl(this.toPosix(r??this.rootname(i)));return t=this.toPosix(t),t.startsWith("/")?ti.join(s,t.slice(1)):this.isAbsolute(t)?t:this.join(i,t)},normalize(t){if(ts(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const i=t.endsWith("/");return t=Ofe(t),t.length>0&&i&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return ts(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const i=t[r];if(ts(i),i.length>0)if(e===void 0)e=i;else{const s=t[r-1]??"";this.joinExtensions.includes(this.extname(s).toLowerCase())?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(ts(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let i=-1,s=!0;const a=this.getProtocol(t),n=t;t=t.slice(a.length);for(let o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),e===47){if(!s){i=o;break}}else s=!1;return i===-1?r?"/":this.isUrl(n)?a+t:a:r&&i===1?"//":a+t.slice(0,i)},rootname(t){ts(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){ts(t),e&&ts(e),t=Nl(this.toPosix(t));let r=0,i=-1,s=!0,a;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let n=e.length-1,o=-1;for(a=t.length-1;a>=0;--a){const u=t.charCodeAt(a);if(u===47){if(!s){r=a+1;break}}else o===-1&&(s=!1,o=a+1),n>=0&&(u===e.charCodeAt(n)?--n===-1&&(i=a):(n=-1,i=o))}return r===i?i=o:i===-1&&(i=t.length),t.slice(r,i)}for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!s){r=a+1;break}}else i===-1&&(s=!1,i=a+1);return i===-1?"":t.slice(r,i)},extname(t){ts(t),t=Nl(this.toPosix(t));let e=-1,r=0,i=-1,s=!0,a=0;for(let n=t.length-1;n>=0;--n){const o=t.charCodeAt(n);if(o===47){if(!s){r=n+1;break}continue}i===-1&&(s=!1,i=n+1),o===46?e===-1?e=n:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||i===-1||a===0||a===1&&e===i-1&&e===r+1?"":t.slice(e,i)},parse(t){ts(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Nl(this.toPosix(t));let r=t.charCodeAt(0);const i=this.isAbsolute(t);let s;e.root=this.rootname(t),i||this.hasProtocol(t)?s=1:s=0;let a=-1,n=0,o=-1,u=!0,c=t.length-1,f=0;for(;c>=s;--c){if(r=t.charCodeAt(c),r===47){if(!u){n=c+1;break}continue}o===-1&&(u=!1,o=c+1),r===46?a===-1?a=c:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||o===-1||f===0||f===1&&a===o-1&&a===n+1?o!==-1&&(n===0&&i?e.base=e.name=t.slice(1,o):e.base=e.name=t.slice(n,o)):(n===0&&i?(e.name=t.slice(1,a),e.base=t.slice(1,o)):(e.name=t.slice(n,a),e.base=t.slice(n,o)),e.ext=t.slice(a,o)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function s5(t,e,r,i,s){const a=e[r];for(let n=0;n<a.length;n++){const o=a[n];r<e.length-1?s5(t.replace(i[r],o),e,r+1,i,s):s.push(t.replace(i[r],o))}}function a5(t){const e=/\{(.*?)\}/g,r=t.match(e),i=[];if(r){const s=[];r.forEach(a=>{const n=a.substring(1,a.length-1).split(",");s.push(n)}),s5(t,s,0,r,i)}else i.push(t);return i}const Mc=t=>!Array.isArray(t);class Ja{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(r[i])}`).join("&")}}getAlias(e){const{alias:r,src:i}=e;return Fi(r||i,a=>typeof a=="string"?a:Array.isArray(a)?a.map(n=>(n==null?void 0:n.src)??n):a!=null&&a.src?a.src:a,!0)}addManifest(e){this._manifest&&Rt("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const i=[];let s=r;Array.isArray(r)||(s=Object.entries(r).map(([a,n])=>typeof n=="string"||Array.isArray(n)?{alias:a,src:n}:{alias:a,...n})),s.forEach(a=>{const n=a.src,o=a.alias;let u;if(typeof o=="string"){const c=this._createBundleAssetId(e,o);i.push(c),u=[o,c]}else{const c=o.map(f=>this._createBundleAssetId(e,f));i.push(...c),u=[...o,...c]}this.add({...a,alias:u,src:n})}),this._bundles[e]=i}add(e){const r=[];Array.isArray(e)?r.push(...e):r.push(e);let i;i=a=>{this.hasKey(a)&&Rt(`[Resolver] already has key: ${a} overwriting`)},Fi(r).forEach(a=>{const{src:n}=a;let{data:o,format:u,loadParser:c}=a;const f=Fi(n).map(g=>typeof g=="string"?a5(g):Array.isArray(g)?g:[g]),h=this.getAlias(a);Array.isArray(h)?h.forEach(i):i(h);const p=[];f.forEach(g=>{g.forEach(m=>{let T={};if(typeof m!="object"){T.src=m;for(let x=0;x<this._parsers.length;x++){const v=this._parsers[x];if(v.test(m)){T=v.parse(m);break}}}else o=m.data??o,u=m.format??u,c=m.loadParser??c,T={...T,...m};if(!h)throw new Error(`[Resolver] alias is undefined for this asset: ${T.src}`);T=this._buildResolvedAsset(T,{aliases:h,data:o,format:u,loadParser:c}),p.push(T)})}),h.forEach(g=>{this._assetMap[g]=p})})}resolveBundle(e){const r=Mc(e);e=Fi(e);const i={};return e.forEach(s=>{const a=this._bundles[s];if(a){const n=this.resolve(a),o={};for(const u in n){const c=n[u];o[this._extractAssetIdFromBundle(s,u)]=c}i[s]=o}}),r?i[e[0]]:i}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const i={};for(const s in r)i[s]=r[s].src;return i}return r.src}resolve(e){const r=Mc(e);e=Fi(e);const i={};return e.forEach(s=>{if(!this._resolverHash[s])if(this._assetMap[s]){let a=this._assetMap[s];const n=this._getPreferredOrder(a);n==null||n.priority.forEach(o=>{n.params[o].forEach(u=>{const c=a.filter(f=>f[o]?f[o]===u:!1);c.length&&(a=c)})}),this._resolverHash[s]=a[0]}else this._resolverHash[s]=this._buildResolvedAsset({alias:[s],src:s},{});i[s]=this._resolverHash[s]}),r?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const i=e[r],s=this._preferredOrder.find(a=>a.params.format.includes(i.format));if(s)return s}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}_buildResolvedAsset(e,r){const{aliases:i,data:s,loadParser:a,format:n}=r;return(this._basePath||this._rootPath)&&(e.src=ti.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=i??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...s||{},...e.data},e.loadParser=a??e.loadParser,e.format=n??e.format??o5(e.src),e}}Ja.RETINA_PREFIX=/@([0-9\.]+)x/;function o5(t){return t.split(".").pop().split("?").shift().split("#").shift()}const _d=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t},u5=class tc{constructor(e,r){this.linkedSheets=[];let i=e;(e==null?void 0:e.source)instanceof Hr&&(i={texture:e,data:r});const{texture:s,data:a,cachePrefix:n=""}=i;this.cachePrefix=n,this._texture=s instanceof ct?s:null,this.textureSource=s.source,this.textures={},this.animations={},this.data=a;const o=parseFloat(a.meta.scale);o?(this.resolution=o,s.source.resolution=this.resolution):this.resolution=s.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=tc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const i=tc.BATCH_SIZE;for(;r-e<i&&r<this._frameKeys.length;){const s=this._frameKeys[r],a=this._frames[s],n=a.frame;if(n){let o=null,u=null;const c=a.trimmed!==!1&&a.sourceSize?a.sourceSize:a.frame,f=new lr(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);a.rotated?o=new lr(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.h)/this.resolution,Math.floor(n.w)/this.resolution):o=new lr(Math.floor(n.x)/this.resolution,Math.floor(n.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution),a.trimmed!==!1&&a.spriteSourceSize&&(u=new lr(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(n.w)/this.resolution,Math.floor(n.h)/this.resolution)),this.textures[s]=new ct({source:this.textureSource,frame:o,orig:f,trim:u,rotate:a.rotated?2:0,defaultAnchor:a.anchor,defaultBorders:a.borders,label:s.toString()})}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let i=0;i<e[r].length;i++){const s=e[r][i];this.animations[r].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*tc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*tc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var r;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)==null||r.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};u5.BATCH_SIZE=1e3;let Nc=u5;const Dfe=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function l5(t,e,r){const i={};if(t.forEach(s=>{i[s]=e}),Object.keys(e.textures).forEach(s=>{i[`${e.cachePrefix}${s}`]=e.textures[s]}),!r){const s=ti.dirname(t[0]);e.linkedSheets.forEach((a,n)=>{const o=l5([`${s}/${e.data.meta.related_multi_packs[n]}`],a,!0);Object.assign(i,o)})}return i}const c5={extension:pe.Asset,cache:{test:t=>t instanceof Nc,getCacheableAssets:(t,e)=>l5(t,e,!1)},resolver:{extension:{type:pe.ResolveParser,name:"resolveSpritesheet"},test:t=>{const r=t.split("?")[0].split("."),i=r.pop(),s=r.pop();return i==="json"&&Dfe.includes(s)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=Ja.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:pe.LoadParser,priority:Ai.Normal,name:"spritesheetLoader"},async testParse(t,e){return ti.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var h,p;const{texture:i,imageFilename:s,textureOptions:a,cachePrefix:n}=(e==null?void 0:e.data)??{};let o=ti.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let u;if(i instanceof ct)u=i;else{const g=_d(o+(s??t.meta.image),e.src);u=(await r.load([{src:g,data:a}]))[g]}const c=new Nc({texture:u.source,data:t,cachePrefix:n});await c.parse();const f=(h=t==null?void 0:t.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(f)){const g=[];for(const T of f){if(typeof T!="string")continue;let x=o+T;(p=e.data)!=null&&p.ignoreMultiPack||(x=_d(x,e.src),g.push(r.load({src:x,data:{textureOptions:a,ignoreMultiPack:!0}})))}const m=await Promise.all(g);c.linkedSheets=m,m.forEach(T=>{T.linkedSheets=[c].concat(c.linkedSheets.filter(x=>x!==T))})}return c},async unload(t,e,r){await r.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};br.add(c5);class ll{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=ll.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new _r,this.page=new _r,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,i,s,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var LE=/iPhone/i,rk=/iPod/i,nk=/iPad/i,ik=/\biOS-universal(?:.+)Mac\b/i,IE=/\bAndroid(?:.+)Mobile\b/i,sk=/Android/i,du=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,vh=/Silk/i,Ys=/Windows Phone/i,ak=/\bWindows(?:.+)ARM\b/i,ok=/BlackBerry/i,uk=/BB10/i,lk=/Opera Mini/i,ck=/\b(CriOS|Chrome)(?:.+)Mobile/i,fk=/Mobile(?:.+)Firefox\b/i,hk=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function kfe(t){return function(e){return e.test(t)}}function dk(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,i=r.split("[FBAN");typeof i[1]<"u"&&(r=i[0]),i=r.split("Twitter"),typeof i[1]<"u"&&(r=i[0]);var s=kfe(r),a={apple:{phone:s(LE)&&!s(Ys),ipod:s(rk),tablet:!s(LE)&&(s(nk)||hk(e))&&!s(Ys),universal:s(ik),device:(s(LE)||s(rk)||s(nk)||s(ik)||hk(e))&&!s(Ys)},amazon:{phone:s(du),tablet:!s(du)&&s(vh),device:s(du)||s(vh)},android:{phone:!s(Ys)&&s(du)||!s(Ys)&&s(IE),tablet:!s(Ys)&&!s(du)&&!s(IE)&&(s(vh)||s(sk)),device:!s(Ys)&&(s(du)||s(vh)||s(IE)||s(sk))||s(/\bokhttp\b/i)},windows:{phone:s(Ys),tablet:s(ak),device:s(Ys)||s(ak)},other:{blackberry:s(ok),blackberry10:s(uk),opera:s(lk),firefox:s(fk),chrome:s(ck),device:s(ok)||s(uk)||s(lk)||s(fk)||s(ck)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const Ufe=dk.default??dk,f5=Ufe(globalThis.navigator),Mfe=9,Eh=100,Nfe=0,Ffe=0,pk=2,gk=1,Gfe=-1e3,Kfe=-1e3,Vfe=2,SA=class h5{constructor(e,r=f5){this._mobileInfo=r,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(r.tablet||r.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){const e=document.createElement("button");e.style.width=`${gk}px`,e.style.height=`${gk}px`,e.style.position="absolute",e.style.top=`${Gfe}px`,e.style.left=`${Kfe}px`,e.style.zIndex=Vfe.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${Eh}px`,this._div.style.height=`${Eh}px`,this._div.style.position="absolute",this._div.style.top=`${Nfe}px`,this._div.style.left=`${Ffe}px`,this._div.style.zIndex=pk.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));const e=this._renderer.view.canvas;if(e.parentNode)e.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{const r=new MutationObserver(()=>{e.parentNode&&(e.parentNode.appendChild(this._div),r.disconnect(),this._initAccessibilitySetup())});r.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);const r=e.children;if(r)for(let i=0;i<r.length;i++)this._updateAccessibleObjects(r[i])}init(e){const i={accessibilityOptions:{...h5.defaultOptions,...(e==null?void 0:e.accessibilityOptions)||{}}};this.debug=i.accessibilityOptions.debug,this._activateOnTab=i.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=i.accessibilityOptions.deactivateOnMouseMove,i.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){const e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;const r=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const i of this._children)i._renderId===this._renderId&&r.add(this._children.indexOf(i))}for(let i=this._children.length-1;i>=0;i--){const s=this._children[i];r.has(i)||(s._accessibleDiv&&s._accessibleDiv.parentNode&&(s._accessibleDiv.parentNode.removeChild(s._accessibleDiv),this._pool.push(s._accessibleDiv),s._accessibleDiv=null),s._accessibleActive=!1,mA(this._children,i,1))}if(this._renderer.renderingToScreen){const{x:i,y:s,width:a,height:n}=this._renderer.screen,o=this._div;o.style.left=`${i}px`,o.style.top=`${s}px`,o.style.width=`${a}px`,o.style.height=`${n}px`}for(let i=0;i<this._children.length;i++){const s=this._children[i];if(!s._accessibleActive||!s._accessibleDiv)continue;const a=s._accessibleDiv,n=s.hitArea||s.getBounds().rectangle;if(s.hitArea){const o=s.worldTransform,u=this._renderer.resolution,c=this._renderer.resolution;a.style.left=`${(o.tx+n.x*o.a)*u}px`,a.style.top=`${(o.ty+n.y*o.d)*c}px`,a.style.width=`${n.width*o.a*u}px`,a.style.height=`${n.height*o.d*c}px`}else{this._capHitArea(n);const o=this._renderer.resolution,u=this._renderer.resolution;a.style.left=`${n.x*o}px`,a.style.top=`${n.y*u}px`,a.style.width=`${n.width*o}px`,a.style.height=`${n.height*u}px`}}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:i}=this._renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>i&&(e.height=i-e.y)}_addChild(e){let r=this._pool.pop();r||(e.accessibleType==="button"?r=document.createElement("button"):(r=document.createElement(e.accessibleType),r.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(r.innerText=e.accessibleText)),r.style.width=`${Eh}px`,r.style.height=`${Eh}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=pk.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,r){const{container:i}=e.target,s=this._renderer.events.rootBoundary,a=Object.assign(new ll(s),{target:i});s.rootTarget=this._renderer.lastObjectRendered,r.forEach(n=>s.dispatchEvent(a,n))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==Mfe||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}};SA.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"accessibility"};SA.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let $fe=SA;const Hfe={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_accessibleActive:!1,_accessibleDiv:null,_renderId:-1},BE=Object.create(null),mk=Object.create(null);function Ju(t,e){let r=mk[t];return r===void 0&&(BE[e]===void 0&&(BE[e]=1),mk[t]=r=BE[e]++),r}let pu;function RA(){return(!pu||pu!=null&&pu.isContextLost())&&(pu=Qt.get().createCanvas().getContext("webgl",{})),pu}let yh;function d5(){if(!yh){yh="mediump";const t=RA();t&&t.getShaderPrecisionFormat&&(yh=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return yh}function p5(t,e,r){return e?t:r?(t=t.replace("out vec4 finalColor;",""),`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`

        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}function g5(t,e,r){const i=r?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let s=r?e.requestedFragmentPrecision:e.requestedVertexPrecision;return s==="highp"&&i!=="highp"&&(s="mediump"),`precision ${s} float;
${t}`}else if(i!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}function m5(t,e){return e?`#version 300 es
${t}`:t}const qfe={},Xfe={};function _5(t,{name:e="pixi-program"},r=!0){e=e.replace(/\s+/g,"-"),e+=r?"-fragment":"-vertex";const i=r?qfe:Xfe;return i[e]?(i[e]++,e+=`-${i[e]}`):i[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}function b5(t,e){return e?t.replace("#version 300 es",""):t}const PE={stripVersion:b5,ensurePrecision:g5,addProgramDefines:p5,setProgramName:_5,insertVersion:m5},OE=Object.create(null),x5=class Wy{constructor(e){e={...Wy.defaultOptions,...e};const r=e.fragment.indexOf("#version 300 es")!==-1,i={stripVersion:r,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:d5()},setProgramName:{name:e.name},addProgramDefines:r,insertVersion:r};let s=e.fragment,a=e.vertex;Object.keys(PE).forEach(n=>{const o=i[n];s=PE[n](s,o,!0),a=PE[n](a,o,!1)}),this.fragment=s,this.vertex=a,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Ju(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const r=`${e.vertex}:${e.fragment}`;return OE[r]||(OE[r]=new Wy(e)),OE[r]}};x5.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let _n=x5;const _k={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function ua(t){return _k[t]??_k.float32}const zfe={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function v5({source:t,entryPoint:e}){const r={},i=t.indexOf(`fn ${e}`);if(i!==-1){const s=t.indexOf("->",i);if(s!==-1){const a=t.substring(i,s),n=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let o;for(;(o=n.exec(a))!==null;){const u=zfe[o[3]]??"float32";r[o[2]]={location:parseInt(o[1],10),format:u,stride:ua(u).stride,offset:0,instance:!1,start:0}}}}return r}function zh(t){var h,p;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,r=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,s=/var(<[^>]+>)? (\w+)/,a=/:\s*(\w+)/,n=/struct\s+(\w+)\s*{([^}]+)}/g,o=/(\w+)\s*:\s*([\w\<\>]+)/g,u=/struct\s+(\w+)/,c=(h=t.match(e))==null?void 0:h.map(g=>({group:parseInt(g.match(r)[1],10),binding:parseInt(g.match(i)[1],10),name:g.match(s)[2],isUniform:g.match(s)[1]==="<uniform>",type:g.match(a)[1]}));if(!c)return{groups:[],structs:[]};const f=((p=t.match(n))==null?void 0:p.map(g=>{const m=g.match(u)[1],T=g.match(o).reduce((x,v)=>{const[y,R]=v.split(":");return x[y.trim()]=R.trim(),x},{});return T?{name:m,members:T}:null}).filter(({name:g})=>c.some(m=>m.type===g)))??[];return{groups:c,structs:f}}var Su=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(Su||{});function E5({groups:t}){const e=[];for(let r=0;r<t.length;r++){const i=t[r];e[i.group]||(e[i.group]=[]),i.isUniform?e[i.group].push({binding:i.binding,visibility:Su.VERTEX|Su.FRAGMENT,buffer:{type:"uniform"}}):i.type==="sampler"?e[i.group].push({binding:i.binding,visibility:Su.FRAGMENT,sampler:{type:"filtering"}}):i.type==="texture_2d"&&e[i.group].push({binding:i.binding,visibility:Su.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function y5({groups:t}){const e=[];for(let r=0;r<t.length;r++){const i=t[r];e[i.group]||(e[i.group]={}),e[i.group][i.name]=i.binding}return e}function T5(t,e){const r=new Set,i=new Set,s=[...t.structs,...e.structs].filter(n=>r.has(n.name)?!1:(r.add(n.name),!0)),a=[...t.groups,...e.groups].filter(n=>{const o=`${n.name}-${n.binding}`;return i.has(o)?!1:(i.add(o),!0)});return{structs:s,groups:a}}const DE=Object.create(null);class bn{constructor(e){var o,u;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:r,vertex:i,layout:s,gpuLayout:a,name:n}=e;if(this.name=n,this.fragment=r,this.vertex=i,r.source===i.source){const c=zh(r.source);this.structsAndGroups=c}else{const c=zh(i.source),f=zh(r.source);this.structsAndGroups=T5(c,f)}this.layout=s??y5(this.structsAndGroups),this.gpuLayout=a??E5(this.structsAndGroups),this.autoAssignGlobalUniforms=((o=this.layout[0])==null?void 0:o.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((u=this.layout[1])==null?void 0:u.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:r}=this,i=e.source+r.source+e.entryPoint+r.entryPoint;this._layoutKey=Ju(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=v5(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){const r=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return DE[r]||(DE[r]=new bn(e)),DE[r]}}const CA=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],A5=CA.reduce((t,e)=>(t[e]=!0,t),{});function S5(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const R5=class C5{constructor(e,r){this._touched=0,this.uid=Lr("uniform"),this._resourceType="uniformGroup",this._resourceId=Lr("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,r={...C5.defaultOptions,...r},this.uniformStructures=e;const i={};for(const s in e){const a=e[s];if(a.name=s,a.size=a.size??1,!A5[a.type])throw new Error(`Uniform type ${a.type} is not supported. Supported uniform types are: ${CA.join(", ")}`);a.value??(a.value=S5(a.type,a.size)),i[s]=a.value}this.uniforms=i,this._dirtyId=1,this.ubo=r.ubo,this.isStatic=r.isStatic,this._signature=Ju(Object.keys(i).map(s=>`${s}-${e[s].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};R5.defaultOptions={ubo:!1,isStatic:!1};let rn=R5;class ws{constructor(e){this.resources=Object.create(null),this._dirty=!0;let r=0;for(const i in e){const s=e[i];this.setResource(s,r++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let r=0;for(const i in this.resources)e[r++]=this.resources[i]._resourceId;this._key=e.join("|")}setResource(e,r){var s,a;const i=this.resources[r];e!==i&&(i&&((s=e.off)==null||s.call(e,"change",this.onResourceChange,this)),(a=e.on)==null||a.call(e,"change",this.onResourceChange,this),this.resources[r]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const r=this.resources;for(const i in r)r[i]._touched=e}destroy(){var r;const e=this.resources;for(const i in e){const s=e[i];(r=s.off)==null||r.call(s,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const r=this.resources;for(const i in r)r[i]===e&&(r[i]=null)}else this._updateKey()}}var ni=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(ni||{});class Si extends ui{constructor(e){super(),this.uid=Lr("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:r,glProgram:i,groups:s,resources:a,compatibleRenderers:n,groupMap:o}=e;this.gpuProgram=r,this.glProgram=i,n===void 0&&(n=0,r&&(n|=ni.WEBGPU),i&&(n|=ni.WEBGL)),this.compatibleRenderers=n;const u={};if(!a&&!s&&(a={}),a&&s)throw new Error("[Shader] Cannot have both resources and groups");if(!r&&s&&!o)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!r&&s&&o)for(const c in o)for(const f in o[c]){const h=o[c][f];u[h]={group:c,binding:f,name:h}}else if(r&&s&&!o){const c=r.structsAndGroups.groups;o={},c.forEach(f=>{o[f.group]=o[f.group]||{},o[f.group][f.binding]=f.name,u[f.name]=f})}else if(a){s={},o={},r&&r.structsAndGroups.groups.forEach(h=>{o[h.group]=o[h.group]||{},o[h.group][h.binding]=h.name,u[h.name]=h});let c=0;for(const f in a)u[f]||(s[99]||(s[99]=new ws,this._ownedBindGroups.push(s[99])),u[f]={group:99,binding:c,name:f},o[99]=o[99]||{},o[99][c]=f,c++);for(const f in a){const h=f;let p=a[f];!p.source&&!p._resourceType&&(p=new rn(p));const g=u[h];g&&(s[g.group]||(s[g.group]=new ws,this._ownedBindGroups.push(s[g.group])),s[g.group].setResource(p,g.binding))}}this.groups=s,this._uniformBindMap=o,this.resources=this._buildResourceAccessor(s,u)}addResource(e,r,i){var s,a;(s=this._uniformBindMap)[r]||(s[r]={}),(a=this._uniformBindMap[r])[i]||(a[i]=e),this.groups[r]||(this.groups[r]=new ws,this._ownedBindGroups.push(this.groups[r]))}_buildResourceAccessor(e,r){const i={};for(const s in r){const a=r[s];Object.defineProperty(i,a.name,{get(){return e[a.group].getResource(a.binding)},set(n){e[a.group].setResource(n,a.binding)}})}return i}destroy(e=!1){var r,i;this.emit("destroy",this),e&&((r=this.gpuProgram)==null||r.destroy(),(i=this.glProgram)==null||i.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(s=>{s.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:r,gl:i,...s}=e;let a,n;return r&&(a=bn.from(r)),i&&(n=_n.from(i)),new Si({gpuProgram:a,glProgram:n,...s})}}const Wfe={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},kE=0,UE=1,ME=2,NE=3,FE=4,GE=5,jy=class w5{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<kE)}set blend(e){!!(this.data&1<<kE)!==e&&(this.data^=1<<kE)}get offsets(){return!!(this.data&1<<UE)}set offsets(e){!!(this.data&1<<UE)!==e&&(this.data^=1<<UE)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<ME)}set culling(e){!!(this.data&1<<ME)!==e&&(this.data^=1<<ME)}get depthTest(){return!!(this.data&1<<NE)}set depthTest(e){!!(this.data&1<<NE)!==e&&(this.data^=1<<NE)}get depthMask(){return!!(this.data&1<<GE)}set depthMask(e){!!(this.data&1<<GE)!==e&&(this.data^=1<<GE)}get clockwiseFrontFace(){return!!(this.data&1<<FE)}set clockwiseFrontFace(e){!!(this.data&1<<FE)!==e&&(this.data^=1<<FE)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=Wfe[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new w5;return e.depthTest=!1,e.blend=!0,e}};jy.default2d=jy.for2d();let yi=jy;const L5=class Yy extends Si{constructor(e){e={...Yy.defaultOptions,...e},super(e),this.enabled=!0,this._state=yi.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,r,i,s){e.applyFilter(this,r,i,s)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:r,gl:i,...s}=e;let a,n;return r&&(a=bn.from(r)),i&&(n=_n.from(i)),new Yy({gpuProgram:a,glProgram:n,...s})}};L5.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let ii=L5;var I5=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,B5=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,P5=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;class Zr extends ii{constructor(e){const r=e.gpu,i=bk({source:P5,...r}),s=bn.from({vertex:{source:i,entryPoint:"mainVertex"},fragment:{source:i,entryPoint:"mainFragment"}}),a=e.gl,n=bk({source:I5,...a}),o=_n.from({vertex:B5,fragment:n}),u=new rn({uBlend:{value:1,type:"f32"}});super({gpuProgram:s,glProgram:o,blendRequired:!0,resources:{blendUniforms:u,uBackTexture:ct.EMPTY}})}}function bk(t){const{source:e,functions:r,main:i}=t;return e.replace("{FUNCTIONS}",r).replace("{MAIN}",i)}const Sp=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,Rp=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;class O5 extends Zr{constructor(){super({gl:{functions:`
                ${Sp}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Rp}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}O5.extension={name:"color",type:pe.BlendMode};class D5 extends Zr{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}D5.extension={name:"color-burn",type:pe.BlendMode};class k5 extends Zr{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}k5.extension={name:"color-dodge",type:pe.BlendMode};class U5 extends Zr{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}U5.extension={name:"darken",type:pe.BlendMode};class M5 extends Zr{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}M5.extension={name:"difference",type:pe.BlendMode};class N5 extends Zr{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}N5.extension={name:"divide",type:pe.BlendMode};class F5 extends Zr{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}F5.extension={name:"exclusion",type:pe.BlendMode};class G5 extends Zr{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}G5.extension={name:"hard-light",type:pe.BlendMode};class K5 extends Zr{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}K5.extension={name:"hard-mix",type:pe.BlendMode};class V5 extends Zr{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}V5.extension={name:"lighten",type:pe.BlendMode};class $5 extends Zr{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}$5.extension={name:"linear-burn",type:pe.BlendMode};class H5 extends Zr{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}H5.extension={name:"linear-dodge",type:pe.BlendMode};class q5 extends Zr{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}q5.extension={name:"linear-light",type:pe.BlendMode};class X5 extends Zr{constructor(){super({gl:{functions:`
                ${Sp}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Rp}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}X5.extension={name:"luminosity",type:pe.BlendMode};class z5 extends Zr{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}z5.extension={name:"negation",type:pe.BlendMode};class W5 extends Zr{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}W5.extension={name:"overlay",type:pe.BlendMode};class j5 extends Zr{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}j5.extension={name:"pin-light",type:pe.BlendMode};class Y5 extends Zr{constructor(){super({gl:{functions:`
                ${Sp}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${Rp}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}Y5.extension={name:"saturation",type:pe.BlendMode};class Z5 extends Zr{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}Z5.extension={name:"soft-light",type:pe.BlendMode};class Q5 extends Zr{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}Q5.extension={name:"subtract",type:pe.BlendMode};class J5 extends Zr{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}J5.extension={name:"vivid-light",type:pe.BlendMode};const Zy=[];br.handleByNamedList(pe.Environment,Zy);async function wA(t){if(!t)for(let e=0;e<Zy.length;e++){const r=Zy[e];if(r.value.test()){await r.value.load();return}}}async function jfe(t){return wA(!t)}let Fl;function LA(){if(typeof Fl=="boolean")return Fl;try{Fl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Fl=!1}return Fl}function xk(t,e,r=2){const i=e&&e.length,s=i?e[0]*r:t.length;let a=e6(t,0,s,r,!0);const n=[];if(!a||a.next===a.prev)return n;let o,u,c;if(i&&(a=ehe(t,e,a,r)),t.length>80*r){o=1/0,u=1/0;let f=-1/0,h=-1/0;for(let p=r;p<s;p+=r){const g=t[p],m=t[p+1];g<o&&(o=g),m<u&&(u=m),g>f&&(f=g),m>h&&(h=m)}c=Math.max(f-o,h-u),c=c!==0?32767/c:0}return Fc(a,n,r,o,u,c,0),n}function e6(t,e,r,i,s){let a;if(s===fhe(t,e,r,i)>0)for(let n=e;n<r;n+=i)a=vk(n/i|0,t[n],t[n+1],a);else for(let n=r-i;n>=e;n-=i)a=vk(n/i|0,t[n],t[n+1],a);return a&&el(a,a.next)&&(Kc(a),a=a.next),a}function Go(t,e){if(!t)return t;e||(e=t);let r=t,i;do if(i=!1,!r.steiner&&(el(r,r.next)||Vr(r.prev,r,r.next)===0)){if(Kc(r),r=e=r.prev,r===r.next)break;i=!0}else r=r.next;while(i||r!==e);return e}function Fc(t,e,r,i,s,a,n){if(!t)return;!n&&a&&she(t,i,s,a);let o=t;for(;t.prev!==t.next;){const u=t.prev,c=t.next;if(a?Zfe(t,i,s,a):Yfe(t)){e.push(u.i,t.i,c.i),Kc(t),t=c.next,o=c.next;continue}if(t=c,t===o){n?n===1?(t=Qfe(Go(t),e),Fc(t,e,r,i,s,a,2)):n===2&&Jfe(t,e,r,i,s,a):Fc(Go(t),e,r,i,s,a,1);break}}}function Yfe(t){const e=t.prev,r=t,i=t.next;if(Vr(e,r,i)>=0)return!1;const s=e.x,a=r.x,n=i.x,o=e.y,u=r.y,c=i.y,f=Math.min(s,a,n),h=Math.min(o,u,c),p=Math.max(s,a,n),g=Math.max(o,u,c);let m=i.next;for(;m!==e;){if(m.x>=f&&m.x<=p&&m.y>=h&&m.y<=g&&rc(s,o,a,u,n,c,m.x,m.y)&&Vr(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Zfe(t,e,r,i){const s=t.prev,a=t,n=t.next;if(Vr(s,a,n)>=0)return!1;const o=s.x,u=a.x,c=n.x,f=s.y,h=a.y,p=n.y,g=Math.min(o,u,c),m=Math.min(f,h,p),T=Math.max(o,u,c),x=Math.max(f,h,p),v=Qy(g,m,e,r,i),y=Qy(T,x,e,r,i);let R=t.prevZ,A=t.nextZ;for(;R&&R.z>=v&&A&&A.z<=y;){if(R.x>=g&&R.x<=T&&R.y>=m&&R.y<=x&&R!==s&&R!==n&&rc(o,f,u,h,c,p,R.x,R.y)&&Vr(R.prev,R,R.next)>=0||(R=R.prevZ,A.x>=g&&A.x<=T&&A.y>=m&&A.y<=x&&A!==s&&A!==n&&rc(o,f,u,h,c,p,A.x,A.y)&&Vr(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;R&&R.z>=v;){if(R.x>=g&&R.x<=T&&R.y>=m&&R.y<=x&&R!==s&&R!==n&&rc(o,f,u,h,c,p,R.x,R.y)&&Vr(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;A&&A.z<=y;){if(A.x>=g&&A.x<=T&&A.y>=m&&A.y<=x&&A!==s&&A!==n&&rc(o,f,u,h,c,p,A.x,A.y)&&Vr(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function Qfe(t,e){let r=t;do{const i=r.prev,s=r.next.next;!el(i,s)&&r6(i,r,r.next,s)&&Gc(i,s)&&Gc(s,i)&&(e.push(i.i,r.i,s.i),Kc(r),Kc(r.next),r=t=s),r=r.next}while(r!==t);return Go(r)}function Jfe(t,e,r,i,s,a){let n=t;do{let o=n.next.next;for(;o!==n.prev;){if(n.i!==o.i&&uhe(n,o)){let u=n6(n,o);n=Go(n,n.next),u=Go(u,u.next),Fc(n,e,r,i,s,a,0),Fc(u,e,r,i,s,a,0);return}o=o.next}n=n.next}while(n!==t)}function ehe(t,e,r,i){const s=[];for(let a=0,n=e.length;a<n;a++){const o=e[a]*i,u=a<n-1?e[a+1]*i:t.length,c=e6(t,o,u,i,!1);c===c.next&&(c.steiner=!0),s.push(ohe(c))}s.sort(the);for(let a=0;a<s.length;a++)r=rhe(s[a],r);return r}function the(t,e){let r=t.x-e.x;if(r===0&&(r=t.y-e.y,r===0)){const i=(t.next.y-t.y)/(t.next.x-t.x),s=(e.next.y-e.y)/(e.next.x-e.x);r=i-s}return r}function rhe(t,e){const r=nhe(t,e);if(!r)return e;const i=n6(r,t);return Go(i,i.next),Go(r,r.next)}function nhe(t,e){let r=e;const i=t.x,s=t.y;let a=-1/0,n;if(el(t,r))return r;do{if(el(t,r.next))return r.next;if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){const h=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(h<=i&&h>a&&(a=h,n=r.x<r.next.x?r:r.next,h===i))return n}r=r.next}while(r!==e);if(!n)return null;const o=n,u=n.x,c=n.y;let f=1/0;r=n;do{if(i>=r.x&&r.x>=u&&i!==r.x&&t6(s<c?i:a,s,u,c,s<c?a:i,s,r.x,r.y)){const h=Math.abs(s-r.y)/(i-r.x);Gc(r,t)&&(h<f||h===f&&(r.x>n.x||r.x===n.x&&ihe(n,r)))&&(n=r,f=h)}r=r.next}while(r!==o);return n}function ihe(t,e){return Vr(t.prev,t,e.prev)<0&&Vr(e.next,t,t.next)<0}function she(t,e,r,i){let s=t;do s.z===0&&(s.z=Qy(s.x,s.y,e,r,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==t);s.prevZ.nextZ=null,s.prevZ=null,ahe(s)}function ahe(t){let e,r=1;do{let i=t,s;t=null;let a=null;for(e=0;i;){e++;let n=i,o=0;for(let c=0;c<r&&(o++,n=n.nextZ,!!n);c++);let u=r;for(;o>0||u>0&&n;)o!==0&&(u===0||!n||i.z<=n.z)?(s=i,i=i.nextZ,o--):(s=n,n=n.nextZ,u--),a?a.nextZ=s:t=s,s.prevZ=a,a=s;i=n}a.nextZ=null,r*=2}while(e>1);return t}function Qy(t,e,r,i,s){return t=(t-r)*s|0,e=(e-i)*s|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function ohe(t){let e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function t6(t,e,r,i,s,a,n,o){return(s-n)*(e-o)>=(t-n)*(a-o)&&(t-n)*(i-o)>=(r-n)*(e-o)&&(r-n)*(a-o)>=(s-n)*(i-o)}function rc(t,e,r,i,s,a,n,o){return!(t===n&&e===o)&&t6(t,e,r,i,s,a,n,o)}function uhe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!lhe(t,e)&&(Gc(t,e)&&Gc(e,t)&&che(t,e)&&(Vr(t.prev,t,e.prev)||Vr(t,e.prev,e))||el(t,e)&&Vr(t.prev,t,t.next)>0&&Vr(e.prev,e,e.next)>0)}function Vr(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function el(t,e){return t.x===e.x&&t.y===e.y}function r6(t,e,r,i){const s=Ah(Vr(t,e,r)),a=Ah(Vr(t,e,i)),n=Ah(Vr(r,i,t)),o=Ah(Vr(r,i,e));return!!(s!==a&&n!==o||s===0&&Th(t,r,e)||a===0&&Th(t,i,e)||n===0&&Th(r,t,i)||o===0&&Th(r,e,i))}function Th(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Ah(t){return t>0?1:t<0?-1:0}function lhe(t,e){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&r6(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Gc(t,e){return Vr(t.prev,t,t.next)<0?Vr(t,e,t.next)>=0&&Vr(t,t.prev,e)>=0:Vr(t,e,t.prev)<0||Vr(t,t.next,e)<0}function che(t,e){let r=t,i=!1;const s=(t.x+e.x)/2,a=(t.y+e.y)/2;do r.y>a!=r.next.y>a&&r.next.y!==r.y&&s<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next;while(r!==t);return i}function n6(t,e){const r=Jy(t.i,t.x,t.y),i=Jy(e.i,e.x,e.y),s=t.next,a=e.prev;return t.next=e,e.prev=t,r.next=s,s.prev=r,i.next=r,r.prev=i,a.next=i,i.prev=a,i}function vk(t,e,r,i){const s=Jy(t,e,r);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Kc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Jy(t,e,r){return{i:t,x:e,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function fhe(t,e,r,i){let s=0;for(let a=e,n=r-i;a<r;a+=i)s+=(t[n]-t[a])*(t[a+1]+t[n+1]),n=a;return s}const i6=xk.default||xk;var Jn=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(Jn||{});class IA{constructor(e){this.items=[],this._name=e}emit(e,r,i,s,a,n,o,u){const{name:c,items:f}=this;for(let h=0,p=f.length;h<p;h++)f[h][c](e,r,i,s,a,n,o,u);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&this.items.splice(r,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const hhe=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],s6=class a6 extends ui{constructor(e){super(),this.uid=Lr("renderer"),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const r=[...hhe,...this.config.runners??[]];this._addRunners(...r),this._unsafeEvalCheck()}async init(e={}){const r=e.skipExtensionImports===!0?!0:e.manageImports===!1;await wA(r),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const i in this._systemsHash)e={...this._systemsHash[i].constructor.defaultOptions,...e};e={...a6.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let i=0;i<this.runners.init.items.length;i++)await this.runners.init.items[i].init(e);this._initOptions=e}render(e,r){let i=e;if(i instanceof Ir&&(i={container:i},r&&(vt(Gt,"passing a second argument is deprecated, please use render options instead"),i.target=r.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const s=Array.isArray(i.clearColor)&&i.clearColor.length===4;i.clearColor=s?i.clearColor:qt.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(e,r,i){const s=this.view.resolution;this.view.resize(e,r,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),i!==void 0&&i!==s&&this.runners.resolutionChange.emit(i)}clear(e={}){const r=this;e.target||(e.target=r.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Jn.ALL);const{clear:i,clearColor:s,target:a}=e;qt.shared.setValue(s??this.background.colorRgba),r.renderTarget.clear(a,i,qt.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(r=>{this.runners[r]=new IA(r)})}_addSystems(e){let r;for(r in e){const i=e[r];this._addSystem(i.value,i.name)}}_addSystem(e,r){const i=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=i,this._systemsHash[r]=i;for(const s in this.runners)this.runners[s].add(i);return this}_addPipes(e,r){const i=r.reduce((s,a)=>(s[a.name]=a.value,s),{});e.forEach(s=>{const a=s.value,n=s.name,o=i[n];this.renderPipes[n]=new a(this,o?new o:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(r=>{r.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!LA())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};s6.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let nf=s6,Sh;function sf(t){return Sh!==void 0||(Sh=(()=>{var r;const e={stencil:!0,failIfMajorPerformanceCaveat:t??nf.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Qt.get().getWebGLRenderingContext())return!1;let s=Qt.get().createCanvas().getContext("webgl",e);const a=!!((r=s==null?void 0:s.getContextAttributes())!=null&&r.stencil);if(s){const n=s.getExtension("WEBGL_lose_context");n&&n.loseContext()}return s=null,a}catch{return!1}})()),Sh}let Rh;async function af(t={}){return Rh!==void 0||(Rh=await(async()=>{const e=Qt.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),Rh}const Ek=["webgl","webgpu","canvas"];async function o6(t){let e=[];t.preference?(e.push(t.preference),Ek.forEach(a=>{a!==t.preference&&e.push(a)})):e=Ek.slice();let r,i={};for(let a=0;a<e.length;a++){const n=e[a];if(n==="webgpu"&&await af()){const{WebGPURenderer:o}=await Oc(async()=>{const{WebGPURenderer:u}=await Promise.resolve().then(()=>Vge);return{WebGPURenderer:u}},void 0);r=o,i={...t,...t.webgpu};break}else if(n==="webgl"&&sf(t.failIfMajorPerformanceCaveat??nf.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:o}=await Oc(async()=>{const{WebGLRenderer:u}=await Promise.resolve().then(()=>Dge);return{WebGLRenderer:u}},void 0);r=o,i={...t,...t.webgl};break}else if(n==="canvas")throw i={...t},new Error("CanvasRenderer is not yet implemented")}if(delete i.webgpu,delete i.webgl,!r)throw new Error("No available renderer for the current environment");const s=new r;return await s.init(i),s}const dhe=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,Vc="8.11.0";class BA{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,Vc)}static destroy(){}}BA.extension=pe.Application;class PA{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,Vc)}destroy(){this._renderer=null}}PA.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"initHook",priority:-10};const u6=class e1{constructor(...e){this.stage=new Ir,e[0]!==void 0&&vt(Gt,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await o6(e),e1._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return vt(Gt,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,r=!1){const i=e1._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};u6._plugins=[];let OA=u6;br.handleByList(pe.Application,OA._plugins);br.add(BA);class l6{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let r,i;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:s,clientHeight:a}=this._resizeTo;r=s,i=a}this.renderer.resize(r,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}l6.extension=pe.Application;class c6{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,oa.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Sn.shared:new Sn,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}c6.extension=pe.Application;class DA extends ui{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return vt(Gt,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return vt(Gt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return vt(Gt,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return vt(Gt,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return vt(Gt,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var r;this.emit("destroy",this),this.removeAllListeners();for(const i in this.chars)(r=this.chars[i].texture)==null||r.destroy();this.chars=null,e&&(this.pages.forEach(i=>i.texture.destroy(!0)),this.pages=null)}}const phe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function $c(t){const e=typeof t.fontSize=="number"?`${t.fontSize}px`:t.fontSize;let r=t.fontFamily;Array.isArray(t.fontFamily)||(r=t.fontFamily.split(","));for(let i=r.length-1;i>=0;i--){let s=r[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!phe.includes(s)&&(s=`"${s}"`),r[i]=s}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${r.join(",")}`}const KE={willReadFrequently:!0},Ps=class Tt{static get experimentalLetterSpacingSupported(){let e=Tt._experimentalLetterSpacingSupported;if(e===void 0){const r=Qt.get().getCanvasRenderingContext2D().prototype;e=Tt._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,i,s,a,n,o,u,c){this.text=e,this.style=r,this.width=i,this.height=s,this.lines=a,this.lineWidths=n,this.lineHeight=o,this.maxLineWidth=u,this.fontProperties=c}static measureText(e=" ",r,i=Tt._canvas,s=r.wordWrap){var v;const a=$c(r),n=Tt.measureFont(a);n.fontSize===0&&(n.fontSize=r.fontSize,n.ascent=r.fontSize);const o=Tt.__context;o.font=a;const c=(s?Tt._wordWrap(e,r,i):e).split(/(?:\r\n|\r|\n)/),f=new Array(c.length);let h=0;for(let y=0;y<c.length;y++){const R=Tt._measureText(c[y],r.letterSpacing,o);f[y]=R,h=Math.max(h,R)}const p=((v=r._stroke)==null?void 0:v.width)||0;let g=h+p;r.dropShadow&&(g+=r.dropShadow.distance);const m=r.lineHeight||n.fontSize;let T=Math.max(m,n.fontSize+p)+(c.length-1)*(m+r.leading);return r.dropShadow&&(T+=r.dropShadow.distance),new Tt(e,r,g,T,c,f,m+r.leading,h,n)}static _measureText(e,r,i){let s=!1;Tt.experimentalLetterSpacingSupported&&(Tt.experimentalLetterSpacing?(i.letterSpacing=`${r}px`,i.textLetterSpacing=`${r}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));const a=i.measureText(e);let n=a.width;const o=-a.actualBoundingBoxLeft;let c=a.actualBoundingBoxRight-o;if(n>0)if(s)n-=r,c-=r;else{const f=(Tt.graphemeSegmenter(e).length-1)*r;n+=f,c+=f}return Math.max(n,c)}static _wordWrap(e,r,i=Tt._canvas){const s=i.getContext("2d",KE);let a=0,n="",o="";const u=Object.create(null),{letterSpacing:c,whiteSpace:f}=r,h=Tt._collapseSpaces(f),p=Tt._collapseNewlines(f);let g=!h;const m=r.wordWrapWidth+c,T=Tt._tokenize(e);for(let x=0;x<T.length;x++){let v=T[x];if(Tt._isNewline(v)){if(!p){o+=Tt._addLine(n),g=!h,n="",a=0;continue}v=" "}if(h){const R=Tt.isBreakingSpace(v),A=Tt.isBreakingSpace(n[n.length-1]);if(R&&A)continue}const y=Tt._getFromCache(v,c,u,s);if(y>m)if(n!==""&&(o+=Tt._addLine(n),n="",a=0),Tt.canBreakWords(v,r.breakWords)){const R=Tt.wordWrapSplit(v);for(let A=0;A<R.length;A++){let k=R[A],b=k,C=1;for(;R[A+C];){const O=R[A+C];if(!Tt.canBreakChars(b,O,v,A,r.breakWords))k+=O;else break;b=O,C++}A+=C-1;const w=Tt._getFromCache(k,c,u,s);w+a>m&&(o+=Tt._addLine(n),g=!1,n="",a=0),n+=k,a+=w}}else{n.length>0&&(o+=Tt._addLine(n),n="",a=0);const R=x===T.length-1;o+=Tt._addLine(v,!R),g=!1,n="",a=0}else y+a>m&&(g=!1,o+=Tt._addLine(n),n="",a=0),(n.length>0||!Tt.isBreakingSpace(v)||g)&&(n+=v,a+=y)}return o+=Tt._addLine(n,!1),o}static _addLine(e,r=!0){return e=Tt._trimRight(e),e=r?`${e}
`:e,e}static _getFromCache(e,r,i,s){let a=i[e];return typeof a!="number"&&(a=Tt._measureText(e,r,s)+r,i[e]=a),a}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const i=e[r];if(!Tt.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:Tt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:Tt._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const r=[];let i="";if(typeof e!="string")return r;for(let s=0;s<e.length;s++){const a=e[s],n=e[s+1];if(Tt.isBreakingSpace(a,n)||Tt._isNewline(a)){i!==""&&(r.push(i),i=""),a==="\r"&&n===`
`?(r.push(`\r
`),s++):r.push(a);continue}i+=a}return i!==""&&r.push(i),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,i,s,a){return!0}static wordWrapSplit(e){return Tt.graphemeSegmenter(e)}static measureFont(e){if(Tt._fonts[e])return Tt._fonts[e];const r=Tt._context;r.font=e;const i=r.measureText(Tt.METRICS_STRING+Tt.BASELINE_SYMBOL),s={ascent:i.actualBoundingBoxAscent,descent:i.actualBoundingBoxDescent,fontSize:i.actualBoundingBoxAscent+i.actualBoundingBoxDescent};return Tt._fonts[e]=s,s}static clearMetrics(e=""){e?delete Tt._fonts[e]:Tt._fonts={}}static get _canvas(){if(!Tt.__canvas){let e;try{const r=new OffscreenCanvas(0,0),i=r.getContext("2d",KE);if(i!=null&&i.measureText)return Tt.__canvas=r,r;e=Qt.get().createCanvas()}catch{e=Qt.get().createCanvas()}e.width=e.height=10,Tt.__canvas=e}return Tt.__canvas}static get _context(){return Tt.__context||(Tt.__context=Tt._canvas.getContext("2d",KE)),Tt.__context}};Ps.METRICS_STRING="|q";Ps.BASELINE_SYMBOL="M";Ps.BASELINE_MULTIPLIER=1.4;Ps.HEIGHT_MULTIPLIER=2;Ps.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>{const r=t.segment(e),i=[];let s=0;for(const a of r)i[s++]=a.segment;return i}}return t=>[...t]})();Ps.experimentalLetterSpacing=!1;Ps._fonts={};Ps._newlines=[10,13];Ps._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let Bn=Ps;const yk=[{offset:0,color:"white"},{offset:1,color:"black"}],kA=class t1{constructor(...e){this.uid=Lr("fillGradient"),this.type="linear",this.colorStops=[];let r=ghe(e);r={...r.type==="radial"?t1.defaultRadialOptions:t1.defaultLinearOptions,...cs(r)},this._textureSize=r.textureSize,this._wrapMode=r.wrapMode,r.type==="radial"?(this.center=r.center,this.outerCenter=r.outerCenter??this.center,this.innerRadius=r.innerRadius,this.outerRadius=r.outerRadius,this.scale=r.scale,this.rotation=r.rotation):(this.start=r.start,this.end=r.end),this.textureSpace=r.textureSpace,this.type=r.type,r.colorStops.forEach(s=>{this.addColorStop(s.offset,s.color)})}addColorStop(e,r){return this.colorStops.push({offset:e,color:qt.shared.setValue(r).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:r}=this.start,{x:i,y:s}=this.end,a=i-e,n=s-r;const o=a<0||n<0;if(this._wrapMode==="clamp-to-edge"){if(a<0){const x=e;e=i,i=x,a*=-1}if(n<0){const x=r;r=s,s=x,n*=-1}}const u=this.colorStops.length?this.colorStops:yk,c=this._textureSize,{canvas:f,context:h}=Ak(c,1),p=o?h.createLinearGradient(this._textureSize,0,0,0):h.createLinearGradient(0,0,this._textureSize,0);Tk(p,u),h.fillStyle=p,h.fillRect(0,0,c,1),this.texture=new ct({source:new Va({resource:f,addressMode:this._wrapMode})});const g=Math.sqrt(a*a+n*n),m=Math.atan2(n,a),T=new Et;T.scale(g/c,1),T.rotate(m),T.translate(e,r),this.textureSpace==="local"&&T.scale(c,c),this.transform=T}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:yk,r=this._textureSize,{canvas:i,context:s}=Ak(r,r),{x:a,y:n}=this.center,{x:o,y:u}=this.outerCenter,c=this.innerRadius,f=this.outerRadius,h=o-f,p=u-f,g=r/(f*2),m=(a-h)*g,T=(n-p)*g,x=s.createRadialGradient(m,T,c*g,(o-h)*g,(u-p)*g,f*g);Tk(x,e),s.fillStyle=e[e.length-1].color,s.fillRect(0,0,r,r),s.fillStyle=x,s.translate(m,T),s.rotate(this.rotation),s.scale(1,this.scale),s.translate(-m,-T),s.fillRect(0,0,r,r),this.texture=new ct({source:new Va({resource:i,addressMode:this._wrapMode})});const v=new Et;v.scale(1/g,1/g),v.translate(h,p),this.textureSpace==="local"&&v.scale(r,r),this.transform=v}get styleKey(){return this.uid}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null}};kA.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};kA.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Is=kA;function Tk(t,e){for(let r=0;r<e.length;r++){const i=e[r];t.addColorStop(i.offset,i.color)}}function Ak(t,e){const r=Qt.get().createCanvas(t,e),i=r.getContext("2d");return{canvas:r,context:i}}function ghe(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(vt("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??Is.defaultLinearOptions.textureSize}),e}const Sk={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class of{constructor(e,r){this.uid=Lr("fillPattern"),this.transform=new Et,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),r&&(e.source.style.addressModeU=Sk[r].addressModeU,e.source.style.addressModeV=Sk[r].addressModeV)}setTransform(e){const r=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/r.frame.width,1/r.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var VE,Rk;function mhe(){if(Rk)return VE;Rk=1,VE=r;var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function r(a){var n=[];return a.replace(e,function(o,u,c){var f=u.toLowerCase();for(c=s(c),f=="m"&&c.length>2&&(n.push([u].concat(c.splice(0,2))),f="l",u=u=="m"?"l":"L");;){if(c.length==t[f])return c.unshift(u),n.push(c);if(c.length<t[f])throw new Error("malformed path data");n.push([u].concat(c.splice(0,t[f])))}}),n}var i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function s(a){var n=a.match(i);return n?n.map(Number):[]}return VE}var _he=mhe();const bhe=fs(_he);function f6(t,e){const r=bhe(t),i=[];let s=null,a=0,n=0;for(let o=0;o<r.length;o++){const u=r[o],c=u[0],f=u;switch(c){case"M":a=f[1],n=f[2],e.moveTo(a,n);break;case"m":a+=f[1],n+=f[2],e.moveTo(a,n);break;case"H":a=f[1],e.lineTo(a,n);break;case"h":a+=f[1],e.lineTo(a,n);break;case"V":n=f[1],e.lineTo(a,n);break;case"v":n+=f[1],e.lineTo(a,n);break;case"L":a=f[1],n=f[2],e.lineTo(a,n);break;case"l":a+=f[1],n+=f[2],e.lineTo(a,n);break;case"C":a=f[5],n=f[6],e.bezierCurveTo(f[1],f[2],f[3],f[4],a,n);break;case"c":e.bezierCurveTo(a+f[1],n+f[2],a+f[3],n+f[4],a+f[5],n+f[6]),a+=f[5],n+=f[6];break;case"S":a=f[3],n=f[4],e.bezierCurveToShort(f[1],f[2],a,n);break;case"s":e.bezierCurveToShort(a+f[1],n+f[2],a+f[3],n+f[4]),a+=f[3],n+=f[4];break;case"Q":a=f[3],n=f[4],e.quadraticCurveTo(f[1],f[2],a,n);break;case"q":e.quadraticCurveTo(a+f[1],n+f[2],a+f[3],n+f[4]),a+=f[3],n+=f[4];break;case"T":a=f[1],n=f[2],e.quadraticCurveToShort(a,n);break;case"t":a+=f[1],n+=f[2],e.quadraticCurveToShort(a,n);break;case"A":a=f[6],n=f[7],e.arcToSvg(f[1],f[2],f[3],f[4],f[5],a,n);break;case"a":a+=f[6],n+=f[7],e.arcToSvg(f[1],f[2],f[3],f[4],f[5],a,n);break;case"Z":case"z":e.closePath(),i.length>0&&(s=i.pop(),s?(a=s.startX,n=s.startY):(a=0,n=0)),s=null;break;default:Rt(`Unknown SVG path command: ${c}`)}c!=="Z"&&c!=="z"&&s===null&&(s={startX:a,startY:n},i.push(s))}return e}class Cp{constructor(e=0,r=0,i=0){this.type="circle",this.x=e,this.y=r,this.radius=i}clone(){return new Cp(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const i=this.radius*this.radius;let s=this.x-e,a=this.y-r;return s*=s,a*=a,s+a<=i}strokeContains(e,r,i,s=.5){if(this.radius===0)return!1;const a=this.x-e,n=this.y-r,o=this.radius,u=(1-s)*i,c=Math.sqrt(a*a+n*n);return c<=o+u&&c>o-(i-u)}getBounds(e){return e||(e=new lr),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class wp{constructor(e=0,r=0,i=0,s=0){this.type="ellipse",this.x=e,this.y=r,this.halfWidth=i,this.halfHeight=s}clone(){return new wp(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,r){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(e-this.x)/this.halfWidth,s=(r-this.y)/this.halfHeight;return i*=i,s*=s,i+s<=1}strokeContains(e,r,i,s=.5){const{halfWidth:a,halfHeight:n}=this;if(a<=0||n<=0)return!1;const o=i*(1-s),u=i-o,c=a-u,f=n-u,h=a+o,p=n+o,g=e-this.x,m=r-this.y,T=g*g/(c*c)+m*m/(f*f),x=g*g/(h*h)+m*m/(p*p);return T>1&&x<=1}getBounds(e){return e||(e=new lr),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function _c(t,e,r,i,s,a){const n=t-r,o=e-i,u=s-r,c=a-i,f=n*u+o*c,h=u*u+c*c;let p=-1;h!==0&&(p=f/h);let g,m;p<0?(g=r,m=i):p>1?(g=s,m=a):(g=r+p*u,m=i+p*c);const T=t-g,x=e-m;return T*T+x*x}let xhe,vhe;class Gu{constructor(...e){this.type="polygon";let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const i=[];for(let s=0,a=r.length;s<a;s++)i.push(r[s].x,r[s].y);r=i}this.points=r,this.closePath=!0}isClockwise(){let e=0;const r=this.points,i=r.length;for(let s=0;s<i;s+=2){const a=r[s],n=r[s+1],o=r[(s+2)%i],u=r[(s+3)%i];e+=(o-a)*(u+n)}return e<0}containsPolygon(e){const r=this.getBounds(xhe),i=e.getBounds(vhe);if(!r.containsRect(i))return!1;const s=e.points;for(let a=0;a<s.length;a+=2){const n=s[a],o=s[a+1];if(!this.contains(n,o))return!1}return!0}clone(){const e=this.points.slice(),r=new Gu(e);return r.closePath=this.closePath,r}contains(e,r){let i=!1;const s=this.points.length/2;for(let a=0,n=s-1;a<s;n=a++){const o=this.points[a*2],u=this.points[a*2+1],c=this.points[n*2],f=this.points[n*2+1];u>r!=f>r&&e<(c-o)*((r-u)/(f-u))+o&&(i=!i)}return i}strokeContains(e,r,i,s=.5){const a=i*i,n=a*(1-s),o=a-n,{points:u}=this,c=u.length-(this.closePath?0:2);for(let f=0;f<c;f+=2){const h=u[f],p=u[f+1],g=u[(f+2)%u.length],m=u[(f+3)%u.length],T=_c(e,r,h,p,g,m),x=Math.sign((g-h)*(r-p)-(m-p)*(e-h));if(T<=(x<0?o:n))return!0}return!1}getBounds(e){e||(e=new lr);const r=this.points;let i=1/0,s=-1/0,a=1/0,n=-1/0;for(let o=0,u=r.length;o<u;o+=2){const c=r[o],f=r[o+1];i=c<i?c:i,s=c>s?c:s,a=f<a?f:a,n=f>n?f:n}return e.x=i,e.width=s-i,e.y=a,e.height=n-a,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,r)=>`${e}, ${r}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return vt("8.11.0","Polygon.lastX is deprecated, please use Polygon.lastX instead."),this.points[this.points.length-2]}get y(){return vt("8.11.0","Polygon.y is deprecated, please use Polygon.lastY instead."),this.points[this.points.length-1]}get startX(){return this.points[0]}get startY(){return this.points[1]}}const Ch=(t,e,r,i,s,a,n)=>{const o=t-r,u=e-i,c=Math.sqrt(o*o+u*u);return c>=s-a&&c<=s+n};class Lp{constructor(e=0,r=0,i=0,s=0,a=20){this.type="roundedRectangle",this.x=e,this.y=r,this.width=i,this.height=s,this.radius=a}getBounds(e){return e||(e=new lr),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new Lp(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+i&&r<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let s=e-(this.x+i),a=r-(this.y+i);const n=i*i;if(s*s+a*a<=n||(s=e-(this.x+this.width-i),s*s+a*a<=n)||(a=r-(this.y+this.height-i),s*s+a*a<=n)||(s=e-(this.x+i),s*s+a*a<=n))return!0}return!1}strokeContains(e,r,i,s=.5){const{x:a,y:n,width:o,height:u,radius:c}=this,f=i*(1-s),h=i-f,p=a+c,g=n+c,m=o-c*2,T=u-c*2,x=a+o,v=n+u;return(e>=a-f&&e<=a+h||e>=x-h&&e<=x+f)&&r>=g&&r<=g+T||(r>=n-f&&r<=n+h||r>=v-h&&r<=v+f)&&e>=p&&e<=p+m?!0:e<p&&r<g&&Ch(e,r,p,g,c,h,f)||e>x-c&&r<g&&Ch(e,r,x-c,g,c,h,f)||e>x-c&&r>v-c&&Ch(e,r,x-c,v-c,c,h,f)||e<p&&r>v-c&&Ch(e,r,p,v-c,c,h,f)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const h6={};function Ip(t,e,r){let i=2166136261;for(let s=0;s<e;s++)i^=t[s].uid,i=Math.imul(i,16777619),i>>>=0;return h6[i]||Ehe(t,e,i,r)}function Ehe(t,e,r,i){const s={};let a=0;for(let o=0;o<i;o++){const u=o<e?t[o]:ct.EMPTY.source;s[a++]=u.source,s[a++]=u.style}const n=new ws(s);return h6[r]=n,n}class Po{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function bd(t,e){const r=t.byteLength/8|0,i=new Float64Array(t,0,r);new Float64Array(e,0,r).set(i);const a=t.byteLength-r*8;if(a>0){const n=new Uint8Array(t,r*8,a);new Uint8Array(e,r*8,a).set(n)}}const d6={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var jr=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(jr||{});function tl(t,e){return e.alphaMode==="no-premultiply-alpha"&&d6[t]||t}const yhe=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function The(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function UA(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const i=yhe.replace(/%forloop%/gi,The(t));if(e.shaderSource(r,i),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(r)}return t}let gu=null;function p6(){var e;if(gu)return gu;const t=RA();return gu=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),gu=UA(gu,t),(e=t.getExtension("WEBGL_lose_context"))==null||e.loseContext(),gu}class g6{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const r=this.textures[e];this.textures[e]=null,this.ids[r.uid]=null}this.count=0}}class m6{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new g6,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const _6=[];let r1=0;function Ck(){return r1>0?_6[--r1]:new m6}function wk(t){_6[r1++]=t}let Gl=0;const b6=class x6{constructor(e){this.uid=Lr("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],e={...x6.defaultOptions,...e},e.maxTextures||(vt("v8.8.0","maxTextures is a required option for Batcher now, please pass it in the options"),e.maxTextures=p6());const{maxTextures:r,attributesInitialSize:i,indicesInitialSize:s}=e;this.attributeBuffer=new Po(i*4),this.indexBuffer=new Uint16Array(s),this.maxTextures=r}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)wk(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,r){const i=e._batch.textures.ids[r._source.uid];return!i&&i!==0?!1:(e._textureId=i,e.texture=r,!0)}updateElement(e){this.dirty=!0;const r=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,r.float32View,r.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,r.float32View,r.uint32View,e._attributeStart,e._textureId)}break(e){const r=this._elements;if(!r[this.elementStart])return;let i=Ck(),s=i.textures;s.clear();const a=r[this.elementStart];let n=tl(a.blendMode,a.texture._source),o=a.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const u=this.attributeBuffer.float32View,c=this.attributeBuffer.uint32View,f=this.indexBuffer;let h=this._batchIndexSize,p=this._batchIndexStart,g="startBatch";const m=this.maxTextures;for(let T=this.elementStart;T<this.elementSize;++T){const x=r[T];r[T]=null;const y=x.texture._source,R=tl(x.blendMode,y),A=n!==R||o!==x.topology;if(y._batchTick===Gl&&!A){x._textureId=y._textureBindLocation,h+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,u,c,x._attributeStart,x._textureId),this.packQuadIndex(f,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,u,c,x._attributeStart,x._textureId),this.packIndex(x,f,x._indexStart,x._attributeStart/this.vertexSize)),x._batch=i;continue}y._batchTick=Gl,(s.count>=m||A)&&(this._finishBatch(i,p,h-p,s,n,o,e,g),g="renderBatch",p=h,n=R,o=x.topology,i=Ck(),s=i.textures,s.clear(),++Gl),x._textureId=y._textureBindLocation=s.count,s.ids[y.uid]=s.count,s.textures[s.count++]=y,x._batch=i,h+=x.indexSize,x.packAsQuad?(this.packQuadAttributes(x,u,c,x._attributeStart,x._textureId),this.packQuadIndex(f,x._indexStart,x._attributeStart/this.vertexSize)):(this.packAttributes(x,u,c,x._attributeStart,x._textureId),this.packIndex(x,f,x._indexStart,x._attributeStart/this.vertexSize))}s.count>0&&(this._finishBatch(i,p,h-p,s,n,o,e,g),p=h,++Gl),this.elementStart=this.elementSize,this._batchIndexStart=p,this._batchIndexSize=h}_finishBatch(e,r,i,s,a,n,o,u){e.gpuBindGroup=null,e.bindGroup=null,e.action=u,e.batcher=this,e.textures=s,e.blendMode=a,e.topology=n,e.start=r,e.size=i,++Gl,this.batches[this.batchIndex++]=e,o.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const r=Math.max(e,this.attributeBuffer.size*2),i=new Po(r);bd(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(e){const r=this.indexBuffer;let i=Math.max(e,r.length*1.5);i+=i%2;const s=i>65535?new Uint32Array(i):new Uint16Array(i);if(s.BYTES_PER_ELEMENT!==r.BYTES_PER_ELEMENT)for(let a=0;a<r.length;a++)s[a]=r[a];else bd(r.buffer,s.buffer);this.indexBuffer=s}packQuadIndex(e,r,i){e[r]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3}packIndex(e,r,i,s){const a=e.indices,n=e.indexSize,o=e.indexOffset,u=e.attributeOffset;for(let c=0;c<n;c++)r[i++]=s+a[c+o]-u}destroy(){for(let e=0;e<this.batches.length;e++)wk(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};b6.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let v6=b6;var nr=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(nr||{});class ri extends ui{constructor(e){let{data:r,size:i}=e;const{usage:s,label:a,shrinkToFit:n}=e;super(),this.uid=Lr("buffer"),this._resourceType="buffer",this._resourceId=Lr("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,r instanceof Array&&(r=new Float32Array(r)),this._data=r,i??(i=r==null?void 0:r.byteLength);const o=!!r;this.descriptor={size:i,usage:s,mappedAtCreation:o,label:a},this.shrinkToFit=n??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&nr.STATIC)}set static(e){e?this.descriptor.usage|=nr.STATIC:this.descriptor.usage&=~nr.STATIC}setDataWithSize(e,r,i){if(this._updateID++,this._updateSize=r*e.BYTES_PER_ELEMENT,this._data===e){i&&this.emit("update",this);return}const s=this._data;if(this._data=e,this._dataInt32=null,!s||s.length!==e.length){!this.shrinkToFit&&s&&e.byteLength<s.byteLength?i&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Lr("resource"),this.emit("change",this));return}i&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}function MA(t,e){if(!(t instanceof ri)){let r=e?nr.INDEX:nr.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),r=nr.INDEX|nr.COPY_DST):(t=new Float32Array(t),r=nr.VERTEX|nr.COPY_DST)),t=new ri({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:r})}return t}function E6(t,e,r){const i=t.getAttribute(e);if(!i)return r.minX=0,r.minY=0,r.maxX=0,r.maxY=0,r;const s=i.buffer.data;let a=1/0,n=1/0,o=-1/0,u=-1/0;const c=s.BYTES_PER_ELEMENT,f=(i.offset||0)/c,h=(i.stride||2*4)/c;for(let p=f;p<s.length;p+=h){const g=s[p],m=s[p+1];g>o&&(o=g),m>u&&(u=m),g<a&&(a=g),m<n&&(n=m)}return r.minX=a,r.minY=n,r.maxX=o,r.maxY=u,r}function Ahe(t){return(t instanceof ri||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=MA(t.buffer,!1),t}class qo extends ui{constructor(e={}){super(),this.uid=Lr("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new un,this._boundsDirty=!0;const{attributes:r,indexBuffer:i,topology:s}=e;if(this.buffers=[],this.attributes={},r)for(const a in r)this.addAttribute(a,r[a]);this.instanceCount=e.instanceCount??1,i&&this.addIndex(i),this.topology=s||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const r=this.attributes[e];return r.buffer.data.length/(r.stride/4||r.size)}return 0}addAttribute(e,r){const i=Ahe(r);this.buffers.indexOf(i.buffer)===-1&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=i}addIndex(e){this.indexBuffer=MA(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,E6(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(r=>r.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const She=new Float32Array(1),Rhe=new Uint32Array(1);class y6 extends qo{constructor(){const r=new ri({data:She,label:"attribute-batch-buffer",usage:nr.VERTEX|nr.COPY_DST,shrinkToFit:!1}),i=new ri({data:Rhe,label:"index-batch-buffer",usage:nr.INDEX|nr.COPY_DST,shrinkToFit:!1}),s=6*4;super({attributes:{aPosition:{buffer:r,format:"float32x2",stride:s,offset:0},aUV:{buffer:r,format:"float32x2",stride:s,offset:2*4},aColor:{buffer:r,format:"unorm8x4",stride:s,offset:4*4},aTextureIdAndRound:{buffer:r,format:"uint16x2",stride:s,offset:5*4}},indexBuffer:i})}}function n1(t,e,r){if(t)for(const i in t){const s=i.toLocaleLowerCase(),a=e[s];if(a){let n=t[i];i==="header"&&(n=n.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),r&&a.push(`//----${r}----//`),a.push(n)}else Rt(`${i} placement hook does not exist in shader`)}}const Che=/\{\{(.*?)\}\}/g;function i1(t){var i;const e={};return(((i=t.match(Che))==null?void 0:i.map(s=>s.replace(/[{()}]/g,"")))??[]).forEach(s=>{e[s]=[]}),e}function Lk(t,e){let r;const i=/@in\s+([^;]+);/g;for(;(r=i.exec(t))!==null;)e.push(r[1])}function s1(t,e,r=!1){const i=[];Lk(e,i),t.forEach(o=>{o.header&&Lk(o.header,i)});const s=i;r&&s.sort();const a=s.map((o,u)=>`       @location(${u}) ${o},`).join(`
`);let n=e.replace(/@in\s+[^;]+;\s*/g,"");return n=n.replace("{{in}}",`
${a}
`),n}function Ik(t,e){let r;const i=/@out\s+([^;]+);/g;for(;(r=i.exec(t))!==null;)e.push(r[1])}function whe(t){const r=/\b(\w+)\s*:/g.exec(t);return r?r[1]:""}function Lhe(t){const e=/@.*?\s+/g;return t.replace(e,"")}function T6(t,e){const r=[];Ik(e,r),t.forEach(u=>{u.header&&Ik(u.header,r)});let i=0;const s=r.sort().map(u=>u.indexOf("builtin")>-1?u:`@location(${i++}) ${u}`).join(`,
`),a=r.sort().map(u=>`       var ${Lhe(u)};`).join(`
`),n=`return VSOutput(
            ${r.sort().map(u=>` ${whe(u)}`).join(`,
`)});`;let o=e.replace(/@out\s+[^;]+;\s*/g,"");return o=o.replace("{{struct}}",`
${s}
`),o=o.replace("{{start}}",`
${a}
`),o=o.replace("{{return}}",`
${n}
`),o}function a1(t,e){let r=t;for(const i in e){const s=e[i];s.join(`
`).length?r=r.replace(`{{${i}}}`,`//-----${i} START-----//
${s.join(`
`)}
//----${i} FINISH----//`):r=r.replace(`{{${i}}}`,"")}return r}const Da=Object.create(null),$E=new Map;let Ihe=0;function A6({template:t,bits:e}){const r=R6(t,e);if(Da[r])return Da[r];const{vertex:i,fragment:s}=Bhe(t,e);return Da[r]=C6(i,s,e),Da[r]}function S6({template:t,bits:e}){const r=R6(t,e);return Da[r]||(Da[r]=C6(t.vertex,t.fragment,e)),Da[r]}function Bhe(t,e){const r=e.map(n=>n.vertex).filter(n=>!!n),i=e.map(n=>n.fragment).filter(n=>!!n);let s=s1(r,t.vertex,!0);s=T6(r,s);const a=s1(i,t.fragment,!0);return{vertex:s,fragment:a}}function R6(t,e){return e.map(r=>($E.has(r)||$E.set(r,Ihe++),$E.get(r))).sort((r,i)=>r-i).join("-")+t.vertex+t.fragment}function C6(t,e,r){const i=i1(t),s=i1(e);return r.forEach(a=>{n1(a.vertex,i,a.name),n1(a.fragment,s,a.name)}),{vertex:a1(t,i),fragment:a1(e,s)}}const w6=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}

        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);

        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,L6=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;

    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {

        {{start}}

        var outColor:vec4<f32>;

        {{main}}

        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,I6=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;

        {{start}}

        vColor = vec4(1.);

        {{main}}

        vUV = uv;

        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,B6=`

    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {

        {{start}}

        vec4 outColor;

        {{main}}

        finalColor = outColor * vColor;

        {{end}}
    }
`,P6={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},Phe={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},O6={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function cl({bits:t,name:e}){const r=A6({template:{fragment:L6,vertex:w6},bits:[P6,...t]});return bn.from({name:e,vertex:{source:r.vertex,entryPoint:"main"},fragment:{source:r.fragment,entryPoint:"main"}})}function fl({bits:t,name:e}){return new _n({name:e,...S6({template:{vertex:I6,fragment:B6},bits:[O6,...t]})})}const Bp={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},Pp={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},HE={};function Ohe(t){const e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let r=0;for(let i=0;i<t;i++)e.push(`@group(1) @binding(${r++}) var textureSource${i+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${r++}) var textureSampler${i+1}: sampler;`)}return e.join(`
`)}function Dhe(t){const e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let r=0;r<t;r++)r===t-1?e.push("  default:{"):e.push(`  case ${r}:{`),e.push(`      outColor = textureSampleGrad(textureSource${r+1}, textureSampler${r+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function Op(t){return HE[t]||(HE[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${Ohe(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${Dhe(t)}
            `}}),HE[t]}const qE={};function khe(t){const e=[];for(let r=0;r<t;r++)r>0&&e.push("else"),r<t-1&&e.push(`if(vTextureId < ${r}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${r}], vUV);`),e.push("}");return e.join(`
`)}function Dp(t){return qE[t]||(qE[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${khe(t)}
            `}}),qE[t]}const hl={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},dl={name:"round-pixels-bit",vertex:{header:`
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},Bk={};function kp(t){let e=Bk[t];if(e)return e;const r=new Int32Array(t);for(let i=0;i<t;i++)r[i]=i;return e=Bk[t]=new rn({uTextures:{value:r,type:"i32",size:t}},{isStatic:!0}),e}class D6 extends Si{constructor(e){const r=fl({name:"batch",bits:[Pp,Dp(e),dl]}),i=cl({name:"batch",bits:[Bp,Op(e),hl]});super({glProgram:r,gpuProgram:i,resources:{batchSamplers:kp(e)}})}}let XE=null;const k6=class U6 extends v6{constructor(e){super(e),this.geometry=new y6,this.name=U6.extension.name,this.vertexSize=6,XE??(XE=new D6(e.maxTextures)),this.shader=XE}packAttributes(e,r,i,s,a){const n=a<<16|e.roundPixels&65535,o=e.transform,u=o.a,c=o.b,f=o.c,h=o.d,p=o.tx,g=o.ty,{positions:m,uvs:T}=e,x=e.color,v=e.attributeOffset,y=v+e.attributeSize;for(let R=v;R<y;R++){const A=R*2,k=m[A],b=m[A+1];r[s++]=u*k+f*b+p,r[s++]=h*b+c*k+g,r[s++]=T[A],r[s++]=T[A+1],i[s++]=x,i[s++]=n}}packQuadAttributes(e,r,i,s,a){const n=e.texture,o=e.transform,u=o.a,c=o.b,f=o.c,h=o.d,p=o.tx,g=o.ty,m=e.bounds,T=m.maxX,x=m.minX,v=m.maxY,y=m.minY,R=n.uvs,A=e.color,k=a<<16|e.roundPixels&65535;r[s+0]=u*x+f*y+p,r[s+1]=h*y+c*x+g,r[s+2]=R.x0,r[s+3]=R.y0,i[s+4]=A,i[s+5]=k,r[s+6]=u*T+f*y+p,r[s+7]=h*y+c*T+g,r[s+8]=R.x1,r[s+9]=R.y1,i[s+10]=A,i[s+11]=k,r[s+12]=u*T+f*v+p,r[s+13]=h*v+c*T+g,r[s+14]=R.x2,r[s+15]=R.y2,i[s+16]=A,i[s+17]=k,r[s+18]=u*x+f*v+p,r[s+19]=h*v+c*x+g,r[s+20]=R.x3,r[s+21]=R.y3,i[s+22]=A,i[s+23]=k}};k6.extension={type:[pe.Batcher],name:"default"};let Up=k6;function M6(t,e,r,i,s,a,n,o=null){let u=0;r*=e,s*=a;const c=o.a,f=o.b,h=o.c,p=o.d,g=o.tx,m=o.ty;for(;u<n;){const T=t[r],x=t[r+1];i[s]=c*T+h*x+g,i[s+1]=f*T+p*x+m,s+=a,r+=e,u++}}function N6(t,e,r,i){let s=0;for(e*=r;s<i;)t[e]=0,t[e+1]=0,e+=r,s++}function NA(t,e,r,i,s){const a=e.a,n=e.b,o=e.c,u=e.d,c=e.tx,f=e.ty;r||(r=0),i||(i=2),s||(s=t.length/i-r);let h=r*i;for(let p=0;p<s;p++){const g=t[h],m=t[h+1];t[h]=a*g+o*m+c,t[h+1]=n*g+u*m+f,h+=i}}const Uhe=new Et;class Mp{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.renderable&&this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,r=e>>16|e&65280|(e&255)<<16,i=this.renderable;return i?_A(r,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):r+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||Uhe}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const rl={extension:{type:pe.ShapeBuilder,name:"circle"},build(t,e){let r,i,s,a,n,o;if(t.type==="circle"){const A=t;if(n=o=A.radius,n<=0)return!1;r=A.x,i=A.y,s=a=0}else if(t.type==="ellipse"){const A=t;if(n=A.halfWidth,o=A.halfHeight,n<=0||o<=0)return!1;r=A.x,i=A.y,s=a=0}else{const A=t,k=A.width/2,b=A.height/2;r=A.x+k,i=A.y+b,n=o=Math.max(0,Math.min(A.radius,Math.min(k,b))),s=k-n,a=b-o}if(s<0||a<0)return!1;const u=Math.ceil(2.3*Math.sqrt(n+o)),c=u*8+(s?4:0)+(a?4:0);if(c===0)return!1;if(u===0)return e[0]=e[6]=r+s,e[1]=e[3]=i+a,e[2]=e[4]=r-s,e[5]=e[7]=i-a,!0;let f=0,h=u*4+(s?2:0)+2,p=h,g=c,m=s+n,T=a,x=r+m,v=r-m,y=i+T;if(e[f++]=x,e[f++]=y,e[--h]=y,e[--h]=v,a){const A=i-T;e[p++]=v,e[p++]=A,e[--g]=A,e[--g]=x}for(let A=1;A<u;A++){const k=Math.PI/2*(A/u),b=s+Math.cos(k)*n,C=a+Math.sin(k)*o,w=r+b,O=r-b,M=i+C,$=i-C;e[f++]=w,e[f++]=M,e[--h]=M,e[--h]=O,e[p++]=O,e[p++]=$,e[--g]=$,e[--g]=w}m=s,T=a+o,x=r+m,v=r-m,y=i+T;const R=i-T;return e[f++]=x,e[f++]=y,e[--g]=R,e[--g]=x,s&&(e[f++]=v,e[f++]=y,e[--g]=R,e[--g]=v),!0},triangulate(t,e,r,i,s,a){if(t.length===0)return;let n=0,o=0;for(let f=0;f<t.length;f+=2)n+=t[f],o+=t[f+1];n/=t.length/2,o/=t.length/2;let u=i;e[u*r]=n,e[u*r+1]=o;const c=u++;for(let f=0;f<t.length;f+=2)e[u*r]=t[f],e[u*r+1]=t[f+1],f>0&&(s[a++]=u,s[a++]=c,s[a++]=u-1),u++;s[a++]=c+1,s[a++]=c,s[a++]=u-1}},F6={...rl,extension:{...rl.extension,name:"ellipse"}},G6={...rl,extension:{...rl.extension,name:"roundedRectangle"}},FA=1e-4,o1=1e-4;function K6(t){const e=t.length;if(e<6)return 1;let r=0;for(let i=0,s=t[e-2],a=t[e-1];i<e;i+=2){const n=t[i],o=t[i+1];r+=(n-s)*(o+a),s=n,a=o}return r<0?-1:1}function Pk(t,e,r,i,s,a,n,o){const u=t-r*s,c=e-i*s,f=t+r*a,h=e+i*a;let p,g;n?(p=i,g=-r):(p=-i,g=r);const m=u+p,T=c+g,x=f+p,v=h+g;return o.push(m,T),o.push(x,v),2}function bo(t,e,r,i,s,a,n,o){const u=r-t,c=i-e;let f=Math.atan2(u,c),h=Math.atan2(s-t,a-e);o&&f<h?f+=Math.PI*2:!o&&f>h&&(h+=Math.PI*2);let p=f;const g=h-f,m=Math.abs(g),T=Math.sqrt(u*u+c*c),x=(15*m*Math.sqrt(T)/Math.PI>>0)+1,v=g/x;if(p+=v,o){n.push(t,e),n.push(r,i);for(let y=1,R=p;y<x;y++,R+=v)n.push(t,e),n.push(t+Math.sin(R)*T,e+Math.cos(R)*T);n.push(t,e),n.push(s,a)}else{n.push(r,i),n.push(t,e);for(let y=1,R=p;y<x;y++,R+=v)n.push(t+Math.sin(R)*T,e+Math.cos(R)*T),n.push(t,e);n.push(s,a),n.push(t,e)}return x*2}function V6(t,e,r,i,s,a){const n=FA;if(t.length===0)return;const o=e;let u=o.alignment;if(e.alignment!==.5){let Te=K6(t);r&&(Te*=-1),u=(u-.5)*Te+.5}const c=new _r(t[0],t[1]),f=new _r(t[t.length-2],t[t.length-1]),h=i,p=Math.abs(c.x-f.x)<n&&Math.abs(c.y-f.y)<n;if(h){t=t.slice(),p&&(t.pop(),t.pop(),f.set(t[t.length-2],t[t.length-1]));const Te=(c.x+f.x)*.5,Me=(f.y+c.y)*.5;t.unshift(Te,Me),t.push(Te,Me)}const g=s,m=t.length/2;let T=t.length;const x=g.length/2,v=o.width/2,y=v*v,R=o.miterLimit*o.miterLimit;let A=t[0],k=t[1],b=t[2],C=t[3],w=0,O=0,M=-(k-C),$=A-b,G=0,Z=0,ce=Math.sqrt(M*M+$*$);M/=ce,$/=ce,M*=v,$*=v;const Y=u,J=(1-Y)*2,ie=Y*2;h||(o.cap==="round"?T+=bo(A-M*(J-ie)*.5,k-$*(J-ie)*.5,A-M*J,k-$*J,A+M*ie,k+$*ie,g,!0)+2:o.cap==="square"&&(T+=Pk(A,k,M,$,J,ie,!0,g))),g.push(A-M*J,k-$*J),g.push(A+M*ie,k+$*ie);for(let Te=1;Te<m-1;++Te){A=t[(Te-1)*2],k=t[(Te-1)*2+1],b=t[Te*2],C=t[Te*2+1],w=t[(Te+1)*2],O=t[(Te+1)*2+1],M=-(k-C),$=A-b,ce=Math.sqrt(M*M+$*$),M/=ce,$/=ce,M*=v,$*=v,G=-(C-O),Z=b-w,ce=Math.sqrt(G*G+Z*Z),G/=ce,Z/=ce,G*=v,Z*=v;const Me=b-A,Ee=k-C,se=b-w,me=O-C,Xe=Me*se+Ee*me,nt=Ee*se-me*Me,ot=nt<0;if(Math.abs(nt)<.001*Math.abs(Xe)){g.push(b-M*J,C-$*J),g.push(b+M*ie,C+$*ie),Xe>=0&&(o.join==="round"?T+=bo(b,C,b-M*J,C-$*J,b-G*J,C-Z*J,g,!1)+4:T+=2,g.push(b-G*ie,C-Z*ie),g.push(b+G*J,C+Z*J));continue}const pt=(-M+A)*(-$+C)-(-M+b)*(-$+k),qe=(-G+w)*(-Z+C)-(-G+b)*(-Z+O),Ye=(Me*qe-se*pt)/nt,at=(me*pt-Ee*qe)/nt,lt=(Ye-b)*(Ye-b)+(at-C)*(at-C),j=b+(Ye-b)*J,ue=C+(at-C)*J,oe=b-(Ye-b)*ie,be=C-(at-C)*ie,Le=Math.min(Me*Me+Ee*Ee,se*se+me*me),ye=ot?J:ie,De=Le+ye*ye*y;lt<=De?o.join==="bevel"||lt/y>R?(ot?(g.push(j,ue),g.push(b+M*ie,C+$*ie),g.push(j,ue),g.push(b+G*ie,C+Z*ie)):(g.push(b-M*J,C-$*J),g.push(oe,be),g.push(b-G*J,C-Z*J),g.push(oe,be)),T+=2):o.join==="round"?ot?(g.push(j,ue),g.push(b+M*ie,C+$*ie),T+=bo(b,C,b+M*ie,C+$*ie,b+G*ie,C+Z*ie,g,!0)+4,g.push(j,ue),g.push(b+G*ie,C+Z*ie)):(g.push(b-M*J,C-$*J),g.push(oe,be),T+=bo(b,C,b-M*J,C-$*J,b-G*J,C-Z*J,g,!1)+4,g.push(b-G*J,C-Z*J),g.push(oe,be)):(g.push(j,ue),g.push(oe,be)):(g.push(b-M*J,C-$*J),g.push(b+M*ie,C+$*ie),o.join==="round"?ot?T+=bo(b,C,b+M*ie,C+$*ie,b+G*ie,C+Z*ie,g,!0)+2:T+=bo(b,C,b-M*J,C-$*J,b-G*J,C-Z*J,g,!1)+2:o.join==="miter"&&lt/y<=R&&(ot?(g.push(oe,be),g.push(oe,be)):(g.push(j,ue),g.push(j,ue)),T+=2),g.push(b-G*J,C-Z*J),g.push(b+G*ie,C+Z*ie),T+=2)}A=t[(m-2)*2],k=t[(m-2)*2+1],b=t[(m-1)*2],C=t[(m-1)*2+1],M=-(k-C),$=A-b,ce=Math.sqrt(M*M+$*$),M/=ce,$/=ce,M*=v,$*=v,g.push(b-M*J,C-$*J),g.push(b+M*ie,C+$*ie),h||(o.cap==="round"?T+=bo(b-M*(J-ie)*.5,C-$*(J-ie)*.5,b-M*J,C-$*J,b+M*ie,C+$*ie,g,!1)+2:o.cap==="square"&&(T+=Pk(b,C,M,$,J,ie,!1,g)));const le=o1*o1;for(let Te=x;Te<T+x-2;++Te)A=g[Te*2],k=g[Te*2+1],b=g[(Te+1)*2],C=g[(Te+1)*2+1],w=g[(Te+2)*2],O=g[(Te+2)*2+1],!(Math.abs(A*(C-O)+b*(O-k)+w*(k-C))<le)&&a.push(Te,Te+1,Te+2)}function $6(t,e,r,i){const s=FA;if(t.length===0)return;const a=t[0],n=t[1],o=t[t.length-2],u=t[t.length-1],c=e||Math.abs(a-o)<s&&Math.abs(n-u)<s,f=r,h=t.length/2,p=f.length/2;for(let g=0;g<h;g++)f.push(t[g*2]),f.push(t[g*2+1]);for(let g=0;g<h-1;g++)i.push(p+g,p+g+1);c&&i.push(p+h-1,p)}function GA(t,e,r,i,s,a,n){const o=i6(t,e,2);if(!o)return;for(let c=0;c<o.length;c+=3)a[n++]=o[c]+s,a[n++]=o[c+1]+s,a[n++]=o[c+2]+s;let u=s*i;for(let c=0;c<t.length;c+=2)r[u]=t[c],r[u+1]=t[c+1],u+=i}const Mhe=[],H6={extension:{type:pe.ShapeBuilder,name:"polygon"},build(t,e){for(let r=0;r<t.points.length;r++)e[r]=t.points[r];return!0},triangulate(t,e,r,i,s,a){GA(t,Mhe,e,r,i,s,a)}},q6={extension:{type:pe.ShapeBuilder,name:"rectangle"},build(t,e){const r=t,i=r.x,s=r.y,a=r.width,n=r.height;return a>0&&n>0?(e[0]=i,e[1]=s,e[2]=i+a,e[3]=s,e[4]=i+a,e[5]=s+n,e[6]=i,e[7]=s+n,!0):!1},triangulate(t,e,r,i,s,a){let n=0;i*=r,e[i+n]=t[0],e[i+n+1]=t[1],n+=r,e[i+n]=t[2],e[i+n+1]=t[3],n+=r,e[i+n]=t[6],e[i+n+1]=t[7],n+=r,e[i+n]=t[4],e[i+n+1]=t[5],n+=r;const o=i/r;s[a++]=o,s[a++]=o+1,s[a++]=o+2,s[a++]=o+1,s[a++]=o+3,s[a++]=o+2}},X6={extension:{type:pe.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,!0},triangulate(t,e,r,i,s,a){let n=0;i*=r,e[i+n]=t[0],e[i+n+1]=t[1],n+=r,e[i+n]=t[2],e[i+n+1]=t[3],n+=r,e[i+n]=t[4],e[i+n+1]=t[5];const o=i/r;s[a++]=o,s[a++]=o+1,s[a++]=o+2}},Nhe=new Et,Fhe=new lr;function z6(t,e,r,i){const s=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){const n=r.getBounds(Fhe);e.width&&n.pad(e.width);const{x:o,y:u}=n,c=1/n.width,f=1/n.height,h=-o*c,p=-u*f,g=s.a,m=s.b,T=s.c,x=s.d;s.a*=c,s.b*=c,s.c*=f,s.d*=f,s.tx=h*g+p*T+s.tx,s.ty=h*m+p*x+s.ty}else s.translate(e.texture.frame.x,e.texture.frame.y),s.scale(1/e.texture.source.width,1/e.texture.source.height);const a=e.texture.source.style;return!(e.fill instanceof Is)&&a.addressMode==="clamp-to-edge"&&(a.addressMode="repeat",a.update()),i&&s.append(Nhe.copyFrom(i).invert()),s}const uf={};br.handleByMap(pe.ShapeBuilder,uf);br.add(q6,H6,X6,rl,F6,G6);const Ghe=new lr,Khe=new Et;function W6(t,e){const{geometryData:r,batches:i}=e;i.length=0,r.indices.length=0,r.vertices.length=0,r.uvs.length=0;for(let s=0;s<t.instructions.length;s++){const a=t.instructions[s];if(a.action==="texture")Vhe(a.data,i,r);else if(a.action==="fill"||a.action==="stroke"){const n=a.action==="stroke",o=a.data.path.shapePath,u=a.data.style,c=a.data.hole;n&&c&&Ok(c.shapePath,u,!0,i,r),c&&(o.shapePrimitives[o.shapePrimitives.length-1].holes=c.shapePath.shapePrimitives),Ok(o,u,n,i,r)}}}function Vhe(t,e,r){const i=[],s=uf.rectangle,a=Ghe;a.x=t.dx,a.y=t.dy,a.width=t.dw,a.height=t.dh;const n=t.transform;if(!s.build(a,i))return;const{vertices:o,uvs:u,indices:c}=r,f=c.length,h=o.length/2;n&&NA(i,n),s.triangulate(i,o,2,h,c,f);const p=t.image,g=p.uvs;u.push(g.x0,g.y0,g.x1,g.y1,g.x3,g.y3,g.x2,g.y2);const m=gn.get(Mp);m.indexOffset=f,m.indexSize=c.length-f,m.attributeOffset=h,m.attributeSize=o.length/2-h,m.baseColor=t.style,m.alpha=t.alpha,m.texture=p,m.geometryData=r,e.push(m)}function Ok(t,e,r,i,s){const{vertices:a,uvs:n,indices:o}=s;t.shapePrimitives.forEach(({shape:u,transform:c,holes:f})=>{const h=[],p=uf[u.type];if(!p.build(u,h))return;const g=o.length,m=a.length/2;let T="triangle-list";if(c&&NA(h,c),r){const R=u.closePath??!0,A=e;A.pixelLine?($6(h,R,a,o),T="line-list"):V6(h,A,!1,R,a,o)}else if(f){const R=[],A=h.slice();$he(f).forEach(b=>{R.push(A.length/2),A.push(...b)}),GA(A,R,a,2,m,o,g)}else p.triangulate(h,a,2,m,o,g);const x=n.length/2,v=e.texture;if(v!==ct.WHITE){const R=z6(Khe,e,u,c);M6(a,2,m,n,x,2,a.length/2-m,R)}else N6(n,x,2,a.length/2-m);const y=gn.get(Mp);y.indexOffset=g,y.indexSize=o.length-g,y.attributeOffset=m,y.attributeSize=a.length/2-m,y.baseColor=e.color,y.alpha=e.alpha,y.texture=v,y.geometryData=s,y.topology=T,i.push(y)})}function $he(t){const e=[];for(let r=0;r<t.length;r++){const i=t[r].shape,s=[];uf[i.type].build(i,s)&&e.push(s)}return e}class j6{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class Y6{constructor(){this.instructions=new xA}init(e){this.batcher=new Up({maxTextures:e}),this.instructions.reset()}get geometry(){return vt(C8,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const KA=class u1{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){u1.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??u1.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let r=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){r?this._cleanGraphicsContextData(e):r=this._initContext(e),W6(e,r);const i=e.batchMode;e.customShader||i==="no-batch"?r.isBatchable=!1:i==="auto"?r.isBatchable=r.geometryData.vertices.length<400:r.isBatchable=!0,e.dirty=!1}return r}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const r=gn.get(Y6,{maxTextures:this._renderer.limits.maxBatchableTextures}),{batches:i,geometryData:s}=this._gpuContextHash[e.uid],a=s.vertices.length,n=s.indices.length;for(let f=0;f<i.length;f++)i[f].applyTransform=!1;const o=r.batcher;o.ensureAttributeBuffer(a),o.ensureIndexBuffer(n),o.begin();for(let f=0;f<i.length;f++){const h=i[f];o.add(h)}o.finish(r.instructions);const u=o.geometry;u.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),u.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);const c=o.batches;for(let f=0;f<c.length;f++){const h=c[f];h.bindGroup=Ip(h.textures.textures,h.textures.count,this._renderer.limits.maxBatchableTextures)}return this._graphicsDataContextHash[e.uid]=r,r}_initContext(e){const r=new j6;return r.context=e,this._gpuContextHash[e.uid]=r,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const r=this._gpuContextHash[e.uid];r.isBatchable||this._graphicsDataContextHash[e.uid]&&(gn.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),r.batches&&r.batches.forEach(i=>{gn.return(i)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};KA.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"graphicsContext"};KA.defaultOptions={bezierSmoothness:.5};let VA=KA;const Hhe=8,wh=11920929e-14,qhe=1;function $A(t,e,r,i,s,a,n,o,u,c){const h=Math.min(.99,Math.max(0,c??VA.defaultOptions.bezierSmoothness));let p=(qhe-h)/1;return p*=p,Xhe(e,r,i,s,a,n,o,u,t,p),t}function Xhe(t,e,r,i,s,a,n,o,u,c){l1(t,e,r,i,s,a,n,o,u,c,0),u.push(n,o)}function l1(t,e,r,i,s,a,n,o,u,c,f){if(f>Hhe)return;const h=(t+r)/2,p=(e+i)/2,g=(r+s)/2,m=(i+a)/2,T=(s+n)/2,x=(a+o)/2,v=(h+g)/2,y=(p+m)/2,R=(g+T)/2,A=(m+x)/2,k=(v+R)/2,b=(y+A)/2;if(f>0){let C=n-t,w=o-e;const O=Math.abs((r-n)*w-(i-o)*C),M=Math.abs((s-n)*w-(a-o)*C);if(O>wh&&M>wh){if((O+M)*(O+M)<=c*(C*C+w*w)){u.push(k,b);return}}else if(O>wh){if(O*O<=c*(C*C+w*w)){u.push(k,b);return}}else if(M>wh){if(M*M<=c*(C*C+w*w)){u.push(k,b);return}}else if(C=k-(t+n)/2,w=b-(e+o)/2,C*C+w*w<=c){u.push(k,b);return}}l1(t,e,h,p,v,y,k,b,u,c,f+1),l1(k,b,R,A,T,x,n,o,u,c,f+1)}const zhe=8,Whe=11920929e-14,jhe=1;function Z6(t,e,r,i,s,a,n,o){const c=Math.min(.99,Math.max(0,o??VA.defaultOptions.bezierSmoothness));let f=(jhe-c)/1;return f*=f,Yhe(e,r,i,s,a,n,t,f),t}function Yhe(t,e,r,i,s,a,n,o){c1(n,t,e,r,i,s,a,o,0),n.push(s,a)}function c1(t,e,r,i,s,a,n,o,u){if(u>zhe)return;const c=(e+i)/2,f=(r+s)/2,h=(i+a)/2,p=(s+n)/2,g=(c+h)/2,m=(f+p)/2;let T=a-e,x=n-r;const v=Math.abs((i-a)*x-(s-n)*T);if(v>Whe){if(v*v<=o*(T*T+x*x)){t.push(g,m);return}}else if(T=g-(e+a)/2,x=m-(r+n)/2,T*T+x*x<=o){t.push(g,m);return}c1(t,e,r,c,f,g,m,o,u+1),c1(t,g,m,h,p,a,n,o,u+1)}function HA(t,e,r,i,s,a,n,o){let u=Math.abs(s-a);(!n&&s>a||n&&a>s)&&(u=2*Math.PI-u),o||(o=Math.max(6,Math.floor(6*Math.pow(i,1/3)*(u/Math.PI)))),o=Math.max(o,3);let c=u/o,f=s;c*=n?-1:1;for(let h=0;h<o+1;h++){const p=Math.cos(f),g=Math.sin(f),m=e+p*i,T=r+g*i;t.push(m,T),f+=c}}function Q6(t,e,r,i,s,a){const n=t[t.length-2],u=t[t.length-1]-r,c=n-e,f=s-r,h=i-e,p=Math.abs(u*h-c*f);if(p<1e-8||a===0){(t[t.length-2]!==e||t[t.length-1]!==r)&&t.push(e,r);return}const g=u*u+c*c,m=f*f+h*h,T=u*f+c*h,x=a*Math.sqrt(g)/p,v=a*Math.sqrt(m)/p,y=x*T/g,R=v*T/m,A=x*h+v*c,k=x*f+v*u,b=c*(v+y),C=u*(v+y),w=h*(x+R),O=f*(x+R),M=Math.atan2(C-k,b-A),$=Math.atan2(O-k,w-A);HA(t,A+e,k+r,a,M,$,c*f>h*u)}const bc=Math.PI*2,zE={centerX:0,centerY:0,ang1:0,ang2:0},WE=({x:t,y:e},r,i,s,a,n,o,u)=>{t*=r,e*=i;const c=s*t-a*e,f=a*t+s*e;return u.x=c+n,u.y=f+o,u};function Zhe(t,e){const r=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),i=e===1.5707963267948966?.551915024494:r,s=Math.cos(t),a=Math.sin(t),n=Math.cos(t+e),o=Math.sin(t+e);return[{x:s-a*i,y:a+s*i},{x:n+o*i,y:o-n*i},{x:n,y:o}]}const Dk=(t,e,r,i)=>{const s=t*i-e*r<0?-1:1;let a=t*r+e*i;return a>1&&(a=1),a<-1&&(a=-1),s*Math.acos(a)},Qhe=(t,e,r,i,s,a,n,o,u,c,f,h,p)=>{const g=Math.pow(s,2),m=Math.pow(a,2),T=Math.pow(f,2),x=Math.pow(h,2);let v=g*m-g*x-m*T;v<0&&(v=0),v/=g*x+m*T,v=Math.sqrt(v)*(n===o?-1:1);const y=v*s/a*h,R=v*-a/s*f,A=c*y-u*R+(t+r)/2,k=u*y+c*R+(e+i)/2,b=(f-y)/s,C=(h-R)/a,w=(-f-y)/s,O=(-h-R)/a,M=Dk(1,0,b,C);let $=Dk(b,C,w,O);o===0&&$>0&&($-=bc),o===1&&$<0&&($+=bc),p.centerX=A,p.centerY=k,p.ang1=M,p.ang2=$};function J6(t,e,r,i,s,a,n,o=0,u=0,c=0){if(a===0||n===0)return;const f=Math.sin(o*bc/360),h=Math.cos(o*bc/360),p=h*(e-i)/2+f*(r-s)/2,g=-f*(e-i)/2+h*(r-s)/2;if(p===0&&g===0)return;a=Math.abs(a),n=Math.abs(n);const m=Math.pow(p,2)/Math.pow(a,2)+Math.pow(g,2)/Math.pow(n,2);m>1&&(a*=Math.sqrt(m),n*=Math.sqrt(m)),Qhe(e,r,i,s,a,n,u,c,f,h,p,g,zE);let{ang1:T,ang2:x}=zE;const{centerX:v,centerY:y}=zE;let R=Math.abs(x)/(bc/4);Math.abs(1-R)<1e-7&&(R=1);const A=Math.max(Math.ceil(R),1);x/=A;let k=t[t.length-2],b=t[t.length-1];const C={x:0,y:0};for(let w=0;w<A;w++){const O=Zhe(T,x),{x:M,y:$}=WE(O[0],a,n,h,f,v,y,C),{x:G,y:Z}=WE(O[1],a,n,h,f,v,y,C),{x:ce,y:Y}=WE(O[2],a,n,h,f,v,y,C);$A(t,k,b,M,$,G,Z,ce,Y),k=ce,b=Y,T+=x}}function eF(t,e,r){const i=(n,o)=>{const u=o.x-n.x,c=o.y-n.y,f=Math.sqrt(u*u+c*c),h=u/f,p=c/f;return{len:f,nx:h,ny:p}},s=(n,o)=>{n===0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)};let a=e[e.length-1];for(let n=0;n<e.length;n++){const o=e[n%e.length],u=o.radius??r;if(u<=0){s(n,o),a=o;continue}const c=e[(n+1)%e.length],f=i(o,a),h=i(o,c);if(f.len<1e-4||h.len<1e-4){s(n,o),a=o;continue}let p=Math.asin(f.nx*h.ny-f.ny*h.nx),g=1,m=!1;f.nx*h.nx-f.ny*-h.ny<0?p<0?p=Math.PI+p:(p=Math.PI-p,g=-1,m=!0):p>0&&(g=-1,m=!0);const T=p/2;let x,v=Math.abs(Math.cos(T)*u/Math.sin(T));v>Math.min(f.len/2,h.len/2)?(v=Math.min(f.len/2,h.len/2),x=Math.abs(v*Math.sin(T)/Math.cos(T))):x=u;const y=o.x+h.nx*v+-h.ny*x*g,R=o.y+h.ny*v+h.nx*x*g,A=Math.atan2(f.ny,f.nx)+Math.PI/2*g,k=Math.atan2(h.ny,h.nx)-Math.PI/2*g;n===0&&t.moveTo(y+Math.cos(A)*x,R+Math.sin(A)*x),t.arc(y,R,x,A,k,m),a=o}}function tF(t,e,r,i){const s=(o,u)=>Math.sqrt((o.x-u.x)**2+(o.y-u.y)**2),a=(o,u,c)=>({x:o.x+(u.x-o.x)*c,y:o.y+(u.y-o.y)*c}),n=e.length;for(let o=0;o<n;o++){const u=e[(o+1)%n],c=u.radius??r;if(c<=0){o===0?t.moveTo(u.x,u.y):t.lineTo(u.x,u.y);continue}const f=e[o],h=e[(o+2)%n],p=s(f,u);let g;if(p<1e-4)g=u;else{const x=Math.min(p/2,c);g=a(u,f,x/p)}const m=s(h,u);let T;if(m<1e-4)T=u;else{const x=Math.min(m/2,c);T=a(u,h,x/m)}o===0?t.moveTo(g.x,g.y):t.lineTo(g.x,g.y),t.quadraticCurveTo(u.x,u.y,T.x,T.y,i)}}const Jhe=new lr;class rF{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new un,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,r){return this.startPoly(e,r),this}lineTo(e,r){this._ensurePoly();const i=this._currentPoly.points,s=i[i.length-2],a=i[i.length-1];return(s!==e||a!==r)&&i.push(e,r),this}arc(e,r,i,s,a,n){this._ensurePoly(!1);const o=this._currentPoly.points;return HA(o,e,r,i,s,a,n),this}arcTo(e,r,i,s,a){this._ensurePoly();const n=this._currentPoly.points;return Q6(n,e,r,i,s,a),this}arcToSvg(e,r,i,s,a,n,o){const u=this._currentPoly.points;return J6(u,this._currentPoly.lastX,this._currentPoly.lastY,n,o,e,r,i,s,a),this}bezierCurveTo(e,r,i,s,a,n,o){this._ensurePoly();const u=this._currentPoly;return $A(this._currentPoly.points,u.lastX,u.lastY,e,r,i,s,a,n,o),this}quadraticCurveTo(e,r,i,s,a){this._ensurePoly();const n=this._currentPoly;return Z6(this._currentPoly.points,n.lastX,n.lastY,e,r,i,s,a),this}closePath(){return this.endPoly(!0),this}addPath(e,r){this.endPoly(),r&&!r.isIdentity()&&(e=e.clone(!0),e.transform(r));const i=this.shapePrimitives,s=i.length;for(let a=0;a<e.instructions.length;a++){const n=e.instructions[a];this[n.action](...n.data)}if(e.checkForHoles&&i.length-s>1){let a=null;for(let n=s;n<i.length;n++){const o=i[n];if(o.shape.type==="polygon"){const u=o.shape,c=a==null?void 0:a.shape;c&&c.containsPolygon(u)?(a.holes||(a.holes=[]),a.holes.push(o),i.copyWithin(n,n+1),i.length--,n--):a=o}}}return this}finish(e=!1){this.endPoly(e)}rect(e,r,i,s,a){return this.drawShape(new lr(e,r,i,s),a),this}circle(e,r,i,s){return this.drawShape(new Cp(e,r,i),s),this}poly(e,r,i){const s=new Gu(e);return s.closePath=r,this.drawShape(s,i),this}regularPoly(e,r,i,s,a=0,n){s=Math.max(s|0,3);const o=-1*Math.PI/2+a,u=Math.PI*2/s,c=[];for(let f=0;f<s;f++){const h=o-f*u;c.push(e+i*Math.cos(h),r+i*Math.sin(h))}return this.poly(c,!0,n),this}roundPoly(e,r,i,s,a,n=0,o){if(s=Math.max(s|0,3),a<=0)return this.regularPoly(e,r,i,s,n);const u=i*Math.sin(Math.PI/s)-.001;a=Math.min(a,u);const c=-1*Math.PI/2+n,f=Math.PI*2/s,h=(s-2)*Math.PI/s/2;for(let p=0;p<s;p++){const g=p*f+c,m=e+i*Math.cos(g),T=r+i*Math.sin(g),x=g+Math.PI+h,v=g-Math.PI-h,y=m+a*Math.cos(x),R=T+a*Math.sin(x),A=m+a*Math.cos(v),k=T+a*Math.sin(v);p===0?this.moveTo(y,R):this.lineTo(y,R),this.quadraticCurveTo(m,T,A,k,o)}return this.closePath()}roundShape(e,r,i=!1,s){return e.length<3?this:(i?tF(this,e,r,s):eF(this,e,r),this.closePath())}filletRect(e,r,i,s,a){if(a===0)return this.rect(e,r,i,s);const n=Math.min(i,s)/2,o=Math.min(n,Math.max(-n,a)),u=e+i,c=r+s,f=o<0?-o:0,h=Math.abs(o);return this.moveTo(e,r+h).arcTo(e+f,r+f,e+h,r,h).lineTo(u-h,r).arcTo(u-f,r+f,u,r+h,h).lineTo(u,c-h).arcTo(u-f,c-f,e+i-h,c,h).lineTo(e+h,c).arcTo(e+f,c-f,e,c-h,h).closePath()}chamferRect(e,r,i,s,a,n){if(a<=0)return this.rect(e,r,i,s);const o=Math.min(a,Math.min(i,s)/2),u=e+i,c=r+s,f=[e+o,r,u-o,r,u,r+o,u,c-o,u-o,c,e+o,c,e,c-o,e,r+o];for(let h=f.length-1;h>=2;h-=2)f[h]===f[h-2]&&f[h-1]===f[h-3]&&f.splice(h-1,2);return this.poly(f,!0,n)}ellipse(e,r,i,s,a){return this.drawShape(new wp(e,r,i,s),a),this}roundRect(e,r,i,s,a,n){return this.drawShape(new Lp(e,r,i,s,a),n),this}drawShape(e,r){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:r}),this}startPoly(e,r){let i=this._currentPoly;return i&&this.endPoly(),i=new Gu,i.points.push(e,r),this._currentPoly=i,this}endPoly(e=!1){const r=this._currentPoly;return r&&r.points.length>2&&(r.closePath=e,this.shapePrimitives.push({shape:r})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new Gu,e)){const r=this.shapePrimitives[this.shapePrimitives.length-1];if(r){let i=r.shape.x,s=r.shape.y;if(r.transform&&!r.transform.isIdentity()){const a=r.transform,n=i;i=a.a*i+a.c*s+a.tx,s=a.b*n+a.d*s+a.ty}this._currentPoly.points.push(i,s)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let r=0;r<e.instructions.length;r++){const i=e.instructions[r];this[i.action](...i.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const r=this.shapePrimitives;for(let i=0;i<r.length;i++){const s=r[i],a=s.shape.getBounds(Jhe);s.transform?e.addRect(a,s.transform):e.addRect(a)}return e}}class la{constructor(e,r=!1){this.instructions=[],this.uid=Lr("graphicsPath"),this._dirty=!0,this.checkForHoles=r,typeof e=="string"?f6(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new rF(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,r){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,r]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,r,i,s,a){const n=this.instructions[this.instructions.length-1],o=this.getLastPoint(_r.shared);let u=0,c=0;if(!n||n.action!=="bezierCurveTo")u=o.x,c=o.y;else{u=n.data[2],c=n.data[3];const f=o.x,h=o.y;u=f+(f-u),c=h+(h-c)}return this.instructions.push({action:"bezierCurveTo",data:[u,c,e,r,i,s,a]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,r,i){const s=this.instructions[this.instructions.length-1],a=this.getLastPoint(_r.shared);let n=0,o=0;if(!s||s.action!=="quadraticCurveTo")n=a.x,o=a.y;else{n=s.data[0],o=s.data[1];const u=a.x,c=a.y;n=u+(u-n),o=c+(c-o)}return this.instructions.push({action:"quadraticCurveTo",data:[n,o,e,r,i]}),this._dirty=!0,this}rect(e,r,i,s,a){return this.instructions.push({action:"rect",data:[e,r,i,s,a]}),this._dirty=!0,this}circle(e,r,i,s){return this.instructions.push({action:"circle",data:[e,r,i,s]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,r,i,s,a,n,o){a||(a=s/2);const u=-1*Math.PI/2+n,c=i*2,f=Math.PI*2/c,h=[];for(let p=0;p<c;p++){const g=p%2?a:s,m=p*f+u;h.push(e+g*Math.cos(m),r+g*Math.sin(m))}return this.poly(h,!0,o),this}clone(e=!1){const r=new la;if(r.checkForHoles=this.checkForHoles,!e)r.instructions=this.instructions.slice();else for(let i=0;i<this.instructions.length;i++){const s=this.instructions[i];r.instructions.push({action:s.action,data:s.data.slice()})}return r}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const r=e.a,i=e.b,s=e.c,a=e.d,n=e.tx,o=e.ty;let u=0,c=0,f=0,h=0,p=0,g=0,m=0,T=0;for(let x=0;x<this.instructions.length;x++){const v=this.instructions[x],y=v.data;switch(v.action){case"moveTo":case"lineTo":u=y[0],c=y[1],y[0]=r*u+s*c+n,y[1]=i*u+a*c+o;break;case"bezierCurveTo":f=y[0],h=y[1],p=y[2],g=y[3],u=y[4],c=y[5],y[0]=r*f+s*h+n,y[1]=i*f+a*h+o,y[2]=r*p+s*g+n,y[3]=i*p+a*g+o,y[4]=r*u+s*c+n,y[5]=i*u+a*c+o;break;case"quadraticCurveTo":f=y[0],h=y[1],u=y[2],c=y[3],y[0]=r*f+s*h+n,y[1]=i*f+a*h+o,y[2]=r*u+s*c+n,y[3]=i*u+a*c+o;break;case"arcToSvg":u=y[5],c=y[6],m=y[0],T=y[1],y[0]=r*m+s*T,y[1]=i*m+a*T,y[5]=r*u+s*c+n,y[6]=i*u+a*c+o;break;case"circle":y[4]=Kl(y[3],e);break;case"rect":y[4]=Kl(y[4],e);break;case"ellipse":y[8]=Kl(y[8],e);break;case"roundRect":y[5]=Kl(y[5],e);break;case"addPath":y[0].transform(e);break;case"poly":y[2]=Kl(y[2],e);break;default:Rt("unknown transform action",v.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let r=this.instructions.length-1,i=this.instructions[r];if(!i)return e.x=0,e.y=0,e;for(;i.action==="closePath";){if(r--,r<0)return e.x=0,e.y=0,e;i=this.instructions[r]}switch(i.action){case"moveTo":case"lineTo":e.x=i.data[0],e.y=i.data[1];break;case"quadraticCurveTo":e.x=i.data[2],e.y=i.data[3];break;case"bezierCurveTo":e.x=i.data[4],e.y=i.data[5];break;case"arc":case"arcToSvg":e.x=i.data[5],e.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(e);break}return e}}function Kl(t,e){return t?t.prepend(e):e.clone()}function Kr(t,e,r){const i=t.getAttribute(e);return i?Number(i):r}function nF(t,e){const r=t.querySelectorAll("defs");for(let i=0;i<r.length;i++){const s=r[i];for(let a=0;a<s.children.length;a++){const n=s.children[a];switch(n.nodeName.toLowerCase()){case"lineargradient":e.defs[n.id]=ede(n);break;case"radialgradient":e.defs[n.id]=tde();break}}}}function ede(t){const e=Kr(t,"x1",0),r=Kr(t,"y1",0),i=Kr(t,"x2",1),s=Kr(t,"y2",0),a=t.getAttribute("gradientUnits")||"objectBoundingBox",n=new Is(e,r,i,s,a==="objectBoundingBox"?"local":"global");for(let o=0;o<t.children.length;o++){const u=t.children[o],c=Kr(u,"offset",0),f=qt.shared.setValue(u.getAttribute("stop-color")).toNumber();n.addColorStop(c,f)}return n}function tde(t){return Rt("[SVG Parser] Radial gradients are not yet supported"),new Is(0,0,1,0)}function f1(t){const e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const h1={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function qA(t,e){const r=t.getAttribute("style"),i={},s={},a={strokeStyle:i,fillStyle:s,useFill:!1,useStroke:!1};for(const n in h1){const o=t.getAttribute(n);o&&kk(e,a,n,o.trim())}if(r){const n=r.split(";");for(let o=0;o<n.length;o++){const u=n[o].trim(),[c,f]=u.split(":");h1[c]&&kk(e,a,c,f.trim())}}return{strokeStyle:a.useStroke?i:null,fillStyle:a.useFill?s:null,useFill:a.useFill,useStroke:a.useStroke}}function kk(t,e,r,i){switch(r){case"stroke":if(i!=="none"){if(i.startsWith("url(")){const s=f1(i);e.strokeStyle.fill=t.defs[s]}else e.strokeStyle.color=qt.shared.setValue(i).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(i);break;case"fill":if(i!=="none"){if(i.startsWith("url(")){const s=f1(i);e.fillStyle.fill=t.defs[s]}else e.fillStyle.color=qt.shared.setValue(i).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(i);break;case"stroke-opacity":e.strokeStyle.alpha=Number(i);break;case"opacity":e.fillStyle.alpha=Number(i),e.strokeStyle.alpha=Number(i);break}}function iF(t,e){if(typeof t=="string"){const n=document.createElement("div");n.innerHTML=t.trim(),t=n.querySelector("svg")}const r={context:e,defs:{},path:new la};nF(t,r);const i=t.children,{fillStyle:s,strokeStyle:a}=qA(t,r);for(let n=0;n<i.length;n++){const o=i[n];o.nodeName.toLowerCase()!=="defs"&&sF(o,r,s,a)}return e}function sF(t,e,r,i){const s=t.children,{fillStyle:a,strokeStyle:n}=qA(t,e);a&&r?r={...r,...a}:a&&(r=a),n&&i?i={...i,...n}:n&&(i=n);const o=!r&&!i;o&&(r={color:0});let u,c,f,h,p,g,m,T,x,v,y,R,A,k,b,C,w;switch(t.nodeName.toLowerCase()){case"path":k=t.getAttribute("d"),t.getAttribute("fill-rule")==="evenodd"&&Rt("SVG Evenodd fill rule not supported, your svg may render incorrectly"),b=new la(k,!0),e.context.path(b),r&&e.context.fill(r),i&&e.context.stroke(i);break;case"circle":m=Kr(t,"cx",0),T=Kr(t,"cy",0),x=Kr(t,"r",0),e.context.ellipse(m,T,x,x),r&&e.context.fill(r),i&&e.context.stroke(i);break;case"rect":u=Kr(t,"x",0),c=Kr(t,"y",0),C=Kr(t,"width",0),w=Kr(t,"height",0),v=Kr(t,"rx",0),y=Kr(t,"ry",0),v||y?e.context.roundRect(u,c,C,w,v||y):e.context.rect(u,c,C,w),r&&e.context.fill(r),i&&e.context.stroke(i);break;case"ellipse":m=Kr(t,"cx",0),T=Kr(t,"cy",0),v=Kr(t,"rx",0),y=Kr(t,"ry",0),e.context.beginPath(),e.context.ellipse(m,T,v,y),r&&e.context.fill(r),i&&e.context.stroke(i);break;case"line":f=Kr(t,"x1",0),h=Kr(t,"y1",0),p=Kr(t,"x2",0),g=Kr(t,"y2",0),e.context.beginPath(),e.context.moveTo(f,h),e.context.lineTo(p,g),i&&e.context.stroke(i);break;case"polygon":A=t.getAttribute("points"),R=A.match(/\d+/g).map(O=>parseInt(O,10)),e.context.poly(R,!0),r&&e.context.fill(r),i&&e.context.stroke(i);break;case"polyline":A=t.getAttribute("points"),R=A.match(/\d+/g).map(O=>parseInt(O,10)),e.context.poly(R,!1),i&&e.context.stroke(i);break;case"g":case"svg":break;default:{Rt(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}o&&(r=null);for(let O=0;O<s.length;O++)sF(s[O],e,r,i)}function rde(t){return qt.isColorLike(t)}function Uk(t){return t instanceof of}function Mk(t){return t instanceof Is}function nde(t){return t instanceof ct}function ide(t,e,r){const i=qt.shared.setValue(e??0);return t.color=i.toNumber(),t.alpha=i.alpha===1?r.alpha:i.alpha,t.texture=ct.WHITE,{...r,...t}}function sde(t,e,r){return t.texture=e,{...r,...t}}function Nk(t,e,r){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...r,...t}}function Fk(t,e,r){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...r,...t}}function ade(t,e){const r={...e,...t},i=qt.shared.setValue(r.color);return r.alpha*=i.alpha,r.color=i.toNumber(),r}function ka(t,e){if(t==null)return null;const r={},i=t;return rde(t)?ide(r,t,e):nde(t)?sde(r,t,e):Uk(t)?Nk(r,t,e):Mk(t)?Fk(r,t,e):i.fill&&Uk(i.fill)?Nk(i,i.fill,e):i.fill&&Mk(i.fill)?Fk(i,i.fill,e):ade(i,e)}function Hc(t,e){const{width:r,alignment:i,miterLimit:s,cap:a,join:n,pixelLine:o,...u}=e,c=ka(t,u);return c?{width:r,alignment:i,miterLimit:s,cap:a,join:n,pixelLine:o,...c}:null}const ode=new _r,Gk=new Et,XA=class xs extends ui{constructor(){super(...arguments),this.uid=Lr("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new la,this._transform=new Et,this._fillStyle={...xs.defaultFillStyle},this._strokeStyle={...xs.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new un,this._boundsDirty=!0}clone(){const e=new xs;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=ka(e,xs.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=Hc(e,xs.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=ka(e,xs.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=ka(e,xs.defaultStrokeStyle),this}texture(e,r,i,s,a,n){return this.instructions.push({action:"texture",data:{image:e,dx:i||0,dy:s||0,dw:a||e.frame.width,dh:n||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:r?qt.shared.setValue(r).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new la,this}fill(e,r){let i;const s=this.instructions[this.instructions.length-1];return this._tick===0&&s&&s.action==="stroke"?i=s.data.path:i=this._activePath.clone(),i?(e!=null&&(r!==void 0&&typeof e=="number"&&(vt(Gt,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:r}),this._fillStyle=ka(e,xs.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:r}=this._activePath.getLastPoint(_r.shared);this._activePath.clear(),this._activePath.moveTo(e,r)}stroke(e){let r;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="fill"?r=i.data.path:r=this._activePath.clone(),r?(e!=null&&(this._strokeStyle=Hc(e,xs.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const r=this.instructions[this.instructions.length-1-e],i=this._activePath.clone();if(r&&(r.action==="stroke"||r.action==="fill"))if(r.data.hole)r.data.hole.addPath(i);else{r.data.hole=i;break}}return this._initNextPathLocation(),this}arc(e,r,i,s,a,n){this._tick++;const o=this._transform;return this._activePath.arc(o.a*e+o.c*r+o.tx,o.b*e+o.d*r+o.ty,i,s,a,n),this}arcTo(e,r,i,s,a){this._tick++;const n=this._transform;return this._activePath.arcTo(n.a*e+n.c*r+n.tx,n.b*e+n.d*r+n.ty,n.a*i+n.c*s+n.tx,n.b*i+n.d*s+n.ty,a),this}arcToSvg(e,r,i,s,a,n,o){this._tick++;const u=this._transform;return this._activePath.arcToSvg(e,r,i,s,a,u.a*n+u.c*o+u.tx,u.b*n+u.d*o+u.ty),this}bezierCurveTo(e,r,i,s,a,n,o){this._tick++;const u=this._transform;return this._activePath.bezierCurveTo(u.a*e+u.c*r+u.tx,u.b*e+u.d*r+u.ty,u.a*i+u.c*s+u.tx,u.b*i+u.d*s+u.ty,u.a*a+u.c*n+u.tx,u.b*a+u.d*n+u.ty,o),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,r,i,s){return this._tick++,this._activePath.ellipse(e,r,i,s,this._transform.clone()),this}circle(e,r,i){return this._tick++,this._activePath.circle(e,r,i,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,r){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*e+i.c*r+i.tx,i.b*e+i.d*r+i.ty),this}moveTo(e,r){this._tick++;const i=this._transform,s=this._activePath.instructions,a=i.a*e+i.c*r+i.tx,n=i.b*e+i.d*r+i.ty;return s.length===1&&s[0].action==="moveTo"?(s[0].data[0]=a,s[0].data[1]=n,this):(this._activePath.moveTo(a,n),this)}quadraticCurveTo(e,r,i,s,a){this._tick++;const n=this._transform;return this._activePath.quadraticCurveTo(n.a*e+n.c*r+n.tx,n.b*e+n.d*r+n.ty,n.a*i+n.c*s+n.tx,n.b*i+n.d*s+n.ty,a),this}rect(e,r,i,s){return this._tick++,this._activePath.rect(e,r,i,s,this._transform.clone()),this}roundRect(e,r,i,s,a){return this._tick++,this._activePath.roundRect(e,r,i,s,a,this._transform.clone()),this}poly(e,r){return this._tick++,this._activePath.poly(e,r,this._transform.clone()),this}regularPoly(e,r,i,s,a=0,n){return this._tick++,this._activePath.regularPoly(e,r,i,s,a,n),this}roundPoly(e,r,i,s,a,n){return this._tick++,this._activePath.roundPoly(e,r,i,s,a,n),this}roundShape(e,r,i,s){return this._tick++,this._activePath.roundShape(e,r,i,s),this}filletRect(e,r,i,s,a){return this._tick++,this._activePath.filletRect(e,r,i,s,a),this}chamferRect(e,r,i,s,a,n){return this._tick++,this._activePath.chamferRect(e,r,i,s,a,n),this}star(e,r,i,s,a=0,n=0){return this._tick++,this._activePath.star(e,r,i,s,a,n,this._transform.clone()),this}svg(e){return this._tick++,iF(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,r=e){return this._transform.scale(e,r),this}setTransform(e,r,i,s,a,n){return e instanceof Et?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,r,i,s,a,n),this)}transform(e,r,i,s,a,n){return e instanceof Et?(this._transform.append(e),this):(Gk.set(e,r,i,s,a,n),this._transform.append(Gk),this)}translate(e,r=e){return this._transform.translate(e,r),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let r=0;r<this.instructions.length;r++){const i=this.instructions[r],s=i.action;if(s==="fill"){const a=i.data;e.addBounds(a.path.bounds)}else if(s==="texture"){const a=i.data;e.addFrame(a.dx,a.dy,a.dx+a.dw,a.dy+a.dh,a.transform)}if(s==="stroke"){const a=i.data,n=a.style.alignment,o=a.style.width*(1-n),u=a.path.bounds;e.addFrame(u.minX-o,u.minY-o,u.maxX+o,u.maxY+o)}}return e}containsPoint(e){var s;if(!this.bounds.containsPoint(e.x,e.y))return!1;const r=this.instructions;let i=!1;for(let a=0;a<r.length;a++){const n=r[a],o=n.data,u=o.path;if(!n.action||!u)continue;const c=o.style,f=u.shapePath.shapePrimitives;for(let h=0;h<f.length;h++){const p=f[h].shape;if(!c||!p)continue;const g=f[h].transform,m=g?g.applyInverse(e,ode):e;if(n.action==="fill")i=p.contains(m.x,m.y);else{const x=c;i=p.strokeContains(m.x,m.y,x.width,x.alignment)}const T=o.hole;if(T){const x=(s=T.shapePath)==null?void 0:s.shapePrimitives;if(x)for(let v=0;v<x.length;v++)x[v].shape.contains(m.x,m.y)&&(i=!1)}if(i)return!0}}return i}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(i),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(i)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};XA.defaultFillStyle={color:16777215,alpha:1,texture:ct.WHITE,matrix:null,fill:null,textureSpace:"local"};XA.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:ct.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let Gn=XA;const Kk=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function aF(t){const e=[];let r=0;for(let i=0;i<Kk.length;i++){const s=`_${Kk[i]}`;e[r++]=t[s]}return r=oF(t._fill,e,r),r=lde(t._stroke,e,r),r=cde(t.dropShadow,e,r),r=ude(t.filters,e,r),e.join("-")}function ude(t,e,r){if(!t)return r;for(const i of t)e[r++]=i.uid;return r}function oF(t,e,r){var i;return t&&(e[r++]=t.color,e[r++]=t.alpha,e[r++]=(i=t.fill)==null?void 0:i.styleKey),r}function lde(t,e,r){return t&&(r=oF(t,e,r),e[r++]=t.width,e[r++]=t.alignment,e[r++]=t.cap,e[r++]=t.join,e[r++]=t.miterLimit),r}function cde(t,e,r){return t&&(e[r++]=t.alpha,e[r++]=t.angle,e[r++]=t.blur,e[r++]=t.distance,e[r++]=qt.shared.setValue(t.color).toNumber()),r}const zA=class Eu extends ui{constructor(e={}){super(),fde(e);const r={...Eu.defaultTextStyle,...e};for(const i in r){const s=i;this[s]=r[i]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...Eu.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...Eu.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get filters(){return this._filters}set filters(e){this._filters=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...Gn.defaultFillStyle,...e},()=>{this._fill=ka({...this._originalFill},Gn.defaultFillStyle)})),this._fill=ka(e===0?"black":e,Gn.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...Gn.defaultStrokeStyle,...e},()=>{this._stroke=Hc({...this._originalStroke},Gn.defaultStrokeStyle)})),this._stroke=Hc(e,Gn.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=aF(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=Eu.defaultTextStyle;for(const r in e)this[r]=e[r]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new Eu({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let e=0;if(this._filters)for(let r=0;r<this._filters.length;r++)e+=this._filters[r].padding;return Math.max(this._padding,e)}destroy(e=!1){var i,s,a,n;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const o=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(i=this._fill)!=null&&i.texture&&this._fill.texture.destroy(o),(s=this._originalFill)!=null&&s.texture&&this._originalFill.texture.destroy(o),(a=this._stroke)!=null&&a.texture&&this._stroke.texture.destroy(o),(n=this._originalStroke)!=null&&n.texture&&this._originalStroke.texture.destroy(o)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,r){return new Proxy(e,{set:(i,s,a)=>(i[s]=a,r==null||r(s,a),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(qt.isColorLike(e)||e instanceof Is||e instanceof of)}};zA.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};zA.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let si=zA;function fde(t){const e=t;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const r=si.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??r.alpha,angle:e.dropShadowAngle??r.angle,blur:e.dropShadowBlur??r.blur,color:e.dropShadowColor??r.color,distance:e.dropShadowDistance??r.distance}}if(e.strokeThickness!==void 0){vt(Gt,"strokeThickness is now a part of stroke");const r=e.stroke;let i={};if(qt.isColorLike(r))i.color=r;else if(r instanceof Is||r instanceof of)i.fill=r;else if(Object.hasOwnProperty.call(r,"color")||Object.hasOwnProperty.call(r,"fill"))i=r;else throw new Error("Invalid stroke value.");t.stroke={...i,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){vt(Gt,"gradient fill is now a fill pattern: `new FillGradient(...)`");let r;t.fontSize==null?t.fontSize=si.defaultTextStyle.fontSize:typeof t.fontSize=="string"?r=parseInt(t.fontSize,10):r=t.fontSize;const i=new Is({start:{x:0,y:0},end:{x:0,y:(r||0)*1.7}}),s=e.fillGradientStops.map(a=>qt.shared.setValue(a).toNumber());s.forEach((a,n)=>{const o=n/(s.length-1);i.addColorStop(o,a)}),t.fill={fill:i}}}class uF{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,r){const i=Qt.get().createCanvas();i.width=e,i.height=r;const s=i.getContext("2d");return{canvas:i,context:s}}getOptimalCanvasAndContext(e,r,i=1){e=Math.ceil(e*i-1e-6),r=Math.ceil(r*i-1e-6),e=Fo(e),r=Fo(r);const s=(e<<17)+(r<<1);this._canvasPool[s]||(this._canvasPool[s]=[]);let a=this._canvasPool[s].pop();return a||(a=this._createCanvasAndContext(e,r)),a}returnCanvasAndContext(e){const r=e.canvas,{width:i,height:s}=r,a=(i<<17)+(s<<1);e.context.resetTransform(),e.context.clearRect(0,0,i,s),this._canvasPool[a].push(e)}clear(){this._canvasPool={}}}const ca=new uF,Vk=1e5;function qc(t,e,r,i=0){if(t.texture===ct.WHITE&&!t.fill)return qt.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof of){const s=t.fill,a=e.createPattern(s.texture.source.resource,"repeat"),n=s.transform.copyTo(Et.shared);return n.scale(s.texture.frame.width,s.texture.frame.height),a.setTransform(n),a}else if(t.fill instanceof Is){const s=t.fill,a=s.type==="linear",n=s.textureSpace==="local";let o=1,u=1;n&&r&&(o=r.width+i,u=r.height+i);let c,f=!1;if(a){const{start:h,end:p}=s;c=e.createLinearGradient(h.x*o,h.y*u,p.x*o,p.y*u),f=Math.abs(p.x-h.x)<Math.abs((p.y-h.y)*.1)}else{const{center:h,innerRadius:p,outerCenter:g,outerRadius:m}=s;c=e.createRadialGradient(h.x*o,h.y*u,p*o,g.x*o,g.y*u,m*o)}if(f&&n&&r){const h=r.lineHeight/u;for(let p=0;p<r.lines.length;p++){const g=(p*r.lineHeight+i/2)/u;s.colorStops.forEach(m=>{const T=g+m.offset*h;c.addColorStop(Math.floor(T*Vk)/Vk,qt.shared.setValue(m.color).toHex())})}}else s.colorStops.forEach(h=>{c.addColorStop(h.offset,qt.shared.setValue(h.color).toHex())});return c}}else{const s=e.createPattern(t.texture.source.resource,"repeat"),a=t.matrix.copyTo(Et.shared);return a.scale(t.texture.frame.width,t.texture.frame.height),s.setTransform(a),s}return Rt("FillStyle not recognised",t),"red"}const lF=class cF extends DA{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;const r={...cF.defaultOptions,...e};this._textureSize=r.textureSize,this._mipmap=r.mipmap;const i=r.style.clone();r.overrideFill&&(i._fill.color=16777215,i._fill.alpha=1,i._fill.texture=ct.WHITE,i._fill.fill=null),this.applyFillAsTint=r.overrideFill;const s=i.fontSize;i.fontSize=this.baseMeasurementFontSize;const a=$c(i);r.overrideSize?i._stroke&&(i._stroke.width*=this.baseRenderedFontSize/s):i.fontSize=this.baseRenderedFontSize=s,this._style=i,this._skipKerning=r.skipKerning??!1,this.resolution=r.resolution??1,this._padding=r.padding??4,r.textureStyle&&(this._textureStyle=r.textureStyle instanceof Hi?r.textureStyle:new Hi(r.textureStyle)),this.fontMetrics=Bn.measureFont(a),this.lineHeight=i.lineHeight||this.fontMetrics.fontSize||i.fontSize}ensureCharacters(e){var x,v;const r=Bn.graphemeSegmenter(e).filter(y=>!this._currentChars.includes(y)).filter((y,R,A)=>A.indexOf(y)===R);if(!r.length)return;this._currentChars=[...this._currentChars,...r];let i;this._currentPageIndex===-1?i=this._nextPage():i=this.pages[this._currentPageIndex];let{canvas:s,context:a}=i.canvasAndContext,n=i.texture.source;const o=this._style;let u=this._currentX,c=this._currentY,f=this._currentMaxCharHeight;const h=this.baseRenderedFontSize/this.baseMeasurementFontSize,p=this._padding*h;let g=!1;const m=s.width/this.resolution,T=s.height/this.resolution;for(let y=0;y<r.length;y++){const R=r[y],A=Bn.measureText(R,o,s,!1);A.lineHeight=A.height;const k=A.width*h,b=Math.ceil((o.fontStyle==="italic"?2:1)*k),C=A.height*h,w=b+p*2,O=C+p*2;if(g=!1,R!==`
`&&R!=="\r"&&R!=="	"&&R!==" "&&(g=!0,f=Math.ceil(Math.max(O,f))),u+w>m&&(c+=f,f=O,u=0,c+f>T)){n.update();const $=this._nextPage();s=$.canvasAndContext.canvas,a=$.canvasAndContext.context,n=$.texture.source,u=0,c=0,f=0}const M=k/h-(((x=o.dropShadow)==null?void 0:x.distance)??0)-(((v=o._stroke)==null?void 0:v.width)??0);if(this.chars[R]={id:R.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:M,kerning:{}},g){this._drawGlyph(a,A,u+p,c+p,h,o);const $=n.width*h,G=n.height*h,Z=new lr(u/$*n.width,c/G*n.height,w/$*n.width,O/G*n.height);this.chars[R].texture=new ct({source:n,frame:Z}),u+=Math.ceil(w)}}n.update(),this._currentX=u,this._currentY=c,this._currentMaxCharHeight=f,this._skipKerning&&this._applyKerning(r,a)}get pageTextures(){return vt(Gt,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,r){const i=this._measureCache;for(let s=0;s<e.length;s++){const a=e[s];for(let n=0;n<this._currentChars.length;n++){const o=this._currentChars[n];let u=i[a];u||(u=i[a]=r.measureText(a).width);let c=i[o];c||(c=i[o]=r.measureText(o).width);let f=r.measureText(a+o).width,h=f-(u+c);h&&(this.chars[a].kerning[o]=h),f=r.measureText(a+o).width,h=f-(u+c),h&&(this.chars[o].kerning[a]=h)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,r=ca.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(r.context,this._style,e);const i=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),s=new ct({source:new Va({resource:r.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(s.source.style=this._textureStyle);const a={canvasAndContext:r,texture:s};return this.pages[this._currentPageIndex]=a,a}_setupContext(e,r,i){r.fontSize=this.baseRenderedFontSize,e.scale(i,i),e.font=$c(r),r.fontSize=this.baseMeasurementFontSize,e.textBaseline=r.textBaseline;const s=r._stroke,a=(s==null?void 0:s.width)??0;if(s&&(e.lineWidth=a,e.lineJoin=s.join,e.miterLimit=s.miterLimit,e.strokeStyle=qc(s,e)),r._fill&&(e.fillStyle=qc(r._fill,e)),r.dropShadow){const n=r.dropShadow,o=qt.shared.setValue(n.color).toArray(),u=n.blur*i,c=n.distance*i;e.shadowColor=`rgba(${o[0]*255},${o[1]*255},${o[2]*255},${n.alpha})`,e.shadowBlur=u,e.shadowOffsetX=Math.cos(n.angle)*c,e.shadowOffsetY=Math.sin(n.angle)*c}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,r,i,s,a,n){const o=r.text,u=r.fontProperties,c=n._stroke,f=((c==null?void 0:c.width)??0)*a,h=i+f/2,p=s-f/2,g=u.descent*a,m=r.lineHeight*a;let T=!1;n.stroke&&f&&(T=!0,e.strokeText(o,h,p+m-g));const{shadowBlur:x,shadowOffsetX:v,shadowOffsetY:y}=e;n._fill&&(T&&(e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),e.fillText(o,h,p+m-g)),T&&(e.shadowBlur=x,e.shadowOffsetX=v,e.shadowOffsetY=y)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:r,texture:i}=this.pages[e];ca.returnCanvasAndContext(r),i.destroy(!0)}this.pages=null}};lF.defaultOptions={textureSize:512,style:new si,mipmap:!0};let d1=lF;function Np(t,e,r,i){const s={width:0,height:0,offsetY:0,scale:e.fontSize/r.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};s.offsetY=r.baseLineOffset;let a=s.lines[0],n=null,o=!0;const u={width:0,start:0,index:0,positions:[],chars:[]},c=x=>{const v=a.width;for(let y=0;y<u.index;y++){const R=x.positions[y];a.chars.push(x.chars[y]),a.charPositions.push(R+v)}a.width+=x.width,o=!1,u.width=0,u.index=0,u.chars.length=0},f=()=>{let x=a.chars.length-1;if(i){let v=a.chars[x];for(;v===" ";)a.width-=r.chars[v].xAdvance,v=a.chars[--x]}s.width=Math.max(s.width,a.width),a={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},o=!0,s.lines.push(a),s.height+=r.lineHeight},h=r.baseMeasurementFontSize/e.fontSize,p=e.letterSpacing*h,g=e.wordWrapWidth*h,m=e.wordWrap&&e.breakWords,T=x=>x-p>g;for(let x=0;x<t.length+1;x++){let v;const y=x===t.length;y||(v=t[x]);const R=r.chars[v]||r.chars[" "];if(/(?:\s)/.test(v)||v==="\r"||v===`
`||y){if(!o&&e.wordWrap&&T(a.width+u.width)?(f(),c(u),y||a.charPositions.push(0)):(u.start=a.width,c(u),y||a.charPositions.push(0)),v==="\r"||v===`
`)a.width!==0&&f();else if(!y){const C=R.xAdvance+(R.kerning[n]||0)+p;a.width+=C,a.spaceWidth=C,a.spacesIndex.push(a.charPositions.length),a.chars.push(v)}}else{const b=R.kerning[n]||0,C=R.xAdvance+b+p;m&&T(a.width+u.width+C)&&(c(u),f()),u.positions[u.index++]=u.width+b,u.chars.push(v),u.width+=C}n=v}return f(),e.align==="center"?hde(s):e.align==="right"?dde(s):e.align==="justify"&&pde(s),s}function hde(t){for(let e=0;e<t.lines.length;e++){const r=t.lines[e],i=t.width/2-r.width/2;for(let s=0;s<r.charPositions.length;s++)r.charPositions[s]+=i}}function dde(t){for(let e=0;e<t.lines.length;e++){const r=t.lines[e],i=t.width-r.width;for(let s=0;s<r.charPositions.length;s++)r.charPositions[s]+=i}}function pde(t){const e=t.width;for(let r=0;r<t.lines.length;r++){const i=t.lines[r];let s=0,a=i.spacesIndex[s++],n=0;const o=i.spacesIndex.length,c=(e-i.width)/o;for(let f=0;f<i.charPositions.length;f++)f===a&&(a=i.spacesIndex[s++],n+=c),i.charPositions[f]+=n}}function fF(t){if(t==="")return[];typeof t=="string"&&(t=[t]);const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(Array.isArray(s)){if(s.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${s.length}.`);if(s[0].length===0||s[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const a=s[0].charCodeAt(0),n=s[1].charCodeAt(0);if(n<a)throw new Error("[BitmapFont]: Invalid character range.");for(let o=a,u=n;o<=u;o++)e.push(String.fromCharCode(o))}else e.push(...Array.from(s))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}let Lh=0;class gde{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null}}getFont(e,r){var n;let i=`${r.fontFamily}-bitmap`,s=!0;if(r._fill.fill&&!r._stroke)i+=r._fill.fill.styleKey,s=!1;else if(r._stroke||r.dropShadow){let o=r.styleKey;o=o.substring(0,o.lastIndexOf("-")),i=`${o}-bitmap`,s=!1}if(!yr.has(i)){const o=new d1({style:r,overrideFill:s,overrideSize:!0,...this.defaultOptions});Lh++,Lh>50&&Rt("BitmapText",`You have dynamically created ${Lh} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),o.once("destroy",()=>{Lh--,yr.remove(i)}),yr.set(i,o)}const a=yr.get(i);return(n=a.ensureCharacters)==null||n.call(a,e),a}getLayout(e,r,i=!0){const s=this.getFont(e,r),a=Bn.graphemeSegmenter(e);return Np(a,r,s,i)}measureText(e,r,i=!0){return this.getLayout(e,r,i)}install(...e){var c,f,h,p;let r=e[0];typeof r=="string"&&(r={name:r,style:e[1],chars:(c=e[2])==null?void 0:c.chars,resolution:(f=e[2])==null?void 0:f.resolution,padding:(h=e[2])==null?void 0:h.padding,skipKerning:(p=e[2])==null?void 0:p.skipKerning},vt(Gt,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=r==null?void 0:r.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");r={...this.defaultOptions,...r};const s=r.style,a=s instanceof si?s:new si(s),n=a._fill.fill!==null&&a._fill.fill!==void 0,o=new d1({style:a,overrideFill:n,skipKerning:r.skipKerning,padding:r.padding,resolution:r.resolution,overrideSize:!1,textureStyle:r.textureStyle}),u=fF(r.chars);return o.ensureCharacters(u.join("")),yr.set(`${i}-bitmap`,o),o.once("destroy",()=>yr.remove(`${i}-bitmap`)),o}uninstall(e){const r=`${e}-bitmap`,i=yr.get(r);i&&i.destroy()}}const nl=new gde;class WA extends DA{constructor(e,r){super();const{textures:i,data:s}=e;Object.keys(s.pages).forEach(a=>{const n=s.pages[parseInt(a,10)],o=i[n.id];this.pages.push({texture:o})}),Object.keys(s.chars).forEach(a=>{const n=s.chars[a],{frame:o,source:u}=i[n.page],c=new lr(n.x+o.x,n.y+o.y,n.width,n.height),f=new ct({source:u,frame:c});this.chars[a]={id:a.codePointAt(0),xOffset:n.xOffset,yOffset:n.yOffset,xAdvance:n.xAdvance,kerning:n.kerning??{},texture:f}}),this.baseRenderedFontSize=s.fontSize,this.baseMeasurementFontSize=s.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:s.fontSize},this.baseLineOffset=s.baseLineOffset,this.lineHeight=s.lineHeight,this.fontFamily=s.fontFamily,this.distanceField=s.distanceField??{type:"none",range:0},this.url=r}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:r}=this.pages[e];r.destroy(!0)}this.pages=null}static install(e){nl.install(e)}static uninstall(e){nl.uninstall(e)}}const Wh={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const h in e){const p=e[h].match(/^[a-z]+/gm)[0],g=e[h].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const T in g){const x=g[T].split("="),v=x[0],y=x[1].replace(/"/gm,""),R=parseFloat(y),A=isNaN(R)?y:R;m[v]=A}r[p].push(m)}const i={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[s]=r.info,[a]=r.common,[n]=r.distanceField??[];n&&(i.distanceField={range:parseInt(n.distanceRange,10),type:n.fieldType}),i.fontSize=parseInt(s.size,10),i.fontFamily=s.face,i.lineHeight=parseInt(a.lineHeight,10);const o=r.page;for(let h=0;h<o.length;h++)i.pages.push({id:parseInt(o[h].id,10)||0,file:o[h].file});const u={};i.baseLineOffset=i.lineHeight-parseInt(a.base,10);const c=r.char;for(let h=0;h<c.length;h++){const p=c[h],g=parseInt(p.id,10);let m=p.letter??p.char??String.fromCharCode(g);m==="space"&&(m=" "),u[g]=m,i.chars[m]={id:g,page:parseInt(p.page,10)||0,x:parseInt(p.x,10),y:parseInt(p.y,10),width:parseInt(p.width,10),height:parseInt(p.height,10),xOffset:parseInt(p.xoffset,10),yOffset:parseInt(p.yoffset,10),xAdvance:parseInt(p.xadvance,10),kerning:{}}}const f=r.kerning||[];for(let h=0;h<f.length;h++){const p=parseInt(f[h].first,10),g=parseInt(f[h].second,10),m=parseInt(f[h].amount,10);i.chars[u[g]].kerning[u[p]]=m}return i}},p1={test(t){const e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},r=t.getElementsByTagName("info")[0],i=t.getElementsByTagName("common")[0],s=t.getElementsByTagName("distanceField")[0];s&&(e.distanceField={type:s.getAttribute("fieldType"),range:parseInt(s.getAttribute("distanceRange"),10)});const a=t.getElementsByTagName("page"),n=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning");e.fontSize=parseInt(r.getAttribute("size"),10),e.fontFamily=r.getAttribute("face"),e.lineHeight=parseInt(i.getAttribute("lineHeight"),10);for(let c=0;c<a.length;c++)e.pages.push({id:parseInt(a[c].getAttribute("id"),10)||0,file:a[c].getAttribute("file")});const u={};e.baseLineOffset=e.lineHeight-parseInt(i.getAttribute("base"),10);for(let c=0;c<n.length;c++){const f=n[c],h=parseInt(f.getAttribute("id"),10);let p=f.getAttribute("letter")??f.getAttribute("char")??String.fromCharCode(h);p==="space"&&(p=" "),u[h]=p,e.chars[p]={id:h,page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xOffset:parseInt(f.getAttribute("xoffset"),10),yOffset:parseInt(f.getAttribute("yoffset"),10),xAdvance:parseInt(f.getAttribute("xadvance"),10),kerning:{}}}for(let c=0;c<o.length;c++){const f=parseInt(o[c].getAttribute("first"),10),h=parseInt(o[c].getAttribute("second"),10),p=parseInt(o[c].getAttribute("amount"),10);e.chars[u[h]].kerning[u[f]]=p}return e}},g1={test(t){return typeof t=="string"&&t.includes("<font>")?p1.test(Qt.get().parseXML(t)):!1},parse(t){return p1.parse(Qt.get().parseXML(t))}},mde=[".xml",".fnt"],hF={extension:{type:pe.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof WA,getCacheableAssets(t,e){const r={};return t.forEach(i=>{r[i]=e,r[`${i}-bitmap`]=e}),r[`${e.fontFamily}-bitmap`]=e,r}},dF={extension:{type:pe.LoadParser,priority:Ai.Normal},name:"loadBitmapFont",test(t){return mde.includes(ti.extname(t).toLowerCase())},async testParse(t){return Wh.test(t)||g1.test(t)},async parse(t,e,r){const i=Wh.test(t)?Wh.parse(t):g1.parse(t),{src:s}=e,{pages:a}=i,n=[],o=i.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let h=0;h<a.length;++h){const p=a[h].file;let g=ti.join(ti.dirname(s),p);g=_d(g,s),n.push({src:g,data:o})}const u=await r.load(n),c=n.map(h=>u[h.src]);return new WA({data:i,textures:c},s)},async load(t,e){return await(await Qt.get().fetch(t)).text()},async unload(t,e,r){await Promise.all(t.pages.map(i=>r.unload(i.texture.source._sourceOrigin))),t.destroy()}};class pF{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<r;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const gF={extension:{type:pe.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof ct),getCacheableAssets:(t,e)=>{const r={};return t.forEach(i=>{e.forEach((s,a)=>{r[i+(a===0?"":a+1)]=s})}),r}};async function jA(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const mF={extension:{type:pe.DetectionParser,priority:1},test:async()=>jA("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")},$k=["png","jpg","jpeg"],_F={extension:{type:pe.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...$k],remove:async t=>t.filter(e=>!$k.includes(e))},_de="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Fp(t){return _de?!1:document.createElement("video").canPlayType(t)!==""}const bF={extension:{type:pe.DetectionParser,priority:0},test:async()=>Fp("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")},xF={extension:{type:pe.DetectionParser,priority:0},test:async()=>Fp("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")},vF={extension:{type:pe.DetectionParser,priority:0},test:async()=>Fp("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")},EF={extension:{type:pe.DetectionParser,priority:0},test:async()=>jA("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};class yF{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,i)=>(this._parsersValidated=!1,e[r]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const i={promise:null,parser:null};return i.promise=(async()=>{var n,o;let s=null,a=null;if(r.loadParser&&(a=this._parserHash[r.loadParser],a||Rt(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!a){for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];if(c.load&&((n=c.test)!=null&&n.call(c,e,r,this))){a=c;break}}if(!a)return Rt(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}s=await a.load(e,r,this),i.parser=a;for(let u=0;u<this.parsers.length;u++){const c=this.parsers[u];c.parse&&c.parse&&await((o=c.testParse)==null?void 0:o.call(c,s,r,this))&&(s=await c.parse(s,r,this)||s,i.parser=c)}return s})(),i}async load(e,r){this._parsersValidated||this._validateParsers();let i=0;const s={},a=Mc(e),n=Fi(e,c=>({alias:[c],src:c,data:{}})),o=n.length,u=n.map(async c=>{const f=ti.toAbsolute(c.src);if(!s[c.src])try{this.promiseCache[f]||(this.promiseCache[f]=this._getLoadPromiseAndParser(f,c)),s[c.src]=await this.promiseCache[f].promise,r&&r(++i/o)}catch(h){throw delete this.promiseCache[f],delete s[c.src],new Error(`[Loader.load] Failed to load ${f}.
${h}`)}});return await Promise.all(u),a?s[n[0].src]:s}async unload(e){const i=Fi(e,s=>({alias:[s],src:s})).map(async s=>{var o,u;const a=ti.toAbsolute(s.src),n=this.promiseCache[a];if(n){const c=await n.promise;delete this.promiseCache[a],await((u=(o=n.parser)==null?void 0:o.unload)==null?void 0:u.call(o,c,s,this))}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(r.name?e[r.name]&&Rt(`[Assets] loadParser name conflict "${r.name}"`):Rt("[Assets] loadParser should have a name"),{...e,[r.name]:r}),{})}}function Xo(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Xi(t,e){const r=t.split("?")[0],i=ti.extname(r).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const bde=".json",xde="application/json",TF={extension:{type:pe.LoadParser,priority:Ai.Low},name:"loadJson",test(t){return Xo(t,xde)||Xi(t,bde)},async load(t){return await(await Qt.get().fetch(t)).json()}},vde=".txt",Ede="text/plain",AF={name:"loadTxt",extension:{type:pe.LoadParser,priority:Ai.Low,name:"loadTxt"},test(t){return Xo(t,Ede)||Xi(t,vde)},async load(t){return await(await Qt.get().fetch(t)).text()}},yde=["normal","bold","100","200","300","400","500","600","700","800","900"],Tde=[".ttf",".otf",".woff",".woff2"],Ade=["font/ttf","font/otf","font/woff","font/woff2"],Sde=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function SF(t){const e=ti.extname(t),s=ti.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let a=s.length>0;for(const o of s)if(!o.match(Sde)){a=!1;break}let n=s.join(" ");return a||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}const Rde=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Cde(t){return Rde.test(t)?t:encodeURI(t)}const RF={extension:{type:pe.LoadParser,priority:Ai.Low},name:"loadWebFont",test(t){return Xo(t,Ade)||Xi(t,Tde)},async load(t,e){var i,s,a;const r=Qt.get().getFontFaceSet();if(r){const n=[],o=((i=e.data)==null?void 0:i.family)??SF(t),u=((a=(s=e.data)==null?void 0:s.weights)==null?void 0:a.filter(f=>yde.includes(f)))??["normal"],c=e.data??{};for(let f=0;f<u.length;f++){const h=u[f],p=new FontFace(o,`url(${Cde(t)})`,{...c,weight:h});await p.load(),r.add(p),n.push(p)}return yr.set(`${o}-and-url`,{url:t,fontFaces:n}),n.length===1?n[0]:n}return Rt("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>{yr.remove(`${e.family}-and-url`),Qt.get().getFontFaceSet().delete(e)})}};function Gp(t,e=1){var i;const r=(i=Ja.RETINA_PREFIX)==null?void 0:i.exec(t);return r?parseFloat(r[1]):e}function eo(t,e,r){t.label=r,t._sourceOrigin=r;const i=new ct({source:t,label:r}),s=()=>{delete e.promiseCache[r],yr.has(r)&&yr.remove(r)};return i.source.once("destroy",()=>{e.promiseCache[r]&&(Rt("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),s())}),i.once("destroy",()=>{t.destroyed||(Rt("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),s())}),i}const wde=".svg",Lde="image/svg+xml",CF={extension:{type:pe.LoadParser,priority:Ai.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return Xo(t,Lde)||Xi(t,wde)},async load(t,e,r){var i;return((i=e.data)==null?void 0:i.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?Bde(t):Ide(t,e,r,this.config.crossOrigin)},unload(t){t.destroy(!0)}};async function Ide(t,e,r,i){var x,v,y;const a=await(await Qt.get().fetch(t)).blob(),n=URL.createObjectURL(a),o=new Image;o.src=n,o.crossOrigin=i,await o.decode(),URL.revokeObjectURL(n);const u=document.createElement("canvas"),c=u.getContext("2d"),f=((x=e.data)==null?void 0:x.resolution)||Gp(t),h=((v=e.data)==null?void 0:v.width)??o.width,p=((y=e.data)==null?void 0:y.height)??o.height;u.width=h*f,u.height=p*f,c.drawImage(o,0,0,h*f,p*f);const{parseAsGraphicsContext:g,...m}=e.data??{},T=new Va({resource:u,alphaMode:"premultiply-alpha-on-upload",resolution:f,...m});return eo(T,r,t)}async function Bde(t){const r=await(await Qt.get().fetch(t)).text(),i=new Gn;return i.svg(r),i}const Pde=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let Ku=null,m1=class{constructor(){Ku||(Ku=URL.createObjectURL(new Blob([Pde],{type:"application/javascript"}))),this.worker=new Worker(Ku)}};m1.revokeObjectURL=function(){Ku&&(URL.revokeObjectURL(Ku),Ku=null)};const Ode=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let Vu=null,wF=class{constructor(){Vu||(Vu=URL.createObjectURL(new Blob([Ode],{type:"application/javascript"}))),this.worker=new Worker(Vu)}};wF.revokeObjectURL=function(){Vu&&(URL.revokeObjectURL(Vu),Vu=null)};let Hk=0,jE;class Dde{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new m1;r.addEventListener("message",i=>{r.terminate(),m1.revokeObjectURL(),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,r){var i;return this._run("loadImageBitmap",[e,(i=r==null?void 0:r.data)==null?void 0:i.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){jE===void 0&&(jE=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<jE&&(this._createdWorkers++,e=new wF().worker,e.addEventListener("message",r=>{this._complete(r.data),this._returnWorker(r.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const i=new Promise((s,a)=>{this._queue.push({id:e,arguments:r,resolve:s,reject:a})});return this._next(),i}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const r=this._queue.pop(),i=r.id;this._resolveHash[Hk]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:Hk++,id:i})}}const _1=new Dde,kde=[".jpeg",".jpg",".png",".webp",".avif"],Ude=["image/jpeg","image/png","image/webp","image/avif"];async function LF(t,e){var s;const r=await Qt.get().fetch(t);if(!r.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${r.status} ${r.statusText}`);const i=await r.blob();return((s=e==null?void 0:e.data)==null?void 0:s.alphaMode)==="premultiplied-alpha"?createImageBitmap(i,{premultiplyAlpha:"none"}):createImageBitmap(i)}const YA={name:"loadTextures",extension:{type:pe.LoadParser,priority:Ai.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Xo(t,Ude)||Xi(t,kde)},async load(t,e,r){var a;let i=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await _1.isImageBitmapSupported()?i=await _1.loadImageBitmap(t,e):i=await LF(t,e):i=await new Promise((n,o)=>{i=new Image,i.crossOrigin=this.config.crossOrigin,i.src=t,i.complete?n(i):(i.onload=()=>{n(i)},i.onerror=o)});const s=new Va({resource:i,alphaMode:"premultiply-alpha-on-upload",resolution:((a=e.data)==null?void 0:a.resolution)||Gp(t),...e.data});return eo(s,r,t)},unload(t){t.destroy(!0)}},IF=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],Mde=IF.map(t=>`video/${t.substring(1)}`);function BF(t,e,r){r===void 0&&!e.startsWith("data:")?t.crossOrigin=OF(e):r!==!1&&(t.crossOrigin=typeof r=="string"?r:"anonymous")}function PF(t){return new Promise((e,r)=>{t.addEventListener("canplaythrough",i),t.addEventListener("error",s),t.load();function i(){a(),e()}function s(n){a(),r(n)}function a(){t.removeEventListener("canplaythrough",i),t.removeEventListener("error",s)}})}function OF(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}const DF={name:"loadVideo",extension:{type:pe.LoadParser,name:"loadVideo"},test(t){const e=Xo(t,Mde),r=Xi(t,IF);return e||r},async load(t,e,r){var u,c;const i={...mc.defaultOptions,resolution:((u=e.data)==null?void 0:u.resolution)||Gp(t),alphaMode:((c=e.data)==null?void 0:c.alphaMode)||await TA(),...e.data},s=document.createElement("video"),a={preload:i.autoLoad!==!1?"auto":void 0,"webkit-playsinline":i.playsinline!==!1?"":void 0,playsinline:i.playsinline!==!1?"":void 0,muted:i.muted===!0?"":void 0,loop:i.loop===!0?"":void 0,autoplay:i.autoPlay!==!1?"":void 0};Object.keys(a).forEach(f=>{const h=a[f];h!==void 0&&s.setAttribute(f,h)}),i.muted===!0&&(s.muted=!0),BF(s,t,i.crossorigin);const n=document.createElement("source");let o;if(t.startsWith("data:"))o=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const f=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();o=mc.MIME_TYPES[f]||`video/${f}`}return n.src=t,o&&(n.type=o),new Promise(f=>{const h=async()=>{const p=new mc({...i,resource:s});s.removeEventListener("canplay",h),e.data.preload&&await PF(s),f(eo(p,r,t))};i.preload&&!i.autoPlay&&s.load(),s.addEventListener("canplay",h),s.appendChild(n)})},unload(t){t.destroy(!0)}},ZA={extension:{type:pe.ResolveParser,name:"resolveTexture"},test:YA.test,parse:t=>{var e;return{resolution:parseFloat(((e=Ja.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}},kF={extension:{type:pe.ResolveParser,priority:-2,name:"resolveJson"},test:t=>Ja.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:ZA.parse};class UF{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Ja,this.loader=new yF,this.cache=yr,this._backgroundLoader=new pF(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var a,n;if(this._initialized){Rt("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const r=((a=e.texturePreference)==null?void 0:a.resolution)??1,i=typeof r=="number"?[r]:r,s=await this._detectFormats({preferredFormats:(n=e.texturePreference)==null?void 0:n.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:s,resolution:i}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,r){this._initialized||await this.init();const i=Mc(e),s=Fi(e).map(o=>{if(typeof o!="string"){const u=this.resolver.getAlias(o);return u.some(c=>!this.resolver.hasKey(c))&&this.add(o),Array.isArray(u)?u[0]:u}return this.resolver.hasKey(o)||this.add({alias:o,src:o}),o}),a=this.resolver.resolve(s),n=await this._mapLoadToResolve(a,r);return i?n[s[0]]:n}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const s=this.resolver.resolveBundle(e),a={},n=Object.keys(s);let o=0,u=0;const c=()=>{r==null||r(++o/u)},f=n.map(h=>{const p=s[h];return u+=Object.keys(p).length,this._mapLoadToResolve(p,c).then(g=>{a[h]=g})});return await Promise.all(f),i?a[e[0]]:a}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return yr.get(e);const r={};for(let i=0;i<e.length;i++)r[i]=yr.get(e[i]);return r}async _mapLoadToResolve(e,r){const i=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const s=await this.loader.load(i,r);this._backgroundLoader.active=!0;const a={};return i.forEach(n=>{const o=s[n.src],u=[n.src];n.alias&&u.push(...n.alias),u.forEach(c=>{a[c]=o}),yr.set(u,o)}),a}async unload(e){this._initialized||await this.init();const r=Fi(e).map(s=>typeof s!="string"?s.src:s),i=this.resolver.resolve(r);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Fi(e);const r=this.resolver.resolveBundle(e),i=Object.keys(r).map(s=>this._unloadFromResolved(r[s]));await Promise.all(i)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(i=>{yr.remove(i.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const i of e.detections)e.skipDetections||await i.test()?r=await i.add(r):e.skipDetections||(r=await i.remove(r));return r=r.filter((i,s)=>r.indexOf(i)===s),r}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(i=>i in e).forEach(i=>{r.config[i]=e[i]})})}}const na=new UF;br.handleByList(pe.LoadParser,na.loader.parsers).handleByList(pe.ResolveParser,na.resolver.parsers).handleByList(pe.CacheParser,na.cache.parsers).handleByList(pe.DetectionParser,na.detections);br.add(gF,_F,mF,EF,bF,xF,vF,TF,AF,RF,CF,YA,DF,dF,hF,ZA,kF);const qk={loader:pe.LoadParser,resolver:pe.ResolveParser,cache:pe.CacheParser,detection:pe.DetectionParser};br.handle(pe.Asset,t=>{const e=t.ref;Object.entries(qk).filter(([r])=>!!e[r]).forEach(([r,i])=>br.add(Object.assign(e[r],{extension:e[r].extension??i})))},t=>{const e=t.ref;Object.keys(qk).filter(r=>!!e[r]).forEach(r=>br.remove(e[r]))});const Nde={extension:{type:pe.DetectionParser,priority:3},test:async()=>!!(await af()||sf()),add:async t=>[...t,"basis"],remove:async t=>t.filter(e=>e!=="basis")};class lf extends Hr{constructor(e){super(e),this.uploadMethodId="compressed",this.resource=e.resource,this.mipLevelCount=this.resource.length}}let Ih;function b1(){if(Ih)return Ih;const e=document.createElement("canvas").getContext("webgl");return e?(Ih=[...e.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...e.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...e.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...e.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Ih):[]}let Bh;async function x1(){if(Bh)return Bh;const t=await Qt.get().getNavigator().gpu.requestAdapter();return Bh=[...t.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...t.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Bh}let Ph;async function QA(){return Ph!==void 0||(Ph=await(async()=>{const t=await af(),e=sf();if(t&&e){const r=await x1(),i=b1();return r.filter(s=>i.includes(s))}else{if(t)return await x1();if(e)return b1()}return[]})()),Ph}const MF=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let Oh;async function cf(){if(Oh!==void 0)return Oh;const t=await QA();return Oh=[...MF,...t],Oh}const Fde=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let $u=null,NF=class{constructor(){$u||($u=URL.createObjectURL(new Blob([Fde],{type:"application/javascript"}))),this.worker=new Worker($u)}};NF.revokeObjectURL=function(){$u&&(URL.revokeObjectURL($u),$u=null)};const xd={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};function Gde(t){Object.assign(xd,t)}let Vl;const FF={};function Kde(t){return Vl||(Vl=new NF().worker,Vl.onmessage=e=>{const{success:r,url:i,textureOptions:s}=e.data;r||console.warn("Failed to load Basis texture",i),FF[i](s)},Vl.postMessage({type:"init",jsUrl:xd.jsUrl,wasmUrl:xd.wasmUrl,supportedTextures:t})),Vl}function GF(t,e){const r=Kde(e);return new Promise(i=>{FF[t]=i,r.postMessage({type:"load",url:t})})}const Vde={extension:{type:pe.LoadParser,priority:Ai.High,name:"loadBasis"},name:"loadBasis",test(t){return Xi(t,[".basis"])},async load(t,e,r){const i=await cf(),s=await GF(t,i),a=new lf(s);return eo(a,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};function $de(t,e){const r=t.getNumImages(),i=t.getNumLevels(0);if(!t.startTranscoding())throw new Error("startTranscoding failed");const a=[];for(let n=0;n<i;++n)for(let o=0;o<r;++o){const u=t.getImageTranscodedSizeInBytes(o,n,e),c=new Uint8Array(u);if(!t.transcodeImage(c,o,n,e,1,0))throw new Error("transcodeImage failed");a.push(c)}return a}const Hde={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function qde(t){const e=Hde[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const Xde={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},zde={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var JA=(t=>(t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",t))(JA||{}),eS=(t=>(t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",t))(eS||{});function cn(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var Zn=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.R8G8B8=20]="R8G8B8",t[t.A8R8G8B8=21]="A8R8G8B8",t[t.X8R8G8B8=22]="X8R8G8B8",t[t.R5G6B5=23]="R5G6B5",t[t.X1R5G5B5=24]="X1R5G5B5",t[t.A1R5G5B5=25]="A1R5G5B5",t[t.A4R4G4B4=26]="A4R4G4B4",t[t.R3G3B2=27]="R3G3B2",t[t.A8=28]="A8",t[t.A8R3G3B2=29]="A8R3G3B2",t[t.X4R4G4B4=30]="X4R4G4B4",t[t.A2B10G10R10=31]="A2B10G10R10",t[t.A8B8G8R8=32]="A8B8G8R8",t[t.X8B8G8R8=33]="X8B8G8R8",t[t.G16R16=34]="G16R16",t[t.A2R10G10B10=35]="A2R10G10B10",t[t.A16B16G16R16=36]="A16B16G16R16",t[t.A8P8=40]="A8P8",t[t.P8=41]="P8",t[t.L8=50]="L8",t[t.A8L8=51]="A8L8",t[t.A4L4=52]="A4L4",t[t.V8U8=60]="V8U8",t[t.L6V5U5=61]="L6V5U5",t[t.X8L8V8U8=62]="X8L8V8U8",t[t.Q8W8V8U8=63]="Q8W8V8U8",t[t.V16U16=64]="V16U16",t[t.A2W10V10U10=67]="A2W10V10U10",t[t.Q16W16V16U16=110]="Q16W16V16U16",t[t.R16F=111]="R16F",t[t.G16R16F=112]="G16R16F",t[t.A16B16G16R16F=113]="A16B16G16R16F",t[t.R32F=114]="R32F",t[t.G32R32F=115]="G32R32F",t[t.A32B32G32R32F=116]="A32B32G32R32F",t[t.UYVY=cn("UYVY")]="UYVY",t[t.R8G8_B8G8=cn("RGBG")]="R8G8_B8G8",t[t.YUY2=cn("YUY2")]="YUY2",t[t.D3DFMT_G8R8_G8B8=cn("GRGB")]="D3DFMT_G8R8_G8B8",t[t.DXT1=cn("DXT1")]="DXT1",t[t.DXT2=cn("DXT2")]="DXT2",t[t.DXT3=cn("DXT3")]="DXT3",t[t.DXT4=cn("DXT4")]="DXT4",t[t.DXT5=cn("DXT5")]="DXT5",t[t.ATI1=cn("ATI1")]="ATI1",t[t.AT1N=cn("AT1N")]="AT1N",t[t.ATI2=cn("ATI2")]="ATI2",t[t.AT2N=cn("AT2N")]="AT2N",t[t.BC4U=cn("BC4U")]="BC4U",t[t.BC4S=cn("BC4S")]="BC4S",t[t.BC5U=cn("BC5U")]="BC5U",t[t.BC5S=cn("BC5S")]="BC5S",t[t.DX10=cn("DX10")]="DX10",t))(Zn||{});const v1={[Zn.DXT1]:"bc1-rgba-unorm",[Zn.DXT2]:"bc2-rgba-unorm",[Zn.DXT3]:"bc2-rgba-unorm",[Zn.DXT4]:"bc3-rgba-unorm",[Zn.DXT5]:"bc3-rgba-unorm",[Zn.ATI1]:"bc4-r-unorm",[Zn.BC4U]:"bc4-r-unorm",[Zn.BC4S]:"bc4-r-snorm",[Zn.ATI2]:"bc5-rg-unorm",[Zn.BC5U]:"bc5-rg-unorm",[Zn.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},Qn={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},Ut={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:Xde,HEADER_DX10_FIELDS:zde,DXGI_FORMAT:JA,D3D10_RESOURCE_DIMENSION:eS,D3DFMT:Zn},KF={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function VF(t,e){const{format:r,fourCC:i,width:s,height:a,dataOffset:n,mipmapCount:o}=jde(t);if(!e.includes(r))throw new Error(`Unsupported texture format: ${i} ${r}, supported: ${e}`);if(o<=1)return{format:r,width:s,height:a,resource:[new Uint8Array(t,n)],alphaMode:"no-premultiply-alpha"};const u=Wde(r,s,a,n,o,t);return{format:r,width:s,height:a,resource:u,alphaMode:"no-premultiply-alpha"}}function Wde(t,e,r,i,s,a){const n=[],o=KF[t];let u=e,c=r,f=i;for(let h=0;h<s;++h){const p=Math.ceil(Math.max(4,u)/4)*4,g=Math.ceil(Math.max(4,c)/4)*4,m=o?p/4*g/4*o:u*c*4,T=new Uint8Array(a,f,m);n.push(T),f+=m,u=Math.max(u>>1,1),c=Math.max(c>>1,1)}return n}function jde(t){const e=new Uint32Array(t,0,Ut.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[Ut.HEADER_FIELDS.MAGIC]!==Ut.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const r=e[Ut.HEADER_FIELDS.HEIGHT],i=e[Ut.HEADER_FIELDS.WIDTH],s=Math.max(1,e[Ut.HEADER_FIELDS.MIPMAP_COUNT]),a=e[Ut.HEADER_FIELDS.PF_FLAGS],n=e[Ut.HEADER_FIELDS.FOURCC],o=Yde(e,a,n,t),u=Ut.MAGIC_SIZE+Ut.HEADER_SIZE+(n===Ut.D3DFMT.DX10?Ut.HEADER_DX10_SIZE:0);return{format:o,fourCC:n,width:i,height:r,dataOffset:u,mipmapCount:s}}function Yde(t,e,r,i){if(e&Ut.PIXEL_FORMAT_FLAGS.FOURCC){if(r===Ut.D3DFMT.DX10){const s=new Uint32Array(i,Ut.MAGIC_SIZE+Ut.HEADER_SIZE,Ut.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(s[Ut.HEADER_DX10_FIELDS.MISC_FLAG]===Ut.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(s[Ut.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===Ut.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const o=s[Ut.HEADER_DX10_FIELDS.DXGI_FORMAT];if(o in Qn)return Qn[o];throw new Error(`DDSParser cannot parse texture data with DXGI format ${o}`)}if(r in v1)return v1[r];throw new Error(`DDSParser cannot parse texture data with fourCC format ${r}`)}if(e&Ut.PIXEL_FORMAT_FLAGS.RGB||e&Ut.PIXEL_FORMAT_FLAGS.RGBA)return Zde(t);throw e&Ut.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&Ut.PIXEL_FORMAT_FLAGS.LUMINANCE||e&Ut.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&Ut.PIXEL_FORMAT_FLAGS.ALPHA||e&Ut.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function Zde(t){const e=t[Ut.HEADER_FIELDS.RGB_BITCOUNT],r=t[Ut.HEADER_FIELDS.R_BIT_MASK],i=t[Ut.HEADER_FIELDS.G_BIT_MASK],s=t[Ut.HEADER_FIELDS.B_BIT_MASK],a=t[Ut.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(r===255&&i===65280&&s===16711680&&a===4278190080)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(r===16711680&&i===65280&&s===255&&a===4278190080)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(r===1072693248&&i===1047552&&s===1023&&a===3221225472)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(r===65535&&i===4294901760&&s===0&&a===0)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(r===4294967295&&i===0&&s===0&&a===0)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(r===31744&&i===992&&s===31&&a===32768)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(r===63488&&i===2016&&s===31&&a===0)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(r===3840&&i===240&&s===15&&a===61440)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(r===255&&i===0&&s===0&&a===65280)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(r===65535&&i===0&&s===0&&a===0)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(r===255&&i===0&&s===0&&a===0)return Qn[Ut.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${e}, rBitMask = ${r}, gBitMask = ${i}, aBitMask = ${a}`)}const Qde={extension:{type:pe.LoadParser,priority:Ai.High,name:"loadDDS"},name:"loadDDS",test(t){return Xi(t,[".dds"])},async load(t,e,r){const i=await cf(),a=await(await fetch(t)).arrayBuffer(),n=VF(a,i),o=new lf(n);return eo(o,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};var $F=(t=>(t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGBA=6408]="RGBA",t[t.RGBA8UI=36220]="RGBA8UI",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGBA8I=36238]="RGBA8I",t[t.RGBA8=32856]="RGBA8",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))($F||{});const Jde={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},epe=[171,75,84,88,32,49,49,187,13,10,26,10],tpe={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},rpe=64,npe=67305985,ipe={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},spe={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},ape={32819:2,32820:2,33635:2},ope={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},Wr={FILE_HEADER_SIZE:rpe,FILE_IDENTIFIER:epe,FORMATS_TO_COMPONENTS:spe,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:ope,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:Jde,FIELDS:tpe,TYPES_TO_BYTES_PER_COMPONENT:ipe,TYPES_TO_BYTES_PER_PIXEL:ape,ENDIANNESS:npe};function HF(t,e){const r=new DataView(t);if(!fpe(r))throw new Error("Invalid KTX identifier in header");const{littleEndian:i,glType:s,glFormat:a,glInternalFormat:n,pixelWidth:o,pixelHeight:u,numberOfMipmapLevels:c,offset:f}=cpe(r),h=Wr.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[n];if(!h)throw new Error(`Unknown texture format ${n}`);if(!e.includes(h))throw new Error(`Unsupported texture format: ${h}, supportedFormats: ${e}`);const p=lpe(s,a,n),g=upe(r,s,p,o,u,f,c,i);return{format:h,width:o,height:u,resource:g,alphaMode:"no-premultiply-alpha"}}function upe(t,e,r,i,s,a,n,o){const u=i+3&-4,c=s+3&-4;let f=i*s;e===0&&(f=u*c);let h=f*r,p=i,g=s,m=u,T=c,x=a;const v=new Array(n);for(let y=0;y<n;y++){const R=t.getUint32(x,o);let A=x+4;v[y]=new Uint8Array(t.buffer,A,h),A+=h,x+=R+4,x=x%4!==0?x+4-x%4:x,p=p>>1||1,g=g>>1||1,m=p+4-1&-4,T=g+4-1&-4,h=m*T*r}return v}function lpe(t,e,r){let i=Wr.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[r];if(t!==0&&(Wr.TYPES_TO_BYTES_PER_COMPONENT[t]?i=Wr.TYPES_TO_BYTES_PER_COMPONENT[t]*Wr.FORMATS_TO_COMPONENTS[e]:i=Wr.TYPES_TO_BYTES_PER_PIXEL[t]),i===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return i}function cpe(t){const e=t.getUint32(Wr.FIELDS.ENDIANNESS,!0)===Wr.ENDIANNESS,r=t.getUint32(Wr.FIELDS.GL_TYPE,e),i=t.getUint32(Wr.FIELDS.GL_FORMAT,e),s=t.getUint32(Wr.FIELDS.GL_INTERNAL_FORMAT,e),a=t.getUint32(Wr.FIELDS.PIXEL_WIDTH,e),n=t.getUint32(Wr.FIELDS.PIXEL_HEIGHT,e)||1,o=t.getUint32(Wr.FIELDS.PIXEL_DEPTH,e)||1,u=t.getUint32(Wr.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,c=t.getUint32(Wr.FIELDS.NUMBER_OF_FACES,e),f=t.getUint32(Wr.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),h=t.getUint32(Wr.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(n===0||o!==1)throw new Error("Only 2D textures are supported");if(c!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:r,glFormat:i,glInternalFormat:s,pixelWidth:a,pixelHeight:n,numberOfMipmapLevels:f,offset:Wr.FILE_HEADER_SIZE+h}}function fpe(t){for(let e=0;e<Wr.FILE_IDENTIFIER.length;e++)if(t.getUint8(e)!==Wr.FILE_IDENTIFIER[e])return!1;return!0}const hpe={extension:{type:pe.LoadParser,priority:Ai.High,name:"loadKTX"},name:"loadKTX",test(t){return Xi(t,".ktx")},async load(t,e,r){const i=await cf(),a=await(await fetch(t)).arrayBuffer(),n=HF(a,i),o=new lf(n);return eo(o,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}},dpe=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type]?.(message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let Hu=null;class qF{constructor(){Hu||(Hu=URL.createObjectURL(new Blob([dpe],{type:"application/javascript"}))),this.worker=new Worker(Hu)}}qF.revokeObjectURL=function(){Hu&&(URL.revokeObjectURL(Hu),Hu=null)};const vd={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};function ppe(t){Object.assign(vd,t)}let $l;const XF={};function gpe(t){return $l||($l=new qF().worker,$l.onmessage=e=>{const{success:r,url:i,textureOptions:s}=e.data;r||console.warn("Failed to load KTX texture",i),XF[i](s)},$l.postMessage({type:"init",jsUrl:vd.jsUrl,wasmUrl:vd.wasmUrl,supportedTextures:t})),$l}function zF(t,e){const r=gpe(e);return new Promise(i=>{XF[t]=i,r.postMessage({type:"load",url:t})})}const mpe={extension:{type:pe.LoadParser,priority:Ai.High,name:"loadKTX2"},name:"loadKTX2",test(t){return Xi(t,".ktx2")},async load(t,e,r){const i=await cf(),s=await zF(t,i),a=new lf(s);return eo(a,r,t)},async unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}},YE={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:Xk},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:Xk}};function _pe(t){const e=t.format;if(YE[e]){const r=YE[e].convertFunction,i=t.resource;for(let s=0;s<i.length;s++)i[s]=r(i[s]);t.format=YE[e].convertedFormat}}function Xk(t){const e=t.byteLength/3,r=new Uint32Array(e);for(let i=0;i<e;++i)r[i]=t[i*3]+(t[i*3+1]<<8)+(t[i*3+2]<<16)+4278190080;return new Uint8Array(r.buffer)}function bpe(t){const e=[];for(let r=0;r<t.numLevels;r++){const i=t.getImageData(r,0,0),s=new Uint8Array(i.byteLength);s.set(i),e.push(s)}return e}const xpe={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function WF(t){const e=xpe[t];if(e)return e;throw new Error(`Unsupported glInternalFormat: ${t}`)}const vpe={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function jF(t){const e=vpe[t];if(e)return e;throw new Error(`Unsupported VkFormat: ${t}`)}function Epe(t){return t.classId===2?jF(t.vkFormat):WF(t.glInternalformat)}const ype={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function Tpe(t){const e=ype[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const Ed=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],Ape={extension:pe.ResolveParser,test:t=>Xi(t,[".ktx",".ktx2",".dds"]),parse:t=>{var i;let e;const r=t.split(".");if(r.length>2){const s=r[r.length-2];Ed.includes(s)&&(e=s)}else e=r[r.length-1];return{resolution:parseFloat(((i=Ja.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:e,src:t}}};let Dh;const Spe={extension:{type:pe.DetectionParser,priority:2},test:async()=>!!(await af()||sf()),add:async t=>{const e=await QA();return Dh=Rpe(e),[...Dh,...t]},remove:async t=>Dh?t.filter(e=>!(e in Dh)):t};function Rpe(t){const e=["basis"],r={};return t.forEach(i=>{const s=i.split("-")[0];s&&!r[s]&&(r[s]=!0,e.push(s))}),e.sort((i,s)=>{const a=Ed.indexOf(i),n=Ed.indexOf(s);return a===-1?1:n===-1?-1:a-n}),e}const Cpe=new un,E1=class{cull(e,r,i=!0){this._cullRecursive(e,r,i)}_cullRecursive(e,r,i=!0){if(e.cullable&&e.measurable&&e.includeInBuild){const s=e.cullArea??rf(e,i,Cpe);e.culled=s.x>=r.x+r.width||s.y>=r.y+r.height||s.x+s.width<=r.x||s.y+s.height<=r.y}else e.culled=!1;if(!(!e.cullableChildren||e.culled||!e.renderable||!e.measurable||!e.includeInBuild))for(let s=0;s<e.children.length;s++)this._cullRecursive(e.children[s],r,i)}};E1.shared=new E1;let YF=E1;class ZF{static init(){this._renderRef=this.render.bind(this),this.render=()=>{YF.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}ZF.extension={priority:10,type:pe.Application,name:"culler"};class wpe extends Bs{constructor(e={}){const{element:r,anchor:i,...s}=e;super({label:"DOMContainer",...s}),this.renderPipeId="dom",this.batched=!1,this._anchor=new _r(0,0),i&&(this.anchor=i),this.element=e.element||document.createElement("div")}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set element(e){this._element!==e&&(this._element=e,this.onViewUpdate())}get element(){return this._element}updateBounds(){const e=this._bounds,r=this._element;if(!r){e.minX=0,e.minY=0,e.maxX=0,e.maxY=0;return}const{offsetWidth:i,offsetHeight:s}=r;e.minX=0,e.maxX=i,e.minY=0,e.maxY=s}destroy(e=!1){var r,i;super.destroy(e),(i=(r=this._element)==null?void 0:r.parentNode)==null||i.removeChild(this._element),this._element=null,this._anchor=null}}class QF{constructor(e){this._attachedDomElements=[],this._renderer=e,this._renderer.runners.postrender.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}addRenderable(e,r){this._attachedDomElements.includes(e)||this._attachedDomElements.push(e)}updateRenderable(e){}validateRenderable(e){return!0}postrender(){var a;const e=this._attachedDomElements;if(e.length===0){this._domElement.remove();return}const r=this._renderer.view.canvas;this._domElement.parentNode!==r.parentNode&&((a=r.parentNode)==null||a.appendChild(this._domElement));const i=parseFloat(r.style.width)/r.width*this._renderer.resolution,s=parseFloat(r.style.height)/r.height*this._renderer.resolution;this._domElement.style.transform=`translate(${r.offsetLeft}px, ${r.offsetTop}px) scale(${i}, ${s})`;for(let n=0;n<e.length;n++){const o=e[n],u=o.element;if(!o.parent||o.globalDisplayStatus<7)u==null||u.remove(),e.splice(n,1),n--;else{this._domElement.contains(u)||(u.style.position="absolute",u.style.pointerEvents="auto",this._domElement.appendChild(u));const c=o.worldTransform,f=o._anchor,h=o.width*f.x,p=o.height*f.y;u.style.transformOrigin=`${h}px ${p}px`,u.style.transform=`matrix(${c.a}, ${c.b}, ${c.c}, ${c.d}, ${c.tx-h}, ${c.ty-p})`,u.style.opacity=o.groupAlpha.toString()}}}destroy(){var e;this._renderer.runners.postrender.remove(this);for(let r=0;r<this._attachedDomElements.length;r++)(e=this._attachedDomElements[r].element)==null||e.remove();this._attachedDomElements.length=0,this._domElement.remove(),this._renderer=null}}QF.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"dom"};var Hl={},Zs={},xo={},zk;function Kp(){if(zk)return xo;zk=1;function t(a,n,o){if(o===void 0&&(o=Array.prototype),a&&typeof o.find=="function")return o.find.call(a,n);for(var u=0;u<a.length;u++)if(Object.prototype.hasOwnProperty.call(a,u)){var c=a[u];if(n.call(void 0,c,u,a))return c}}function e(a,n){return n===void 0&&(n=Object),n&&typeof n.freeze=="function"?n.freeze(a):a}function r(a,n){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(a[o]=n[o]);return a}var i=e({HTML:"text/html",isHTML:function(a){return a===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),s=e({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===s.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return xo.assign=r,xo.find=t,xo.freeze=e,xo.MIME_TYPE=i,xo.NAMESPACE=s,xo}var Wk;function JF(){if(Wk)return Zs;Wk=1;var t=Kp(),e=t.find,r=t.NAMESPACE;function i(D){return D!==""}function s(D){return D?D.split(/[\t\n\f\r ]+/).filter(i):[]}function a(D,N){return D.hasOwnProperty(N)||(D[N]=!0),D}function n(D){if(!D)return[];var N=s(D);return Object.keys(N.reduce(a,{}))}function o(D){return function(N){return D&&D.indexOf(N)!==-1}}function u(D,N){for(var I in D)Object.prototype.hasOwnProperty.call(D,I)&&(N[I]=D[I])}function c(D,N){var I=D.prototype;if(!(I instanceof N)){let q=function(){};q.prototype=N.prototype,q=new q,u(I,q),D.prototype=I=q}I.constructor!=D&&(typeof D!="function"&&console.error("unknown Class:"+D),I.constructor=D)}var f={},h=f.ELEMENT_NODE=1,p=f.ATTRIBUTE_NODE=2,g=f.TEXT_NODE=3,m=f.CDATA_SECTION_NODE=4,T=f.ENTITY_REFERENCE_NODE=5,x=f.ENTITY_NODE=6,v=f.PROCESSING_INSTRUCTION_NODE=7,y=f.COMMENT_NODE=8,R=f.DOCUMENT_NODE=9,A=f.DOCUMENT_TYPE_NODE=10,k=f.DOCUMENT_FRAGMENT_NODE=11,b=f.NOTATION_NODE=12,C={},w={};C.INDEX_SIZE_ERR=(w[1]="Index size error",1),C.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2);var O=C.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3);C.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),C.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),C.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),C.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7);var M=C.NOT_FOUND_ERR=(w[8]="Not found",8);C.NOT_SUPPORTED_ERR=(w[9]="Not supported",9);var $=C.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10);C.INVALID_STATE_ERR=(w[11]="Invalid state",11),C.SYNTAX_ERR=(w[12]="Syntax error",12),C.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),C.NAMESPACE_ERR=(w[14]="Invalid namespace",14),C.INVALID_ACCESS_ERR=(w[15]="Invalid access",15);function G(D,N){if(N instanceof Error)var I=N;else I=this,Error.call(this,w[D]),this.message=w[D],Error.captureStackTrace&&Error.captureStackTrace(this,G);return I.code=D,N&&(this.message=this.message+": "+N),I}G.prototype=Error.prototype,u(C,G);function Z(){}Z.prototype={length:0,item:function(D){return D>=0&&D<this.length?this[D]:null},toString:function(D,N){for(var I=[],q=0;q<this.length;q++)P(this[q],I,D,N);return I.join("")},filter:function(D){return Array.prototype.filter.call(this,D)},indexOf:function(D){return Array.prototype.indexOf.call(this,D)}};function ce(D,N){this._node=D,this._refresh=N,Y(this)}function Y(D){var N=D._node._inc||D._node.ownerDocument._inc;if(D._inc!==N){var I=D._refresh(D._node);if(S(D,"length",I.length),!D.$$length||I.length<D.$$length)for(var q=I.length;q in D;q++)Object.prototype.hasOwnProperty.call(D,q)&&delete D[q];u(I,D),D._inc=N}}ce.prototype.item=function(D){return Y(this),this[D]||null},c(ce,Z);function J(){}function ie(D,N){for(var I=D.length;I--;)if(D[I]===N)return I}function le(D,N,I,q){if(q?N[ie(N,q)]=I:N[N.length++]=I,D){I.ownerElement=D;var fe=D.ownerDocument;fe&&(q&&ot(fe,D,q),nt(fe,D,I))}}function Te(D,N,I){var q=ie(N,I);if(q>=0){for(var fe=N.length-1;q<fe;)N[q]=N[++q];if(N.length=fe,D){var ze=D.ownerDocument;ze&&(ot(ze,D,I),I.ownerElement=null)}}else throw new G(M,new Error(D.tagName+"@"+I))}J.prototype={length:0,item:Z.prototype.item,getNamedItem:function(D){for(var N=this.length;N--;){var I=this[N];if(I.nodeName==D)return I}},setNamedItem:function(D){var N=D.ownerElement;if(N&&N!=this._ownerElement)throw new G($);var I=this.getNamedItem(D.nodeName);return le(this._ownerElement,this,D,I),I},setNamedItemNS:function(D){var N=D.ownerElement,I;if(N&&N!=this._ownerElement)throw new G($);return I=this.getNamedItemNS(D.namespaceURI,D.localName),le(this._ownerElement,this,D,I),I},removeNamedItem:function(D){var N=this.getNamedItem(D);return Te(this._ownerElement,this,N),N},removeNamedItemNS:function(D,N){var I=this.getNamedItemNS(D,N);return Te(this._ownerElement,this,I),I},getNamedItemNS:function(D,N){for(var I=this.length;I--;){var q=this[I];if(q.localName==N&&q.namespaceURI==D)return q}return null}};function Me(){}Me.prototype={hasFeature:function(D,N){return!0},createDocument:function(D,N,I){var q=new Xe;if(q.implementation=this,q.childNodes=new Z,q.doctype=I||null,I&&q.appendChild(I),N){var fe=q.createElementNS(D,N);q.appendChild(fe)}return q},createDocumentType:function(D,N,I){var q=new Oe;return q.name=D,q.nodeName=D,q.publicId=N||"",q.systemId=I||"",q}};function Ee(){}Ee.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(D,N){return ke(this,D,N)},replaceChild:function(D,N){ke(this,D,N,De),N&&this.removeChild(N)},removeChild:function(D){return qe(this,D)},appendChild:function(D){return this.insertBefore(D,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(D){return Ne(this.ownerDocument||this,this,D)},normalize:function(){for(var D=this.firstChild;D;){var N=D.nextSibling;N&&N.nodeType==g&&D.nodeType==g?(this.removeChild(N),D.appendData(N.data)):(D.normalize(),D=N)}},isSupported:function(D,N){return this.ownerDocument.implementation.hasFeature(D,N)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(D){for(var N=this;N;){var I=N._nsMap;if(I){for(var q in I)if(Object.prototype.hasOwnProperty.call(I,q)&&I[q]===D)return q}N=N.nodeType==p?N.ownerDocument:N.parentNode}return null},lookupNamespaceURI:function(D){for(var N=this;N;){var I=N._nsMap;if(I&&Object.prototype.hasOwnProperty.call(I,D))return I[D];N=N.nodeType==p?N.ownerDocument:N.parentNode}return null},isDefaultNamespace:function(D){var N=this.lookupPrefix(D);return N==null}};function se(D){return D=="<"&&"&lt;"||D==">"&&"&gt;"||D=="&"&&"&amp;"||D=='"'&&"&quot;"||"&#"+D.charCodeAt()+";"}u(f,Ee),u(f,Ee.prototype);function me(D,N){if(N(D))return!0;if(D=D.firstChild)do if(me(D,N))return!0;while(D=D.nextSibling)}function Xe(){this.ownerDocument=this}function nt(D,N,I){D&&D._inc++;var q=I.namespaceURI;q===r.XMLNS&&(N._nsMap[I.prefix?I.localName:""]=I.value)}function ot(D,N,I,q){D&&D._inc++;var fe=I.namespaceURI;fe===r.XMLNS&&delete N._nsMap[I.prefix?I.localName:""]}function pt(D,N,I){if(D&&D._inc){D._inc++;var q=N.childNodes;if(I)q[q.length++]=I;else{for(var fe=N.firstChild,ze=0;fe;)q[ze++]=fe,fe=fe.nextSibling;q.length=ze,delete q[q.length]}}}function qe(D,N){var I=N.previousSibling,q=N.nextSibling;return I?I.nextSibling=q:D.firstChild=q,q?q.previousSibling=I:D.lastChild=I,N.parentNode=null,N.previousSibling=null,N.nextSibling=null,pt(D.ownerDocument,D),N}function Ye(D){return D&&(D.nodeType===Ee.DOCUMENT_NODE||D.nodeType===Ee.DOCUMENT_FRAGMENT_NODE||D.nodeType===Ee.ELEMENT_NODE)}function at(D){return D&&(j(D)||ue(D)||lt(D)||D.nodeType===Ee.DOCUMENT_FRAGMENT_NODE||D.nodeType===Ee.COMMENT_NODE||D.nodeType===Ee.PROCESSING_INSTRUCTION_NODE)}function lt(D){return D&&D.nodeType===Ee.DOCUMENT_TYPE_NODE}function j(D){return D&&D.nodeType===Ee.ELEMENT_NODE}function ue(D){return D&&D.nodeType===Ee.TEXT_NODE}function oe(D,N){var I=D.childNodes||[];if(e(I,j)||lt(N))return!1;var q=e(I,lt);return!(N&&q&&I.indexOf(q)>I.indexOf(N))}function be(D,N){var I=D.childNodes||[];function q(ze){return j(ze)&&ze!==N}if(e(I,q))return!1;var fe=e(I,lt);return!(N&&fe&&I.indexOf(fe)>I.indexOf(N))}function Le(D,N,I){if(!Ye(D))throw new G(O,"Unexpected parent node type "+D.nodeType);if(I&&I.parentNode!==D)throw new G(M,"child not in parent");if(!at(N)||lt(N)&&D.nodeType!==Ee.DOCUMENT_NODE)throw new G(O,"Unexpected node type "+N.nodeType+" for parent node type "+D.nodeType)}function ye(D,N,I){var q=D.childNodes||[],fe=N.childNodes||[];if(N.nodeType===Ee.DOCUMENT_FRAGMENT_NODE){var ze=fe.filter(j);if(ze.length>1||e(fe,ue))throw new G(O,"More than one element or text in fragment");if(ze.length===1&&!oe(D,I))throw new G(O,"Element in fragment can not be inserted before doctype")}if(j(N)&&!oe(D,I))throw new G(O,"Only one element can be added and only after doctype");if(lt(N)){if(e(q,lt))throw new G(O,"Only one doctype is allowed");var Qe=e(q,j);if(I&&q.indexOf(Qe)<q.indexOf(I))throw new G(O,"Doctype can only be inserted before an element");if(!I&&Qe)throw new G(O,"Doctype can not be appended since element is present")}}function De(D,N,I){var q=D.childNodes||[],fe=N.childNodes||[];if(N.nodeType===Ee.DOCUMENT_FRAGMENT_NODE){var ze=fe.filter(j);if(ze.length>1||e(fe,ue))throw new G(O,"More than one element or text in fragment");if(ze.length===1&&!be(D,I))throw new G(O,"Element in fragment can not be inserted before doctype")}if(j(N)&&!be(D,I))throw new G(O,"Only one element can be added and only after doctype");if(lt(N)){if(e(q,function(At){return lt(At)&&At!==I}))throw new G(O,"Only one doctype is allowed");var Qe=e(q,j);if(I&&q.indexOf(Qe)<q.indexOf(I))throw new G(O,"Doctype can only be inserted before an element")}}function ke(D,N,I,q){Le(D,N,I),D.nodeType===Ee.DOCUMENT_NODE&&(q||ye)(D,N,I);var fe=N.parentNode;if(fe&&fe.removeChild(N),N.nodeType===k){var ze=N.firstChild;if(ze==null)return N;var Qe=N.lastChild}else ze=Qe=N;var it=I?I.previousSibling:D.lastChild;ze.previousSibling=it,Qe.nextSibling=I,it?it.nextSibling=ze:D.firstChild=ze,I==null?D.lastChild=Qe:I.previousSibling=Qe;do ze.parentNode=D;while(ze!==Qe&&(ze=ze.nextSibling));return pt(D.ownerDocument||D,D),N.nodeType==k&&(N.firstChild=N.lastChild=null),N}function z(D,N){return N.parentNode&&N.parentNode.removeChild(N),N.parentNode=D,N.previousSibling=D.lastChild,N.nextSibling=null,N.previousSibling?N.previousSibling.nextSibling=N:D.firstChild=N,D.lastChild=N,pt(D.ownerDocument,D,N),N}Xe.prototype={nodeName:"#document",nodeType:R,doctype:null,documentElement:null,_inc:1,insertBefore:function(D,N){if(D.nodeType==k){for(var I=D.firstChild;I;){var q=I.nextSibling;this.insertBefore(I,N),I=q}return D}return ke(this,D,N),D.ownerDocument=this,this.documentElement===null&&D.nodeType===h&&(this.documentElement=D),D},removeChild:function(D){return this.documentElement==D&&(this.documentElement=null),qe(this,D)},replaceChild:function(D,N){ke(this,D,N,De),D.ownerDocument=this,N&&this.removeChild(N),j(D)&&(this.documentElement=D)},importNode:function(D,N){return Ae(this,D,N)},getElementById:function(D){var N=null;return me(this.documentElement,function(I){if(I.nodeType==h&&I.getAttribute("id")==D)return N=I,!0}),N},getElementsByClassName:function(D){var N=n(D);return new ce(this,function(I){var q=[];return N.length>0&&me(I.documentElement,function(fe){if(fe!==I&&fe.nodeType===h){var ze=fe.getAttribute("class");if(ze){var Qe=D===ze;if(!Qe){var it=n(ze);Qe=N.every(o(it))}Qe&&q.push(fe)}}}),q})},createElement:function(D){var N=new X;N.ownerDocument=this,N.nodeName=D,N.tagName=D,N.localName=D,N.childNodes=new Z;var I=N.attributes=new J;return I._ownerElement=N,N},createDocumentFragment:function(){var D=new U;return D.ownerDocument=this,D.childNodes=new Z,D},createTextNode:function(D){var N=new Ze;return N.ownerDocument=this,N.appendData(D),N},createComment:function(D){var N=new Ve;return N.ownerDocument=this,N.appendData(D),N},createCDATASection:function(D){var N=new Ce;return N.ownerDocument=this,N.appendData(D),N},createProcessingInstruction:function(D,N){var I=new K;return I.ownerDocument=this,I.tagName=I.nodeName=I.target=D,I.nodeValue=I.data=N,I},createAttribute:function(D){var N=new _e;return N.ownerDocument=this,N.name=D,N.nodeName=D,N.localName=D,N.specified=!0,N},createEntityReference:function(D){var N=new ne;return N.ownerDocument=this,N.nodeName=D,N},createElementNS:function(D,N){var I=new X,q=N.split(":"),fe=I.attributes=new J;return I.childNodes=new Z,I.ownerDocument=this,I.nodeName=N,I.tagName=N,I.namespaceURI=D,q.length==2?(I.prefix=q[0],I.localName=q[1]):I.localName=N,fe._ownerElement=I,I},createAttributeNS:function(D,N){var I=new _e,q=N.split(":");return I.ownerDocument=this,I.nodeName=N,I.name=N,I.namespaceURI=D,I.specified=!0,q.length==2?(I.prefix=q[0],I.localName=q[1]):I.localName=N,I}},c(Xe,Ee);function X(){this._nsMap={}}X.prototype={nodeType:h,hasAttribute:function(D){return this.getAttributeNode(D)!=null},getAttribute:function(D){var N=this.getAttributeNode(D);return N&&N.value||""},getAttributeNode:function(D){return this.attributes.getNamedItem(D)},setAttribute:function(D,N){var I=this.ownerDocument.createAttribute(D);I.value=I.nodeValue=""+N,this.setAttributeNode(I)},removeAttribute:function(D){var N=this.getAttributeNode(D);N&&this.removeAttributeNode(N)},appendChild:function(D){return D.nodeType===k?this.insertBefore(D,null):z(this,D)},setAttributeNode:function(D){return this.attributes.setNamedItem(D)},setAttributeNodeNS:function(D){return this.attributes.setNamedItemNS(D)},removeAttributeNode:function(D){return this.attributes.removeNamedItem(D.nodeName)},removeAttributeNS:function(D,N){var I=this.getAttributeNodeNS(D,N);I&&this.removeAttributeNode(I)},hasAttributeNS:function(D,N){return this.getAttributeNodeNS(D,N)!=null},getAttributeNS:function(D,N){var I=this.getAttributeNodeNS(D,N);return I&&I.value||""},setAttributeNS:function(D,N,I){var q=this.ownerDocument.createAttributeNS(D,N);q.value=q.nodeValue=""+I,this.setAttributeNode(q)},getAttributeNodeNS:function(D,N){return this.attributes.getNamedItemNS(D,N)},getElementsByTagName:function(D){return new ce(this,function(N){var I=[];return me(N,function(q){q!==N&&q.nodeType==h&&(D==="*"||q.tagName==D)&&I.push(q)}),I})},getElementsByTagNameNS:function(D,N){return new ce(this,function(I){var q=[];return me(I,function(fe){fe!==I&&fe.nodeType===h&&(D==="*"||fe.namespaceURI===D)&&(N==="*"||fe.localName==N)&&q.push(fe)}),q})}},Xe.prototype.getElementsByTagName=X.prototype.getElementsByTagName,Xe.prototype.getElementsByTagNameNS=X.prototype.getElementsByTagNameNS,c(X,Ee);function _e(){}_e.prototype.nodeType=p,c(_e,Ee);function Ie(){}Ie.prototype={data:"",substringData:function(D,N){return this.data.substring(D,D+N)},appendData:function(D){D=this.data+D,this.nodeValue=this.data=D,this.length=D.length},insertData:function(D,N){this.replaceData(D,0,N)},appendChild:function(D){throw new Error(w[O])},deleteData:function(D,N){this.replaceData(D,N,"")},replaceData:function(D,N,I){var q=this.data.substring(0,D),fe=this.data.substring(D+N);I=q+I+fe,this.nodeValue=this.data=I,this.length=I.length}},c(Ie,Ee);function Ze(){}Ze.prototype={nodeName:"#text",nodeType:g,splitText:function(D){var N=this.data,I=N.substring(D);N=N.substring(0,D),this.data=this.nodeValue=N,this.length=N.length;var q=this.ownerDocument.createTextNode(I);return this.parentNode&&this.parentNode.insertBefore(q,this.nextSibling),q}},c(Ze,Ie);function Ve(){}Ve.prototype={nodeName:"#comment",nodeType:y},c(Ve,Ie);function Ce(){}Ce.prototype={nodeName:"#cdata-section",nodeType:m},c(Ce,Ie);function Oe(){}Oe.prototype.nodeType=A,c(Oe,Ee);function st(){}st.prototype.nodeType=b,c(st,Ee);function ae(){}ae.prototype.nodeType=x,c(ae,Ee);function ne(){}ne.prototype.nodeType=T,c(ne,Ee);function U(){}U.prototype.nodeName="#document-fragment",U.prototype.nodeType=k,c(U,Ee);function K(){}K.prototype.nodeType=v,c(K,Ee);function te(){}te.prototype.serializeToString=function(D,N,I){return ge.call(D,N,I)},Ee.prototype.toString=ge;function ge(D,N){var I=[],q=this.nodeType==9&&this.documentElement||this,fe=q.prefix,ze=q.namespaceURI;if(ze&&fe==null){var fe=q.lookupPrefix(ze);if(fe==null)var Qe=[{namespace:ze,prefix:null}]}return P(this,I,D,N,Qe),I.join("")}function re(D,N,I){var q=D.prefix||"",fe=D.namespaceURI;if(!fe||q==="xml"&&fe===r.XML||fe===r.XMLNS)return!1;for(var ze=I.length;ze--;){var Qe=I[ze];if(Qe.prefix===q)return Qe.namespace!==fe}return!0}function H(D,N,I){D.push(" ",N,'="',I.replace(/[<>&"\t\n\r]/g,se),'"')}function P(D,N,I,q,fe){if(fe||(fe=[]),q)if(D=q(D),D){if(typeof D=="string"){N.push(D);return}}else return;switch(D.nodeType){case h:var ze=D.attributes,Qe=ze.length,St=D.firstChild,it=D.tagName;I=r.isHTML(D.namespaceURI)||I;var At=it;if(!I&&!D.prefix&&D.namespaceURI){for(var Br,ft=0;ft<ze.length;ft++)if(ze.item(ft).name==="xmlns"){Br=ze.item(ft).value;break}if(!Br)for(var Ct=fe.length-1;Ct>=0;Ct--){var wt=fe[Ct];if(wt.prefix===""&&wt.namespace===D.namespaceURI){Br=wt.namespace;break}}if(Br!==D.namespaceURI)for(var Ct=fe.length-1;Ct>=0;Ct--){var wt=fe[Ct];if(wt.namespace===D.namespaceURI){wt.prefix&&(At=wt.prefix+":"+it);break}}}N.push("<",At);for(var ir=0;ir<Qe;ir++){var sr=ze.item(ir);sr.prefix=="xmlns"?fe.push({prefix:sr.localName,namespace:sr.value}):sr.nodeName=="xmlns"&&fe.push({prefix:"",namespace:sr.value})}for(var ir=0;ir<Qe;ir++){var sr=ze.item(ir);if(re(sr,I,fe)){var nn=sr.prefix||"",Qr=sr.namespaceURI;H(N,nn?"xmlns:"+nn:"xmlns",Qr),fe.push({prefix:nn,namespace:Qr})}P(sr,N,I,q,fe)}if(it===At&&re(D,I,fe)){var nn=D.prefix||"",Qr=D.namespaceURI;H(N,nn?"xmlns:"+nn:"xmlns",Qr),fe.push({prefix:nn,namespace:Qr})}if(St||I&&!/^(?:meta|link|img|br|hr|input)$/i.test(it)){if(N.push(">"),I&&/^script$/i.test(it))for(;St;)St.data?N.push(St.data):P(St,N,I,q,fe.slice()),St=St.nextSibling;else for(;St;)P(St,N,I,q,fe.slice()),St=St.nextSibling;N.push("</",At,">")}else N.push("/>");return;case R:case k:for(var St=D.firstChild;St;)P(St,N,I,q,fe.slice()),St=St.nextSibling;return;case p:return H(N,D.name,D.value);case g:return N.push(D.data.replace(/[<&>]/g,se));case m:return N.push("<![CDATA[",D.data,"]]>");case y:return N.push("<!--",D.data,"-->");case A:var kr=D.publicId,cr=D.systemId;if(N.push("<!DOCTYPE ",D.name),kr)N.push(" PUBLIC ",kr),cr&&cr!="."&&N.push(" ",cr),N.push(">");else if(cr&&cr!=".")N.push(" SYSTEM ",cr,">");else{var Xr=D.internalSubset;Xr&&N.push(" [",Xr,"]"),N.push(">")}return;case v:return N.push("<?",D.target," ",D.data,"?>");case T:return N.push("&",D.nodeName,";");default:N.push("??",D.nodeName)}}function Ae(D,N,I){var q;switch(N.nodeType){case h:q=N.cloneNode(!1),q.ownerDocument=D;case k:break;case p:I=!0;break}if(q||(q=N.cloneNode(!1)),q.ownerDocument=D,q.parentNode=null,I)for(var fe=N.firstChild;fe;)q.appendChild(Ae(D,fe,I)),fe=fe.nextSibling;return q}function Ne(D,N,I){var q=new N.constructor;for(var fe in N)if(Object.prototype.hasOwnProperty.call(N,fe)){var ze=N[fe];typeof ze!="object"&&ze!=q[fe]&&(q[fe]=ze)}switch(N.childNodes&&(q.childNodes=new Z),q.ownerDocument=D,q.nodeType){case h:var Qe=N.attributes,it=q.attributes=new J,At=Qe.length;it._ownerElement=q;for(var Br=0;Br<At;Br++)q.setAttributeNode(Ne(D,Qe.item(Br),!0));break;case p:I=!0}if(I)for(var ft=N.firstChild;ft;)q.appendChild(Ne(D,ft,I)),ft=ft.nextSibling;return q}function S(D,N,I){D[N]=I}try{if(Object.defineProperty){let D=function(N){switch(N.nodeType){case h:case k:var I=[];for(N=N.firstChild;N;)N.nodeType!==7&&N.nodeType!==8&&I.push(D(N)),N=N.nextSibling;return I.join("");default:return N.nodeValue}};Object.defineProperty(ce.prototype,"length",{get:function(){return Y(this),this.$$length}}),Object.defineProperty(Ee.prototype,"textContent",{get:function(){return D(this)},set:function(N){switch(this.nodeType){case h:case k:for(;this.firstChild;)this.removeChild(this.firstChild);(N||String(N))&&this.appendChild(this.ownerDocument.createTextNode(N));break;default:this.data=N,this.value=N,this.nodeValue=N}}}),S=function(N,I,q){N["$$"+I]=q}}}catch{}return Zs.DocumentType=Oe,Zs.DOMException=G,Zs.DOMImplementation=Me,Zs.Element=X,Zs.Node=Ee,Zs.NodeList=Z,Zs.XMLSerializer=te,Zs}var ql={},ZE={},jk;function Lpe(){return jk||(jk=1,function(t){var e=Kp().freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES}(ZE)),ZE}var kh={},Yk;function Ipe(){if(Yk)return kh;Yk=1;var t=Kp().NAMESPACE,e=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+e.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),i=new RegExp("^"+e.source+r.source+"*(?::"+e.source+r.source+"*)?$"),s=0,a=1,n=2,o=3,u=4,c=5,f=6,h=7;function p(O,M){this.message=O,this.locator=M,Error.captureStackTrace&&Error.captureStackTrace(this,p)}p.prototype=new Error,p.prototype.name=p.name;function g(){}g.prototype={parse:function(O,M,$){var G=this.domBuilder;G.startDocument(),A(M,M={}),m(O,M,$,G,this.errorHandler),G.endDocument()}};function m(O,M,$,G,Z){function ce(X){if(X>65535){X-=65536;var _e=55296+(X>>10),Ie=56320+(X&1023);return String.fromCharCode(_e,Ie)}else return String.fromCharCode(X)}function Y(X){var _e=X.slice(1,-1);return Object.hasOwnProperty.call($,_e)?$[_e]:_e.charAt(0)==="#"?ce(parseInt(_e.substr(1).replace("x","0x"))):(Z.error("entity not found:"+X),X)}function J(X){if(X>Xe){var _e=O.substring(Xe,X).replace(/&#?\w+;/g,Y);Ee&&ie(Xe),G.characters(_e,0,X-Xe),Xe=X}}function ie(X,_e){for(;X>=Te&&(_e=Me.exec(O));)le=_e.index,Te=le+_e[0].length,Ee.lineNumber++;Ee.columnNumber=X-le+1}for(var le=0,Te=0,Me=/.*(?:\r\n?|\n)|.*$/g,Ee=G.locator,se=[{currentNSMap:M}],me={},Xe=0;;){try{var nt=O.indexOf("<",Xe);if(nt<0){if(!O.substr(Xe).match(/^\s*$/)){var ot=G.doc,pt=ot.createTextNode(O.substr(Xe));ot.appendChild(pt),G.currentElement=pt}return}switch(nt>Xe&&J(nt),O.charAt(nt+1)){case"/":var Le=O.indexOf(">",nt+3),qe=O.substring(nt+2,Le).replace(/[ \t\n\r]+$/g,""),Ye=se.pop();Le<0?(qe=O.substring(nt+2).replace(/[\s<].*/,""),Z.error("end tag name: "+qe+" is not complete:"+Ye.tagName),Le=nt+1+qe.length):qe.match(/\s</)&&(qe=qe.replace(/[\s<].*/,""),Z.error("end tag name: "+qe+" maybe not complete"),Le=nt+1+qe.length);var at=Ye.localNSMap,lt=Ye.tagName==qe,j=lt||Ye.tagName&&Ye.tagName.toLowerCase()==qe.toLowerCase();if(j){if(G.endElement(Ye.uri,Ye.localName,qe),at)for(var ue in at)Object.prototype.hasOwnProperty.call(at,ue)&&G.endPrefixMapping(ue);lt||Z.fatalError("end tag name: "+qe+" is not match the current start tagName:"+Ye.tagName)}else se.push(Ye);Le++;break;case"?":Ee&&ie(nt),Le=b(O,nt,G);break;case"!":Ee&&ie(nt),Le=k(O,nt,G,Z);break;default:Ee&&ie(nt);var oe=new C,be=se[se.length-1].currentNSMap,Le=x(O,nt,oe,be,Y,Z),ye=oe.length;if(!oe.closed&&R(O,Le,oe.tagName,me)&&(oe.closed=!0,$.nbsp||Z.warning("unclosed xml attribute")),Ee&&ye){for(var De=T(Ee,{}),ke=0;ke<ye;ke++){var z=oe[ke];ie(z.offset),z.locator=T(Ee,{})}G.locator=De,v(oe,G,be)&&se.push(oe),G.locator=Ee}else v(oe,G,be)&&se.push(oe);t.isHTML(oe.uri)&&!oe.closed?Le=y(O,Le,oe.tagName,Y,G):Le++}}catch(X){if(X instanceof p)throw X;Z.error("element parse error: "+X),Le=-1}Le>Xe?Xe=Le:J(Math.max(nt,Xe)+1)}}function T(O,M){return M.lineNumber=O.lineNumber,M.columnNumber=O.columnNumber,M}function x(O,M,$,G,Z,ce){function Y(Ee,se,me){$.attributeNames.hasOwnProperty(Ee)&&ce.fatalError("Attribute "+Ee+" redefined"),$.addValue(Ee,se.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,Z),me)}for(var J,ie,le=++M,Te=s;;){var Me=O.charAt(le);switch(Me){case"=":if(Te===a)J=O.slice(M,le),Te=o;else if(Te===n)Te=o;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(Te===o||Te===a)if(Te===a&&(ce.warning('attribute value must after "="'),J=O.slice(M,le)),M=le+1,le=O.indexOf(Me,M),le>0)ie=O.slice(M,le),Y(J,ie,M-1),Te=c;else throw new Error("attribute value no end '"+Me+"' match");else if(Te==u)ie=O.slice(M,le),Y(J,ie,M),ce.warning('attribute "'+J+'" missed start quot('+Me+")!!"),M=le+1,Te=c;else throw new Error('attribute value must after "="');break;case"/":switch(Te){case s:$.setTagName(O.slice(M,le));case c:case f:case h:Te=h,$.closed=!0;case u:case a:break;case n:$.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return ce.error("unexpected end of input"),Te==s&&$.setTagName(O.slice(M,le)),le;case">":switch(Te){case s:$.setTagName(O.slice(M,le));case c:case f:case h:break;case u:case a:ie=O.slice(M,le),ie.slice(-1)==="/"&&($.closed=!0,ie=ie.slice(0,-1));case n:Te===n&&(ie=J),Te==u?(ce.warning('attribute "'+ie+'" missed quot(")!'),Y(J,ie,M)):((!t.isHTML(G[""])||!ie.match(/^(?:disabled|checked|selected)$/i))&&ce.warning('attribute "'+ie+'" missed value!! "'+ie+'" instead!!'),Y(ie,ie,M));break;case o:throw new Error("attribute value missed!!")}return le;case"":Me=" ";default:if(Me<=" ")switch(Te){case s:$.setTagName(O.slice(M,le)),Te=f;break;case a:J=O.slice(M,le),Te=n;break;case u:var ie=O.slice(M,le);ce.warning('attribute "'+ie+'" missed quot(")!!'),Y(J,ie,M);case c:Te=f;break}else switch(Te){case n:$.tagName,(!t.isHTML(G[""])||!J.match(/^(?:disabled|checked|selected)$/i))&&ce.warning('attribute "'+J+'" missed value!! "'+J+'" instead2!!'),Y(J,J,M),M=le,Te=a;break;case c:ce.warning('attribute space is required"'+J+'"!!');case f:Te=a,M=le;break;case o:Te=u,M=le;break;case h:throw new Error("elements closed character '/' and '>' must be connected to")}}le++}}function v(O,M,$){for(var G=O.tagName,Z=null,Me=O.length;Me--;){var ce=O[Me],Y=ce.qName,J=ce.value,Ee=Y.indexOf(":");if(Ee>0)var ie=ce.prefix=Y.slice(0,Ee),le=Y.slice(Ee+1),Te=ie==="xmlns"&&le;else le=Y,ie=null,Te=Y==="xmlns"&&"";ce.localName=le,Te!==!1&&(Z==null&&(Z={},A($,$={})),$[Te]=Z[Te]=J,ce.uri=t.XMLNS,M.startPrefixMapping(Te,J))}for(var Me=O.length;Me--;){ce=O[Me];var ie=ce.prefix;ie&&(ie==="xml"&&(ce.uri=t.XML),ie!=="xmlns"&&(ce.uri=$[ie||""]))}var Ee=G.indexOf(":");Ee>0?(ie=O.prefix=G.slice(0,Ee),le=O.localName=G.slice(Ee+1)):(ie=null,le=O.localName=G);var se=O.uri=$[ie||""];if(M.startElement(se,le,G,O),O.closed){if(M.endElement(se,le,G),Z)for(ie in Z)Object.prototype.hasOwnProperty.call(Z,ie)&&M.endPrefixMapping(ie)}else return O.currentNSMap=$,O.localNSMap=Z,!0}function y(O,M,$,G,Z){if(/^(?:script|textarea)$/i.test($)){var ce=O.indexOf("</"+$+">",M),Y=O.substring(M+1,ce);if(/[&<]/.test(Y))return/^script$/i.test($)?(Z.characters(Y,0,Y.length),ce):(Y=Y.replace(/&#?\w+;/g,G),Z.characters(Y,0,Y.length),ce)}return M+1}function R(O,M,$,G){var Z=G[$];return Z==null&&(Z=O.lastIndexOf("</"+$+">"),Z<M&&(Z=O.lastIndexOf("</"+$)),G[$]=Z),Z<M}function A(O,M){for(var $ in O)Object.prototype.hasOwnProperty.call(O,$)&&(M[$]=O[$])}function k(O,M,$,G){var Z=O.charAt(M+2);switch(Z){case"-":if(O.charAt(M+3)==="-"){var ce=O.indexOf("-->",M+4);return ce>M?($.comment(O,M+4,ce-M-4),ce+3):(G.error("Unclosed comment"),-1)}else return-1;default:if(O.substr(M+3,6)=="CDATA["){var ce=O.indexOf("]]>",M+9);return $.startCDATA(),$.characters(O,M+9,ce-M-9),$.endCDATA(),ce+3}var Y=w(O,M),J=Y.length;if(J>1&&/!doctype/i.test(Y[0][0])){var ie=Y[1][0],le=!1,Te=!1;J>3&&(/^public$/i.test(Y[2][0])?(le=Y[3][0],Te=J>4&&Y[4][0]):/^system$/i.test(Y[2][0])&&(Te=Y[3][0]));var Me=Y[J-1];return $.startDTD(ie,le,Te),$.endDTD(),Me.index+Me[0].length}}return-1}function b(O,M,$){var G=O.indexOf("?>",M);if(G){var Z=O.substring(M,G).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return Z?(Z[0].length,$.processingInstruction(Z[1],Z[2]),G+2):-1}return-1}function C(){this.attributeNames={}}C.prototype={setTagName:function(O){if(!i.test(O))throw new Error("invalid tagName:"+O);this.tagName=O},addValue:function(O,M,$){if(!i.test(O))throw new Error("invalid attribute:"+O);this.attributeNames[O]=this.length,this[this.length++]={qName:O,value:M,offset:$}},length:0,getLocalName:function(O){return this[O].localName},getLocator:function(O){return this[O].locator},getQName:function(O){return this[O].qName},getURI:function(O){return this[O].uri},getValue:function(O){return this[O].value}};function w(O,M){var $,G=[],Z=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(Z.lastIndex=M,Z.exec(O);$=Z.exec(O);)if(G.push($),$[1])return G}return kh.XMLReader=g,kh.ParseError=p,kh}var Zk;function Bpe(){if(Zk)return ql;Zk=1;var t=Kp(),e=JF(),r=Lpe(),i=Ipe(),s=e.DOMImplementation,a=t.NAMESPACE,n=i.ParseError,o=i.XMLReader;function u(x){return x.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function c(x){this.options=x||{locator:{}}}c.prototype.parseFromString=function(x,v){var y=this.options,R=new o,A=y.domBuilder||new h,k=y.errorHandler,b=y.locator,C=y.xmlns||{},w=/\/x?html?$/.test(v),O=w?r.HTML_ENTITIES:r.XML_ENTITIES;b&&A.setDocumentLocator(b),R.errorHandler=f(k,A,b),R.domBuilder=y.domBuilder||A,w&&(C[""]=a.HTML),C.xml=C.xml||a.XML;var M=y.normalizeLineEndings||u;return x&&typeof x=="string"?R.parse(M(x),C,O):R.errorHandler.error("invalid doc source"),A.doc};function f(x,v,y){if(!x){if(v instanceof h)return v;x=v}var R={},A=x instanceof Function;y=y||{};function k(b){var C=x[b];!C&&A&&(C=x.length==2?function(w){x(b,w)}:x),R[b]=C&&function(w){C("[xmldom "+b+"]	"+w+g(y))}||function(){}}return k("warning"),k("error"),k("fatalError"),R}function h(){this.cdata=!1}function p(x,v){v.lineNumber=x.lineNumber,v.columnNumber=x.columnNumber}h.prototype={startDocument:function(){this.doc=new s().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(x,v,y,R){var A=this.doc,k=A.createElementNS(x,y||v),b=R.length;T(this,k),this.currentElement=k,this.locator&&p(this.locator,k);for(var C=0;C<b;C++){var x=R.getURI(C),w=R.getValue(C),y=R.getQName(C),O=A.createAttributeNS(x,y);this.locator&&p(R.getLocator(C),O),O.value=O.nodeValue=w,k.setAttributeNode(O)}},endElement:function(x,v,y){var R=this.currentElement;R.tagName,this.currentElement=R.parentNode},startPrefixMapping:function(x,v){},endPrefixMapping:function(x){},processingInstruction:function(x,v){var y=this.doc.createProcessingInstruction(x,v);this.locator&&p(this.locator,y),T(this,y)},ignorableWhitespace:function(x,v,y){},characters:function(x,v,y){if(x=m.apply(this,arguments),x){if(this.cdata)var R=this.doc.createCDATASection(x);else var R=this.doc.createTextNode(x);this.currentElement?this.currentElement.appendChild(R):/^\s*$/.test(x)&&this.doc.appendChild(R),this.locator&&p(this.locator,R)}},skippedEntity:function(x){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(x){(this.locator=x)&&(x.lineNumber=0)},comment:function(x,v,y){x=m.apply(this,arguments);var R=this.doc.createComment(x);this.locator&&p(this.locator,R),T(this,R)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(x,v,y){var R=this.doc.implementation;if(R&&R.createDocumentType){var A=R.createDocumentType(x,v,y);this.locator&&p(this.locator,A),T(this,A),this.doc.doctype=A}},warning:function(x){console.warn("[xmldom warning]	"+x,g(this.locator))},error:function(x){console.error("[xmldom error]	"+x,g(this.locator))},fatalError:function(x){throw new n(x,this.locator)}};function g(x){if(x)return`
@`+(x.systemId||"")+"#[line:"+x.lineNumber+",col:"+x.columnNumber+"]"}function m(x,v,y){return typeof x=="string"?x.substr(v,y):x.length>=v+y||v?new java.lang.String(x,v,y)+"":x}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(x){h.prototype[x]=function(){return null}});function T(x,v){x.currentElement?x.currentElement.appendChild(v):x.doc.appendChild(v)}return ql.__DOMHandler=h,ql.normalizeLineEndings=u,ql.DOMParser=c,ql}var Qk;function Ppe(){if(Qk)return Hl;Qk=1;var t=JF();return Hl.DOMImplementation=t.DOMImplementation,Hl.XMLSerializer=t.XMLSerializer,Hl.DOMParser=Bpe().DOMParser,Hl}var Ope=Ppe();const Dpe={createCanvas:(t,e)=>new OffscreenCanvas(t??0,e??0),getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new Ope.DOMParser().parseFromString(t,"text/xml")};class kpe{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this._tickerAdded||!this.domElement||(Sn.system.add(this._tickerUpdate,this,oa.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(Sn.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(this.events.supportsPointerEvents?new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}):new MouseEvent("mousemove",{clientX:e.clientX,clientY:e.clientY}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}}const ra=new kpe;class Xc extends ll{constructor(){super(...arguments),this.client=new _r,this.movement=new _r,this.offset=new _r,this.global=new _r,this.screen=new _r}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,i){return e.worldTransform.applyInverse(i||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,i,s,a,n,o,u,c,f,h,p,g,m,T){throw new Error("Method not implemented.")}}class Ni extends Xc{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Ko extends Xc{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Ko.DOM_DELTA_PIXEL=0;Ko.DOM_DELTA_LINE=1;Ko.DOM_DELTA_PAGE=2;const Upe=2048,Mpe=new _r,Xl=new _r;class eG{constructor(e){this.dispatch=new ui,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((i,s)=>i.priority-s.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let i=0,s=r.length;i<s;i++)r[i].fn(e);else Rt(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){ra.pauseUpdate=!0;const s=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",a=this[s](this.rootTarget,this.rootTarget.eventMode,Mpe.set(e,r),this.hitTestFn,this.hitPruneFn);return a&&a[0]}propagate(e,r){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let s=0,a=i.length-1;s<a;s++)if(e.currentTarget=i[s],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let s=i.length-2;s>=0;s--)if(e.currentTarget=i[s],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,i=this._allInteractiveElements){if(i.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const s=Array.isArray(r)?r:[r];for(let a=i.length-1;a>=0;a--)s.forEach(n=>{e.currentTarget=i[a],this.notifyTarget(e,n)})}propagationPath(e){const r=[e];for(let i=0;i<Upe&&e!==this.rootTarget&&e.parent;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,i,s,a,n=!1){let o=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(ra.pauseUpdate=!1),e.interactiveChildren&&e.children){const f=e.children;for(let h=f.length-1;h>=0;h--){const p=f[h],g=this.hitTestMoveRecursive(p,this._isInteractive(r)?r:p.eventMode,i,s,a,n||a(e,i));if(g){if(g.length>0&&!g[g.length-1].parent)continue;const m=e.isInteractive();(g.length>0||m)&&(m&&this._allInteractiveElements.push(e),g.push(e)),this._hitElements.length===0&&(this._hitElements=g),o=!0}}}const u=this._isInteractive(r),c=e.isInteractive();return c&&c&&this._allInteractiveElements.push(e),n||this._hitElements.length>0?null:o?this._hitElements:u&&!a(e,i)&&s(e,i)?c?[e]:[]:null}hitTestRecursive(e,r,i,s,a){if(this._interactivePrune(e)||a(e,i))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(ra.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children,c=i;for(let f=u.length-1;f>=0;f--){const h=u[f],p=this.hitTestRecursive(h,this._isInteractive(r)?r:h.eventMode,c,s,a);if(p){if(p.length>0&&!p[p.length-1].parent)continue;const g=e.isInteractive();return(p.length>0||g)&&p.push(e),p}}}const n=this._isInteractive(r),o=e.isInteractive();return n&&s(e,i)?o?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,r){if(e.hitArea&&(e.worldTransform.applyInverse(r,Xl),!e.hitArea.contains(Xl.x,Xl.y)))return!0;if(e.effects&&e.effects.length)for(let i=0;i<e.effects.length;i++){const s=e.effects[i];if(s.containsPoint&&!s.containsPoint(r,this.hitTestFn))return!0}return!1}hitTestFn(e,r){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(r,Xl),e.containsPoint(Xl)):!1}notifyTarget(e,r){var a,n;if(!e.currentTarget.isInteractive())return;r??(r=e.type);const i=`on${r}`;(n=(a=e.currentTarget)[i])==null||n.call(a,e);const s=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this._notifyListeners(e,s),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof Ni)){Rt("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const s=r.button===2;this.dispatchEvent(r,s?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var u,c;if(!(e instanceof Ni)){Rt("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const i=r.pointerType==="mouse"||r.pointerType==="pen",s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.overTargets);if(((u=s.overTargets)==null?void 0:u.length)>0&&a!==r.target){const f=e.type==="mousemove"?"mouseout":"pointerout",h=this.createPointerEvent(e,f,a);if(this.dispatchEvent(h,"pointerout"),i&&this.dispatchEvent(h,"mouseout"),!r.composedPath().includes(a)){const p=this.createPointerEvent(e,"pointerleave",a);for(p.eventPhase=p.AT_TARGET;p.target&&!r.composedPath().includes(p.target);)p.currentTarget=p.target,this.notifyTarget(p),i&&this.notifyTarget(p,"mouseleave"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(h)}if(a!==r.target){const f=e.type==="mousemove"?"mouseover":"pointerover",h=this.clonePointerEvent(r,f);this.dispatchEvent(h,"pointerover"),i&&this.dispatchEvent(h,"mouseover");let p=a==null?void 0:a.parent;for(;p&&p!==this.rootTarget.parent&&p!==r.target;)p=p.parent;if(!p||p===this.rootTarget.parent){const m=this.clonePointerEvent(r,"pointerenter");for(m.eventPhase=m.AT_TARGET;m.target&&m.target!==a&&m.target!==this.rootTarget.parent;)m.currentTarget=m.target,this.notifyTarget(m),i&&this.notifyTarget(m,"mouseenter"),m.target=m.target.parent;this.freeEvent(m)}this.freeEvent(h)}const n=[],o=this.enableGlobalMoveEvents??!0;this.moveOnAll?n.push("pointermove"):this.dispatchEvent(r,"pointermove"),o&&n.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?n.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),o&&n.push("globaltouchmove")),i&&(this.moveOnAll?n.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),o&&n.push("globalmousemove"),this.cursor=(c=r.target)==null?void 0:c.cursor),n.length>0&&this.all(r,n),this._allInteractiveElements.length=0,this._hitElements.length=0,s.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var n;if(!(e instanceof Ni)){Rt("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),i=this.createPointerEvent(e),s=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),s&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(n=i.target)==null?void 0:n.cursor);const a=this.clonePointerEvent(i,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),s&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;r.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(a)}mapPointerOut(e){if(!(e instanceof Ni)){Rt("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",s=this.findMountedTarget(r.overTargets),a=this.createPointerEvent(e,"pointerout",s);this.dispatchEvent(a),i&&this.dispatchEvent(a,"mouseout");const n=this.createPointerEvent(e,"pointerleave",s);for(n.eventPhase=n.AT_TARGET;n.target&&n.target!==this.rootTarget.parent;)n.currentTarget=n.target,this.notifyTarget(n),i&&this.notifyTarget(n,"mouseleave"),n.target=n.target.parent;r.overTargets=null,this.freeEvent(a),this.freeEvent(n)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Ni)){Rt("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const o=i.button===2;this.dispatchEvent(i,o?"rightup":"mouseup")}const s=this.trackingData(e.pointerId),a=this.findMountedTarget(s.pressTargetsByButton[e.button]);let n=a;if(a&&!i.composedPath().includes(a)){let o=a;for(;o&&!i.composedPath().includes(o);){if(i.currentTarget=o,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const u=i.button===2;this.notifyTarget(i,u?"rightupoutside":"mouseupoutside")}o=o.parent}delete s.pressTargetsByButton[e.button],n=o}if(n){const o=this.clonePointerEvent(i,"click");o.target=n,o.path=null,s.clicksByButton[e.button]||(s.clicksByButton[e.button]={clickCount:0,target:o.target,timeStamp:r});const u=s.clicksByButton[e.button];if(u.target===o.target&&r-u.timeStamp<200?++u.clickCount:u.clickCount=1,u.target=o.target,u.timeStamp=r,o.detail=u.clickCount,o.pointerType==="mouse"){const c=o.button===2;this.dispatchEvent(o,c?"rightclick":"click")}else o.pointerType==="touch"&&this.dispatchEvent(o,"tap");this.dispatchEvent(o,"pointertap"),this.freeEvent(o)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof Ni)){Rt("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),i=this.findMountedTarget(r.pressTargetsByButton[e.button]),s=this.createPointerEvent(e);if(i){let a=i;for(;a;)s.currentTarget=a,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"?this.notifyTarget(s,"touchendoutside"):(s.pointerType==="mouse"||s.pointerType==="pen")&&this.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),a=a.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(s)}mapWheel(e){if(!(e instanceof Ko)){Rt("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let i=1;i<e.length&&e[i].parent===r;i++)r=e[i];return r}createPointerEvent(e,r,i){const s=this.allocateEvent(Ni);return this.copyPointerData(e,s),this.copyMouseData(e,s),this.copyData(e,s),s.nativeEvent=e.nativeEvent,s.originalEvent=e,s.target=i??this.hitTest(s.global.x,s.global.y)??this._hitElements[0],typeof r=="string"&&(s.type=r),s}createWheelEvent(e){const r=this.allocateEvent(Ko);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const i=this.allocateEvent(Ni);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=r??i.type,i}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof Ni&&r instanceof Ni&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof Xc&&r instanceof Xc&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.defaultPrevented=!1,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}_notifyListeners(e,r){const i=e.currentTarget._events[r];if(i)if("fn"in i)i.once&&e.currentTarget.removeListener(r,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let s=0,a=i.length;s<a&&!e.propagationImmediatelyStopped;s++)i[s].once&&e.currentTarget.removeListener(r,i[s].fn,void 0,!0),i[s].fn.call(i[s].context,e)}}const Npe=1,Fpe={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},tS=class y1{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new eG(null),ra.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new Ni(null),this._rootWheelEvent=new Ko(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...y1.defaultEventFeatures},{set:(r,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),r[i]=s,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{canvas:r,resolution:i}=this.renderer;this.setTargetElement(r),this.resolution=i,y1._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this._currentCursor===e)return;this._currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":r&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":r&&Object.assign(this.domElement.style,i);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this._normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,s=r.length;i<s;i++){const a=r[i],n=this._bootstrapEvent(this._rootPointerEvent,a);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,ra.pointerMoved();const r=this._normalizeToPointerData(e);for(let i=0,s=r.length;i<s;i++){const a=this._bootstrapEvent(this._rootPointerEvent,r[i]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const i=r!==this.domElement?"outside":"",s=this._normalizeToPointerData(e);for(let a=0,n=s.length;a<n;a++){const o=this._bootstrapEvent(this._rootPointerEvent,s[a]);o.type+=i,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this._normalizeToPointerData(e);for(let i=0,s=r.length;i<s;i++){const a=this._bootstrapEvent(this._rootPointerEvent,r[i]);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this._removeEvents(),this.domElement=e,ra.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;ra.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;ra.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,r,i){const s=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},a=1/this.resolution;e.x=(r-s.left)*(this.domElement.width/s.width)*a,e.y=(i-s.top)*(this.domElement.height/s.height)*a}_normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,s=e.changedTouches.length;i<s;i++){const a=e.changedTouches[i];typeof a.button>"u"&&(a.button=0),typeof a.buttons>"u"&&(a.buttons=1),typeof a.isPrimary>"u"&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof a.width>"u"&&(a.width=a.radiusX||1),typeof a.height>"u"&&(a.height=a.radiusY||1),typeof a.tiltX>"u"&&(a.tiltX=0),typeof a.tiltY>"u"&&(a.tiltY=0),typeof a.pointerType>"u"&&(a.pointerType="touch"),typeof a.pointerId>"u"&&(a.pointerId=a.identifier||0),typeof a.pressure>"u"&&(a.pressure=a.force||.5),typeof a.twist>"u"&&(a.twist=0),typeof a.tangentialPressure>"u"&&(a.tangentialPressure=0),typeof a.layerX>"u"&&(a.layerX=a.offsetX=a.clientX),typeof a.layerY>"u"&&(a.layerY=a.offsetY=a.clientY),a.isNormalized=!0,a.type=e.type,r.push(a)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=Npe),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,r.push(i)}else r.push(e);return r}normalizeWheelEvent(e){const r=this._rootWheelEvent;return this._transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}_bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this._transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=Fpe[e.type]||e.type),e}_transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}};tS.extension={name:"events",type:[pe.WebGLSystem,pe.CanvasSystem,pe.WebGPUSystem],priority:-1};tS.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let tG=tS;const Gpe={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(t){this.eventMode=t?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??tG.defaultEventMode},set eventMode(t){this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof r=="object"?r.signal:void 0,a=typeof r=="object"?r.once===!0:!1,n=typeof e=="function"?void 0:e;t=i?`${t}capture`:t;const o=typeof e=="function"?e:e.handleEvent,u=this;s&&s.addEventListener("abort",()=>{u.off(t,o,n)}),a?u.once(t,o,n):u.on(t,o,n)},removeEventListener(t,e,r){const i=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,s=typeof e=="function"?void 0:e;t=i?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,s)},dispatchEvent(t){if(!(t instanceof ll))throw new Error("Container cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};var Vp=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,rG=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,T1=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;const nG=class iG extends ii{constructor(e){e={...iG.defaultOptions,...e};const r=bn.from({vertex:{source:T1,entryPoint:"mainVertex"},fragment:{source:T1,entryPoint:"mainFragment"}}),i=_n.from({vertex:Vp,fragment:rG,name:"alpha-filter"}),{alpha:s,...a}=e,n=new rn({uAlpha:{value:s,type:"f32"}});super({...a,gpuProgram:r,glProgram:i,resources:{alphaUniforms:n}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};nG.defaultOptions={alpha:1};let Kpe=nG;const rS={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Vpe=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function sG(t){const e=rS[t],r=e.length;let i=Vpe,s="";const a="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let n;for(let o=0;o<t;o++){let u=a.replace("%index%",o.toString());n=o,o>=r&&(n=t-o-1),u=u.replace("%value%",e[n].toString()),s+=u,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i}const $pe=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;

    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function aG(t,e){const r=Math.ceil(t/2);let i=$pe,s="",a;e?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let n=0;n<t;n++){let o=a.replace("%index%",n.toString());o=o.replace("%sampleIndex%",`${n-(r-1)}.0`),s+=o,s+=`
`}return i=i.replace("%blur%",s),i=i.replace("%size%",t.toString()),i=i.replace("%dimension%",e?"z":"w"),i}function oG(t,e){const r=aG(e,t),i=sG(e);return _n.from({vertex:r,fragment:i,name:`blur-${t?"horizontal":"vertical"}-pass-filter`})}var uG=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function lG(t,e){const r=rS[e],i=r.length,s=[],a=[],n=[];for(let h=0;h<e;h++){s[h]=`@location(${h}) offset${h}: vec2<f32>,`,t?a[h]=`filteredCord + vec2(${h-i+1} * pixelStrength, 0.0),`:a[h]=`filteredCord + vec2(0.0, ${h-i+1} * pixelStrength),`;const p=h<i?h:e-h-1,g=r[p].toString();n[h]=`finalColor += textureSample(uTexture, uSampler, offset${h}) * ${g};`}const o=s.join(`
`),u=a.join(`
`),c=n.join(`
`),f=uG.replace("%blur-struct%",o).replace("%blur-vertex-out%",u).replace("%blur-fragment-in%",o).replace("%blur-sampling%",c).replace("%dimension%",t?"z":"w");return bn.from({vertex:{source:f,entryPoint:"mainVertex"},fragment:{source:f,entryPoint:"mainFragment"}})}const cG=class fG extends ii{constructor(e){e={...fG.defaultOptions,...e};const r=oG(e.horizontal,e.kernelSize),i=lG(e.horizontal,e.kernelSize);super({glProgram:r,gpuProgram:i,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,r,i,s){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,r,i,s);else{const a=Or.getSameSizeTexture(r);let n=r,o=a;this._state.blend=!1;const u=e.renderer.type===ni.WEBGPU;for(let c=0;c<this.passes-1;c++){e.applyFilter(this,n,o,c===0?!0:u);const f=o;o=n,n=f}this._state.blend=!0,e.applyFilter(this,n,i,s),Or.returnTexture(a)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};cG.defaultOptions={strength:8,quality:4,kernelSize:5};let jh=cG;class qu extends ii{constructor(...e){let r=e[0]??{};typeof r=="number"&&(vt(Gt,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),r={strength:r},e[1]!==void 0&&(r.quality=e[1]),e[2]!==void 0&&(r.resolution=e[2]||"inherit"),e[3]!==void 0&&(r.kernelSize=e[3])),r={...jh.defaultOptions,...r};const{strength:i,strengthX:s,strengthY:a,quality:n,...o}=r;super({...o,compatibleRenderers:ni.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new jh({horizontal:!0,...r}),this.blurYFilter=new jh({horizontal:!1,...r}),this.quality=n,this.strengthX=s??i,this.strengthY=a??i,this.repeatEdgePixels=!1}apply(e,r,i,s){const a=Math.abs(this.blurXFilter.strength),n=Math.abs(this.blurYFilter.strength);if(a&&n){const o=Or.getSameSizeTexture(r);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,r,o,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,o,i,s),Or.returnTexture(o)}else n?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,r,i,s)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,r,i,s))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return vt("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(e){vt("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=e}get blurX(){return vt("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(e){vt("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=e}get blurY(){return vt("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(e){vt("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}qu.defaultOptions={strength:8,quality:4,kernelSize:5};var hG=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`,A1=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`;class dG extends ii{constructor(e={}){const r=new rn({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),i=bn.from({vertex:{source:A1,entryPoint:"mainVertex"},fragment:{source:A1,entryPoint:"mainFragment"}}),s=_n.from({vertex:Vp,fragment:hG,name:"color-matrix-filter"});super({...e,gpuProgram:i,glProgram:s,resources:{colorMatrixUniforms:r}}),this.alpha=1}_loadMatrix(e,r=!1){let i=e;r&&(this._multiply(i,this.matrix,e),i=this._colorMatrix(i)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=i,this.resources.colorMatrixUniforms.update()}_multiply(e,r,i){return e[0]=r[0]*i[0]+r[1]*i[5]+r[2]*i[10]+r[3]*i[15],e[1]=r[0]*i[1]+r[1]*i[6]+r[2]*i[11]+r[3]*i[16],e[2]=r[0]*i[2]+r[1]*i[7]+r[2]*i[12]+r[3]*i[17],e[3]=r[0]*i[3]+r[1]*i[8]+r[2]*i[13]+r[3]*i[18],e[4]=r[0]*i[4]+r[1]*i[9]+r[2]*i[14]+r[3]*i[19]+r[4],e[5]=r[5]*i[0]+r[6]*i[5]+r[7]*i[10]+r[8]*i[15],e[6]=r[5]*i[1]+r[6]*i[6]+r[7]*i[11]+r[8]*i[16],e[7]=r[5]*i[2]+r[6]*i[7]+r[7]*i[12]+r[8]*i[17],e[8]=r[5]*i[3]+r[6]*i[8]+r[7]*i[13]+r[8]*i[18],e[9]=r[5]*i[4]+r[6]*i[9]+r[7]*i[14]+r[8]*i[19]+r[9],e[10]=r[10]*i[0]+r[11]*i[5]+r[12]*i[10]+r[13]*i[15],e[11]=r[10]*i[1]+r[11]*i[6]+r[12]*i[11]+r[13]*i[16],e[12]=r[10]*i[2]+r[11]*i[7]+r[12]*i[12]+r[13]*i[17],e[13]=r[10]*i[3]+r[11]*i[8]+r[12]*i[13]+r[13]*i[18],e[14]=r[10]*i[4]+r[11]*i[9]+r[12]*i[14]+r[13]*i[19]+r[14],e[15]=r[15]*i[0]+r[16]*i[5]+r[17]*i[10]+r[18]*i[15],e[16]=r[15]*i[1]+r[16]*i[6]+r[17]*i[11]+r[18]*i[16],e[17]=r[15]*i[2]+r[16]*i[7]+r[17]*i[12]+r[18]*i[17],e[18]=r[15]*i[3]+r[16]*i[8]+r[17]*i[13]+r[18]*i[18],e[19]=r[15]*i[4]+r[16]*i[9]+r[17]*i[14]+r[18]*i[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,r)}tint(e,r){const[i,s,a]=qt.shared.setValue(e).toArray(),n=[i,0,0,0,0,0,s,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(n,r)}greyscale(e,r){const i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,r)}grayscale(e,r){this.greyscale(e,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const i=Math.cos(e),s=Math.sin(e),a=Math.sqrt,n=1/3,o=a(n),u=i+(1-i)*n,c=n*(1-i)-o*s,f=n*(1-i)+o*s,h=n*(1-i)+o*s,p=i+n*(1-i),g=n*(1-i)-o*s,m=n*(1-i)-o*s,T=n*(1-i)+o*s,x=i+n*(1-i),v=[u,c,f,0,0,h,p,g,0,0,m,T,x,0,0,0,0,0,1,0];this._loadMatrix(v,r)}contrast(e,r){const i=(e||0)+1,s=-.5*(i-1),a=[i,0,0,0,s,0,i,0,0,s,0,0,i,0,s,0,0,0,1,0];this._loadMatrix(a,r)}saturate(e=0,r){const i=e*2/3+1,s=(i-1)*-.5,a=[i,s,s,0,0,s,i,s,0,0,s,s,i,0,0,0,0,0,1,0];this._loadMatrix(a,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,i,s,a){e||(e=.2),r||(r=.15),i||(i=16770432),s||(s=3375104);const n=qt.shared,[o,u,c]=n.setValue(i).toArray(),[f,h,p]=n.setValue(s).toArray(),g=[.3,.59,.11,0,0,o,u,c,e,0,f,h,p,r,0,o-f,u-h,c-p,0,0];this._loadMatrix(g,a)}night(e,r){e||(e=.1);const i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,r)}predator(e,r){const i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(e){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=e}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(e){this.resources.colorMatrixUniforms.uniforms.uAlpha=e}}var pG=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`,gG=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`,S1=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`;class Hpe extends ii{constructor(...e){let r=e[0];r instanceof An&&(e[1]&&vt(Gt,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),r={sprite:r,scale:e[1]});const{sprite:i,scale:s,...a}=r;let n=s??20;typeof n=="number"&&(n=new _r(n,n));const o=new rn({uFilterMatrix:{value:new Et,type:"mat3x3<f32>"},uScale:{value:n,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),u=_n.from({vertex:gG,fragment:pG,name:"displacement-filter"}),c=bn.from({vertex:{source:S1,entryPoint:"mainVertex"},fragment:{source:S1,entryPoint:"mainFragment"}}),f=i.texture.source;super({...a,gpuProgram:c,glProgram:u,resources:{filterUniforms:o,uMapTexture:f,uMapSampler:f.style}}),this._sprite=r.sprite,this._sprite.renderable=!1}apply(e,r,i,s){const a=this.resources.filterUniforms.uniforms;e.calculateSpriteMatrix(a.uFilterMatrix,this._sprite);const n=this._sprite.worldTransform,o=Math.sqrt(n.a*n.a+n.b*n.b),u=Math.sqrt(n.c*n.c+n.d*n.d);o!==0&&u!==0&&(a.uRotation[0]=n.a/o,a.uRotation[1]=n.b/o,a.uRotation[2]=n.c/u,a.uRotation[3]=n.d/u),this.resources.uMapTexture=this._sprite.texture.source,e.applyFilter(this,r,i,s)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}var mG=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,R1=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;const _G=class bG extends ii{constructor(e={}){e={...bG.defaultOptions,...e};const r=bn.from({vertex:{source:R1,entryPoint:"mainVertex"},fragment:{source:R1,entryPoint:"mainFragment"}}),i=_n.from({vertex:Vp,fragment:mG,name:"noise-filter"}),{noise:s,seed:a,...n}=e;super({...n,gpuProgram:r,glProgram:i,resources:{noiseUniforms:new rn({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=s,this.seed=a??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};_G.defaultOptions={noise:.5};let qpe=_G;class xG{constructor(e){this._renderer=e}push(e,r,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:r,filterEffect:e})}pop(e,r,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}xG.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"filter"};function vG(t,e){e.clear();const r=e.matrix;for(let i=0;i<t.length;i++){const s=t[i];s.globalDisplayStatus<7||(e.matrix=s.worldTransform,e.addBounds(s.bounds))}return e.matrix=r,e}const Xpe=new qo({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class zpe{constructor(){this.skip=!1,this.inputTexture=null,this.backTexture=null,this.filters=null,this.bounds=new un,this.container=null,this.blendRequired=!1,this.outputRenderSurface=null,this.globalFrame={x:0,y:0,width:0,height:0}}}class EG{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new rn({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new ws({}),this.renderer=e}get activeBackTexture(){var e;return(e=this._activeFilterData)==null?void 0:e.backTexture}push(e){const r=this.renderer,i=e.filterEffect.filters,s=this._pushFilterData();s.skip=!1,s.filters=i,s.container=e.container,s.outputRenderSurface=r.renderTarget.renderSurface;const a=r.renderTarget.renderTarget.colorTexture.source,n=a.resolution,o=a.antialias;if(i.length===0){s.skip=!0;return}const u=s.bounds;if(this._calculateFilterArea(e,u),this._calculateFilterBounds(s,r.renderTarget.rootViewPort,o,n,1),s.skip)return;const c=this._getPreviousFilterData(),f=this._findFilterResolution(n);let h=0,p=0;c&&(h=c.bounds.minX,p=c.bounds.minY),this._calculateGlobalFrame(s,h,p,f,a.width,a.height),this._setupFilterTextures(s,u,r,c)}generateFilteredTexture({texture:e,filters:r}){const i=this._pushFilterData();this._activeFilterData=i,i.skip=!1,i.filters=r;const s=e.source,a=s.resolution,n=s.antialias;if(r.length===0)return i.skip=!0,e;const o=i.bounds;if(o.addRect(e.frame),this._calculateFilterBounds(i,o.rectangle,n,a,0),i.skip)return e;const u=a;this._calculateGlobalFrame(i,0,0,u,s.width,s.height),i.outputRenderSurface=Or.getOptimalTexture(o.width,o.height,i.resolution,i.antialias),i.backTexture=ct.EMPTY,i.inputTexture=e,this.renderer.renderTarget.finishRenderPass(),this._applyFiltersToTexture(i,!0);const p=i.outputRenderSurface;return p.source.alphaMode="premultiplied-alpha",p}pop(){const e=this.renderer,r=this._popFilterData();r.skip||(e.globalUniforms.pop(),e.renderTarget.finishRenderPass(),this._activeFilterData=r,this._applyFiltersToTexture(r,!1),r.blendRequired&&Or.returnTexture(r.backTexture),Or.returnTexture(r.inputTexture))}getBackTexture(e,r,i){const s=e.colorTexture.source._resolution,a=Or.getOptimalTexture(r.width,r.height,s,!1);let n=r.minX,o=r.minY;i&&(n-=i.minX,o-=i.minY),n=Math.floor(n*s),o=Math.floor(o*s);const u=Math.ceil(r.width*s),c=Math.ceil(r.height*s);return this.renderer.renderTarget.copyToTexture(e,a,{x:n,y:o},{width:u,height:c},{x:0,y:0}),a}applyFilter(e,r,i,s){const a=this.renderer,n=this._activeFilterData,u=n.outputRenderSurface===i,c=a.renderTarget.rootRenderTarget.colorTexture.source._resolution,f=this._findFilterResolution(c);let h=0,p=0;if(u){const g=this._findPreviousFilterOffset();h=g.x,p=g.y}this._updateFilterUniforms(r,i,n,h,p,f,u,s),this._setupBindGroupsAndRender(e,r,a)}calculateSpriteMatrix(e,r){const i=this._activeFilterData,s=e.set(i.inputTexture._source.width,0,0,i.inputTexture._source.height,i.bounds.minX,i.bounds.minY),a=r.worldTransform.copyTo(Et.shared),n=r.renderGroup||r.parentRenderGroup;return n&&n.cacheToLocalTransform&&a.prepend(n.cacheToLocalTransform),a.invert(),s.prepend(a),s.scale(1/r.texture.frame.width,1/r.texture.frame.height),s.translate(r.anchor.x,r.anchor.y),s}destroy(){}_setupBindGroupsAndRender(e,r,i){if(i.renderPipes.uniformBatch){const s=i.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);this._globalFilterBindGroup.setResource(s,0)}else this._globalFilterBindGroup.setResource(this._filterGlobalUniforms,0);this._globalFilterBindGroup.setResource(r.source,1),this._globalFilterBindGroup.setResource(r.source.style,2),e.groups[0]=this._globalFilterBindGroup,i.encoder.draw({geometry:Xpe,shader:e,state:e._state,topology:"triangle-list"}),i.type===ni.WEBGL&&i.renderTarget.finishRenderPass()}_setupFilterTextures(e,r,i,s){if(e.backTexture=ct.EMPTY,e.blendRequired){i.renderTarget.finishRenderPass();const a=i.renderTarget.getRenderTarget(e.outputRenderSurface);e.backTexture=this.getBackTexture(a,r,s==null?void 0:s.bounds)}e.inputTexture=Or.getOptimalTexture(r.width,r.height,e.resolution,e.antialias),i.renderTarget.bind(e.inputTexture,!0),i.globalUniforms.push({offset:r})}_calculateGlobalFrame(e,r,i,s,a,n){const o=e.globalFrame;o.x=r*s,o.y=i*s,o.width=a*s,o.height=n*s}_updateFilterUniforms(e,r,i,s,a,n,o,u){const c=this._filterGlobalUniforms.uniforms,f=c.uOutputFrame,h=c.uInputSize,p=c.uInputPixel,g=c.uInputClamp,m=c.uGlobalFrame,T=c.uOutputTexture;o?(f[0]=i.bounds.minX-s,f[1]=i.bounds.minY-a):(f[0]=0,f[1]=0),f[2]=e.frame.width,f[3]=e.frame.height,h[0]=e.source.width,h[1]=e.source.height,h[2]=1/h[0],h[3]=1/h[1],p[0]=e.source.pixelWidth,p[1]=e.source.pixelHeight,p[2]=1/p[0],p[3]=1/p[1],g[0]=.5*p[2],g[1]=.5*p[3],g[2]=e.frame.width*h[2]-.5*p[2],g[3]=e.frame.height*h[3]-.5*p[3];const x=this.renderer.renderTarget.rootRenderTarget.colorTexture;m[0]=s*n,m[1]=a*n,m[2]=x.source.width*n,m[3]=x.source.height*n,r instanceof ct&&(r.source.resource=null);const v=this.renderer.renderTarget.getRenderTarget(r);this.renderer.renderTarget.bind(r,!!u),r instanceof ct?(T[0]=r.frame.width,T[1]=r.frame.height):(T[0]=v.width,T[1]=v.height),T[2]=v.isRoot?-1:1,this._filterGlobalUniforms.update()}_findFilterResolution(e){let r=this._filterStackIndex-1;for(;r>0&&this._filterStack[r].skip;)--r;return r>0&&this._filterStack[r].inputTexture?this._filterStack[r].inputTexture.source._resolution:e}_findPreviousFilterOffset(){let e=0,r=0,i=this._filterStackIndex;for(;i>0;){i--;const s=this._filterStack[i];if(!s.skip){e=s.bounds.minX,r=s.bounds.minY;break}}return{x:e,y:r}}_calculateFilterArea(e,r){if(e.renderables?vG(e.renderables,r):e.filterEffect.filterArea?(r.clear(),r.addRect(e.filterEffect.filterArea),r.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,r),e.container){const s=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;s&&r.applyMatrix(s)}}_applyFiltersToTexture(e,r){const i=e.inputTexture,s=e.bounds,a=e.filters;if(this._globalFilterBindGroup.setResource(i.source.style,2),this._globalFilterBindGroup.setResource(e.backTexture.source,3),a.length===1)a[0].apply(this,i,e.outputRenderSurface,r);else{let n=e.inputTexture;const o=Or.getOptimalTexture(s.width,s.height,n.source._resolution,!1);let u=o,c=0;for(c=0;c<a.length-1;++c){a[c].apply(this,n,u,!0);const h=n;n=u,u=h}a[c].apply(this,n,e.outputRenderSurface,r),Or.returnTexture(o)}}_calculateFilterBounds(e,r,i,s,a){var T;const n=this.renderer,o=e.bounds,u=e.filters;let c=1/0,f=0,h=!0,p=!1,g=!1,m=!0;for(let x=0;x<u.length;x++){const v=u[x];if(c=Math.min(c,v.resolution==="inherit"?s:v.resolution),f+=v.padding,v.antialias==="off"?h=!1:v.antialias==="inherit"&&h&&(h=i),v.clipToViewport||(m=!1),!!!(v.compatibleRenderers&n.type)){g=!1;break}if(v.blendRequired&&!(((T=n.backBuffer)==null?void 0:T.useBackBuffer)??!0)){Rt("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),g=!1;break}g=v.enabled||g,p||(p=v.blendRequired)}if(!g){e.skip=!0;return}if(m&&o.fitBounds(0,r.width/s,0,r.height/s),o.scale(c).ceil().scale(1/c).pad((f|0)*a),!o.isPositive){e.skip=!0;return}e.antialias=h,e.resolution=c,e.blendRequired=p}_popFilterData(){return this._filterStackIndex--,this._filterStack[this._filterStackIndex]}_getPreviousFilterData(){let e,r=this._filterStackIndex-1;for(;r>1&&(r--,e=this._filterStack[r],!!e.skip););return e}_pushFilterData(){let e=this._filterStack[this._filterStackIndex];return e||(e=this._filterStack[this._filterStackIndex]=new zpe),this._filterStackIndex++,e}}EG.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"filter"};var yG=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,TG=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,C1=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;class AG extends ii{constructor(e){const{sprite:r,...i}=e,s=new pA(r.texture),a=new rn({uFilterMatrix:{value:new Et,type:"mat3x3<f32>"},uMaskClamp:{value:s.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),n=bn.from({vertex:{source:C1,entryPoint:"mainVertex"},fragment:{source:C1,entryPoint:"mainFragment"}}),o=_n.from({vertex:TG,fragment:yG,name:"mask-filter"});super({...i,gpuProgram:n,glProgram:o,resources:{filterUniforms:a,uMaskTexture:r.texture.source}}),this.sprite=r,this._textureMatrix=s}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,r,i,s){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,r,i,s)}}var Wpe=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`;function w1(t,e,r,i,s,a,n,o){const u=n-r,c=o-i,f=s-r,h=a-i,p=t-r,g=e-i,m=u*u+c*c,T=u*f+c*h,x=u*p+c*g,v=f*f+h*h,y=f*p+h*g,R=1/(m*v-T*T),A=(v*x-T*y)*R,k=(m*y-T*x)*R;return A>=0&&k>=0&&A+k<1}class nS{constructor(e=0,r=0,i=0,s=0,a=0,n=0){this.type="triangle",this.x=e,this.y=r,this.x2=i,this.y2=s,this.x3=a,this.y3=n}contains(e,r){const i=(this.x-this.x3)*(r-this.y3)-(this.y-this.y3)*(e-this.x3),s=(this.x2-this.x)*(r-this.y)-(this.y2-this.y)*(e-this.x);if(i<0!=s<0&&i!==0&&s!==0)return!1;const a=(this.x3-this.x2)*(r-this.y2)-(this.y3-this.y2)*(e-this.x2);return a===0||a<0==i+s<=0}strokeContains(e,r,i,s=.5){const a=i/2,n=a*a,{x:o,x2:u,x3:c,y:f,y2:h,y3:p}=this;return _c(e,r,o,f,u,p)<=n||_c(e,r,u,h,c,p)<=n||_c(e,r,c,p,o,f)<=n}clone(){return new nS(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x2=e.x2,this.y2=e.y2,this.x3=e.x3,this.y3=e.y3,this}copyTo(e){return e.copyFrom(this),e}getBounds(e){e||(e=new lr);const r=Math.min(this.x,this.x2,this.x3),i=Math.max(this.x,this.x2,this.x3),s=Math.min(this.y,this.y2,this.y3),a=Math.max(this.y,this.y2,this.y3);return e.x=r,e.y=s,e.width=i-r,e.height=a-s,e}}const SG=class RG{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{const{queue:r}=this;let i=0;for(;r.length&&i<RG.uploadsPerFrame;){const s=r.shift();this.uploadQueueItem(s),i++}r.length?Sn.system.addOnce(this._tick,this,oa.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){const r=Array.isArray(e)?e:[e];for(const i of r)i instanceof Ir?this._addContainer(i):this.resolveQueueItem(i,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(const r of e.children)this._addContainer(r)}upload(e){return e&&this.add(e),new Promise(r=>{this.queue.length?(this.resolves.push(r),this.dedupeQueue(),Sn.system.addOnce(this._tick,this,oa.UTILITY)):r()})}dedupeQueue(){const e=Object.create(null);let r=0;for(let i=0;i<this.queue.length;i++){const s=this.queue[i];e[s.uid]||(e[s.uid]=!0,this.queue[r++]=s)}this.queue.length=r}_resolve(){const{resolves:e}=this,r=e.slice(0);e.length=0;for(const i of r)i()}};SG.uploadsPerFrame=4;let CG=SG;class Vi extends Bs{constructor(e){e instanceof Gn&&(e={context:e});const{context:r,roundPixels:i,...s}=e||{};super({label:"Graphics",...s}),this.renderPipeId="graphics",r?this._context=r:this._context=this._ownedContext=new Gn,this._context.on("update",this.onViewUpdate,this),this.didViewUpdate=!0,this.allowChildren=!1,this.roundPixels=i??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,r){return this.context[e](...r),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Vi(this._context.clone()):(this._ownedContext=null,new Vi(this._context))}lineStyle(e,r,i){vt(Gt,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const s={};return e&&(s.width=e),r&&(s.color=r),i&&(s.alpha=i),this.context.strokeStyle=s,this}beginFill(e,r){vt(Gt,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const i={};return e!==void 0&&(i.color=e),r!==void 0&&(i.alpha=r),this.context.fillStyle=i,this}endFill(){vt(Gt,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==Gn.defaultStrokeStyle.width||e.color!==Gn.defaultStrokeStyle.color||e.alpha!==Gn.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return vt(Gt,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return vt(Gt,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return vt(Gt,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return vt(Gt,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return vt(Gt,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return vt(Gt,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}const wG=class LG extends qo{constructor(...e){let r=e[0]??{};r instanceof Float32Array&&(vt(Gt,"use new MeshGeometry({ positions, uvs, indices }) instead"),r={positions:r,uvs:e[1],indices:e[2]}),r={...LG.defaultOptions,...r};const i=r.positions||new Float32Array([0,0,1,0,1,1,0,1]);let s=r.uvs;s||(r.positions?s=new Float32Array(i.length):s=new Float32Array([0,0,1,0,1,1,0,1]));const a=r.indices||new Uint32Array([0,1,2,0,2,3]),n=r.shrinkBuffersToFit,o=new ri({data:i,label:"attribute-mesh-positions",shrinkToFit:n,usage:nr.VERTEX|nr.COPY_DST}),u=new ri({data:s,label:"attribute-mesh-uvs",shrinkToFit:n,usage:nr.VERTEX|nr.COPY_DST}),c=new ri({data:a,label:"index-mesh-buffer",shrinkToFit:n,usage:nr.INDEX|nr.COPY_DST});super({attributes:{aPosition:{buffer:o,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:u,format:"float32x2",stride:2*4,offset:0}},indexBuffer:c,topology:r.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};wG.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let zo=wG;class pl extends Bs{constructor(...e){let r=e[0];r instanceof qo&&(vt(Gt,"Mesh: use new Mesh({ geometry, shader }) instead"),r={geometry:r,shader:e[1]},e[3]&&(vt(Gt,"Mesh: drawMode argument has been removed, use geometry.topology instead"),r.geometry.topology=e[3]));const{geometry:i,shader:s,texture:a,roundPixels:n,state:o,...u}=r;super({label:"Mesh",...u}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=s??null,this.texture=a??(s==null?void 0:s.texture)??ct.WHITE,this.state=o??yi.for2d(),this._geometry=i,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=n??!1}get material(){return vt(Gt,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){var r;this._geometry!==e&&((r=this._geometry)==null||r.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=ct.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||(this.state.data&12)!==0?!1:this._geometry instanceof zo?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){const{x:r,y:i}=e;if(!this.bounds.containsPoint(r,i))return!1;const s=this.geometry.getBuffer("aPosition").data,a=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const n=this.geometry.getIndex().data,o=n.length;for(let u=0;u+2<o;u+=a){const c=n[u]*2,f=n[u+1]*2,h=n[u+2]*2;if(w1(r,i,s[c],s[c+1],s[f],s[f+1],s[h],s[h+1]))return!0}}else{const n=s.length/2;for(let o=0;o+2<n;o+=a){const u=o*2,c=(o+1)*2,f=(o+2)*2;if(w1(r,i,s[u],s[u+1],s[c],s[c+1],s[f],s[f+1]))return!0}}return!1}destroy(e){var i;if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(s)}(i=this._geometry)==null||i.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null,this._gpuData=null}}class zc extends An{constructor(...e){let r=e[0];Array.isArray(e[0])&&(r={textures:e[0],autoUpdate:e[1]});const{animationSpeed:i=1,autoPlay:s=!1,autoUpdate:a=!0,loop:n=!0,onComplete:o=null,onFrameChange:u=null,onLoop:c=null,textures:f,updateAnchor:h=!1,...p}=r,[g]=f;super({...p,texture:g instanceof ct?g:g.texture}),this._textures=null,this._durations=null,this._autoUpdate=a,this._isConnectedToTicker=!1,this.animationSpeed=i,this.loop=n,this.updateAnchor=h,this.onComplete=o,this.onFrameChange=u,this.onLoop=c,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=f,s&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Sn.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Sn.shared.add(this.update,this,oa.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const r=e.deltaTime,i=this.animationSpeed*r,s=this.currentFrame;if(this._durations!==null){let a=this._currentTime%1*this._durations[this.currentFrame];for(a+=i/60*1e3;a<0;)this._currentTime--,a+=this._durations[this.currentFrame];const n=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);a>=this._durations[this.currentFrame];)a-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=a/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this._updateTexture())}_updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const r=[];for(let i=0;i<e.length;++i)r.push(ct.from(e[i]));return new zc(r)}static fromImages(e){const r=[];for(let i=0;i<e.length;++i)r.push(ct.from(e[i]));return new zc(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof ct)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Sn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Sn.shared.add(this.update,this),this._isConnectedToTicker=!0))}}class IG{constructor({matrix:e,observer:r}={}){this.dirty=!0,this._matrix=e??new Et,this.observer=r,this.position=new Mr(this,0,0),this.scale=new Mr(this,1,1),this.pivot=new Mr(this,0,0),this.skew=new Mr(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){var r;this.dirty=!0,e===this.skew&&this.updateSkew(),(r=this.observer)==null||r._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}}const BG=class Yh extends Bs{constructor(...e){let r=e[0]||{};r instanceof ct&&(r={texture:r}),e.length>1&&(vt(Gt,"use new TilingSprite({ texture, width:100, height:100 }) instead"),r.width=e[1],r.height=e[2]),r={...Yh.defaultOptions,...r};const{texture:i,anchor:s,tilePosition:a,tileScale:n,tileRotation:o,width:u,height:c,applyAnchorToTexture:f,roundPixels:h,...p}=r??{};super({label:"TilingSprite",...p}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Mr({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=f,this.texture=i,this._width=u??i.width,this._height=c??i.height,this._tileTransform=new IG({observer:{_onUpdate:()=>this.onViewUpdate()}}),s&&(this.anchor=s),this.tilePosition=a,this.tileScale=n,this.tileRotation=o,this.roundPixels=h??!1}static from(e,r={}){return typeof e=="string"?new Yh({texture:yr.get(e),...r}):new Yh({texture:e,...r})}get uvRespectAnchor(){return Rt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){Rt("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=ct.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,r){typeof e=="object"&&(r=e.height??e.width,e=e.width),this._width=e,this._height=r??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){const e=this._bounds,r=this._anchor,i=this._width,s=this._height;e.minX=-r._x*i,e.maxX=e.minX+i,e.minY=-r._y*s,e.maxY=e.minY+s}containsPoint(e){const r=this._width,i=this._height,s=-r*this._anchor._x;let a=0;return e.x>=s&&e.x<=s+r&&(a=-i*this._anchor._y,e.y>=a&&e.y<=a+i)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}this._texture=null}};BG.defaultOptions={texture:ct.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let PG=BG;class $p extends Bs{constructor(e,r){const{text:i,resolution:s,style:a,anchor:n,width:o,height:u,roundPixels:c,...f}=e;super({...f}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=r,this.text=i??"",this.style=a,this.resolution=s??null,this.allowChildren=!1,this._anchor=new Mr({_onUpdate:()=>{this.onViewUpdate()}}),n&&(this.anchor=n),this.roundPixels=c??!1,o!==void 0&&(this.width=o),u!==void 0&&(this.height=u)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var r;e||(e={}),(r=this._style)==null||r.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,r){typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,this.bounds.width),r!==void 0&&this._setHeight(r,this.bounds.height)}containsPoint(e){const r=this.bounds.width,i=this.bounds.height,s=-r*this.anchor.x;let a=0;return e.x>=s&&e.x<=s+r&&(a=-i*this.anchor.y,e.y>=a&&e.y<=a+i)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}}function Hp(t,e){let r=t[0]??{};return(typeof r=="string"||t[1])&&(vt(Gt,`use new ${e}({ text: "hi!", style }) instead`),r={text:r,style:t[1]}),r}let vo=null,Js=null;function jpe(t,e){vo||(vo=Qt.get().createCanvas(256,128),Js=vo.getContext("2d",{willReadFrequently:!0}),Js.globalCompositeOperation="copy",Js.globalAlpha=1),(vo.width<t||vo.height<e)&&(vo.width=Fo(t),vo.height=Fo(e))}function Jk(t,e,r){for(let i=0,s=4*r*e;i<e;++i,s+=4)if(t[s+3]!==0)return!1;return!0}function eU(t,e,r,i,s){const a=4*e;for(let n=i,o=i*a+4*r;n<=s;++n,o+=a)if(t[o+3]!==0)return!1;return!0}function OG(...t){let e=t[0];e.canvas||(e={canvas:t[0],resolution:t[1]});const{canvas:r}=e,i=Math.min(e.resolution??1,1),s=e.width??r.width,a=e.height??r.height;let n=e.output;if(jpe(s,a),!Js)throw new TypeError("Failed to get canvas 2D context");Js.drawImage(r,0,0,s,a,0,0,s*i,a*i);const u=Js.getImageData(0,0,s,a).data;let c=0,f=0,h=s-1,p=a-1;for(;f<a&&Jk(u,s,f);)++f;if(f===a)return lr.EMPTY;for(;Jk(u,s,p);)--p;for(;eU(u,s,c,f,p);)++c;for(;eU(u,s,h,f,p);)--h;return++h,++p,Js.globalCompositeOperation="source-over",Js.strokeRect(c,f,h-c,p-f),Js.globalCompositeOperation="copy",n??(n=new lr),n.set(c/i,f/i,(h-c)/i,(p-f)/i),n}const tU=new lr;class Ype{getCanvasAndContext(e){const{text:r,style:i,resolution:s=1}=e,a=i._getFinalPadding(),n=Bn.measureText(r||" ",i),o=Math.ceil(Math.ceil(Math.max(1,n.width)+a*2)*s),u=Math.ceil(Math.ceil(Math.max(1,n.height)+a*2)*s),c=ca.getOptimalCanvasAndContext(o,u);this._renderTextToCanvas(r,i,a,s,c);const f=i.trim?OG({canvas:c.canvas,width:o,height:u,resolution:1,output:tU}):tU.set(0,0,o,u);return{canvasAndContext:c,frame:f}}returnCanvasAndContext(e){ca.returnCanvasAndContext(e)}_renderTextToCanvas(e,r,i,s,a){var R,A,k,b;const{canvas:n,context:o}=a,u=$c(r),c=Bn.measureText(e||" ",r),f=c.lines,h=c.lineHeight,p=c.lineWidths,g=c.maxLineWidth,m=c.fontProperties,T=n.height;if(o.resetTransform(),o.scale(s,s),o.textBaseline=r.textBaseline,(R=r._stroke)!=null&&R.width){const C=r._stroke;o.lineWidth=C.width,o.miterLimit=C.miterLimit,o.lineJoin=C.join,o.lineCap=C.cap}o.font=u;let x,v;const y=r.dropShadow?2:1;for(let C=0;C<y;++C){const w=r.dropShadow&&C===0,O=w?Math.ceil(Math.max(1,T)+i*2):0,M=O*s;if(w){o.fillStyle="black",o.strokeStyle="black";const Z=r.dropShadow,ce=Z.color,Y=Z.alpha;o.shadowColor=qt.shared.setValue(ce).setAlpha(Y).toRgbaString();const J=Z.blur*s,ie=Z.distance*s;o.shadowBlur=J,o.shadowOffsetX=Math.cos(Z.angle)*ie,o.shadowOffsetY=Math.sin(Z.angle)*ie+M}else{if(o.fillStyle=r._fill?qc(r._fill,o,c):null,(A=r._stroke)!=null&&A.width){const Z=r._stroke.width*r._stroke.alignment;o.strokeStyle=qc(r._stroke,o,c,Z)}o.shadowColor="black"}let $=(h-m.fontSize)/2;h-m.fontSize<0&&($=0);const G=((k=r._stroke)==null?void 0:k.width)??0;for(let Z=0;Z<f.length;Z++)x=G/2,v=G/2+Z*h+m.ascent+$,r.align==="right"?x+=g-p[Z]:r.align==="center"&&(x+=(g-p[Z])/2),(b=r._stroke)!=null&&b.width&&this._drawLetterSpacing(f[Z],r,a,x+i,v+i-O,!0),r._fill!==void 0&&this._drawLetterSpacing(f[Z],r,a,x+i,v+i-O)}}_drawLetterSpacing(e,r,i,s,a,n=!1){const{context:o}=i,u=r.letterSpacing;let c=!1;if(Bn.experimentalLetterSpacingSupported&&(Bn.experimentalLetterSpacing?(o.letterSpacing=`${u}px`,o.textLetterSpacing=`${u}px`,c=!0):(o.letterSpacing="0px",o.textLetterSpacing="0px")),u===0||c){n?o.strokeText(e,s,a):o.fillText(e,s,a);return}let f=s;const h=Bn.graphemeSegmenter(e);let p=o.measureText(e).width,g=0;for(let m=0;m<h.length;++m){const T=h[m];n?o.strokeText(T,f,a):o.fillText(T,f,a);let x="";for(let v=m+1;v<h.length;++v)x+=h[v];g=o.measureText(x).width,f+=p-g+u,p=g}}}const Xu=new Ype;class qp extends $p{constructor(...e){const r=Hp(e,"Text");super(r,si),this.renderPipeId="text",r.textureStyle&&(this.textureStyle=r.textureStyle instanceof Hi?r.textureStyle:new Hi(r.textureStyle))}updateBounds(){const e=this._bounds,r=this._anchor;let i=0,s=0;if(this._style.trim){const{frame:a,canvasAndContext:n}=Xu.getCanvasAndContext({text:this.text,style:this._style,resolution:1});Xu.returnCanvasAndContext(n),i=a.width,s=a.height}else{const a=Bn.measureText(this._text,this._style);i=a.width,s=a.height}e.minX=-r._x*i,e.maxX=e.minX+i,e.minY=-r._y*s,e.maxY=e.minY+s}}class DG extends CG{resolveQueueItem(e,r){return e instanceof Ir?this.resolveContainerQueueItem(e,r):e instanceof Hr||e instanceof ct?r.push(e.source):e instanceof Gn&&r.push(e),null}resolveContainerQueueItem(e,r){e instanceof An||e instanceof PG||e instanceof pl?r.push(e.texture.source):e instanceof qp?r.push(e):e instanceof Vi?r.push(e.context):e instanceof zc&&e.textures.forEach(i=>{i.source?r.push(i.source):r.push(i.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:r}=e;for(const i of r)if(i.action==="texture"){const{image:s}=i.data;return s.source}else if(i.action==="fill"){const{texture:s}=i.data.style;return s.source}return null}}class iS extends $p{constructor(...e){var r;const i=Hp(e,"BitmapText");i.style??(i.style=i.style||{}),(r=i.style).fill??(r.fill=16777215),super(i,si),this.renderPipeId="bitmapText"}updateBounds(){const e=this._bounds,r=this._anchor,i=nl.measureText(this.text,this._style),s=i.scale,a=i.offsetY*s;let n=i.width*s,o=i.height*s;const u=this._style._stroke;u&&(n+=u.width,o+=u.width),e.minX=-r._x*n,e.maxX=e.minX+n,e.minY=-r._y*(o+a),e.maxY=e.minY+o}set resolution(e){e!==null&&Rt("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}function kG(t){const e=t._stroke,r=t._fill,s=[`div { ${[`color: ${qt.shared.setValue(r.color).toHex()}`,`font-size: ${t.fontSize}px`,`font-family: ${t.fontFamily}`,`font-weight: ${t.fontWeight}`,`font-style: ${t.fontStyle}`,`font-variant: ${t.fontVariant}`,`letter-spacing: ${t.letterSpacing}px`,`text-align: ${t.align}`,`padding: ${t.padding}px`,`white-space: ${t.whiteSpace==="pre"&&t.wordWrap?"pre-wrap":t.whiteSpace}`,...t.lineHeight?[`line-height: ${t.lineHeight}px`]:[],...t.wordWrap?[`word-wrap: ${t.breakWords?"break-all":"break-word"}`,`max-width: ${t.wordWrapWidth}px`]:[],...e?[MG(e)]:[],...t.dropShadow?[UG(t.dropShadow)]:[],...t.cssOverrides].join(";")} }`];return Zpe(t.tagStyles,s),s.join(" ")}function UG(t){const e=qt.shared.setValue(t.color).setAlpha(t.alpha).toHexa(),r=Math.round(Math.cos(t.angle)*t.distance),i=Math.round(Math.sin(t.angle)*t.distance),s=`${r}px ${i}px`;return t.blur>0?`text-shadow: ${s} ${t.blur}px ${e}`:`text-shadow: ${s} ${e}`}function MG(t){return[`-webkit-text-stroke-width: ${t.width}px`,`-webkit-text-stroke-color: ${qt.shared.setValue(t.color).toHex()}`,`text-stroke-width: ${t.width}px`,`text-stroke-color: ${qt.shared.setValue(t.color).toHex()}`,"paint-order: stroke"].join(";")}const rU={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},nU={fill:t=>`color: ${qt.shared.setValue(t).toHex()}`,breakWords:t=>`word-wrap: ${t?"break-all":"break-word"}`,stroke:MG,dropShadow:UG};function Zpe(t,e){for(const r in t){const i=t[r],s=[];for(const a in i)nU[a]?s.push(nU[a](i[a])):rU[a]&&s.push(rU[a].replace("{{VALUE}}",i[a]));e.push(`${r} { ${s.join(";")} }`)}}class ff extends si{constructor(e={}){super(e),this._cssOverrides=[],this.cssOverrides=e.cssOverrides??[],this.tagStyles=e.tagStyles??{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}update(){this._cssStyle=null,super.update()}clone(){return new ff({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides,tagStyles:{...this.tagStyles}})}get cssStyle(){return this._cssStyle||(this._cssStyle=kG(this)),this._cssStyle}addOverride(...e){const r=e.filter(i=>!this.cssOverrides.includes(i));r.length>0&&(this.cssOverrides.push(...r),this.update())}removeOverride(...e){const r=e.filter(i=>this.cssOverrides.includes(i));r.length>0&&(this.cssOverrides=this.cssOverrides.filter(i=>!r.includes(i)),this.update())}set fill(e){typeof e!="string"&&typeof e!="number"&&Rt("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=e}set stroke(e){e&&typeof e!="string"&&typeof e!="number"&&Rt("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=e}}const iU="http://www.w3.org/2000/svg",sU="http://www.w3.org/1999/xhtml";class sS{constructor(){this.svgRoot=document.createElementNS(iU,"svg"),this.foreignObject=document.createElementNS(iU,"foreignObject"),this.domElement=document.createElementNS(sU,"div"),this.styleElement=document.createElementNS(sU,"style"),this.image=new Image;const{foreignObject:e,svgRoot:r,styleElement:i,domElement:s}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",r.appendChild(e),e.appendChild(i),e.appendChild(s)}}let aU;function aS(t,e,r,i){i||(i=aU||(aU=new sS));const{domElement:s,styleElement:a,svgRoot:n}=i;s.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${t}</div>`,s.setAttribute("style","transform-origin: top left; display: inline-block"),r&&(a.textContent=r),document.body.appendChild(n);const o=s.getBoundingClientRect();n.remove();const u=e.padding*2;return{width:o.width-u,height:o.height-u}}class NG extends $p{constructor(...e){const r=Hp(e,"HtmlText");super(r,ff),this.renderPipeId="htmlText",r.textureStyle&&(this.textureStyle=r.textureStyle instanceof Hi?r.textureStyle:new Hi(r.textureStyle))}updateBounds(){const e=this._bounds,r=this._anchor,i=aS(this.text,this._style),{width:s,height:a}=i;e.minX=-r._x*s,e.maxX=e.minX+s,e.minY=-r._y*a,e.maxY=e.minY+a}}class FG extends DG{uploadQueueItem(e){e instanceof Hr?this.uploadTextureSource(e):e instanceof qp?this.uploadText(e):e instanceof NG?this.uploadHTMLText(e):e instanceof iS?this.uploadBitmapText(e):e instanceof Gn&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:r}=e;for(const i of r)if(i.action==="texture"){const{image:s}=i.data;this.uploadTextureSource(s.source)}else if(i.action==="fill"){const{texture:s}=i.data.style;this.uploadTextureSource(s.source)}return null}}class GG extends FG{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}GG.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"prepare"};class oS{constructor(){this._tempState=yi.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,r,i){const s=e.renderer,a=this._didUploadHash[i.uid];s.shader.bind(i,a),a||(this._didUploadHash[i.uid]=!0),s.shader.updateUniformGroup(s.globalUniforms.uniformGroup),s.geometry.bind(r,i.glProgram)}execute(e,r){const i=e.renderer;this._tempState.blendMode=r.blendMode,i.state.set(this._tempState);const s=r.textures.textures;for(let a=0;a<r.textures.count;a++)i.texture.bind(s[a],a);i.geometry.draw(r.topology,r.size,r.start)}}oS.extension={type:[pe.WebGLPipesAdaptor],name:"batch"};function Qpe(t){const e=[];let r=0;for(let i=0;i<t;i++)e[r]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:r,visibility:GPUShaderStage.FRAGMENT},r++,e[r]={sampler:{type:"filtering"},binding:r,visibility:GPUShaderStage.FRAGMENT},r++;return e}function Jpe(t){const e={};let r=0;for(let i=0;i<t;i++)e[`textureSource${i+1}`]=r++,e[`textureSampler${i+1}`]=r++;return e}const Uh=yi.for2d();class uS{start(e,r,i){const s=e.renderer,a=s.encoder,n=i.gpuProgram;this._shader=i,this._geometry=r,a.setGeometry(r,n),Uh.blendMode="normal",s.pipeline.getPipeline(r,n,Uh);const o=s.globalUniforms.bindGroup;a.resetBindGroup(1),a.setBindGroup(0,o,n)}execute(e,r){const i=this._shader.gpuProgram,s=e.renderer,a=s.encoder;if(!r.bindGroup){const u=r.textures;r.bindGroup=Ip(u.textures,u.count,s.limits.maxBatchableTextures)}Uh.blendMode=r.blendMode;const n=s.bindGroup.getBindGroup(r.bindGroup,i,1),o=s.pipeline.getPipeline(this._geometry,i,Uh,r.topology);r.bindGroup._touch(s.textureGC.count),a.setPipeline(o),a.renderPassEncoder.setBindGroup(1,n),a.renderPassEncoder.drawIndexed(r.size,1,r.start)}}uS.extension={type:[pe.WebGPUPipesAdaptor],name:"batch"};const lS=class KG{constructor(e,r){var i,s;this.state=yi.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=e,this._adaptor=r,(s=(i=this._adaptor).init)==null||s.call(i,this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let r=this._batchersByInstructionSet[e.uid];r||(r=this._batchersByInstructionSet[e.uid]=Object.create(null),r.default||(r.default=new Up({maxTextures:this.renderer.limits.maxBatchableTextures}))),this._activeBatches=r,this._activeBatch=this._activeBatches.default;for(const i in this._activeBatches)this._activeBatches[i].begin()}addToBatch(e,r){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(r);let i=this._activeBatches[e.batcherName];i||(i=this._activeBatches[e.batcherName]=KG.getBatcher(e.batcherName),i.begin()),this._activeBatch=i}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);const r=this._activeBatches;for(const i in r){const s=r[i],a=s.geometry;a.indexBuffer.setDataWithSize(s.indexBuffer,s.indexSize,!0),a.buffers[0].setDataWithSize(s.attributeBuffer.float32View,s.attributeSize,!1)}}upload(e){const r=this._batchersByInstructionSet[e.uid];for(const i in r){const s=r[i],a=s.geometry;s.dirty&&(s.dirty=!1,a.buffers[0].update(s.attributeSize*4))}}execute(e){if(e.action==="startBatch"){const r=e.batcher,i=r.geometry,s=r.shader;this._adaptor.start(this,i,s)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};lS.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"batch"};lS._availableBatchers=Object.create(null);let cS=lS;br.handleByMap(pe.Batcher,cS._availableBatchers);br.add(Up);function ege(t){const e=t.split(/([\n{}])/g).map(s=>s.trim()).filter(s=>s.length);let r="";return e.map(s=>{let a=r+s;return s==="{"?r+="    ":s==="}"&&(r=r.substr(0,r.length-4),a=r+s),a}).join(`
`)}const zu={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},VG={...zu,vertex:{...zu.vertex,header:zu.vertex.header.replace("group(1)","group(2)")}},Xp={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},$G={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;


        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},HG={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;


        `,main:`
            outColor = texture(uTexture, vUV);
        `}},tge=new un;class rge extends Dc{constructor(){super(),this.filters=[new AG({sprite:new An(ct.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(e){this.filters[0].sprite=e}get inverse(){return this.filters[0].inverse}set inverse(e){this.filters[0].inverse=e}}class fS{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,r,i){const s=this._renderer;if(s.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:r._maskOptions.inverse,canBundle:!1,maskedContainer:r}),e.inverse=r._maskOptions.inverse,e.renderMaskToTexture){const a=e.mask;a.includeInBuild=!0,a.collectRenderables(i,s,null),a.includeInBuild=!1}s.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:r,inverse:r._maskOptions.inverse,canBundle:!1})}pop(e,r,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:r._maskOptions.inverse,canBundle:!1})}execute(e){const r=this._renderer,i=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){const s=gn.get(rge);if(s.inverse=e.inverse,i){e.mask.mask.measurable=!0;const a=rf(e.mask.mask,!0,tge);e.mask.mask.measurable=!1,a.ceil();const n=r.renderTarget.renderTarget.colorTexture.source,o=Or.getOptimalTexture(a.width,a.height,n._resolution,n.antialias);r.renderTarget.push(o,!0),r.globalUniforms.push({offset:a,worldColor:4294967295});const u=s.sprite;u.texture=o,u.worldTransform.tx=a.minX,u.worldTransform.ty=a.minY,this._activeMaskStage.push({filterEffect:s,maskedContainer:e.maskedContainer,filterTexture:o})}else s.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:s,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){const s=this._activeMaskStage[this._activeMaskStage.length-1];i&&(r.type===ni.WEBGL&&r.renderTarget.finishRenderPass(),r.renderTarget.pop(),r.globalUniforms.pop()),r.filter.push({renderPipeId:"filter",action:"pushFilter",container:s.maskedContainer,filterEffect:s.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){r.filter.pop();const s=this._activeMaskStage.pop();i&&Or.returnTexture(s.filterTexture),gn.return(s.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}fS.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"alphaMask"};class hS{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,r,i){this._renderer.renderPipes.batch.break(i);const a=this._colorStack;a[this._colorStackIndex]=a[this._colorStackIndex-1]&e.mask;const n=this._colorStack[this._colorStackIndex];n!==this._currentColor&&(this._currentColor=n,i.add({renderPipeId:"colorMask",colorMask:n,canBundle:!1})),this._colorStackIndex++}pop(e,r,i){this._renderer.renderPipes.batch.break(i);const a=this._colorStack;this._colorStackIndex--;const n=a[this._colorStackIndex-1];n!==this._currentColor&&(this._currentColor=n,i.add({renderPipeId:"colorMask",colorMask:n,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._colorStack=null}}hS.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"colorMask"};class nge{constructor(e){this.priority=0,this.pipe="scissorMask",this.mask=e,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(e,r){yp(this.mask,e,r)}addLocalBounds(e,r){Tp(this.mask,e,r)}containsPoint(e,r){const i=this.mask;return r(i,e)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}class dS{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,r,i){var s;const a=e,n=this._renderer;n.renderPipes.batch.break(i),n.renderPipes.blendMode.setBlendMode(a.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:r._maskOptions.inverse,canBundle:!1});const o=a.mask;o.includeInBuild=!0,this._maskHash.has(a)||this._maskHash.set(a,{instructionsStart:0,instructionsLength:0});const u=this._maskHash.get(a);u.instructionsStart=i.instructionSize,o.collectRenderables(i,n,null),o.includeInBuild=!1,n.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:r._maskOptions.inverse,canBundle:!1});const c=i.instructionSize-u.instructionsStart-1;u.instructionsLength=c;const f=n.renderTarget.renderTarget.uid;(s=this._maskStackHash)[f]??(s[f]=0)}pop(e,r,i){const s=e,a=this._renderer;a.renderPipes.batch.break(i),a.renderPipes.blendMode.setBlendMode(s.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:r._maskOptions.inverse,canBundle:!1});const n=this._maskHash.get(e);for(let o=0;o<n.instructionsLength;o++)i.instructions[i.instructionSize++]=i.instructions[n.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var r;const i=this._renderer,s=i.renderTarget.renderTarget.uid;let a=(r=this._maskStackHash)[s]??(r[s]=0);e.action==="pushMaskBegin"?(i.renderTarget.ensureDepthStencil(),i.stencil.setStencilMode(jr.RENDERING_MASK_ADD,a),a++,i.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?i.stencil.setStencilMode(jr.INVERSE_MASK_ACTIVE,a):i.stencil.setStencilMode(jr.MASK_ACTIVE,a),i.colorMask.setMask(15)):e.action==="popMaskBegin"?(i.colorMask.setMask(0),a!==0?i.stencil.setStencilMode(jr.RENDERING_MASK_REMOVE,a):(i.renderTarget.clear(null,Jn.STENCIL),i.stencil.setStencilMode(jr.DISABLED,a)),a--):e.action==="popMaskEnd"&&(e.inverse?i.stencil.setStencilMode(jr.INVERSE_MASK_ACTIVE,a):i.stencil.setStencilMode(jr.MASK_ACTIVE,a),i.colorMask.setMask(15)),this._maskStackHash[s]=a}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}dS.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"stencilMask"};var xc=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(xc||{});class qG{constructor(e,r){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=r}}class pS{constructor(e){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){this._gl=this._renderer.gl,this._gpuBuffers=Object.create(null),this._maxBindings=this._renderer.limits.maxUniformBindings}getGlBuffer(e){return this._gpuBuffers[e.uid]||this.createGLBuffer(e)}bind(e){const{_gl:r}=this,i=this.getGlBuffer(e);r.bindBuffer(i.type,i.buffer)}bindBufferBase(e,r){const{_gl:i}=this;this._boundBufferBases[r]!==e&&(this._boundBufferBases[r]=e,e._lastBindBaseLocation=r,i.bindBufferBase(i.UNIFORM_BUFFER,r,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let r=this.getLastBindBaseLocation(e);if(r>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,r;let i=0,s=this._nextBindBaseIndex;for(;i<2;){s>=this._maxBindings&&(s=this._minBaseLocation,i++);const a=this._boundBufferBases[s];if(a&&a._lastBindCallId===this._bindCallId){s++;continue}break}return r=s,this._nextBindBaseIndex=s+1,i>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[r]=null,r)}getLastBindBaseLocation(e){const r=e._lastBindBaseLocation;return this._boundBufferBases[r]===e?r:-1}bindBufferRange(e,r,i,s){const{_gl:a}=this;i||(i=0),r||(r=0),this._boundBufferBases[r]=null,a.bindBufferRange(a.UNIFORM_BUFFER,r||0,e.buffer,i*256,s||256)}updateBuffer(e){const{_gl:r}=this,i=this.getGlBuffer(e);if(e._updateID===i.updateID)return i;i.updateID=e._updateID,r.bindBuffer(i.type,i.buffer);const s=e.data,a=e.descriptor.usage&nr.STATIC?r.STATIC_DRAW:r.DYNAMIC_DRAW;return s?i.byteLength>=s.byteLength?r.bufferSubData(i.type,0,s,0,e._updateSize/s.BYTES_PER_ELEMENT):(i.byteLength=s.byteLength,r.bufferData(i.type,s,a)):(i.byteLength=e.descriptor.size,r.bufferData(i.type,i.byteLength,a)),i}destroyAll(){const e=this._gl;for(const r in this._gpuBuffers)e.deleteBuffer(this._gpuBuffers[r].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(e,r){const i=this._gpuBuffers[e.uid],s=this._gl;r||s.deleteBuffer(i.buffer),this._gpuBuffers[e.uid]=null}createGLBuffer(e){const{_gl:r}=this;let i=xc.ARRAY_BUFFER;e.descriptor.usage&nr.INDEX?i=xc.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&nr.UNIFORM&&(i=xc.UNIFORM_BUFFER);const s=new qG(r.createBuffer(),i);return this._gpuBuffers[e.uid]=s,e.on("destroy",this.onBufferDestroy,this),s}resetState(){this._boundBufferBases=Object.create(null)}}pS.extension={type:[pe.WebGLSystem],name:"buffer"};const gS=class XG{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){e={...XG.defaultOptions,...e};let r=this.multiView=e.multiView;if(e.context&&r&&(Rt("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),r=!1),r?this.canvas=Qt.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{const i=this._renderer.background.alpha<1,s=e.premultipliedAlpha??!0,a=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:i,premultipliedAlpha:s,antialias:a,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&Rt("multiView is disabled, but targetCanvas is not the main canvas");return}const{canvas:r}=this;(r.width<e.width||r.height<e.height)&&(r.width=Math.max(e.width,e.width),r.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof Qt.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);const r=this._renderer.view.canvas;r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,r){let i;const s=this.canvas;if(e===2&&(i=s.getContext("webgl2",r)),!i&&(i=s.getContext("webgl",r),!i))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=i,this.initFromContext(this.gl)}getExtensions(){const{gl:e}=this,r={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...r,drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")};else{this.extensions={...r,colorBufferFloat:e.getExtension("EXT_color_buffer_float")};const i=e.getExtension("WEBGL_provoking_vertex");i&&i.provokingVertexWEBGL(i.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var r;this.gl.isContextLost()&&((r=this.extensions.loseContext)==null||r.restoreContext())},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){var r;const e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(r=this.extensions.loseContext)==null||r.loseContext()}forceContextLoss(){var e;(e=this.extensions.loseContext)==null||e.loseContext(),this._contextLossForced=!0}validateContext(e){const r=e.getContextAttributes();r&&!r.stencil&&Rt("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=this.supports,s=this.webGLVersion===2,a=this.extensions;i.uint32Indices=s||!!a.uint32ElementIndex,i.uniformBufferObject=s,i.vertexArrayObject=s||!!a.vertexArrayObject,i.srgbTextures=s||!!a.srgb,i.nonPowOf2wrapping=s,i.nonPowOf2mipmaps=s,i.msaa=s,i.uint32Indices||Rt("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};gS.extension={type:[pe.WebGLSystem],name:"context"};gS.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let zG=gS;function mS(t,e){for(const r in t.attributes){const i=t.attributes[r],s=e[r];s?(i.format??(i.format=s.format),i.offset??(i.offset=s.offset),i.instance??(i.instance=s.instance)):Rt(`Attribute ${r} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}ige(t)}function ige(t){const{buffers:e,attributes:r}=t,i={},s={};for(const a in e){const n=e[a];i[n.uid]=0,s[n.uid]=0}for(const a in r){const n=r[a];i[n.buffer.uid]+=ua(n.format).stride}for(const a in r){const n=r[a];n.stride??(n.stride=i[n.buffer.uid]),n.start??(n.start=s[n.buffer.uid]),s[n.buffer.uid]+=ua(n.format).stride}}var yd=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(yd||{}),_S=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(_S||{}),WG=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(WG||{}),ar=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(ar||{});const oU={uint8x2:ar.UNSIGNED_BYTE,uint8x4:ar.UNSIGNED_BYTE,sint8x2:ar.BYTE,sint8x4:ar.BYTE,unorm8x2:ar.UNSIGNED_BYTE,unorm8x4:ar.UNSIGNED_BYTE,snorm8x2:ar.BYTE,snorm8x4:ar.BYTE,uint16x2:ar.UNSIGNED_SHORT,uint16x4:ar.UNSIGNED_SHORT,sint16x2:ar.SHORT,sint16x4:ar.SHORT,unorm16x2:ar.UNSIGNED_SHORT,unorm16x4:ar.UNSIGNED_SHORT,snorm16x2:ar.SHORT,snorm16x4:ar.SHORT,float16x2:ar.HALF_FLOAT,float16x4:ar.HALF_FLOAT,float32:ar.FLOAT,float32x2:ar.FLOAT,float32x3:ar.FLOAT,float32x4:ar.FLOAT,uint32:ar.UNSIGNED_INT,uint32x2:ar.UNSIGNED_INT,uint32x3:ar.UNSIGNED_INT,uint32x4:ar.UNSIGNED_INT,sint32:ar.INT,sint32x2:ar.INT,sint32x3:ar.INT,sint32x4:ar.INT};function jG(t){return oU[t]??oU.float32}const sge={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class bS{constructor(e){this._geometryVaoHash=Object.create(null),this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){const e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");const r=this._renderer.context.extensions.vertexArrayObject;r&&(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=s=>r.bindVertexArrayOES(s),e.deleteVertexArray=s=>r.deleteVertexArrayOES(s));const i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(e.drawArraysInstanced=(s,a,n,o)=>{i.drawArraysInstancedANGLE(s,a,n,o)},e.drawElementsInstanced=(s,a,n,o,u)=>{i.drawElementsInstancedANGLE(s,a,n,o,u)},e.vertexAttribDivisor=(s,a)=>i.vertexAttribDivisorANGLE(s,a)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(e,r){const i=this.gl;this._activeGeometry=e;const s=this.getVao(e,r);this._activeVao!==s&&(this._activeVao=s,i.bindVertexArray(s)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this._renderer.buffer;for(let i=0;i<e.buffers.length;i++){const s=e.buffers[i];r.updateBuffer(s)}}checkCompatibility(e,r){const i=e.attributes,s=r._attributeData;for(const a in s)if(!i[a])throw new Error(`shader and geometry incompatible, geometry missing the "${a}" attribute`)}getSignature(e,r){const i=e.attributes,s=r._attributeData,a=["g",e.uid];for(const n in i)s[n]&&a.push(n,s[n].location);return a.join("-")}getVao(e,r){var i;return((i=this._geometryVaoHash[e.uid])==null?void 0:i[r._key])||this.initGeometryVao(e,r)}initGeometryVao(e,r,i=!0){const s=this._renderer.gl,a=this._renderer.buffer;this._renderer.shader._getProgramData(r),this.checkCompatibility(e,r);const n=this.getSignature(e,r);this._geometryVaoHash[e.uid]||(this._geometryVaoHash[e.uid]=Object.create(null),e.on("destroy",this.onGeometryDestroy,this));const o=this._geometryVaoHash[e.uid];let u=o[n];if(u)return o[r._key]=u,u;mS(e,r._attributeData);const c=e.buffers;u=s.createVertexArray(),s.bindVertexArray(u);for(let f=0;f<c.length;f++){const h=c[f];a.bind(h)}return this.activateVao(e,r),o[r._key]=u,o[n]=u,s.bindVertexArray(null),u}onGeometryDestroy(e,r){const i=this._geometryVaoHash[e.uid],s=this.gl;if(i){if(r)for(const a in i)this._activeVao!==i[a]&&this.unbind(),s.deleteVertexArray(i[a]);this._geometryVaoHash[e.uid]=null}}destroyAll(e=!1){const r=this.gl;for(const i in this._geometryVaoHash){if(e)for(const s in this._geometryVaoHash[i]){const a=this._geometryVaoHash[i];this._activeVao!==a&&this.unbind(),r.deleteVertexArray(a[s])}this._geometryVaoHash[i]=null}}activateVao(e,r){var o;const i=this._renderer.gl,s=this._renderer.buffer,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let n=null;for(const u in a){const c=a[u],f=c.buffer,h=s.getGlBuffer(f),p=r._attributeData[u];if(p){n!==h&&(s.bind(f),n=h);const g=p.location;i.enableVertexAttribArray(g);const m=ua(c.format),T=jG(c.format);if(((o=p.format)==null?void 0:o.substring(1,4))==="int"?i.vertexAttribIPointer(g,m.size,T,c.stride,c.offset):i.vertexAttribPointer(g,m.size,T,m.normalised,c.stride,c.offset),c.instance)if(this.hasInstance){const x=c.divisor??1;i.vertexAttribDivisor(g,x)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,i,s){const{gl:a}=this._renderer,n=this._activeGeometry,o=sge[e||n.topology];if(s??(s=n.instanceCount),n.indexBuffer){const u=n.indexBuffer.data.BYTES_PER_ELEMENT,c=u===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;s>1?a.drawElementsInstanced(o,r||n.indexBuffer.data.length,c,(i||0)*u,s):a.drawElements(o,r||n.indexBuffer.data.length,c,(i||0)*u)}else s>1?a.drawArraysInstanced(o,i||0,r||n.getSize(),s):a.drawArrays(o,i||0,r||n.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}bS.extension={type:[pe.WebGLSystem],name:"geometry"};const age=new qo({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),xS=class YG{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){const{useBackBuffer:r,antialias:i}={...YG.defaultOptions,...e};this.useBackBuffer=r,this._antialias=i,this._renderer.context.supports.msaa||(Rt("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=yi.for2d();const s=new _n({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new Si({glProgram:s,resources:{uTexture:ct.WHITE.source}})}renderStart(e){const r=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!r.isRoot,this._useBackBufferThisRender){const i=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=i.colorTexture,e.target=this._getBackBufferTexture(i.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:age,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new ct({source:new Hr({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};xS.extension={type:[pe.WebGLSystem],name:"backBuffer",priority:1};xS.defaultOptions={useBackBuffer:!1};let ZG=xS;class vS{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}}vS.extension={type:[pe.WebGLSystem],name:"colorMask"};class ES{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,r){this._renderer.geometry.bind(e,r.glProgram)}finishRenderPass(){}draw(e){const r=this._renderer,{geometry:i,shader:s,state:a,skipSync:n,topology:o,size:u,start:c,instanceCount:f}=e;r.shader.bind(s,n),r.geometry.bind(i,r.shader._activeProgram),a&&r.state.set(a),r.geometry.draw(o,u,c,f??i.instanceCount)}destroy(){this._renderer=null}}ES.extension={type:[pe.WebGLSystem],name:"encoder"};class yS{constructor(e){this._renderer=e}contextChange(){const e=this._renderer.gl;this.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.maxBatchableTextures=UA(this.maxTextures,e),this.maxUniformBindings=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS)}destroy(){}}yS.extension={type:[pe.WebGLSystem],name:"limits"};class QG{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}const da=[];da[jr.NONE]=void 0;da[jr.DISABLED]={stencilWriteMask:0,stencilReadMask:0};da[jr.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};da[jr.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};da[jr.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};da[jr.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"keep"},stencilBack:{compare:"not-equal",passOp:"keep"}};class TS{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:jr.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this.resetState()}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let r=this._renderTargetStencilState[e.uid];r||(r=this._renderTargetStencilState[e.uid]={stencilMode:jr.DISABLED,stencilReference:0}),this.setStencilMode(r.stencilMode,r.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=jr.NONE,this._stencilCache.stencilReference=0}setStencilMode(e,r){const i=this._renderTargetStencilState[this._activeRenderTarget.uid],s=this._gl,a=da[e],n=this._stencilCache;if(i.stencilMode=e,i.stencilReference=r,e===jr.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,s.disable(s.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,s.enable(s.STENCIL_TEST)),(e!==n.stencilMode||n.stencilReference!==r)&&(n.stencilMode=e,n.stencilReference=r,s.stencilFunc(this._comparisonFuncMapping[a.stencilBack.compare],r,255),s.stencilOp(s.KEEP,s.KEEP,this._stencilOpsMapping[a.stencilBack.passOp]))}}TS.extension={type:[pe.WebGLSystem],name:"stencil"};class AS{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!LA())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){const r=this.getUniformGroupData(e);e.buffer||(e.buffer=new ri({data:new Float32Array(r.layout.size/4),usage:nr.UNIFORM|nr.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){const r=e._signature;let i=this._syncFunctionHash[r];if(!i){const s=Object.keys(e.uniformStructures).map(o=>e.uniformStructures[o]),a=this._adaptor.createUboElements(s),n=this._generateUboSync(a.uboElements);i=this._syncFunctionHash[r]={layout:a,syncFunction:n}}return this._syncFunctionHash[r]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,r,i){const s=this.getUniformGroupData(e);e.buffer||(e.buffer=new ri({data:new Float32Array(s.layout.size/4),usage:nr.UNIFORM|nr.COPY_DST}));let a=null;return r||(r=e.buffer.data,a=e.buffer.dataInt32),i||(i=0),s.syncFunction(e.uniforms,r,a,i),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;const r=this.syncUniformGroup(e);return e.buffer.update(),r}destroy(){this._syncFunctionHash=null}}const SS={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":16*2,"mat3x3<f32>":16*3,"mat4x4<f32>":16*4};function JG(t){const e=t.map(a=>({data:a,offset:0,size:0})),r=16;let i=0,s=0;for(let a=0;a<e.length;a++){const n=e[a];if(i=SS[n.data.type],!i)throw new Error(`Unknown type ${n.data.type}`);n.data.size>1&&(i=Math.max(i,r)*n.data.size);const o=i===12?16:i;n.size=i;const u=s%r;u>0&&r-u<o?s+=(r-u)%16:s+=(i-u%i)%i,n.offset=s,s+=i}return s=Math.ceil(s/16)*16,{uboElements:e,size:s}}const Ua=[{type:"mat3x3<f32>",test:t=>t.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:t=>t.type==="vec2<f32>"&&t.size===1&&t.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:t=>t.type==="vec3<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function RS(t,e,r,i){const s=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `];let a=0;for(let o=0;o<t.length;o++){const u=t[o],c=u.data.name;let f=!1,h=0;for(let p=0;p<Ua.length;p++)if(Ua[p].test(u.data)){h=u.offset/4,s.push(`name = "${c}";`,`offset += ${h-a};`,Ua[p][e]||Ua[p].ubo),f=!0;break}if(!f)if(u.data.size>1)h=u.offset/4,s.push(r(u,h-a));else{const p=i[u.data.type];h=u.offset/4,s.push(`
                    v = uv.${c};
                    offset += ${h-a};
                    ${p};
                `)}a=h}const n=s.join(`
`);return new Function("uv","data","dataInt32","offset",n)}function mu(t,e){return`
        for (let i = 0; i < ${t*e}; i++) {
            data[offset + (((i / ${t})|0) * 4) + (i % ${t})] = v[i];
        }
    `}const CS={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":mu(3,2),"mat4x2<f32>":mu(4,2),"mat2x3<f32>":mu(2,3),"mat4x3<f32>":mu(4,3),"mat2x4<f32>":mu(2,4),"mat3x4<f32>":mu(3,4)},e9={...CS,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function t9(t,e){const r=Math.max(SS[t.data.type]/16,1),i=t.data.value.length/t.data.size,s=(4-i%4)%4,a=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${t.data.name};
        offset += ${e};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${t.data.size*r}; i++)
        {
            for(var j = 0; j < ${i}; j++)
            {
                ${a}[arrayOffset++] = v[t++];
            }
            ${s!==0?`arrayOffset += ${s};`:""}
        }
    `}function r9(t){return RS(t,"uboStd40",t9,CS)}class wS extends AS{constructor(){super({createUboElements:JG,generateUboSync:r9})}}wS.extension={type:[pe.WebGLSystem],name:"ubo"};class n9{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new lr}init(e,r){this._renderer=e,this._renderTargetSystem=r,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new lr}copyToTexture(e,r,i,s,a){const n=this._renderTargetSystem,o=this._renderer,u=n.getGpuRenderTarget(e),c=o.gl;return this.finishRenderPass(e),c.bindFramebuffer(c.FRAMEBUFFER,u.resolveTargetFramebuffer),o.texture.bind(r,0),c.copyTexSubImage2D(c.TEXTURE_2D,0,a.x,a.y,i.x,i.y,s.width,s.height),r}startRenderPass(e,r=!0,i,s){const a=this._renderTargetSystem,n=e.colorTexture,o=a.getGpuRenderTarget(e);let u=s.y;e.isRoot&&(u=n.pixelHeight-s.height),e.colorTextures.forEach(h=>{this._renderer.texture.unbind(h)});const c=this._renderer.gl;c.bindFramebuffer(c.FRAMEBUFFER,o.framebuffer);const f=this._viewPortCache;(f.x!==s.x||f.y!==u||f.width!==s.width||f.height!==s.height)&&(f.x=s.x,f.y=u,f.width=s.width,f.height=s.height,c.viewport(s.x,u,s.width,s.height)),!o.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(o),this.clear(e,r,i)}finishRenderPass(e){const i=this._renderTargetSystem.getGpuRenderTarget(e);if(!i.msaa)return;const s=this._renderer.gl;s.bindFramebuffer(s.FRAMEBUFFER,i.resolveTargetFramebuffer),s.bindFramebuffer(s.READ_FRAMEBUFFER,i.framebuffer),s.blitFramebuffer(0,0,i.width,i.height,0,0,i.width,i.height,s.COLOR_BUFFER_BIT,s.NEAREST),s.bindFramebuffer(s.FRAMEBUFFER,i.framebuffer)}initGpuRenderTarget(e){const i=this._renderer.gl,s=new QG;return e.colorTexture instanceof Cs?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),s.framebuffer=null,s):(this._initColor(e,s),i.bindFramebuffer(i.FRAMEBUFFER,null),s)}destroyGpuRenderTarget(e){const r=this._renderer.gl;e.framebuffer&&(r.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(r.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(r.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(i=>{r.deleteRenderbuffer(i)}),e.msaaRenderBuffer=null}clear(e,r,i){if(!r)return;const s=this._renderTargetSystem;typeof r=="boolean"&&(r=r?Jn.ALL:Jn.NONE);const a=this._renderer.gl;if(r&Jn.COLOR){i??(i=s.defaultClearColor);const n=this._clearColorCache,o=i;(n[0]!==o[0]||n[1]!==o[1]||n[2]!==o[2]||n[3]!==o[3])&&(n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],a.clearColor(o[0],o[1],o[2],o[3]))}a.clear(r)}resizeGpuRenderTarget(e){if(e.isRoot)return;const i=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,i),(e.stencil||e.depth)&&this._resizeStencil(i)}_initColor(e,r){const i=this._renderer,s=i.gl,a=s.createFramebuffer();if(r.resolveTargetFramebuffer=a,s.bindFramebuffer(s.FRAMEBUFFER,a),r.width=e.colorTexture.source.pixelWidth,r.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((n,o)=>{const u=n.source;u.antialias&&(i.context.supports.msaa?r.msaa=!0:Rt("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(u,0);const f=i.texture.getGlSource(u).texture;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+o,3553,f,0)}),r.msaa){const n=s.createFramebuffer();r.framebuffer=n,s.bindFramebuffer(s.FRAMEBUFFER,n),e.colorTextures.forEach((o,u)=>{const c=s.createRenderbuffer();r.msaaRenderBuffer[u]=c})}else r.framebuffer=a;this._resizeColor(e,r)}_resizeColor(e,r){const i=e.colorTexture.source;if(r.width=i.pixelWidth,r.height=i.pixelHeight,e.colorTextures.forEach((s,a)=>{a!==0&&s.source.resize(i.width,i.height,i._resolution)}),r.msaa){const s=this._renderer,a=s.gl,n=r.framebuffer;a.bindFramebuffer(a.FRAMEBUFFER,n),e.colorTextures.forEach((o,u)=>{const c=o.source;s.texture.bindSource(c,0);const h=s.texture.getGlSource(c).internalFormat,p=r.msaaRenderBuffer[u];a.bindRenderbuffer(a.RENDERBUFFER,p),a.renderbufferStorageMultisample(a.RENDERBUFFER,4,h,c.pixelWidth,c.pixelHeight),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+u,a.RENDERBUFFER,p)})}}_initStencil(e){if(e.framebuffer===null)return;const r=this._renderer.gl,i=r.createRenderbuffer();e.depthStencilRenderBuffer=i,r.bindRenderbuffer(r.RENDERBUFFER,i),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,i),this._resizeStencil(e)}_resizeStencil(e){const r=this._renderer.gl;r.bindRenderbuffer(r.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?r.renderbufferStorageMultisample(r.RENDERBUFFER,4,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,this._renderer.context.webGLVersion===2?r.DEPTH24_STENCIL8:r.DEPTH_STENCIL,e.width,e.height)}prerender(e){const r=e.colorTexture.resource;this._renderer.context.multiView&&Cs.test(r)&&this._renderer.context.ensureCanvasSize(r)}postrender(e){if(this._renderer.context.multiView&&Cs.test(e.colorTexture.resource)){const r=this._renderer.context.canvas,i=e.colorTexture;i.context2D.drawImage(r,0,i.pixelHeight-r.height)}}}function i9(t,e,r,i,s,a){const n=a?1:-1;return t.identity(),t.a=1/i*2,t.d=n*(1/s*2),t.tx=-1-e*t.a,t.ty=-n-r*t.d,t}const yu=new Map;function LS(t,e){if(!yu.has(t)){const r=new ct({source:new Cs({resource:t,...e})}),i=()=>{yu.get(t)===r&&yu.delete(t)};r.once("destroy",i),r.source.once("destroy",i),yu.set(t,r)}return yu.get(t)}function oge(t){return yu.has(t)}function s9(t){const e=t.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}const a9=class o9{constructor(e={}){if(this.uid=Lr("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...o9.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let r=0;r<e.colorTextures;r++)this.colorTextures.push(new Hr({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(i=>i.source)];const r=this.colorTexture.source;this.resize(r.width,r.height,r._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof ct||e.depthStencilTexture instanceof Hr?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new Hr({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,r,i=this.resolution,s=!1){this.dirtyId++,this.colorTextures.forEach((a,n)=>{s&&n===0||a.source.resize(e,r,i)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,r,i)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};a9.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let Td=a9;class IS{constructor(e){this.rootViewPort=new lr,this.viewport=new lr,this.onRenderTargetChange=new IA("onRenderTargetChange"),this.projectionMatrix=new Et,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:r,clearColor:i,frame:s}){var a,n;this._renderTargetStack.length=0,this.push(e,r,i,s),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=s9(this.rootRenderTarget),(n=(a=this.adaptor).prerender)==null||n.call(a,this.rootRenderTarget)}postrender(){var e,r;(r=(e=this.adaptor).postrender)==null||r.call(e,this.rootRenderTarget)}bind(e,r=!0,i,s){const a=this.getRenderTarget(e),n=this.renderTarget!==a;this.renderTarget=a,this.renderSurface=e;const o=this.getGpuRenderTarget(a);(a.pixelWidth!==o.width||a.pixelHeight!==o.height)&&(this.adaptor.resizeGpuRenderTarget(a),o.width=a.pixelWidth,o.height=a.pixelHeight);const u=a.colorTexture,c=this.viewport,f=u.pixelWidth,h=u.pixelHeight;if(!s&&e instanceof ct&&(s=e.frame),s){const p=u._resolution;c.x=s.x*p+.5|0,c.y=s.y*p+.5|0,c.width=s.width*p+.5|0,c.height=s.height*p+.5|0}else c.x=0,c.y=0,c.width=f,c.height=h;return i9(this.projectionMatrix,0,0,c.width/u.resolution,c.height/u.resolution,!a.isRoot),this.adaptor.startRenderPass(a,r,i,c),n&&this.onRenderTargetChange.emit(a),a}clear(e,r=Jn.ALL,i){r&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,r,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,r=Jn.ALL,i,s){const a=this.bind(e,r,i,s);return this._renderTargetStack.push({renderTarget:a,frame:s}),a}pop(){this._renderTargetStack.pop();const e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){return e.isTexture&&(e=e.source),this._renderSurfaceToRenderTargetHash.get(e)??this._initRenderTarget(e)}copyToTexture(e,r,i,s,a){i.x<0&&(s.width+=i.x,a.x-=i.x,i.x=0),i.y<0&&(s.height+=i.y,a.y-=i.y,i.y=0);const{pixelWidth:n,pixelHeight:o}=e;return s.width=Math.min(s.width,n-i.x),s.height=Math.min(s.height,o-i.y),this.adaptor.copyToTexture(e,r,i,s,a)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,r)=>{e!==r&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let r=null;return Cs.test(e)&&(e=LS(e).source),e instanceof Td?r=e:e instanceof Hr&&(r=new Td({colorTextures:[e]}),e.source instanceof Cs&&(r.isRoot=!0),e.once("destroy",()=>{r.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);const i=this._gpuRenderTargetHash[r.uid];i&&(this._gpuRenderTargetHash[r.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(e,r),r}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}}class BS extends IS{constructor(e){super(e),this.adaptor=new n9,this.adaptor.init(e,this)}}BS.extension={type:[pe.WebGLSystem],name:"renderTarget"};class zp extends ui{constructor({buffer:e,offset:r,size:i}){super(),this.uid=Lr("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Lr("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=r|0,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Lr("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}function u9(t,e){const r=[],i=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `];let s=!1,a=0;const n=e._getProgramData(t.glProgram);for(const u in t.groups){const c=t.groups[u];r.push(`
            resources = g[${u}].resources;
        `);for(const f in c.resources){const h=c.resources[f];if(h instanceof rn)if(h.ubo){const p=t._uniformBindMap[u][Number(f)];r.push(`
                        sS.bindUniformBlock(
                            resources[${f}],
                            '${p}',
                            ${t.glProgram._uniformBlockData[p].index}
                        );
                    `)}else r.push(`
                        ugS.updateUniformGroup(resources[${f}], p, sD);
                    `);else if(h instanceof zp){const p=t._uniformBindMap[u][Number(f)];r.push(`
                    sS.bindUniformBlock(
                        resources[${f}],
                        '${p}',
                        ${t.glProgram._uniformBlockData[p].index}
                    );
                `)}else if(h instanceof Hr){const p=t._uniformBindMap[u][f],g=n.uniformData[p];g&&(s||(s=!0,i.push(`
                        var tS = r.texture;
                        `)),e._gl.uniform1i(g.location,a),r.push(`
                        tS.bind(resources[${f}], ${a});
                    `),a++)}}}const o=[...i,...r].join(`
`);return new Function("r","s","sD",o)}class uge{}class l9{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function L1(t,e,r){const i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),i}function QE(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function PS(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return QE(2*e);case"bvec3":return QE(3*e);case"bvec4":return QE(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let Mh=null;const uU={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},lge={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function OS(t,e){if(!Mh){const r=Object.keys(uU);Mh={};for(let i=0;i<r.length;++i){const s=r[i];Mh[t[s]]=uU[s]}}return Mh[e]}function c9(t,e){const r=OS(t,e);return lge[r]||"float32"}function f9(t,e,r=!1){const i={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let n=0;n<s;n++){const o=e.getActiveAttrib(t,n);if(o.name.startsWith("gl_"))continue;const u=c9(e,o.type);i[o.name]={location:0,format:u,stride:ua(u).stride,offset:0,instance:!1,start:0}}const a=Object.keys(i);if(r){a.sort((n,o)=>n>o?1:-1);for(let n=0;n<a.length;n++)i[a[n]].location=n,e.bindAttribLocation(t,n,a[n]);e.linkProgram(t)}else for(let n=0;n<a.length;n++)i[a[n]].location=e.getAttribLocation(t,a[n]);return i}function h9(t,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};const r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let s=0;s<i;s++){const a=e.getActiveUniformBlockName(t,s),n=e.getUniformBlockIndex(t,a),o=e.getActiveUniformBlockParameter(t,s,e.UNIFORM_BLOCK_DATA_SIZE);r[a]={name:a,index:n,size:o}}return r}function d9(t,e){const r={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;s++){const a=e.getActiveUniform(t,s),n=a.name.replace(/\[.*?\]$/,""),o=!!a.name.match(/\[.*?\]$/),u=OS(e,a.type);r[n]={name:n,index:s,type:u,size:a.size,isArray:o,value:PS(u,a.size)}}return r}function lU(t,e){const r=t.getShaderSource(e).split(`
`).map((c,f)=>`${f}: ${c}`),i=t.getShaderInfoLog(e),s=i.split(`
`),a={},n=s.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!a[c]?(a[c]=!0,!0):!1),o=[""];n.forEach(c=>{r[c-1]=`%c${r[c-1]}%c`,o.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const u=r.join(`
`);o[0]=u,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...o),console.groupEnd()}function p9(t,e,r,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||lU(t,r),t.getShaderParameter(i,t.COMPILE_STATUS)||lU(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function g9(t,e){const r=L1(t,t.VERTEX_SHADER,e.vertex),i=L1(t,t.FRAGMENT_SHADER,e.fragment),s=t.createProgram();t.attachShader(s,r),t.attachShader(s,i);const a=e.transformFeedbackVaryings;a&&(typeof t.transformFeedbackVaryings!="function"?Rt("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(s,a.names,a.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||p9(t,s,r,i),e._attributeData=f9(s,t,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=d9(s,t),e._uniformBlockData=h9(s,t),t.deleteShader(r),t.deleteShader(i);const n={};for(const u in e._uniformData){const c=e._uniformData[u];n[u]={location:t.getUniformLocation(s,u),value:PS(c.type,c.size)}}return new l9(s,n)}const Nh={textureCount:0,blockIndex:0};class DS{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null}bind(e,r){if(this._setProgram(e.glProgram),r)return;Nh.textureCount=0,Nh.blockIndex=0;let i=this._shaderSyncFunctions[e.glProgram._key];i||(i=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),i(this._renderer,e,Nh)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,Nh)}bindUniformBlock(e,r,i=0){const s=this._renderer.buffer,a=this._getProgramData(this._activeProgram),n=e._bufferResource;n||this._renderer.ubo.updateUniformGroup(e);const o=e.buffer,u=s.updateBuffer(o),c=s.freeLocationForBufferBase(u);if(n){const{offset:h,size:p}=e;h===0&&p===o.data.byteLength?s.bindBufferBase(u,c):s.bindBufferRange(u,c,h)}else s.getLastBindBaseLocation(u)!==c&&s.bindBufferBase(u,c);const f=this._activeProgram._uniformBlockData[r].index;a.uniformBlockBindings[i]!==c&&(a.uniformBlockBindings[i]=c,this._renderer.gl.uniformBlockBinding(a.program,f,c))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;const r=this._getProgramData(e);this._gl.useProgram(r.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){const r=e._key;return this._programDataHash[r]=g9(this._gl,e),this._programDataHash[r]}destroy(){for(const e of Object.keys(this._programDataHash))this._programDataHash[e].destroy(),this._programDataHash[e]=null;this._programDataHash=null}_generateShaderSync(e,r){return u9(e,r)}resetState(){this._activeProgram=null}}DS.extension={type:[pe.WebGLSystem],name:"shader"};const m9={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},_9={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function b9(t,e){const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(const i in t.uniforms){if(!e[i]){t.uniforms[i]instanceof rn?t.uniforms[i].ubo?r.push(`
                        renderer.shader.bindUniformBlock(uv.${i}, "${i}");
                    `):r.push(`
                        renderer.shader.updateUniformGroup(uv.${i});
                    `):t.uniforms[i]instanceof zp&&r.push(`
                        renderer.shader.bindBufferResource(uv.${i}, "${i}");
                    `);continue}const s=t.uniformStructures[i];let a=!1;for(let n=0;n<Ua.length;n++){const o=Ua[n];if(s.type===o.type&&o.test(s)){r.push(`name = "${i}";`,Ua[n].uniform),a=!0;break}}if(!a){const o=(s.size===1?m9:_9)[s.type].replace("location",`ud["${i}"].location`);r.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${o};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}class kS{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,r,i){const s=this._renderer.shader._getProgramData(r);(!e.isStatic||e._dirtyId!==s.uniformDirtyGroups[e.uid])&&(s.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,r)(s.uniformData,e.uniforms,this._renderer,i))}_getUniformSyncFunction(e,r){var i;return((i=this._uniformGroupSyncHash[e._signature])==null?void 0:i[r._key])||this._createUniformSyncFunction(e,r)}_createUniformSyncFunction(e,r){const i=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),s=this._getSignature(e,r._uniformData,"u");return this._cache[s]||(this._cache[s]=this._generateUniformsSync(e,r._uniformData)),i[r._key]=this._cache[s],i[r._key]}_generateUniformsSync(e,r){return b9(e,r)}_getSignature(e,r,i){const s=e.uniforms,a=[`${i}-`];for(const n in s)a.push(n),r[n]&&a.push(r[n].type);return a.join("-")}destroy(){this._renderer=null,this._cache=null}}kS.extension={type:[pe.WebGLSystem],name:"uniformGroup"};function cge(t){return t=t.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),t=`
        out vec4 finalColor;
    ${t}
    `,t}const fge={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function hge(t){return fge[t]}function x9(t){const e={};if(e.normal=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.add=[t.ONE,t.ONE],e.multiply=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.screen=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e["screen-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.erase=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],!(t instanceof Qt.get().getWebGLRenderingContext()))e.min=[t.ONE,t.ONE,t.ONE,t.ONE,t.MIN,t.MIN],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,t.MAX,t.MAX];else{const i=t.getExtension("EXT_blend_minmax");i&&(e.min=[t.ONE,t.ONE,t.ONE,t.ONE,i.MIN_EXT,i.MIN_EXT],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,i.MAX_EXT,i.MAX_EXT])}return e}const dge=0,pge=1,gge=2,mge=3,_ge=4,bge=5,v9=class I1{constructor(e){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[dge]=this.setBlend,this.map[pge]=this.setOffset,this.map[gge]=this.setCullFace,this.map[mge]=this.setDepthTest,this.map[_ge]=this.setFrontFace,this.map[bge]=this.setDepthMask,this.checks=[],this.defaultState=yi.for2d(),e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){this._invertFrontFace=!e.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(e){this.gl=e,this.blendModesMap=x9(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let r=this.stateId^e.data,i=0;for(;r;)r&1&&this.map[i].call(this,!!(e.data&1<<i)),r>>=1,i++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e||(e=this.defaultState);for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(I1._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(I1._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this._cullFace=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(e){this._frontFace=e,this._frontFaceDirty=!1;const r=this._invertFrontFace?!e:e;this._glFrontFace!==r&&(this._glFrontFace=r,this.gl.frontFace(this.gl[r?"CW":"CCW"]))}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;const r=this.blendModesMap[e],i=this.gl;r.length===2?i.blendFunc(r[0],r[1]):i.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,i.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,r){const i=this.checks.indexOf(e);r&&i===-1?this.checks.push(e):!r&&i!==-1&&this.checks.splice(i,1)}static _checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static _checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};v9.extension={type:[pe.WebGLSystem],name:"state"};let E9=v9;class y9{constructor(e){this.target=_S.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=ar.UNSIGNED_BYTE,this.internalFormat=yd.RGBA,this.format=yd.RGBA,this.samplerType=0}}const T9={id:"buffer",upload(t,e,r){e.width===t.width||e.height===t.height?r.texSubImage2D(r.TEXTURE_2D,0,0,0,t.width,t.height,e.format,e.type,t.resource):r.texImage2D(e.target,0,e.internalFormat,t.width,t.height,0,e.format,e.type,t.resource),e.width=t.width,e.height=t.height}},xge={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},A9={id:"compressed",upload(t,e,r){r.pixelStorei(r.UNPACK_ALIGNMENT,4);let i=t.pixelWidth,s=t.pixelHeight;const a=!!xge[t.format];for(let n=0;n<t.resource.length;n++){const o=t.resource[n];a?r.compressedTexImage2D(r.TEXTURE_2D,n,e.internalFormat,i,s,0,o):r.texImage2D(r.TEXTURE_2D,n,e.internalFormat,i,s,0,e.format,e.type,o),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},US={id:"image",upload(t,e,r,i){const s=e.width,a=e.height,n=t.pixelWidth,o=t.pixelHeight,u=t.resourceWidth,c=t.resourceHeight;u<n||c<o?((s!==n||a!==o)&&r.texImage2D(e.target,0,e.internalFormat,n,o,0,e.format,e.type,null),i===2?r.texSubImage2D(r.TEXTURE_2D,0,0,0,u,c,e.format,e.type,t.resource):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,t.resource)):s===n&&a===o?r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,t.resource):i===2?r.texImage2D(e.target,0,e.internalFormat,n,o,0,e.format,e.type,t.resource):r.texImage2D(e.target,0,e.internalFormat,e.format,e.type,t.resource),e.width=n,e.height=o}},S9={id:"video",upload(t,e,r,i){if(!t.isValid){r.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}US.upload(t,e,r,i)}},B1={linear:9729,nearest:9728},R9={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},Zh={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},C9={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function P1(t,e,r,i,s,a,n,o){const u=a;if(!o||t.addressModeU!=="repeat"||t.addressModeV!=="repeat"||t.addressModeW!=="repeat"){const c=Zh[n?"clamp-to-edge":t.addressModeU],f=Zh[n?"clamp-to-edge":t.addressModeV],h=Zh[n?"clamp-to-edge":t.addressModeW];e[s](u,e.TEXTURE_WRAP_S,c),e[s](u,e.TEXTURE_WRAP_T,f),e.TEXTURE_WRAP_R&&e[s](u,e.TEXTURE_WRAP_R,h)}if((!o||t.magFilter!=="linear")&&e[s](u,e.TEXTURE_MAG_FILTER,B1[t.magFilter]),r){if(!o||t.mipmapFilter!=="linear"){const c=R9[t.minFilter][t.mipmapFilter];e[s](u,e.TEXTURE_MIN_FILTER,c)}}else e[s](u,e.TEXTURE_MIN_FILTER,B1[t.minFilter]);if(i&&t.maxAnisotropy>1){const c=Math.min(t.maxAnisotropy,e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[s](u,i.TEXTURE_MAX_ANISOTROPY_EXT,c)}t.compare&&e[s](u,e.TEXTURE_COMPARE_FUNC,C9[t.compare])}function w9(t){return{r8unorm:t.RED,r8snorm:t.RED,r8uint:t.RED,r8sint:t.RED,r16uint:t.RED,r16sint:t.RED,r16float:t.RED,rg8unorm:t.RG,rg8snorm:t.RG,rg8uint:t.RG,rg8sint:t.RG,r32uint:t.RED,r32sint:t.RED,r32float:t.RED,rg16uint:t.RG,rg16sint:t.RG,rg16float:t.RG,rgba8unorm:t.RGBA,"rgba8unorm-srgb":t.RGBA,rgba8snorm:t.RGBA,rgba8uint:t.RGBA,rgba8sint:t.RGBA,bgra8unorm:t.RGBA,"bgra8unorm-srgb":t.RGBA,rgb9e5ufloat:t.RGB,rgb10a2unorm:t.RGBA,rg11b10ufloat:t.RGB,rg32uint:t.RG,rg32sint:t.RG,rg32float:t.RG,rgba16uint:t.RGBA,rgba16sint:t.RGBA,rgba16float:t.RGBA,rgba32uint:t.RGBA,rgba32sint:t.RGBA,rgba32float:t.RGBA,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT,depth24plus:t.DEPTH_COMPONENT,"depth24plus-stencil8":t.DEPTH_STENCIL,depth32float:t.DEPTH_COMPONENT,"depth32float-stencil8":t.DEPTH_STENCIL}}function L9(t,e){let r={},i=t.RGBA;return t instanceof Qt.get().getWebGLRenderingContext()?e.srgb&&(r={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(r={"rgba8unorm-srgb":t.SRGB8_ALPHA8,"bgra8unorm-srgb":t.SRGB8_ALPHA8},i=t.RGBA8),{r8unorm:t.R8,r8snorm:t.R8_SNORM,r8uint:t.R8UI,r8sint:t.R8I,r16uint:t.R16UI,r16sint:t.R16I,r16float:t.R16F,rg8unorm:t.RG8,rg8snorm:t.RG8_SNORM,rg8uint:t.RG8UI,rg8sint:t.RG8I,r32uint:t.R32UI,r32sint:t.R32I,r32float:t.R32F,rg16uint:t.RG16UI,rg16sint:t.RG16I,rg16float:t.RG16F,rgba8unorm:t.RGBA,...r,rgba8snorm:t.RGBA8_SNORM,rgba8uint:t.RGBA8UI,rgba8sint:t.RGBA8I,bgra8unorm:i,rgb9e5ufloat:t.RGB9_E5,rgb10a2unorm:t.RGB10_A2,rg11b10ufloat:t.R11F_G11F_B10F,rg32uint:t.RG32UI,rg32sint:t.RG32I,rg32float:t.RG32F,rgba16uint:t.RGBA16UI,rgba16sint:t.RGBA16I,rgba16float:t.RGBA16F,rgba32uint:t.RGBA32UI,rgba32sint:t.RGBA32I,rgba32float:t.RGBA32F,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT16,depth24plus:t.DEPTH_COMPONENT24,"depth24plus-stencil8":t.DEPTH24_STENCIL8,depth32float:t.DEPTH_COMPONENT32F,"depth32float-stencil8":t.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function I9(t){return{r8unorm:t.UNSIGNED_BYTE,r8snorm:t.BYTE,r8uint:t.UNSIGNED_BYTE,r8sint:t.BYTE,r16uint:t.UNSIGNED_SHORT,r16sint:t.SHORT,r16float:t.HALF_FLOAT,rg8unorm:t.UNSIGNED_BYTE,rg8snorm:t.BYTE,rg8uint:t.UNSIGNED_BYTE,rg8sint:t.BYTE,r32uint:t.UNSIGNED_INT,r32sint:t.INT,r32float:t.FLOAT,rg16uint:t.UNSIGNED_SHORT,rg16sint:t.SHORT,rg16float:t.HALF_FLOAT,rgba8unorm:t.UNSIGNED_BYTE,"rgba8unorm-srgb":t.UNSIGNED_BYTE,rgba8snorm:t.BYTE,rgba8uint:t.UNSIGNED_BYTE,rgba8sint:t.BYTE,bgra8unorm:t.UNSIGNED_BYTE,"bgra8unorm-srgb":t.UNSIGNED_BYTE,rgb9e5ufloat:t.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:t.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:t.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:t.UNSIGNED_INT,rg32sint:t.INT,rg32float:t.FLOAT,rgba16uint:t.UNSIGNED_SHORT,rgba16sint:t.SHORT,rgba16float:t.HALF_FLOAT,rgba32uint:t.UNSIGNED_INT,rgba32sint:t.INT,rgba32float:t.FLOAT,stencil8:t.UNSIGNED_BYTE,depth16unorm:t.UNSIGNED_SHORT,depth24plus:t.UNSIGNED_INT,"depth24plus-stencil8":t.UNSIGNED_INT_24_8,depth32float:t.FLOAT,"depth32float-stencil8":t.FLOAT_32_UNSIGNED_INT_24_8_REV}}function vge(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let r=0;r<e;r+=4){const i=t[r+3];if(i!==0){const s=255.001/i;t[r]=t[r]*s+.5,t[r+1]=t[r+1]*s+.5,t[r+2]=t[r+2]*s+.5}}}const Ege=4;class MS{constructor(e){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:US,buffer:T9,video:S9,compressed:A9},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=L9(e,this._renderer.context.extensions),this._mapFormatToType=I9(e),this._mapFormatToFormat=w9(e)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let r=0;r<16;r++)this.bind(ct.EMPTY,r)}initSource(e){this.bind(e)}bind(e,r=0){const i=e.source;e?(this.bindSource(i,r),this._useSeparateSamplers&&this._bindSampler(i.style,r)):(this.bindSource(null,r),this._useSeparateSamplers&&this._bindSampler(null,r))}bindSource(e,r=0){const i=this._gl;if(e._touched=this._renderer.textureGC.count,this._boundTextures[r]!==e){this._boundTextures[r]=e,this._activateLocation(r),e||(e=ct.EMPTY.source);const s=this.getGlSource(e);i.bindTexture(s.target,s.texture)}}_bindSampler(e,r=0){const i=this._gl;if(!e){this._boundSamplers[r]=null,i.bindSampler(r,null);return}const s=this._getGlSampler(e);this._boundSamplers[r]!==s&&(this._boundSamplers[r]=s,i.bindSampler(r,s))}unbind(e){const r=e.source,i=this._boundTextures,s=this._gl;for(let a=0;a<i.length;a++)if(i[a]===r){this._activateLocation(a);const n=this.getGlSource(r);s.bindTexture(n.target,null),i[a]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){const r=this._gl,i=new y9(r.createTexture());if(i.type=this._mapFormatToType[e.format],i.internalFormat=this._mapFormatToInternalFormat[e.format],i.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){const s=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(s))+1}return this._glTextures[e.uid]=i,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),this.updateStyle(e,!1),i}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,r){const i=this._gl,s=this.getGlSource(e);i.bindTexture(i.TEXTURE_2D,s.texture),this._boundTextures[this._activeTextureLocation]=e,P1(e.style,i,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,r)}onSourceUnload(e){const r=this._glTextures[e.uid];r&&(this.unbind(e),this._glTextures[e.uid]=null,this._gl.deleteTexture(r.texture))}onSourceUpdate(e){const r=this._gl,i=this.getGlSource(e);r.bindTexture(r.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=e;const s=e.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==s&&(this._premultiplyAlpha=s,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,i,r,this._renderer.context.webGLVersion):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.pixelWidth,e.pixelHeight,0,r.RGBA,r.UNSIGNED_BYTE,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,r=!0){r&&this.bindSource(e,0);const i=this.getGlSource(e);this._gl.generateMipmap(i.target)}onSourceDestroy(e){e.off("destroy",this.onSourceDestroy,this),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}_initSampler(e){const r=this._gl,i=this._gl.createSampler();return this._glSamplers[e._resourceId]=i,P1(e,r,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return this._glTextures[e.uid]||this._initSource(e)}generateCanvas(e){const{pixels:r,width:i,height:s}=this.getPixels(e),a=Qt.get().createCanvas();a.width=i,a.height=s;const n=a.getContext("2d");if(n){const o=n.createImageData(i,s);o.data.set(r),n.putImageData(o,0,0)}return a}getPixels(e){const r=e.source.resolution,i=e.frame,s=Math.max(Math.round(i.width*r),1),a=Math.max(Math.round(i.height*r),1),n=new Uint8Array(Ege*s*a),o=this._renderer,u=o.renderTarget.getRenderTarget(e),c=o.renderTarget.getGpuRenderTarget(u),f=o.gl;return f.bindFramebuffer(f.FRAMEBUFFER,c.resolveTargetFramebuffer),f.readPixels(Math.round(i.x*r),Math.round(i.y*r),s,a,f.RGBA,f.UNSIGNED_BYTE,n),{pixels:new Uint8ClampedArray(n.buffer),width:s,height:a}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(ct.EMPTY.source),this._boundSamplers=Object.create(null);const e=this._gl;this._premultiplyAlpha=!1,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}MS.extension={type:[pe.WebGLSystem],name:"texture"};class NS{contextChange(e){const r=new rn({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Et,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),i=e.limits.maxBatchableTextures,s=fl({name:"graphics",bits:[Pp,Dp(i),Xp,dl]});this.shader=new Si({glProgram:s,resources:{localUniforms:r,batchSamplers:kp(i)}})}execute(e,r){const i=r.context,s=i.customShader||this.shader,a=e.renderer,n=a.graphicsContext,{batcher:o,instructions:u}=n.getContextRenderData(i);s.groups[0]=a.globalUniforms.bindGroup,a.state.set(e.state),a.shader.bind(s),a.geometry.bind(o.geometry,s.glProgram);const c=u.instructions;for(let f=0;f<u.instructionSize;f++){const h=c[f];if(h.size){for(let p=0;p<h.textures.count;p++)a.texture.bind(h.textures.textures[p],p);a.geometry.draw(h.topology,h.size,h.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}NS.extension={type:[pe.WebGLPipesAdaptor],name:"graphics"};class FS{init(){const e=fl({name:"mesh",bits:[Xp,HG,dl]});this._shader=new Si({glProgram:e,resources:{uTexture:ct.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Et}}}})}execute(e,r){const i=e.renderer;let s=r._shader;if(s){if(!s.glProgram){Rt("Mesh shader has no glProgram",r.shader);return}}else{s=this._shader;const a=r.texture,n=a.source;s.resources.uTexture=n,s.resources.uSampler=n.style,s.resources.textureUniforms.uniforms.uTextureMatrix=a.textureMatrix.mapCoord}s.groups[100]=i.globalUniforms.bindGroup,s.groups[101]=e.localUniformsBindGroup,i.encoder.draw({geometry:r._geometry,shader:s,state:r.state})}destroy(){this._shader.destroy(!0),this._shader=null}}FS.extension={type:[pe.WebGLPipesAdaptor],name:"mesh"};class GS{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,r){this._renderer.renderPipes.batch.break(r),r.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}}GS.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"customRender"};class hf{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}destroy(){}}function Ad(t,e){const r=t.instructionSet,i=r.instructions;for(let s=0;s<r.instructionSize;s++){const a=i[s];e[a.renderPipeId].execute(a)}}const yge=new Et;class KS{constructor(e){this._renderer=e}addRenderGroup(e,r){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,r):this._addRenderableDirect(e,r)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,r){this._renderer.renderPipes.batch.break(r),e._batchableRenderGroup&&(gn.return(e._batchableRenderGroup),e._batchableRenderGroup=null),r.add(e)}_addRenderableCacheAsTexture(e,r){const i=e._batchableRenderGroup??(e._batchableRenderGroup=gn.get(hf));i.renderable=e.root,i.transform=e.root.relativeGroupTransform,i.texture=e.texture,i.bounds=e._textureBounds,r.add(e),this._renderer.renderPipes.batch.addToBatch(i,r)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;const r=yge.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:r,worldColor:4294967295}),Ad(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),Ad(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}KS.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"renderGroup"};function Sd(t,e){e||(e=0);for(let r=e;r<t.length&&t[r];r++)t[r]=null}const Tge=new Ir,cU=Fu|Uc|Ep;function VS(t,e=!1){B9(t);const r=t.childrenToUpdate,i=t.updateTick++;for(const s in r){const a=Number(s),n=r[s],o=n.list,u=n.index;for(let c=0;c<u;c++){const f=o[c];f.parentRenderGroup===t&&f.relativeRenderGroupDepth===a&&$S(f,i,0)}Sd(o,u),n.index=0}if(e)for(let s=0;s<t.renderGroupChildren.length;s++)VS(t.renderGroupChildren[s],e)}function B9(t){const e=t.root;let r;if(t.renderGroupParent){const i=t.renderGroupParent;t.worldTransform.appendFrom(e.relativeGroupTransform,i.worldTransform),t.worldColor=kc(e.groupColor,i.worldColor),r=e.groupAlpha*i.worldAlpha}else t.worldTransform.copyFrom(e.localTransform),t.worldColor=e.localColor,r=e.localAlpha;r=r<0?0:r>1?1:r,t.worldAlpha=r,t.worldColorAlpha=t.worldColor+((r*255|0)<<24)}function $S(t,e,r){if(e===t.updateTick)return;t.updateTick=e,t.didChange=!1;const i=t.localTransform;t.updateLocalTransform();const s=t.parent;if(s&&!s.renderGroup?(r|=t._updateFlags,t.relativeGroupTransform.appendFrom(i,s.relativeGroupTransform),r&cU&&fU(t,s,r)):(r=t._updateFlags,t.relativeGroupTransform.copyFrom(i),r&cU&&fU(t,Tge,r)),!t.renderGroup){const a=t.children,n=a.length;for(let c=0;c<n;c++)$S(a[c],e,r);const o=t.parentRenderGroup,u=t;u.renderPipeId&&!o.structureDidChange&&o.updateRenderable(u)}}function fU(t,e,r){if(r&Uc){t.groupColor=kc(t.localColor,e.groupColor);let i=t.localAlpha*e.groupAlpha;i=i<0?0:i>1?1:i,t.groupAlpha=i,t.groupColorAlpha=t.groupColor+((i*255|0)<<24)}r&Ep&&(t.groupBlendMode=t.localBlendMode==="inherit"?e.groupBlendMode:t.localBlendMode),r&Fu&&(t.globalDisplayStatus=t.localDisplayStatus&e.globalDisplayStatus),t._updateFlags=0}function P9(t,e){const{list:r,index:i}=t.childrenRenderablesToUpdate;let s=!1;for(let a=0;a<i;a++){const n=r[a];if(s=e[n.renderPipeId].validateRenderable(n),s)break}return t.structureDidChange=s,s}const Age=new Et;class HS{constructor(e){this._renderer=e}render({container:e,transform:r}){const i=e.parent,s=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;const a=this._renderer;let n=Age;r&&(n=n.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(r));const o=a.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),a.globalUniforms.start({worldTransformMatrix:r?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),Ad(e.renderGroup,o),o.uniformBatch&&o.uniformBatch.renderEnd(),r&&e.renderGroup.localTransform.copyFrom(n),e.parent=i,e.renderGroup.renderGroupParent=s}destroy(){this._renderer=null}_updateCachedRenderGroups(e,r){if(e.isCachedAsTexture){if(!e.updateCacheTexture)return;r=e}e._parentCacheAsTextureRenderGroup=r;for(let i=e.renderGroupChildren.length-1;i>=0;i--)this._updateCachedRenderGroups(e.renderGroupChildren[i],r);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){const i=e.root.getLocalBounds();i.ceil();const s=e.texture;e.texture&&Or.returnTexture(e.texture);const a=this._renderer,n=e.textureOptions.resolution||a.view.resolution,o=e.textureOptions.antialias??a.view.antialias;e.texture=Or.getOptimalTexture(i.width,i.height,n,o),e._textureBounds||(e._textureBounds=new un),e._textureBounds.copyFrom(i),s!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(Or.returnTexture(e.texture),e.texture=null)}_updateRenderGroups(e){const r=this._renderer,i=r.renderPipes;if(e.runOnRender(r),e.instructionSet.renderPipes=i,e.structureDidChange?Sd(e.childrenRenderablesToUpdate.list,0):P9(e,i),VS(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,r)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,r.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let s=0;s<e.renderGroupChildren.length;s++)this._updateRenderGroups(e.renderGroupChildren[s])}_updateRenderables(e){const{list:r,index:i}=e.childrenRenderablesToUpdate;for(let s=0;s<i;s++){const a=r[s];a.didViewUpdate&&e.updateRenderable(a)}Sd(r,i)}_buildInstructions(e,r){const i=e.root,s=e.instructionSet;s.reset();const a=r.renderPipes?r:r.batch.renderer,n=a.renderPipes;n.batch.buildStart(s),n.blendMode.buildStart(),n.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(s,a,null),n.batch.buildEnd(s),n.blendMode.buildEnd(s)}}HS.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"renderGroup"};class qS{constructor(e){this._renderer=e}addRenderable(e,r){const i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,r)}updateRenderable(e){const r=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,r),r._batcher.updateElement(r)}validateRenderable(e){const r=this._getGpuSprite(e);return!r._batcher.checkAndUpdateTexture(r,e._texture)}_updateBatchableSprite(e,r){r.bounds=e.visualBounds,r.texture=e._texture}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const r=new hf;return r.renderable=e,r.transform=e.groupTransform,r.texture=e._texture,r.bounds=e.visualBounds,r.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=r,r}destroy(){this._renderer=null}}qS.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"sprite"};const XS=class O9{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new qt(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...O9.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){qt.shared.setValue(e).alpha<1&&this._backgroundColor.alpha===1&&Rt("Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application."),this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};XS.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"background",priority:0};XS.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let D9=XS;const vc={};br.handle(pe.BlendMode,t=>{if(!t.name)throw new Error("BlendMode extension must have a name property");vc[t.name]=t.ref},t=>{delete vc[t.name]});class zS{constructor(e){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(e,r,i){if(this._activeBlendMode===r){this._isAdvanced&&this._renderableList.push(e);return}this._activeBlendMode=r,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!vc[r],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(e))}_beginAdvancedBlendMode(e){this._renderer.renderPipes.batch.break(e);const r=this._activeBlendMode;if(!vc[r]){Rt(`Unable to assign BlendMode: '${r}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let i=this._filterHash[r];i||(i=this._filterHash[r]=new Dc,i.filters=[new vc[r]]);const s={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=s.renderables,e.add(s)}_endAdvancedBlendMode(e){this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(const e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}}zS.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"blendMode"};const JE={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},WS=class k9{constructor(e){this._renderer=e}_normalizeOptions(e,r={}){return e instanceof Ir||e instanceof ct?{target:e,...r}:{...r,...e}}async image(e){const r=new Image;return r.src=await this.base64(e),r}async base64(e){e=this._normalizeOptions(e,k9.defaultImageOptions);const{format:r,quality:i}=e,s=this.canvas(e);if(s.toBlob!==void 0)return new Promise((a,n)=>{s.toBlob(o=>{if(!o){n(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>a(u.result),u.onerror=n,u.readAsDataURL(o)},JE[r],i)});if(s.toDataURL!==void 0)return s.toDataURL(JE[r],i);if(s.convertToBlob!==void 0){const a=await s.convertToBlob({type:JE[r],quality:i});return new Promise((n,o)=>{const u=new FileReader;u.onload=()=>n(u.result),u.onerror=o,u.readAsDataURL(a)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);const r=e.target,i=this._renderer;if(r instanceof ct)return i.texture.generateCanvas(r);const s=i.textureGenerator.generateTexture(e),a=i.texture.generateCanvas(s);return s.destroy(!0),a}pixels(e){e=this._normalizeOptions(e);const r=e.target,i=this._renderer,s=r instanceof ct?r:i.textureGenerator.generateTexture(e),a=i.texture.getPixels(s);return r instanceof Ir&&s.destroy(!0),a}texture(e){return e=this._normalizeOptions(e),e.target instanceof ct?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){e=this._normalizeOptions(e);const r=this.canvas(e),i=document.createElement("a");i.download=e.filename??"image.png",i.href=r.toDataURL("image/png"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}log(e){const r=e.width??200;e=this._normalizeOptions(e);const i=this.canvas(e),s=i.toDataURL();console.log(`[Pixi Texture] ${i.width}px ${i.height}px`);const a=["font-size: 1px;",`padding: ${r}px 300px;`,`background: url(${s}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",a)}destroy(){this._renderer=null}};WS.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"extract"};WS.defaultImageOptions={format:"png",quality:1};let U9=WS;class Ma extends ct{static create(e){return new Ma({source:new Hr(e)})}resize(e,r,i){return this.source.resize(e,r,i),this}}const Sge=new lr,Rge=new un,Cge=[0,0,0,0];class jS{constructor(e){this._renderer=e}generateTexture(e){var c;e instanceof Ir&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});const r=e.resolution||this._renderer.resolution,i=e.antialias||this._renderer.view.antialias,s=e.target;let a=e.clearColor;a?a=Array.isArray(a)&&a.length===4?a:qt.shared.setValue(a).toArray():a=Cge;const n=((c=e.frame)==null?void 0:c.copyTo(Sge))||vp(s,Rge).rectangle;n.width=Math.max(n.width,1/r)|0,n.height=Math.max(n.height,1/r)|0;const o=Ma.create({...e.textureSourceOptions,width:n.width,height:n.height,resolution:r,antialias:i}),u=Et.shared.translate(-n.x,-n.y);return this._renderer.render({container:s,transform:u,target:o,clearColor:a}),o.source.updateMipmaps(),o}destroy(){this._renderer=null}}jS.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"textureGenerator"};function wge(t,e,r,i){r[i++]=(t>>16&255)/255,r[i++]=(t>>8&255)/255,r[i++]=(t&255)/255,r[i++]=e}function gl(t,e,r){const i=(t>>24&255)/255;e[r++]=(t&255)/255*i,e[r++]=(t>>8&255)/255*i,e[r++]=(t>>16&255)/255*i,e[r++]=i}class YS{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:r,worldTransformMatrix:i,worldColor:s,offset:a}){const n=this._renderer.renderTarget.renderTarget,o=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{worldTransformMatrix:new Et,worldColor:4294967295,offset:new _r},u={projectionMatrix:r||this._renderer.renderTarget.projectionMatrix,resolution:e||n.size,worldTransformMatrix:i||o.worldTransformMatrix,worldColor:s||o.worldColor,offset:a||o.offset,bindGroup:null},c=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(c);const f=c.uniforms;f.uProjectionMatrix=u.projectionMatrix,f.uResolution=u.resolution,f.uWorldTransformMatrix.copyFrom(u.worldTransformMatrix),f.uWorldTransformMatrix.tx-=u.offset.x,f.uWorldTransformMatrix.ty-=u.offset.y,gl(u.worldColor,f.uWorldColorAlpha,0),c.update();let h;this._renderer.renderPipes.uniformBatch?h=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(c,!1):(h=this._bindGroupPool.pop()||new ws,this._activeBindGroups.push(h),h.setResource(c,0)),u.bindGroup=h,this._currentGlobalUniformData=u}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===ni.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new rn({uProjectionMatrix:{value:new Et,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new Et,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}}YS.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"globalUniforms"};let Lge=1;class ZS{constructor(){this._tasks=[],this._offset=0}init(){Sn.system.add(this._update,this)}repeat(e,r,i=!0){const s=Lge++;let a=0;return i&&(this._offset+=1e3,a=this._offset),this._tasks.push({func:e,duration:r,start:performance.now(),offset:a,last:performance.now(),repeat:!0,id:s}),s}cancel(e){for(let r=0;r<this._tasks.length;r++)if(this._tasks[r].id===e){this._tasks.splice(r,1);return}}_update(){const e=performance.now();for(let r=0;r<this._tasks.length;r++){const i=this._tasks[r];if(e-i.offset-i.last>=i.duration){const s=e-i.start;i.func(s),i.last=e}}}destroy(){Sn.system.remove(this._update,this),this._tasks.length=0}}ZS.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"scheduler",priority:0};let hU=!1;function M9(t){if(!hU){if(Qt.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const e=[`%c  %c  %c  %c  %c PixiJS %c v${Vc} (${t}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${Vc} - ${t} - http://www.pixijs.com/`);hU=!0}}class Wp{constructor(e){this._renderer=e}init(e){if(e.hello){let r=this._renderer.name;this._renderer.type===ni.WEBGL&&(r+=` ${this._renderer.context.webGLVersion}`),M9(r)}}}Wp.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"hello",priority:-2};Wp.defaultOptions={hello:!1};function N9(t){let e=!1;for(const i in t)if(t[i]==null){e=!0;break}if(!e)return t;const r=Object.create(null);for(const i in t){const s=t[i];s&&(r[i]=s)}return r}function F9(t){let e=0;for(let r=0;r<t.length;r++)t[r]==null?e++:t[r-e]=t[r];return t.length-=e,t}let Ige=0;const QS=class G9{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e={...G9.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(const r of this._managedHashes)r.context[r.hash]=N9(r.context[r.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(const r of this._managedArrays)F9(r.context[r.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,r){this._managedHashes.push({context:e,hash:r})}addManagedArray(e,r){this._managedArrays.push({context:e,hash:r})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=Ige++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){var a;const e=this._now,r=this._managedRenderables,i=this._renderer.renderPipes;let s=0;for(let n=0;n<r.length;n++){const o=r[n];if(o===null){s++;continue}const u=o.renderGroup??o.parentRenderGroup,c=((a=u==null?void 0:u.instructionSet)==null?void 0:a.gcTick)??-1;if(((u==null?void 0:u.gcTick)??0)===c&&(o._lastUsed=e),e-o._lastUsed>this.maxUnusedTime){if(!o.destroyed){const f=i;u&&(u.structureDidChange=!0),f[o.renderPipeId].destroyRenderable(o)}o._lastUsed=-1,s++,o.off("destroyed",this._removeRenderable,this)}else r[n-s]=o}r.length-=s}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){const r=this._managedRenderables.indexOf(e);r>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[r]=null)}_updateInstructionGCTick(e,r){e.instructionSet.gcTick=r;for(const i of e.renderGroupChildren)this._updateInstructionGCTick(i,r)}};QS.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"renderableGC",priority:0};QS.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let K9=QS;const JS=class V9{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){e={...V9.defaultOptions,...e},this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=e.textureGCAMaxIdle??e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this._renderer.texture.managedTextures;for(let r=0;r<e.length;r++){const i=e[r];i.autoGarbageCollect&&i.resource&&i._touched>-1&&this.count-i._touched>this.maxIdle&&(i._touched=-1,i.unload())}}destroy(){this._renderer=null}};JS.extension={type:[pe.WebGLSystem,pe.WebGPUSystem],name:"textureGC"};JS.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};let $9=JS;const e2=class H9{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e={...H9.defaultOptions,...e},e.view&&(vt(Gt,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new lr(0,0,e.width,e.height),this.canvas=e.canvas||Qt.get().createCanvas(),this.antialias=!!e.antialias,this.texture=LS(this.canvas,e),this.renderTarget=new Td({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,r,i){this.texture.source.resize(e,r,i),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:!!(e!=null&&e.removeView))&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};e2.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"view",priority:0};e2.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let q9=e2;const t2=[D9,YS,Wp,q9,HS,$9,jS,U9,PA,K9,ZS],r2=[zS,cS,qS,KS,fS,dS,hS,GS],Bge=[...t2,wS,ZG,zG,yS,pS,MS,BS,bS,kS,DS,ES,E9,TS,vS],Pge=[...r2],Oge=[oS,FS,NS],X9=[],z9=[],W9=[];br.handleByNamedList(pe.WebGLSystem,X9);br.handleByNamedList(pe.WebGLPipes,z9);br.handleByNamedList(pe.WebGLPipesAdaptor,W9);br.add(...Bge,...Pge,...Oge);class j9 extends nf{constructor(){const e={name:"webgl",type:ni.WEBGL,systems:X9,renderPipes:z9,renderPipeAdaptors:W9};super(e)}}const Dge=Object.freeze(Object.defineProperty({__proto__:null,WebGLRenderer:j9},Symbol.toStringTag,{value:"Module"}));class n2{constructor(e){this._hash=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(e){this._gpu=e}getBindGroup(e,r,i){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,r,i)}_createBindGroup(e,r,i){const s=this._gpu.device,a=r.layout[i],n=[],o=this._renderer;for(const f in a){const h=e.resources[f]??e.resources[a[f]];let p;if(h._resourceType==="uniformGroup"){const g=h;o.ubo.updateUniformGroup(g);const m=g.buffer;p={buffer:o.buffer.getGPUBuffer(m),offset:0,size:m.descriptor.size}}else if(h._resourceType==="buffer"){const g=h;p={buffer:o.buffer.getGPUBuffer(g),offset:0,size:g.descriptor.size}}else if(h._resourceType==="bufferResource"){const g=h;p={buffer:o.buffer.getGPUBuffer(g.buffer),offset:g.offset,size:g.size}}else if(h._resourceType==="textureSampler"){const g=h;p=o.texture.getGpuSampler(g)}else if(h._resourceType==="textureSource"){const g=h;p=o.texture.getGpuSource(g).createView({})}n.push({binding:a[f],resource:p})}const u=o.shader.getProgramData(r).bindGroups[i],c=s.createBindGroup({layout:u,entries:n});return this._hash[e._key]=c,c}destroy(){for(const e of Object.keys(this._hash))this._hash[e]=null;this._hash=null,this._renderer=null}}n2.extension={type:[pe.WebGPUSystem],name:"bindGroup"};class i2{constructor(e){this._gpuBuffers=Object.create(null),this._managedBuffers=[],e.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(e){this._gpu=e}getGPUBuffer(e){return this._gpuBuffers[e.uid]||this.createGPUBuffer(e)}updateBuffer(e){const r=this._gpuBuffers[e.uid]||this.createGPUBuffer(e),i=e.data;return e._updateID&&i&&(e._updateID=0,this._gpu.device.queue.writeBuffer(r,0,i.buffer,0,(e._updateSize||i.byteLength)+3&-4)),r}destroyAll(){for(const e in this._gpuBuffers)this._gpuBuffers[e].destroy();this._gpuBuffers={}}createGPUBuffer(e){this._gpuBuffers[e.uid]||(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this),e.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(e));const r=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e.data&&(bd(e.data.buffer,r.getMappedRange()),r.unmap()),this._gpuBuffers[e.uid]=r,r}onBufferChange(e){this._gpuBuffers[e.uid].destroy(),e._updateID=0,this._gpuBuffers[e.uid]=this.createGPUBuffer(e)}onBufferDestroy(e){this._managedBuffers.splice(this._managedBuffers.indexOf(e),1),this._destroyBuffer(e)}destroy(){this._managedBuffers.forEach(e=>this._destroyBuffer(e)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(e){this._gpuBuffers[e.uid].destroy(),e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this),e.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[e.uid]=null}}i2.extension={type:[pe.WebGPUSystem],name:"buffer"};class Y9{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);const r=this.byteIndex;let i=r+e*4;if(i=Math.ceil(i/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,i>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=i,r}addGroup(e){const r=this.addEmptyGroup(e.length);for(let i=0;i<e.length;i++)this.data[r/4+i]=e[i];return r}destroy(){this.data=null}}class s2{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}}s2.extension={type:[pe.WebGPUSystem],name:"colorMask"};class jp{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(e).then(r=>{this.gpu=r,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){const r=await Qt.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),i=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(a=>r.features.has(a)),s=await r.requestDevice({requiredFeatures:i});return{adapter:r,device:s}}destroy(){this.gpu=null,this._renderer=null}}jp.extension={type:[pe.WebGPUSystem],name:"device"};jp.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};class a2{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,r,i,s){const a=this._renderer.pipeline.getPipeline(e,r,i,s);this.setPipeline(a)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,r){this._boundVertexBuffer[e]!==r&&(this._boundVertexBuffer[e]=r,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(r)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;const r=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),r)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,r,i){if(this._boundBindGroup[e]===r)return;this._boundBindGroup[e]=r,r._touch(this._renderer.textureGC.count);const s=this._renderer.bindGroup.getBindGroup(r,i,e);this.renderPassEncoder.setBindGroup(e,s)}setGeometry(e,r){const i=this._renderer.pipeline.getBufferNamesToBind(e,r);for(const s in i)this._setVertexBuffer(s,e.attributes[i[s]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,r){for(const i in e.groups){const s=e.groups[i];r||this._syncBindGroup(s),this.setBindGroup(i,s,e.gpuProgram)}}_syncBindGroup(e){for(const r in e.resources){const i=e.resources[r];i.isUniformGroup&&this._renderer.ubo.updateUniformGroup(i)}}draw(e){const{geometry:r,shader:i,state:s,topology:a,size:n,start:o,instanceCount:u,skipSync:c}=e;this.setPipelineFromGeometryProgramAndState(r,i.gpuProgram,s,a),this.setGeometry(r,i.gpuProgram),this._setShaderBindGroups(i,c),r.indexBuffer?this.renderPassEncoder.drawIndexed(n||r.indexBuffer.data.length,u??r.instanceCount,o||0):this.renderPassEncoder.draw(n||r.getSize(),u??r.instanceCount,o||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);const r=this._boundPipeline,i={...this._boundVertexBuffer},s=this._boundIndexBuffer,a={...this._boundBindGroup};this._clearCache();const n=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(n.x,n.y,n.width,n.height,0,1),this.setPipeline(r);for(const o in i)this._setVertexBuffer(o,i[o]);for(const o in a)this.setBindGroup(o,a[o],null);this._setIndexBuffer(s)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}}a2.extension={type:[pe.WebGPUSystem],name:"encoder",priority:1};class o2{constructor(e){this._renderer=e}contextChange(){this.maxTextures=this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage,this.maxBatchableTextures=this.maxTextures}destroy(){}}o2.extension={type:[pe.WebGPUSystem],name:"limits"};class u2{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let r=this._renderTargetStencilState[e.uid];r||(r=this._renderTargetStencilState[e.uid]={stencilMode:jr.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(r.stencilMode,r.stencilReference)}setStencilMode(e,r){const i=this._renderTargetStencilState[this._activeRenderTarget.uid];i.stencilMode=e,i.stencilReference=r;const s=this._renderer;s.pipeline.setStencilMode(e),s.encoder.renderPassEncoder.setStencilReference(r)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}u2.extension={type:[pe.WebGPUSystem],name:"stencil"};const Ec={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function Z9(t){const e=t.map(i=>({data:i,offset:0,size:0}));let r=0;for(let i=0;i<e.length;i++){const s=e[i];let a=Ec[s.data.type].size;const n=Ec[s.data.type].align;if(!Ec[s.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${s.data.type}`);s.data.size>1&&(a=Math.max(a,n)*s.data.size),r=Math.ceil(r/n)*n,s.size=a,s.offset=r,r+=a}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}function Q9(t,e){const{size:r,align:i}=Ec[t.data.type],s=(i-r)/4,a=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${t.data.name};
         ${e!==0?`offset += ${e};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${t.data.size*(r/4)}; i++)
         {
             for(var j = 0; j < ${r/4}; j++)
             {
                 ${a}[arrayOffset++] = v[t++];
             }
             ${s!==0?`arrayOffset += ${s};`:""}
         }
     `}function J9(t){return RS(t,"uboWgsl",Q9,e9)}class l2 extends AS{constructor(){super({createUboElements:Z9,generateUboSync:J9})}}l2.extension={type:[pe.WebGPUSystem],name:"ubo"};const La=128;class c2{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new Y9({minUniformOffsetAlignment:La});const r=256/La;for(let i=0;i<r;i++){let s=nr.UNIFORM|nr.COPY_DST;i===0&&(s|=nr.COPY_SRC),this._buffers.push(new ri({data:this._batchBuffer.data,usage:s}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(const e in this._bindGroupHash)this._bindGroupHash[e]=null;this._batchBuffer.clear()}getUniformBindGroup(e,r){if(!r&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);const i=e.buffer.data,s=this._batchBuffer.addEmptyGroup(i.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,s/4),this._bindGroupHash[e.uid]=this._getBindGroup(s/La),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);const r=e.buffer.data,i=this._batchBuffer.addGroup(r);return this._getBufferResource(i/La)}getArrayBindGroup(e){const r=this._batchBuffer.addGroup(e);return this._getBindGroup(r/La)}getArrayBufferResource(e){const i=this._batchBuffer.addGroup(e)/La;return this._getBufferResource(i)}_getBufferResource(e){if(!this._bufferResources[e]){const r=this._buffers[e%2];this._bufferResources[e]=new zp({buffer:r,offset:(e/2|0)*256,size:La})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){const r=new ws({0:this._getBufferResource(e)});this._bindGroups[e]=r}return this._bindGroups[e]}_uploadBindGroups(){const e=this._renderer.buffer,r=this._buffers[0];r.update(this._batchBuffer.byteIndex),e.updateBuffer(r);const i=this._renderer.gpu.device.createCommandEncoder();for(let s=1;s<this._buffers.length;s++){const a=this._buffers[s];i.copyBufferToBuffer(e.getGPUBuffer(r),La,e.getGPUBuffer(a),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([i.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}}c2.extension={type:[pe.WebGPUPipes],name:"uniformBatch"};const kge={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function Uge(t,e,r,i,s){return t<<24|e<<16|r<<10|i<<5|s}function Mge(t,e,r,i){return r<<6|t<<3|i<<1|e}class f2{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(jr.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=da[e],this._updatePipeHash())}setPipeline(e,r,i,s){const a=this.getPipeline(e,r,i);s.setPipeline(a)}getPipeline(e,r,i,s){e._layoutKey||(mS(e,r.attributeData),this._generateBufferKey(e)),s||(s=e.topology);const a=Uge(e._layoutKey,r._layoutKey,i.data,i._blendModeId,kge[s]);return this._pipeCache[a]?this._pipeCache[a]:(this._pipeCache[a]=this._createPipeline(e,r,i,s),this._pipeCache[a])}_createPipeline(e,r,i,s){const a=this._gpu.device,n=this._createVertexBufferLayouts(e,r),o=this._renderer.state.getColorTargets(i);o[0].writeMask=this._stencilMode===jr.RENDERING_MASK_ADD?0:this._colorMask;const u=this._renderer.shader.getProgramData(r).pipeline,c={vertex:{module:this._getModule(r.vertex.source),entryPoint:r.vertex.entryPoint,buffers:n},fragment:{module:this._getModule(r.fragment.source),entryPoint:r.fragment.entryPoint,targets:o},primitive:{topology:s,cullMode:i.cullMode},layout:u,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(c.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:i.depthTest,depthCompare:i.depthTest?"less":"always"}),a.createRenderPipeline(c)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){const r=this._gpu.device;return this._moduleCache[e]=r.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){const r=[];let i=0;const s=Object.keys(e.attributes).sort();for(let n=0;n<s.length;n++){const o=e.attributes[s[n]];r[i++]=o.offset,r[i++]=o.format,r[i++]=o.stride,r[i++]=o.instance}const a=r.join("|");return e._layoutKey=Ju(a,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){const r=[];let i=0;const s=Object.keys(e.attributeData).sort();for(let n=0;n<s.length;n++){const o=e.attributeData[s[n]];r[i++]=o.location}const a=r.join("|");return e._attributeLocationsKey=Ju(a,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,r){const i=e._layoutKey<<16|r._attributeLocationsKey;if(this._bindingNamesCache[i])return this._bindingNamesCache[i];const s=this._createVertexBufferLayouts(e,r),a=Object.create(null),n=r.attributeData;for(let o=0;o<s.length;o++){const c=Object.values(s[o].attributes)[0].shaderLocation;for(const f in n)if(n[f].location===c){a[o]=f;break}}return this._bindingNamesCache[i]=a,a}_createVertexBufferLayouts(e,r){r._attributeLocationsKey||this._generateAttributeLocationsKey(r);const i=e._layoutKey<<16|r._attributeLocationsKey;if(this._bufferLayoutsCache[i])return this._bufferLayoutsCache[i];const s=[];return e.buffers.forEach(a=>{const n={arrayStride:0,stepMode:"vertex",attributes:[]},o=n.attributes;for(const u in r.attributeData){const c=e.attributes[u];(c.divisor??1)!==1&&Rt(`Attribute ${u} has an invalid divisor value of '${c.divisor}'. WebGPU only supports a divisor value of 1`),c.buffer===a&&(n.arrayStride=c.stride,n.stepMode=c.instance?"instance":"vertex",o.push({shaderLocation:r.attributeData[u].location,offset:c.offset,format:c.format}))}o.length&&s.push(n)}),this._bufferLayoutsCache[i]=s,s}_updatePipeHash(){const e=Mge(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}f2.extension={type:[pe.WebGPUSystem],name:"pipeline"};class e7{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}class t7{init(e,r){this._renderer=e,this._renderTargetSystem=r}copyToTexture(e,r,i,s,a){const n=this._renderer,o=this._getGpuColorTexture(e),u=n.texture.getGpuSource(r.source);return n.encoder.commandEncoder.copyTextureToTexture({texture:o,origin:i},{texture:u,origin:a},s),r}startRenderPass(e,r=!0,i,s){const n=this._renderTargetSystem.getGpuRenderTarget(e),o=this.getDescriptor(e,r,i);n.descriptor=o,this._renderer.pipeline.setRenderTarget(n),this._renderer.encoder.beginRenderPass(n),this._renderer.encoder.setViewport(s)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){const r=this._renderTargetSystem.getGpuRenderTarget(e);return r.contexts[0]?r.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,r,i){typeof r=="boolean"&&(r=r?Jn.ALL:Jn.NONE);const s=this._renderTargetSystem,a=s.getGpuRenderTarget(e),n=e.colorTextures.map((c,f)=>{const h=a.contexts[f];let p,g;h?p=h.getCurrentTexture().createView():p=this._renderer.texture.getGpuSource(c).createView({mipLevelCount:1}),a.msaaTextures[f]&&(g=p,p=this._renderer.texture.getTextureView(a.msaaTextures[f]));const m=r&Jn.COLOR?"clear":"load";return i??(i=s.defaultClearColor),{view:p,resolveTarget:g,clearValue:i,storeOp:"store",loadOp:m}});let o;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=a.msaa?4:1),e.depthStencilTexture){const c=r&Jn.STENCIL?"clear":"load",f=r&Jn.DEPTH?"clear":"load";o={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:c,depthClearValue:1,depthLoadOp:f,depthStoreOp:"store"}}return{colorAttachments:n,depthStencilAttachment:o}}clear(e,r=!0,i,s){if(!r)return;const{gpu:a,encoder:n}=this._renderer,o=a.device;if(n.commandEncoder===null){const c=o.createCommandEncoder(),f=this.getDescriptor(e,r,i),h=c.beginRenderPass(f);h.setViewport(s.x,s.y,s.width,s.height,0,1),h.end();const p=c.finish();o.queue.submit([p])}else this.startRenderPass(e,r,i,s)}initGpuRenderTarget(e){e.isRoot=!0;const r=new e7;return e.colorTextures.forEach((i,s)=>{if(i instanceof Cs){const a=i.resource.getContext("webgpu"),n=i.transparent?"premultiplied":"opaque";try{a.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:n})}catch(o){console.error(o)}r.contexts[s]=a}if(r.msaa=i.source.antialias,i.source.antialias){const a=new Hr({width:0,height:0,sampleCount:4});r.msaaTextures[s]=a}}),r.msaa&&(r.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),r}destroyGpuRenderTarget(e){e.contexts.forEach(r=>{r.unconfigure()}),e.msaaTextures.forEach(r=>{r.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){const r=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&r.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){const r=this._renderTargetSystem.getGpuRenderTarget(e);r.width=e.width,r.height=e.height,r.msaa&&e.colorTextures.forEach((i,s)=>{const a=r.msaaTextures[s];a==null||a.resize(i.source.width,i.source.height,i.source._resolution)})}}class h2 extends IS{constructor(e){super(e),this.adaptor=new t7,this.adaptor.init(e,this)}}h2.extension={type:[pe.WebGPUSystem],name:"renderTarget"};class d2{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){const r=this._gpu.device,i=e.gpuLayout.map(a=>r.createBindGroupLayout({entries:a})),s={bindGroupLayouts:i};return this._gpuProgramData[e._layoutKey]={bindGroups:i,pipeline:r.createPipelineLayout(s)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}d2.extension={type:[pe.WebGPUSystem],name:"shader"};const Hn={};Hn.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};Hn.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};Hn.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};Hn.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Hn.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Hn.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};Hn["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};Hn["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};Hn["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};Hn.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};Hn.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};Hn.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};class p2{constructor(){this.defaultState=new yi,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e){return[{format:"bgra8unorm",writeMask:0,blend:Hn[e.blendMode]||Hn.normal}]}destroy(){this.gpu=null}}p2.extension={type:[pe.WebGPUSystem],name:"state"};const r7={type:"image",upload(t,e,r){const i=t.resource,s=(t.pixelWidth|0)*(t.pixelHeight|0),a=i.byteLength/s;r.device.queue.writeTexture({texture:e},i,{offset:0,rowsPerImage:t.pixelHeight,bytesPerRow:t.pixelHeight*a},{width:t.pixelWidth,height:t.pixelHeight,depthOrArrayLayers:1})}},g2={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},Nge={blockBytes:4,blockWidth:1,blockHeight:1},n7={type:"compressed",upload(t,e,r){let i=t.pixelWidth,s=t.pixelHeight;const a=g2[t.format]||Nge;for(let n=0;n<t.resource.length;n++){const o=t.resource[n],u=Math.ceil(i/a.blockWidth)*a.blockBytes;r.device.queue.writeTexture({texture:e,mipLevel:n},o,{offset:0,bytesPerRow:u},{width:Math.ceil(i/a.blockWidth)*a.blockWidth,height:Math.ceil(s/a.blockHeight)*a.blockHeight,depthOrArrayLayers:1}),i=Math.max(i>>1,1),s=Math.max(s>>1,1)}}},m2={type:"image",upload(t,e,r){const i=t.resource;if(!i)return;if(globalThis.HTMLImageElement&&i instanceof HTMLImageElement){const o=Qt.get().createCanvas(i.width,i.height);o.getContext("2d").drawImage(i,0,0,i.width,i.height),t.resource=o,Rt("ImageSource: Image element passed, converting to canvas and replacing resource.")}const s=Math.min(e.width,t.resourceWidth||t.pixelWidth),a=Math.min(e.height,t.resourceHeight||t.pixelHeight),n=t.alphaMode==="premultiply-alpha-on-upload";r.device.queue.copyExternalImageToTexture({source:i},{texture:e,premultipliedAlpha:n},{width:s,height:a})}},i7={type:"video",upload(t,e,r){m2.upload(t,e,r)}};class s7{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let r=this.pipelines[e];return r||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),r=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=r),r}generateMipmap(e){const r=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let i=e;const s=e.depthOrArrayLayers||1,a=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!a){const u={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:s},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};i=this.device.createTexture(u)}const n=this.device.createCommandEncoder({}),o=r.getBindGroupLayout(0);for(let u=0;u<s;++u){let c=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:u,arrayLayerCount:1}),f=a?1:0;for(let h=1;h<e.mipLevelCount;++h){const p=i.createView({baseMipLevel:f++,mipLevelCount:1,dimension:"2d",baseArrayLayer:u,arrayLayerCount:1}),g=n.beginRenderPass({colorAttachments:[{view:p,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),m=this.device.createBindGroup({layout:o,entries:[{binding:0,resource:this.sampler},{binding:1,resource:c}]});g.setPipeline(r),g.setBindGroup(0,m),g.draw(3,1,0,0),g.end(),c=p}}if(!a){const u={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:s};for(let c=1;c<e.mipLevelCount;++c)n.copyTextureToTexture({texture:i,mipLevel:c-1},{texture:e,mipLevel:c},u),u.width=Math.ceil(u.width/2),u.height=Math.ceil(u.height/2)}return this.device.queue.submit([n.finish()]),a||i.destroy(),e}}class _2{constructor(e){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:m2,buffer:r7,video:i7,compressed:n7},this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuSources"),e.renderableGC.addManagedHash(this,"_gpuSamplers"),e.renderableGC.addManagedHash(this,"_bindGroupHash"),e.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(e){this._gpu=e}initSource(e){if(e.autoGenerateMipmaps){const u=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(u))+1}let r=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(r|=GPUTextureUsage.RENDER_ATTACHMENT,r|=GPUTextureUsage.COPY_SRC);const i=g2[e.format]||{blockWidth:1,blockHeight:1},s=Math.ceil(e.pixelWidth/i.blockWidth)*i.blockWidth,a=Math.ceil(e.pixelHeight/i.blockHeight)*i.blockHeight,n={label:e.label,size:{width:s,height:a},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:r},o=this._gpu.device.createTexture(n);return this._gpuSources[e.uid]=o,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),o}onSourceUpdate(e){const r=this.getGpuSource(e);r&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,r,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onSourceUnload(e){const r=this._gpuSources[e.uid];r&&(this._gpuSources[e.uid]=null,r.destroy())}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new s7(this._gpu.device));const r=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(r)}onSourceDestroy(e){e.off("update",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("destroy",this.onSourceDestroy,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}onSourceResize(e){const r=this._gpuSources[e.uid];r?(r.width!==e.pixelWidth||r.height!==e.pixelHeight)&&(this._textureViewHash[e.uid]=null,this._bindGroupHash[e.uid]=null,this.onSourceUnload(e),this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return this._gpuSources[e.uid]||this.initSource(e)}getTextureBindGroup(e){return this._bindGroupHash[e.uid]??this._createTextureBindGroup(e)}_createTextureBindGroup(e){const r=e.source;return this._bindGroupHash[e.uid]=new ws({0:r,1:r.style,2:new rn({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){const r=e.source;return this._textureViewHash[r.uid]??this._createTextureView(r)}_createTextureView(e){return this._textureViewHash[e.uid]=this.getGpuSource(e).createView(),this._textureViewHash[e.uid]}generateCanvas(e){const r=this._renderer,i=r.gpu.device.createCommandEncoder(),s=Qt.get().createCanvas();s.width=e.source.pixelWidth,s.height=e.source.pixelHeight;const a=s.getContext("webgpu");return a.configure({device:r.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:Qt.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),i.copyTextureToTexture({texture:r.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:a.getCurrentTexture()},{width:s.width,height:s.height}),r.gpu.device.queue.submit([i.finish()]),s}getPixels(e){const r=this.generateCanvas(e),i=ca.getOptimalCanvasAndContext(r.width,r.height),s=i.context;s.drawImage(r,0,0);const{width:a,height:n}=r,o=s.getImageData(0,0,a,n),u=new Uint8ClampedArray(o.data.buffer);return ca.returnCanvasAndContext(i),{pixels:u,width:a,height:n}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null;for(const e of Object.keys(this._bindGroupHash)){const r=Number(e),i=this._bindGroupHash[r];i==null||i.destroy(),this._bindGroupHash[r]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}}_2.extension={type:[pe.WebGPUSystem],name:"texture"};class b2{constructor(){this._maxTextures=0}contextChange(e){const r=new rn({uTransformMatrix:{value:new Et,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}});this._maxTextures=e.limits.maxBatchableTextures;const i=cl({name:"graphics",bits:[Bp,Op(this._maxTextures),VG,hl]});this.shader=new Si({gpuProgram:i,resources:{localUniforms:r}})}execute(e,r){const i=r.context,s=i.customShader||this.shader,a=e.renderer,n=a.graphicsContext,{batcher:o,instructions:u}=n.getContextRenderData(i),c=a.encoder;c.setGeometry(o.geometry,s.gpuProgram);const f=a.globalUniforms.bindGroup;c.setBindGroup(0,f,s.gpuProgram);const h=a.renderPipes.uniformBatch.getUniformBindGroup(s.resources.localUniforms,!0);c.setBindGroup(2,h,s.gpuProgram);const p=u.instructions;let g=null;for(let m=0;m<u.instructionSize;m++){const T=p[m];if(T.topology!==g&&(g=T.topology,c.setPipelineFromGeometryProgramAndState(o.geometry,s.gpuProgram,e.state,T.topology)),s.groups[1]=T.bindGroup,!T.gpuBindGroup){const x=T.textures;T.bindGroup=Ip(x.textures,x.count,this._maxTextures),T.gpuBindGroup=a.bindGroup.getBindGroup(T.bindGroup,s.gpuProgram,1)}c.setBindGroup(1,T.bindGroup,s.gpuProgram),c.renderPassEncoder.drawIndexed(T.size,1,T.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}b2.extension={type:[pe.WebGPUPipesAdaptor],name:"graphics"};class x2{init(){const e=cl({name:"mesh",bits:[zu,$G,hl]});this._shader=new Si({gpuProgram:e,resources:{uTexture:ct.EMPTY._source,uSampler:ct.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new Et}}}})}execute(e,r){const i=e.renderer;let s=r._shader;if(!s)s=this._shader,s.groups[2]=i.texture.getTextureBindGroup(r.texture);else if(!s.gpuProgram){Rt("Mesh shader has no gpuProgram",r.shader);return}const a=s.gpuProgram;if(a.autoAssignGlobalUniforms&&(s.groups[0]=i.globalUniforms.bindGroup),a.autoAssignLocalUniforms){const n=e.localUniforms;s.groups[1]=i.renderPipes.uniformBatch.getUniformBindGroup(n,!0)}i.encoder.draw({geometry:r._geometry,shader:s,state:r.state})}destroy(){this._shader.destroy(!0),this._shader=null}}x2.extension={type:[pe.WebGPUPipesAdaptor],name:"mesh"};const Fge=[...t2,l2,a2,jp,o2,i2,_2,h2,d2,p2,f2,s2,u2,n2],Gge=[...r2,c2],Kge=[uS,x2,b2],a7=[],o7=[],u7=[];br.handleByNamedList(pe.WebGPUSystem,a7);br.handleByNamedList(pe.WebGPUPipes,o7);br.handleByNamedList(pe.WebGPUPipesAdaptor,u7);br.add(...Fge,...Gge,...Kge);class l7 extends nf{constructor(){const e={name:"webgpu",type:ni.WEBGPU,systems:a7,renderPipes:o7,renderPipeAdaptors:u7};super(e)}}const Vge=Object.freeze(Object.defineProperty({__proto__:null,WebGPURenderer:l7},Symbol.toStringTag,{value:"Module"})),dU={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},$ge=new Proxy(dU,{get(t,e){return vt(Gt,`DRAW_MODES.${e} is deprecated, use '${dU[e]}' instead`),t[e]}});var Rd=(t=>(t.CLAMP="clamp-to-edge",t.REPEAT="repeat",t.MIRRORED_REPEAT="mirror-repeat",t))(Rd||{});const Hge=new Proxy(Rd,{get(t,e){return vt(Gt,`DRAW_MODES.${e} is deprecated, use '${Rd[e]}' instead`),t[e]}});var Cd=(t=>(t.NEAREST="nearest",t.LINEAR="linear",t))(Cd||{});const qge=new Proxy(Cd,{get(t,e){return vt(Gt,`DRAW_MODES.${e} is deprecated, use '${Cd[e]}' instead`),t[e]}});class Xge{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,i){const s=r.width,a=r.height;if(i){const n=e.width/2/s,o=e.height/2/a,u=e.x/s+n,c=e.y/a+o;i=Yt.add(i,Yt.NW),this.x0=u+n*Yt.uX(i),this.y0=c+o*Yt.uY(i),i=Yt.add(i,2),this.x1=u+n*Yt.uX(i),this.y1=c+o*Yt.uY(i),i=Yt.add(i,2),this.x2=u+n*Yt.uX(i),this.y2=c+o*Yt.uY(i),i=Yt.add(i,2),this.x3=u+n*Yt.uX(i),this.y3=c+o*Yt.uY(i)}else this.x0=e.x/s,this.y0=e.y/a,this.x1=(e.x+e.width)/s,this.y1=e.y/a,this.x2=(e.x+e.width)/s,this.y2=(e.y+e.height)/a,this.x3=e.x/s,this.y3=(e.y+e.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}function zge(t){const e=t.toString(),r=e.indexOf("{"),i=e.lastIndexOf("}");if(r===-1||i===-1)throw new Error("getFunctionBody: No body found in function definition");return e.slice(r+1,i).trim()}function Wge(t,e){return vt("8.7.0","Use container.getFastGlobalBounds() instead"),t.getFastGlobalBounds(!0,e)}class jge extends Bs{constructor(e){typeof e=="function"&&(e={render:e});const{render:r,...i}=e;super({label:"RenderContainer",...i}),this.renderPipeId="customRender",this.batched=!1,r&&(this.render=r),this.containsPoint=e.containsPoint??(()=>!1),this.addBounds=e.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(e){}}function Yge(t,e,r){vt("8.7.0","Please use container.collectRenderables instead.");const i=r.renderPipes?r:r.batch.renderer;return t.collectRenderables(e,i,null)}function Zge(t,e){const r=e._scale,i=e._pivot,s=e._position,a=r._x,n=r._y,o=i._x,u=i._y;t.a=e._cx*a,t.b=e._sx*a,t.c=e._cy*n,t.d=e._sy*n,t.tx=s._x-(o*t.a+u*t.c),t.ty=s._y-(o*t.b+u*t.d)}function Qge(t,e,r){const i=t.a,s=t.b,a=t.c,n=t.d,o=t.tx,u=t.ty,c=e.a,f=e.b,h=e.c,p=e.d;r.a=i*c+s*h,r.b=i*f+s*p,r.c=a*c+n*h,r.d=a*f+n*p,r.tx=o*c+u*h+e.tx,r.ty=o*f+u*p+e.ty}class c7{constructor(){this.batches=[],this.batched=!1}destroy(){this.batches.forEach(e=>{gn.return(e)}),this.batches.length=0}}class f7{constructor(e,r){this.state=yi.for2d(),this.renderer=e,this._adaptor=r,this.renderer.runners.contextChange.add(this)}contextChange(){this._adaptor.contextChange(this.renderer)}validateRenderable(e){const r=e.context,i=!!e._gpuData,s=this.renderer.graphicsContext.updateGpuContext(r);return!!(s.isBatchable||i!==s.isBatchable)}addRenderable(e,r){const i=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),i.isBatchable?this._addToBatcher(e,r):(this.renderer.renderPipes.batch.break(r),r.add(e))}updateRenderable(e){const i=this._getGpuDataForRenderable(e).batches;for(let s=0;s<i.length;s++){const a=i[s];a._batcher.updateElement(a)}}execute(e){if(!e.isRenderable)return;const r=this.renderer,i=e.context;if(!r.graphicsContext.getGpuContext(i).batches.length)return;const a=i.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const n=a.resources.localUniforms.uniforms;n.uTransformMatrix=e.groupTransform,n.uRound=r._roundPixels|e._roundPixels,gl(e.groupColorAlpha,n.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const r=this._getGpuDataForRenderable(e),i=this.renderer.graphicsContext.updateGpuContext(e.context);r.destroy(),i.isBatchable&&this._updateBatchesForRenderable(e,r)}_addToBatcher(e,r){const i=this.renderer.renderPipes.batch,s=this._getGpuDataForRenderable(e).batches;for(let a=0;a<s.length;a++){const n=s[a];i.addToBatch(n,r)}}_getGpuDataForRenderable(e){return e._gpuData[this.renderer.uid]||this._initGpuDataForRenderable(e)}_initGpuDataForRenderable(e){const r=new c7;return e._gpuData[this.renderer.uid]=r,r}_updateBatchesForRenderable(e,r){const i=e.context,s=this.renderer.graphicsContext.getGpuContext(i),a=this.renderer._roundPixels|e._roundPixels;r.batches=s.batches.map(n=>{const o=gn.get(Mp);return n.copyTo(o),o.renderable=e,o.roundPixels=a,o})}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null}}f7.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"graphics"};const h7=class d7 extends Ir{constructor(e={}){e={...d7.defaultOptions,...e},super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let r=0;r<e.length;r++){const i=e[r];if(i.parentRenderLayer){if(i.parentRenderLayer===this)continue;i.parentRenderLayer.detach(i)}this.renderLayerChildren.push(i),i.parentRenderLayer=this;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detach(...e){for(let r=0;r<e.length;r++){const i=e[r],s=this.renderLayerChildren.indexOf(i);s!==-1&&this.renderLayerChildren.splice(s,1),i.parentRenderLayer=null;const a=this.renderGroup||this.parentRenderGroup;a&&(a.structureDidChange=!0)}return e[0]}detachAll(){const e=this.renderLayerChildren;for(let r=0;r<e.length;r++)e[r].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,r,i){const s=this.renderLayerChildren,a=s.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let n=0;n<a;n++)s[n].parent||Rt("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",s[n]),s[n].collectRenderables(e,r,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,r,i){if(!e)return;const s=this.renderLayerChildren;for(let a=0;a<s.length;a++)s[a]._getGlobalBoundsRecursive(!0,r,this)}};h7.defaultOptions={sortableChildren:!1,sortFunction:(t,e)=>t.zIndex-e.zIndex};let Jge=h7;const eme=Jge,p7=class g7 extends zo{constructor(...e){super({});let r=e[0]??{};typeof r=="number"&&(vt(Gt,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),r={width:r,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(r)}build(e){e={...g7.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;const r=this.verticesX*this.verticesY,i=[],s=[],a=[],n=this.verticesX-1,o=this.verticesY-1,u=this.width/n,c=this.height/o;for(let h=0;h<r;h++){const p=h%this.verticesX,g=h/this.verticesX|0;i.push(p*u,g*c),s.push(p/n,g/o)}const f=n*o;for(let h=0;h<f;h++){const p=h%n,g=h/n|0,m=g*this.verticesX+p,T=g*this.verticesX+p+1,x=(g+1)*this.verticesX+p,v=(g+1)*this.verticesX+p+1;a.push(m,T,x,T,v,x)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint32Array(a),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};p7.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let Yp=p7;function m7(t,e,r,i){const s=r.buffers[0],a=s.data,{verticesX:n,verticesY:o}=r,u=t/(n-1),c=e/(o-1);let f=0;const h=i[0],p=i[1],g=i[2],m=i[3],T=i[4],x=i[5],v=i[6],y=i[7],R=i[8];for(let A=0;A<a.length;A+=2){const k=f%n*u,b=(f/n|0)*c,C=h*k+p*b+g,w=m*k+T*b+x,O=v*k+y*b+R;a[A]=C/O,a[A+1]=w/O,f++}s.update()}function _7(t,e){const r=e[0],i=e[1],s=e[2],a=e[3],n=e[4],o=e[5],u=e[6],c=e[7],f=e[8];return t[0]=n*f-o*c,t[1]=s*c-i*f,t[2]=i*o-s*n,t[3]=o*u-a*f,t[4]=r*f-s*u,t[5]=s*a-r*o,t[6]=a*c-n*u,t[7]=i*u-r*c,t[8]=r*n-i*a,t}function b7(t,e,r){const i=e[0],s=e[1],a=e[2],n=e[3],o=e[4],u=e[5],c=e[6],f=e[7],h=e[8],p=r[0],g=r[1],m=r[2],T=r[3],x=r[4],v=r[5],y=r[6],R=r[7],A=r[8];return t[0]=p*i+g*n+m*c,t[1]=p*s+g*o+m*f,t[2]=p*a+g*u+m*h,t[3]=T*i+x*n+v*c,t[4]=T*s+x*o+v*f,t[5]=T*a+x*u+v*h,t[6]=y*i+R*n+A*c,t[7]=y*s+R*o+A*f,t[8]=y*a+R*u+A*h,t}function tme(t,e,r){const i=r[0],s=r[1],a=r[2];return t[0]=e[0]*i+e[1]*s+e[2]*a,t[1]=e[3]*i+e[4]*s+e[5]*a,t[2]=e[6]*i+e[7]*s+e[8]*a,t}const rme=[0,0,0,0,0,0,0,0,0],nme=[0,0,0],Fh=[0,0,0];function pU(t,e,r,i,s,a,n,o,u){const c=rme;c[0]=e,c[1]=i,c[2]=a,c[3]=r,c[4]=s,c[5]=n,c[6]=1,c[7]=1,c[8]=1;const f=_7(t,c);Fh[0]=o,Fh[1]=u,Fh[2]=1;const h=tme(nme,f,Fh),p=t;return t[0]=h[0],t[1]=0,t[2]=0,t[3]=0,t[4]=h[1],t[5]=0,t[6]=0,t[7]=0,t[8]=h[2],b7(t,p,c)}const ime=[0,0,0,0,0,0,0,0,0],sme=[0,0,0,0,0,0,0,0,0];function x7(t,e,r,i,s,a,n,o,u,c,f,h,p,g,m,T,x){const v=pU(ime,e,r,a,n,c,f,g,m),y=pU(sme,i,s,o,u,h,p,T,x);return b7(t,_7(v,v),y)}class v7 extends Yp{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:r,height:i}=e;this.corners=[0,0,r,0,r,i,0,i]}setCorners(e,r,i,s,a,n,o,u){const c=this.corners;c[0]=e,c[1]=r,c[2]=i,c[3]=s,c[4]=a,c[5]=n,c[6]=o,c[7]=u,this.updateProjection()}updateProjection(){const{width:e,height:r}=this,i=this.corners,s=x7(this._projectionMatrix,0,0,i[0],i[1],e,0,i[2],i[3],e,r,i[4],i[5],0,r,i[6],i[7]);m7(e,r,this,s)}}const E7=class y7 extends pl{constructor(e){e={...y7.defaultOptions,...e};const{texture:r,verticesX:i,verticesY:s,...a}=e,n=new v7(cs({width:r.width,height:r.height,verticesX:i,verticesY:s}));super(cs({...a,geometry:n})),this._texture=r,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){const e=this.geometry;if(!e)return;const{width:r,height:i}=this.texture;(e.width!==r||e.height!==i)&&(e.width=r,e.height=i,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,r,i,s,a,n,o,u){this.geometry.setCorners(e,r,i,s,a,n,o,u)}};E7.defaultOptions={texture:ct.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let ame=E7;class ome extends pl{constructor(e){const{texture:r,verticesX:i,verticesY:s,...a}=e,n=new Yp(cs({width:r.width,height:r.height,verticesX:i,verticesY:s}));super(cs({...a,geometry:n,texture:r})),this.texture=r,this.autoResize=!0}textureUpdated(){const e=this.geometry,{width:r,height:i}=this.texture;this.autoResize&&(e.width!==r||e.height!==i)&&(e.width=r,e.height=i,e.build({}))}set texture(e){var r;(r=this._texture)==null||r.off("update",this.textureUpdated,this),super.texture=e,e.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(e){this.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const T7=class A7 extends zo{constructor(e){const{width:r,points:i,textureScale:s}={...A7.defaultOptions,...e};super({positions:new Float32Array(i.length*4),uvs:new Float32Array(i.length*4),indices:new Uint32Array((i.length-1)*6)}),this.points=i,this._width=r,this.textureScale=s,this._build()}get width(){return this._width}_build(){const e=this.points;if(!e)return;const r=this.getBuffer("aPosition"),i=this.getBuffer("aUV"),s=this.getIndex();if(e.length<1)return;r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),i.data=new Float32Array(e.length*4),s.data=new Uint16Array((e.length-1)*6));const a=i.data,n=s.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;let o=0,u=e[0];const c=this._width*this.textureScale,f=e.length;for(let p=0;p<f;p++){const g=p*4;if(this.textureScale>0){const m=u.x-e[p].x,T=u.y-e[p].y,x=Math.sqrt(m*m+T*T);u=e[p],o+=x/c}else o=p/(f-1);a[g]=o,a[g+1]=0,a[g+2]=o,a[g+3]=1}let h=0;for(let p=0;p<f-1;p++){const g=p*2;n[h++]=g,n[h++]=g+1,n[h++]=g+2,n[h++]=g+2,n[h++]=g+1,n[h++]=g+3}i.update(),s.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let r=e[0],i,s=0,a=0;const n=this.buffers[0].data,o=e.length,u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let c=0;c<o;c++){const f=e[c],h=c*4;c<e.length-1?i=e[c+1]:i=f,a=-(i.x-r.x),s=i.y-r.y;const p=Math.sqrt(s*s+a*a);p<1e-6?(s=0,a=0):(s/=p,a/=p,s*=u,a*=u),n[h]=f.x+s,n[h+1]=f.y+a,n[h+2]=f.x-s,n[h+3]=f.y-a,r=f}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};T7.defaultOptions={width:200,points:[],textureScale:0};let S7=T7;const R7=class C7 extends pl{constructor(e){const{texture:r,points:i,textureScale:s,...a}={...C7.defaultOptions,...e},n=new S7(cs({width:r.height,points:i,textureScale:s}));s>0&&(r.source.style.addressMode="repeat"),super(cs({...a,texture:r,geometry:n})),this.autoUpdate=!0,this.onRender=this._render}_render(){const e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};R7.defaultOptions={textureScale:0};let ume=R7;class lme extends pl{constructor(e){const{texture:r,vertices:i,uvs:s,indices:a,topology:n,...o}=e,u=new zo(cs({positions:i,uvs:s,indices:a,topology:n}));super(cs({...o,texture:r,geometry:u})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(e){this.geometry.getBuffer("aPosition").data=e}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}class Zp{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){const r=this.geometry.getBuffer("aUV"),i=r.data;let s=i;const a=this.texture.textureMatrix;return a.isSimple||(s=this._transformedUvs,(this._textureMatrixUpdateId!==a._updateID||this._uvUpdateId!==r._updateID)&&((!s||s.length<i.length)&&(s=this._transformedUvs=new Float32Array(i.length)),this._textureMatrixUpdateId=a._updateID,this._uvUpdateId=r._updateID,a.multiplyUvs(i,s))),s}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}function cme(t,e){const{width:r,height:i}=t.frame;return e.scale(1/r,1/i),e}class O1{destroy(){}}class w7{constructor(e,r){this.localUniforms=new rn({uTransformMatrix:{value:new Et,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new ws({0:this.localUniforms}),this.renderer=e,this._adaptor=r,this._adaptor.init()}validateRenderable(e){const r=this._getMeshData(e),i=r.batched,s=e.batched;if(r.batched=s,i!==s)return!0;if(s){const a=e._geometry;if(a.indices.length!==r.indexSize||a.positions.length!==r.vertexSize)return r.indexSize=a.indices.length,r.vertexSize=a.positions.length,!0;const n=this._getBatchableMesh(e);return n.texture.uid!==e._texture.uid&&(n._textureMatrixUpdateId=-1),!n._batcher.checkAndUpdateTexture(n,e._texture)}return!1}addRenderable(e,r){const i=this.renderer.renderPipes.batch,{batched:s}=this._getMeshData(e);if(s){const a=this._getBatchableMesh(e);a.setTexture(e._texture),a.geometry=e._geometry,i.addToBatch(a,r)}else i.break(r),r.add(e)}updateRenderable(e){if(e.batched){const r=this._getBatchableMesh(e);r.setTexture(e._texture),r.geometry=e._geometry,r._batcher.updateElement(r)}}execute(e){if(!e.isRenderable)return;e.state.blendMode=tl(e.groupBlendMode,e.texture._source);const r=this.localUniforms;r.uniforms.uTransformMatrix=e.groupTransform,r.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,r.update(),gl(e.groupColorAlpha,r.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){var r,i;return(r=e._gpuData)[i=this.renderer.uid]||(r[i]=new O1),e._gpuData[this.renderer.uid].meshData||this._initMeshData(e)}_initMeshData(e){var r,i;return e._gpuData[this.renderer.uid].meshData={batched:e.batched,indexSize:(r=e._geometry.indices)==null?void 0:r.length,vertexSize:(i=e._geometry.positions)==null?void 0:i.length},e._gpuData[this.renderer.uid].meshData}_getBatchableMesh(e){var r,i;return(r=e._gpuData)[i=this.renderer.uid]||(r[i]=new O1),e._gpuData[this.renderer.uid].batchableMesh||this._initBatchableMesh(e)}_initBatchableMesh(e){const r=new Zp;return r.renderable=e,r.setTexture(e._texture),r.transform=e.groupTransform,r.roundPixels=this.renderer._roundPixels|e._roundPixels,e._gpuData[this.renderer.uid].batchableMesh=r,r}destroy(){this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}w7.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"mesh"};class L7{execute(e,r){const i=e.state,s=e.renderer,a=r.shader||e.defaultShader;a.resources.uTexture=r.texture._source,a.resources.uniforms=e.localUniforms;const n=s.gl,o=e.getBuffers(r);s.shader.bind(a),s.state.set(i),s.geometry.bind(o.geometry,a.glProgram);const c=o.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;n.drawElements(n.TRIANGLES,r.particleChildren.length*6,c,0)}}class I7{execute(e,r){const i=e.renderer,s=r.shader||e.defaultShader;s.groups[0]=i.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),s.groups[1]=i.texture.getTextureBindGroup(r.texture);const a=e.state,n=e.getBuffers(r);i.encoder.draw({geometry:n.geometry,shader:r.shader||e.defaultShader,state:a,size:r.particleChildren.length*6})}}function D1(t,e=null){const r=t*6;if(r>65535?e||(e=new Uint32Array(r)):e||(e=new Uint16Array(r)),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let i=0,s=0;i<r;i+=6,s+=4)e[i+0]=s+0,e[i+1]=s+1,e[i+2]=s+2,e[i+3]=s+0,e[i+4]=s+2,e[i+5]=s+3;return e}function B7(t){return{dynamicUpdate:gU(t,!0),staticUpdate:gU(t,!1)}}function gU(t,e){const r=[];r.push(`

        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let i=0;for(const a in t){const n=t[a];if(e!==n.dynamic)continue;r.push(`offset = index + ${i}`),r.push(n.code);const o=ua(n.format);i+=o.stride/4}r.push(`
            index += stride * 4;
        }
    `),r.unshift(`
        var stride = ${i};
    `);const s=r.join(`
`);return new Function("ps","f32v","u32v",s)}class P7{constructor(e){this._size=0,this._generateParticleUpdateCache={};const r=this._size=e.size??1e3,i=e.properties;let s=0,a=0;for(const f in i){const h=i[f],p=ua(h.format);h.dynamic?a+=p.stride:s+=p.stride}this._dynamicStride=a/4,this._staticStride=s/4,this.staticAttributeBuffer=new Po(r*4*s),this.dynamicAttributeBuffer=new Po(r*4*a),this.indexBuffer=D1(r);const n=new qo;let o=0,u=0;this._staticBuffer=new ri({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:nr.VERTEX|nr.COPY_DST}),this._dynamicBuffer=new ri({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:nr.VERTEX|nr.COPY_DST});for(const f in i){const h=i[f],p=ua(h.format);h.dynamic?(n.addAttribute(h.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:o*4,format:h.format}),o+=p.size):(n.addAttribute(h.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:u*4,format:h.format}),u+=p.size)}n.addIndex(this.indexBuffer);const c=this.getParticleUpdate(i);this._dynamicUpload=c.dynamicUpdate,this._staticUpload=c.staticUpdate,this.geometry=n}getParticleUpdate(e){const r=fme(e);return this._generateParticleUpdateCache[r]?this._generateParticleUpdateCache[r]:(this._generateParticleUpdateCache[r]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[r])}generateParticleUpdate(e){return B7(e)}update(e,r){e.length>this._size&&(r=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new Po(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Po(this._size*this._dynamicStride*4*4),this.indexBuffer=D1(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const i=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,i.float32View,i.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),r){const s=this.staticAttributeBuffer;this._staticUpload(e,s.float32View,s.uint32View),this._staticBuffer.setDataWithSize(s.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function fme(t){const e=[];for(const r in t){const i=t[r];e.push(r,i.code,i.dynamic?"d":"s")}return e.join("_")}var O7=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,D7=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,k1=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class k7 extends Si{constructor(){const e=_n.from({vertex:D7,fragment:O7}),r=bn.from({fragment:{source:k1,entryPoint:"mainFragment"},vertex:{source:k1,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:r,resources:{uTexture:ct.WHITE.source,uSampler:new Hi({}),uniforms:{uTranslationMatrix:{value:new Et,type:"mat3x3<f32>"},uColor:{value:new qt(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class v2{constructor(e,r){this.state=yi.for2d(),this.localUniforms=new rn({uTranslationMatrix:{value:new Et,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=r,this.defaultShader=new k7,this.state=yi.for2d()}validateRenderable(e){return!1}addRenderable(e,r){this.renderer.renderPipes.batch.break(r),r.add(e)}getBuffers(e){return e._gpuData[this.renderer.uid]||this._initBuffer(e)}_initBuffer(e){return e._gpuData[this.renderer.uid]=new P7({size:e.particleChildren.length,properties:e._properties}),e._gpuData[this.renderer.uid]}updateRenderable(e){}execute(e){const r=e.particleChildren;if(r.length===0)return;const i=this.renderer,s=this.getBuffers(e);e.texture||(e.texture=r[0].texture);const a=this.state;s.update(r,e._childrenDirty),e._childrenDirty=!1,a.blendMode=tl(e.blendMode,e.texture._source);const n=this.localUniforms.uniforms,o=n.uTranslationMatrix;e.worldTransform.copyTo(o),o.prepend(i.globalUniforms.globalUniformData.projectionMatrix),n.uResolution=i.globalUniforms.globalUniformData.resolution,n.uRound=i._roundPixels|e._roundPixels,gl(e.groupColorAlpha,n.uColor,0),this.adaptor.execute(this,e)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}class U7 extends v2{constructor(e){super(e,new L7)}}U7.extension={type:[pe.WebGLPipes],name:"particle"};class M7 extends v2{constructor(e){super(e,new I7)}}M7.extension={type:[pe.WebGPUPipes],name:"particle"};const N7=class U1{constructor(e){if(e instanceof ct)this.texture=e,md(this,U1.defaultOptions,{});else{const r={...U1.defaultOptions,...e};md(this,r,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return Nu(this._tint)}set tint(e){this._tint=qt.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};N7.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let M1=N7;const N1={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}},hme=new un(0,0,0,0),F7=class F1 extends Bs{constructor(e={}){e={...F1.defaultOptions,...e,dynamicProperties:{...F1.defaultOptions.dynamicProperties,...e==null?void 0:e.dynamicProperties}};const{dynamicProperties:r,shader:i,roundPixels:s,texture:a,particles:n,...o}=e;super({label:"ParticleContainer",...o}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=a||null,this.shader=i,this._properties={};for(const u in N1){const c=N1[u],f=r[u];this._properties[u]={...c,dynamic:f}}this.allowChildren=!0,this.roundPixels=s??!1,this.particleChildren=n??[]}addParticle(...e){for(let r=0;r<e.length;r++)this.particleChildren.push(e[r]);return this.onViewUpdate(),e[0]}removeParticle(...e){let r=!1;for(let i=0;i<e.length;i++){const s=this.particleChildren.indexOf(e[i]);s>-1&&(this.particleChildren.splice(s,1),r=!0)}return r&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return hme}updateBounds(){}destroy(e=!1){var i,s;if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const a=typeof e=="boolean"?e:e==null?void 0:e.textureSource,n=this.texture??((i=this.particleChildren[0])==null?void 0:i.texture);n&&n.destroy(a)}this.texture=null,(s=this.shader)==null||s.destroy()}removeParticles(e,r){e??(e=0),r??(r=this.particleChildren.length);const i=this.particleChildren.splice(e,r-e);return this.onViewUpdate(),i}removeParticleAt(e){const r=this.particleChildren.splice(e,1);return this.onViewUpdate(),r[0]}addParticleAt(e,r){return this.particleChildren.splice(r,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,r){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,r){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,r){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,r){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,r){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};F7.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let G1=F7;const G7=class K7 extends Yp{constructor(e={}){e={...K7.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){var r,i;this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=(r=e.anchor)==null?void 0:r.x,this._anchorY=(i=e.anchor)==null?void 0:i.y,this.updateUvs(),this.updatePositions()}updatePositions(){const e=this.positions,{width:r,height:i,_leftWidth:s,_rightWidth:a,_topHeight:n,_bottomHeight:o,_anchorX:u,_anchorY:c}=this,f=s+a,h=r>f?1:r/f,p=n+o,g=i>p?1:i/p,m=Math.min(h,g),T=u*r,x=c*i;e[0]=e[8]=e[16]=e[24]=-T,e[2]=e[10]=e[18]=e[26]=s*m-T,e[4]=e[12]=e[20]=e[28]=r-a*m-T,e[6]=e[14]=e[22]=e[30]=r-T,e[1]=e[3]=e[5]=e[7]=-x,e[9]=e[11]=e[13]=e[15]=n*m-x,e[17]=e[19]=e[21]=e[23]=i-o*m-x,e[25]=e[27]=e[29]=e[31]=i-x,this.getBuffer("aPosition").update()}updateUvs(){const e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;const r=1/this._originalWidth,i=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}};G7.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let Oa=G7;const V7=class $7 extends Bs{constructor(e){var p,g,m,T;e instanceof ct&&(e={texture:e});const{width:r,height:i,anchor:s,leftWidth:a,rightWidth:n,topHeight:o,bottomHeight:u,texture:c,roundPixels:f,...h}=e;super({label:"NineSliceSprite",...h}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=a??((p=c==null?void 0:c.defaultBorders)==null?void 0:p.left)??Oa.defaultOptions.leftWidth,this._topHeight=o??((g=c==null?void 0:c.defaultBorders)==null?void 0:g.top)??Oa.defaultOptions.topHeight,this._rightWidth=n??((m=c==null?void 0:c.defaultBorders)==null?void 0:m.right)??Oa.defaultOptions.rightWidth,this._bottomHeight=u??((T=c==null?void 0:c.defaultBorders)==null?void 0:T.bottom)??Oa.defaultOptions.bottomHeight,this._width=r??c.width??Oa.defaultOptions.width,this._height=i??c.height??Oa.defaultOptions.height,this.allowChildren=!1,this.texture=c??$7.defaultOptions.texture,this.roundPixels=f??!1,this._anchor=new Mr({_onUpdate:()=>{this.onViewUpdate()}}),s?this.anchor=s:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,r){typeof e=="object"&&(r=e.height??e.width,e=e.width),this._width=e,this._height=r??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=ct.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}this._texture=null}updateBounds(){const e=this._bounds,r=this._anchor,i=this._width,s=this._height;e.minX=-r._x*i,e.maxX=e.minX+i,e.minY=-r._y*s,e.maxY=e.minY+s}};V7.defaultOptions={texture:ct.EMPTY};let H7=V7;class dme extends H7{constructor(...e){let r=e[0];r instanceof ct&&(vt(Gt,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),r={texture:r,leftWidth:e[1],topHeight:e[2],rightWidth:e[3],bottomHeight:e[4]}),vt(Gt,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(r)}}class q7 extends Zp{constructor(){super(),this.geometry=new Oa}destroy(){this.geometry.destroy()}}class X7{constructor(e){this._renderer=e}addRenderable(e,r){const i=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,i),this._renderer.renderPipes.batch.addToBatch(i,r)}updateRenderable(e){const r=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,r),r._batcher.updateElement(r)}validateRenderable(e){const r=this._getGpuSprite(e);return!r._batcher.checkAndUpdateTexture(r,e._texture)}_updateBatchableSprite(e,r){r.geometry.update(e),r.setTexture(e._texture)}_getGpuSprite(e){return e._gpuData[this._renderer.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const r=e._gpuData[this._renderer.uid]=new q7,i=r;return i.renderable=e,i.transform=e.groupTransform,i.texture=e._texture,i.roundPixels=this._renderer._roundPixels|e._roundPixels,e.didViewUpdate||this._updateBatchableSprite(e,i),r}destroy(){this._renderer=null}}X7.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"nineSliceSprite"};const z7={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            }

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},W7={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;

        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0

        `}};let ey,ty;class j7 extends Si{constructor(){ey??(ey=cl({name:"tiling-sprite-shader",bits:[zu,z7,hl]})),ty??(ty=fl({name:"tiling-sprite-shader",bits:[Xp,W7,dl]}));const e=new rn({uMapCoord:{value:new Et,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new Et,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:ty,gpuProgram:ey,resources:{localUniforms:new rn({uTransformMatrix:{value:new Et,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:ct.EMPTY.source,uSampler:ct.EMPTY.source.style}})}updateUniforms(e,r,i,s,a,n){const o=this.resources.tilingUniforms,u=n.width,c=n.height,f=n.textureMatrix,h=o.uniforms.uTextureTransform;h.set(i.a*u/e,i.b*u/r,i.c*c/e,i.d*c/r,i.tx/e,i.ty/r),h.invert(),o.uniforms.uMapCoord=f.mapCoord,o.uniforms.uClampFrame=f.uClampFrame,o.uniforms.uClampOffset=f.uClampOffset,o.uniforms.uTextureTransform=h,o.uniforms.uSizeAnchor[0]=e,o.uniforms.uSizeAnchor[1]=r,o.uniforms.uSizeAnchor[2]=s,o.uniforms.uSizeAnchor[3]=a,n&&(this.resources.uTexture=n.source,this.resources.uSampler=n.source.style)}}class Y7 extends zo{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function Z7(t,e){const r=t.anchor.x,i=t.anchor.y;e[0]=-r*t.width,e[1]=-i*t.height,e[2]=(1-r)*t.width,e[3]=-i*t.height,e[4]=(1-r)*t.width,e[5]=(1-i)*t.height,e[6]=-r*t.width,e[7]=(1-i)*t.height}function Q7(t,e,r,i){let s=0;const a=t.length/(e||2),n=i.a,o=i.b,u=i.c,c=i.d,f=i.tx,h=i.ty;for(r*=e;s<a;){const p=t[r],g=t[r+1];t[r]=n*p+u*g+f,t[r+1]=o*p+c*g+h,r+=e,s++}}function J7(t,e){const r=t.texture,i=r.frame.width,s=r.frame.height;let a=0,n=0;t.applyAnchorToTexture&&(a=t.anchor.x,n=t.anchor.y),e[0]=e[6]=-a,e[2]=e[4]=1-a,e[1]=e[3]=-n,e[5]=e[7]=1-n;const o=Et.shared;o.copyFrom(t._tileTransform.matrix),o.tx/=t.width,o.ty/=t.height,o.invert(),o.scale(t.width/i,t.height/s),Q7(e,2,0,o)}const Qh=new Y7;class eK{constructor(){this.canBatch=!0,this.geometry=new zo({indices:Qh.indices.slice(),positions:Qh.positions.slice(),uvs:Qh.uvs.slice()})}destroy(){var e;this.geometry.destroy(),(e=this.shader)==null||e.destroy()}}class tK{constructor(e){this._state=yi.default2d,this._renderer=e}validateRenderable(e){const r=this._getTilingSpriteData(e),i=r.canBatch;this._updateCanBatch(e);const s=r.canBatch;if(s&&s===i){const{batchableMesh:a}=r;return!a._batcher.checkAndUpdateTexture(a,e.texture)}return i!==s}addRenderable(e,r){const i=this._renderer.renderPipes.batch;this._updateCanBatch(e);const s=this._getTilingSpriteData(e),{geometry:a,canBatch:n}=s;if(n){s.batchableMesh||(s.batchableMesh=new Zp);const o=s.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),o.geometry=a,o.renderable=e,o.transform=e.groupTransform,o.setTexture(e._texture)),o.roundPixels=this._renderer._roundPixels|e._roundPixels,i.addToBatch(o,r)}else i.break(r),s.shader||(s.shader=new j7),this.updateRenderable(e),r.add(e)}execute(e){const{shader:r}=this._getTilingSpriteData(e);r.groups[0]=this._renderer.globalUniforms.bindGroup;const i=r.resources.localUniforms.uniforms;i.uTransformMatrix=e.groupTransform,i.uRound=this._renderer._roundPixels|e._roundPixels,gl(e.groupColorAlpha,i.uColor,0),this._state.blendMode=tl(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:Qh,shader:r,state:this._state})}updateRenderable(e){const r=this._getTilingSpriteData(e),{canBatch:i}=r;if(i){const{batchableMesh:s}=r;e.didViewUpdate&&this._updateBatchableMesh(e),s._batcher.updateElement(s)}else if(e.didViewUpdate){const{shader:s}=r;s.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}_getTilingSpriteData(e){return e._gpuData[this._renderer.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){const r=new eK;return r.renderable=e,e._gpuData[this._renderer.uid]=r,r}_updateBatchableMesh(e){const r=this._getTilingSpriteData(e),{geometry:i}=r,s=e.texture.source.style;s.addressMode!=="repeat"&&(s.addressMode="repeat",s.update()),J7(e,i.uvs),Z7(e,i.positions)}destroy(){this._renderer=null}_updateCanBatch(e){const r=this._getTilingSpriteData(e),i=e.texture;let s=!0;return this._renderer.type===ni.WEBGL&&(s=this._renderer.context.supports.nonPowOf2wrapping),r.canBatch=i.textureMatrix.isSimple&&(s||i.source.isPowerOfTwo),r.canBatch}}tK.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"tilingSprite"};const rK={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:`
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},nK={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:`
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},iK={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {

                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;

            }
        `}},sK={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {

                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));

                // SDF
                median = min(median, msdfColor.a);

                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);

                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);

                return coverage;
            }
        `}};let ry,ny;class aK extends Si{constructor(e){const r=new rn({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new Et,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}});ry??(ry=cl({name:"sdf-shader",bits:[Bp,Op(e),rK,iK,hl]})),ny??(ny=fl({name:"sdf-shader",bits:[Pp,Dp(e),nK,sK,dl]})),super({glProgram:ny,gpuProgram:ry,resources:{localUniforms:r,batchSamplers:kp(e)}})}}class oK extends Vi{destroy(){this.context.customShader&&this.context.customShader.destroy(),super.destroy()}}class uK{constructor(e){this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(e){const r=this._getGpuBitmapText(e);return e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,r)),this._renderer.renderPipes.graphics.validateRenderable(r)}addRenderable(e,r){const i=this._getGpuBitmapText(e);mU(e,i),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,i)),this._renderer.renderPipes.graphics.addRenderable(i,r),i.context.customShader&&this._updateDistanceField(e)}updateRenderable(e){const r=this._getGpuBitmapText(e);mU(e,r),this._renderer.renderPipes.graphics.updateRenderable(r),r.context.customShader&&this._updateDistanceField(e)}_updateContext(e,r){const{context:i}=r,s=nl.getFont(e.text,e._style);i.clear(),s.distanceField.type!=="none"&&(i.customShader||(i.customShader=new aK(this._renderer.limits.maxBatchableTextures)));const a=Bn.graphemeSegmenter(e.text),n=e._style;let o=s.baseLineOffset;const u=Np(a,n,s,!0),c=n.padding,f=u.scale;let h=u.width,p=u.height+u.offsetY;n._stroke&&(h+=n._stroke.width/f,p+=n._stroke.width/f),i.translate(-e._anchor._x*h-c,-e._anchor._y*p-c).scale(f,f);const g=s.applyFillAsTint?n._fill.color:16777215;for(let m=0;m<u.lines.length;m++){const T=u.lines[m];for(let x=0;x<T.charPositions.length;x++){const v=T.chars[x],y=s.chars[v];y!=null&&y.texture&&i.texture(y.texture,g||"black",Math.round(T.charPositions[x]+y.xOffset),Math.round(o+y.yOffset))}o+=s.lineHeight}}_getGpuBitmapText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const r=new oK;return e._gpuData[this._renderer.uid]=r,this._updateContext(e,r),r}_updateDistanceField(e){const r=this._getGpuBitmapText(e).context,i=e._style.fontFamily,s=yr.get(`${i}-bitmap`),{a,b:n,c:o,d:u}=e.groupTransform,c=Math.sqrt(a*a+n*n),f=Math.sqrt(o*o+u*u),h=(Math.abs(c)+Math.abs(f))/2,p=s.baseRenderedFontSize/e._style.fontSize,g=h*s.distanceField.range*(1/p);r.customShader.resources.localUniforms.uniforms.uDistance=g}destroy(){this._renderer=null}}uK.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"bitmapText"};function mU(t,e){e.groupTransform=t.groupTransform,e.groupColorAlpha=t.groupColorAlpha,e.groupColor=t.groupColor,e.groupBlendMode=t.groupBlendMode,e.globalDisplayStatus=t.globalDisplayStatus,e.groupTransform=t.groupTransform,e.localDisplayStatus=t.localDisplayStatus,e.groupAlpha=t.groupAlpha,e._roundPixels=t._roundPixels}function lK(t){const{text:e,style:r,chars:i}=t,s=r,a=nl.getFont(e,s),n=Bn.graphemeSegmenter(e),o=Np(n,s,a,!0),u=o.scale,c=[],f=[],h=[];let p=0;for(const g of o.lines){if(g.chars.length===0)continue;const m=new Ir({label:"line"});m.y=p,h.push(m);let T=new Ir({label:"word"}),x=0;for(let v=0;v<g.chars.length;v++){const y=g.chars[v];if(!y||!a.chars[y])continue;const A=y===" ",k=v===g.chars.length-1;let b;i.length>0?(b=i.shift(),b.text=y,b.style=s,b.label=`char-${y}`,b.x=g.charPositions[v]*u-g.charPositions[x]*u):b=new iS({text:y,style:s,label:`char-${y}`,x:g.charPositions[v]*u-g.charPositions[x]*u}),A||(c.push(b),T.addChild(b)),(A||k)&&T.children.length>0&&(T.x=g.charPositions[x]*u,f.push(T),m.addChild(T),T=new Ir({label:"word"}),x=v+1)}p+=a.lineHeight*u}return{chars:c,lines:h,words:f}}class cK extends hf{constructor(e){super(),this.generatingTexture=!1,this._renderer=e,e.runners.resolutionChange.add(this)}resolutionChange(){const e=this.renderable;e._autoResolution&&e.onViewUpdate()}destroy(){this._renderer.htmlText.returnTexturePromise(this.texturePromise),this.texturePromise=null,this._renderer=null}}function wd(t,e){const{texture:r,bounds:i}=t,s=e._style._getFinalPadding();gA(i,e._anchor,r);const a=e._anchor._x*s*2,n=e._anchor._y*s*2;i.minX-=s-a,i.minY-=s-n,i.maxX-=s-a,i.maxY-=s-n}class fK{constructor(e){this._renderer=e}validateRenderable(e){return e._didTextUpdate}addRenderable(e,r){const i=this._getGpuText(e);e._didTextUpdate&&(this._updateGpuText(e).catch(s=>{console.error(s)}),e._didTextUpdate=!1,wd(i,e)),this._renderer.renderPipes.batch.addToBatch(i,r)}updateRenderable(e){const r=this._getGpuText(e);r._batcher.updateElement(r)}async _updateGpuText(e){e._didTextUpdate=!1;const r=this._getGpuText(e);if(r.generatingTexture)return;r.texturePromise&&(this._renderer.htmlText.returnTexturePromise(r.texturePromise),r.texturePromise=null),r.generatingTexture=!0,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;const i=this._renderer.htmlText.getTexturePromise(e);r.texturePromise=i,r.texture=await i;const s=e.renderGroup||e.parentRenderGroup;s&&(s.structureDidChange=!0),r.generatingTexture=!1,wd(r,e)}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const r=new cK(this._renderer);return r.renderable=e,r.transform=e.groupTransform,r.texture=ct.EMPTY,r.bounds={minX:0,maxX:1,minY:0,maxY:0},r.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,e._gpuData[this._renderer.uid]=r,r}destroy(){this._renderer=null}}fK.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"htmlText"};function hK(){const{userAgent:t}=Qt.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}const pme=new un;function E2(t,e,r,i){const s=pme;s.minX=0,s.minY=0,s.maxX=t.width/i|0,s.maxY=t.height/i|0;const a=Or.getOptimalTexture(s.width,s.height,i,!1);return a.source.uploadMethodId="image",a.source.resource=t,a.source.alphaMode="premultiply-alpha-on-upload",a.frame.width=e/i,a.frame.height=r/i,a.source.emit("update",a.source),a.updateUvs(),a}function dK(t,e){const r=e.fontFamily,i=[],s={},a=/font-family:([^;"\s]+)/g,n=t.match(a);function o(u){s[u]||(i.push(u),s[u]=!0)}if(Array.isArray(r))for(let u=0;u<r.length;u++)o(r[u]);else o(r);n&&n.forEach(u=>{const c=u.split(":")[1].trim();o(c)});for(const u in e.tagStyles){const c=e.tagStyles[u].fontFamily;o(c)}return i}async function pK(t){const r=await(await Qt.get().fetch(t)).blob(),i=new FileReader;return await new Promise((a,n)=>{i.onloadend=()=>a(i.result),i.onerror=n,i.readAsDataURL(r)})}async function K1(t,e){const r=await pK(e);return`@font-face {
        font-family: "${t.fontFamily}";
        src: url('${r}');
        font-weight: ${t.fontWeight};
        font-style: ${t.fontStyle};
    }`}const nc=new Map;async function gK(t,e,r){const i=t.filter(s=>yr.has(`${s}-and-url`)).map((s,a)=>{if(!nc.has(s)){const{url:n}=yr.get(`${s}-and-url`);a===0?nc.set(s,K1({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:s},n)):nc.set(s,K1({fontWeight:r.fontWeight,fontStyle:r.fontStyle,fontFamily:s},n))}return nc.get(s)});return(await Promise.all(i)).join(`
`)}function mK(t,e,r,i,s){const{domElement:a,styleElement:n,svgRoot:o}=s;a.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${t}</div>`,a.setAttribute("style",`transform: scale(${r});transform-origin: top left; display: inline-block`),n.textContent=i;const{width:u,height:c}=s.image;return o.setAttribute("width",u.toString()),o.setAttribute("height",c.toString()),new XMLSerializer().serializeToString(o)}function _K(t,e){const r=ca.getOptimalCanvasAndContext(t.width,t.height,e),{context:i}=r;return i.clearRect(0,0,t.width,t.height),i.drawImage(t,0,0),r}function bK(t,e,r){return new Promise(async i=>{r&&await new Promise(s=>setTimeout(s,100)),t.onload=()=>{i()},t.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,t.crossOrigin="anonymous"})}class xK{constructor(e){this._renderer=e,this._createCanvas=e.type===ni.WEBGPU}getTexture(e){return this.getTexturePromise(e)}getTexturePromise(e){return this._buildTexturePromise(e)}async _buildTexturePromise(e){const{text:r,style:i,resolution:s,textureStyle:a}=e,n=gn.get(sS),o=dK(r,i),u=await gK(o,i,ff.defaultTextStyle),c=aS(r,i,u,n),f=Math.ceil(Math.ceil(Math.max(1,c.width)+i.padding*2)*s),h=Math.ceil(Math.ceil(Math.max(1,c.height)+i.padding*2)*s),p=n.image,g=2;p.width=(f|0)+g,p.height=(h|0)+g;const m=mK(r,i,s,u,n);await bK(p,m,hK()&&o.length>0);const T=p;let x;this._createCanvas&&(x=_K(p,s));const v=E2(x?x.canvas:T,p.width-g,p.height-g,s);return a&&(v.source.style=a),this._createCanvas&&(this._renderer.texture.initSource(v.source),ca.returnCanvasAndContext(x)),gn.return(n),v}returnTexturePromise(e){e.then(r=>{this._cleanUp(r)}).catch(()=>{Rt("HTMLTextSystem: Failed to clean texture")})}_cleanUp(e){Or.returnTexture(e,!0),e.source.resource=null,e.source.uploadMethodId="unknown"}destroy(){this._renderer=null}}xK.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"htmlText"};class y2 extends Ir{constructor(e){const{text:r,style:i,autoSplit:s,lineAnchor:a,wordAnchor:n,charAnchor:o,...u}=e;super(u),this._dirty=!1,this._canReuseChars=!1,this.chars=[],this.words=[],this.lines=[],this._originalText=r,this._autoSplit=s,this._lineAnchor=a,this._wordAnchor=n,this._charAnchor=o,this.style=i}split(){const e=this.splitFn();this.chars=e.chars,this.words=e.words,this.lines=e.lines,this.addChild(...this.lines),this.charAnchor=this._charAnchor,this.wordAnchor=this._wordAnchor,this.lineAnchor=this._lineAnchor,this._dirty=!1,this._canReuseChars=!0}get text(){return this._originalText}set text(e){this._originalText=e,this.lines.forEach(r=>r.destroy({children:!0})),this.lines.length=0,this.words.length=0,this.chars.length=0,this._canReuseChars=!1,this.onTextUpdate()}_setOrigin(e,r,i){let s;typeof e=="number"?s={x:e,y:e}:s={x:e.x,y:e.y},r.forEach(a=>{const n=a.getLocalBounds(),o=n.minX+n.width*s.x,u=n.minY+n.height*s.y;a.origin.set(o,u)}),this[i]=e}get lineAnchor(){return this._lineAnchor}set lineAnchor(e){this._setOrigin(e,this.lines,"_lineAnchor")}get wordAnchor(){return this._wordAnchor}set wordAnchor(e){this._setOrigin(e,this.words,"_wordAnchor")}get charAnchor(){return this._charAnchor}set charAnchor(e){this._setOrigin(e,this.chars,"_charAnchor")}get style(){return this._style}set style(e){e||(e={}),this._style=new si(e),this.words.forEach(r=>r.destroy()),this.words.length=0,this.lines.forEach(r=>r.destroy()),this.lines.length=0,this._canReuseChars=!0,this.onTextUpdate()}onTextUpdate(){this._dirty=!0,this._autoSplit&&this.split()}destroy(e){super.destroy(e),this.chars=[],this.words=[],this.lines=[],(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._originalText=""}}const vK=class Jh extends y2{constructor(e){const r={...Jh.defaultOptions,...e};super(r)}static from(e,r){const i={...Jh.defaultOptions,...r,text:e.text,style:new si(e.style)};return new Jh({...i})}splitFn(){return lK({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};vK.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};let gme=vK;function mme(t,e,r){switch(t){case"center":return(r-e)/2;case"right":return r-e;case"left":default:return 0}}function EK(t){return t==="\r"||t===`
`||t===`\r
`}function _me(t,e,r){const i=[];let s=e.lines[0],a="",n=[],o=0;return r.wordWrap=!1,t.forEach(u=>{const c=/^\s*$/.test(u),f=EK(u),h=a.length===0&&c;if(c&&!f&&h)return;f||(a+=u);const p=Bn.measureText(u,r);n.push({char:u,metric:p}),a.length>=s.length&&(i.push({line:a,chars:n,width:n.reduce((g,m)=>g+m.metric.width,0)}),n=[],a="",o++,s=e.lines[o])}),i}function yK(t){var x,v;const{text:e,style:r,chars:i}=t,s=r,a=Bn.measureText(e,s),n=Bn.graphemeSegmenter(e),o=_me(n,a,s.clone()),u=s.align,c=a.lineWidths.reduce((y,R)=>Math.max(y,R),0),f=[],h=[],p=[];let g=0;const m=((x=s.stroke)==null?void 0:x.width)||0,T=((v=s.dropShadow)==null?void 0:v.distance)||0;return o.forEach((y,R)=>{const A=new Ir({label:`line-${R}`});A.y=g,h.push(A);const k=a.lineWidths[R];let b=mme(u,k,c),C=new Ir({label:"word"});C.x=b,y.chars.forEach((w,O)=>{if(w.metric.width!==0){if(EK(w.char)){b+=w.metric.width-m;return}if(w.char===" ")C.children.length>0&&(p.push(C),A.addChild(C)),b+=w.metric.width+s.letterSpacing-m,C=new Ir({label:"word"}),C.x=b;else{let M;i.length>0?(M=i.shift(),M.text=w.char,M.style=s,M.setFromMatrix(Et.IDENTITY),M.x=b-C.x-T*O):M=new qp({text:w.char,style:s,x:b-C.x-T*O}),f.push(M),C.addChild(M),b+=w.metric.width+s.letterSpacing-m}}}),C.children.length>0&&(p.push(C),A.addChild(C)),g+=a.lineHeight}),{chars:f,lines:h,words:p}}const TK=class ed extends y2{constructor(e){const r={...ed.defaultOptions,...e};super(r)}static from(e,r){const i={...ed.defaultOptions,...r,text:e.text,style:new si(e.style)};return new ed({...i})}splitFn(){return yK({text:this._originalText,style:this._style,chars:this._canReuseChars?this.chars:[]})}};TK.defaultOptions={autoSplit:!0,lineAnchor:0,wordAnchor:0,charAnchor:0};let bme=TK;class AK extends hf{constructor(e){super(),this._renderer=e,e.runners.resolutionChange.add(this)}resolutionChange(){const e=this.renderable;e._autoResolution&&e.onViewUpdate()}destroy(){this._renderer.canvasText.returnTexture(this.texture),this._renderer=null}}class SK{constructor(e){this._renderer=e}validateRenderable(e){return e._didTextUpdate}addRenderable(e,r){const i=this._getGpuText(e);e._didTextUpdate&&(this._updateGpuText(e),e._didTextUpdate=!1),this._renderer.renderPipes.batch.addToBatch(i,r)}updateRenderable(e){const r=this._getGpuText(e);r._batcher.updateElement(r)}_updateGpuText(e){const r=this._getGpuText(e);r.texture&&this._renderer.canvasText.returnTexture(r.texture),e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,r.texture=r.texture=this._renderer.canvasText.getTexture(e),wd(r,e)}_getGpuText(e){return e._gpuData[this._renderer.uid]||this.initGpuText(e)}initGpuText(e){const r=new AK(this._renderer);return r.renderable=e,r.transform=e.groupTransform,r.bounds={minX:0,maxX:1,minY:0,maxY:0},r.roundPixels=this._renderer._roundPixels|e._roundPixels,e._gpuData[this._renderer.uid]=r,r}destroy(){this._renderer=null}}SK.extension={type:[pe.WebGLPipes,pe.WebGPUPipes,pe.CanvasPipes],name:"text"};class RK{constructor(e){this._renderer=e}getTexture(e,r,i,s){typeof e=="string"&&(vt("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),e={text:e,style:i,resolution:r}),e.style instanceof si||(e.style=new si(e.style)),e.textureStyle instanceof Hi||(e.textureStyle=new Hi(e.textureStyle)),typeof e.text!="string"&&(e.text=e.text.toString());const{text:a,style:n,textureStyle:o}=e,u=e.resolution??this._renderer.resolution,{frame:c,canvasAndContext:f}=Xu.getCanvasAndContext({text:a,style:n,resolution:u}),h=E2(f.canvas,c.width,c.height,u);if(o&&(h.source.style=o),n.trim&&(c.pad(n.padding),h.frame.copyFrom(c),h.updateUvs()),n.filters){const p=this._applyFilters(h,n.filters);return this.returnTexture(h),Xu.returnCanvasAndContext(f),p}return this._renderer.texture.initSource(h._source),Xu.returnCanvasAndContext(f),h}returnTexture(e){const r=e.source;r.resource=null,r.uploadMethodId="unknown",r.alphaMode="no-premultiply-alpha",Or.returnTexture(e,!0)}renderTextToCanvas(){vt("8.10.0","CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead")}_applyFilters(e,r){const i=this._renderer.renderTarget.renderTarget,s=this._renderer.filter.generateFilteredTexture({texture:e,filters:r});return this._renderer.renderTarget.bind(i,!1),s}destroy(){this._renderer=null}}RK.extension={type:[pe.WebGLSystem,pe.WebGPUSystem,pe.CanvasSystem],name:"canvasText"};async function xme(t,e,r=200){const i=await e.extract.base64(t);await e.encoder.commandFinished;const s=r;console.log(`logging texture ${t.source.width}px ${t.source.height}px`);const a=["font-size: 1px;",`padding: ${s}px 300px;`,`background: url(${i}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",a)}const vme=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let Eme=0;function CK(t,e=0,r={color:"#000000"}){t.renderGroup&&(r.color=vme[Eme++]);let i="";for(let n=0;n<e;n++)i+="    ";let s=t.label;!s&&t instanceof An&&(s=`sprite:${t.texture.label}`);let a=`%c ${i}|- ${s} (worldX:${t.worldTransform.tx}, relativeRenderX:${t.relativeGroupTransform.tx}, renderX:${t.groupTransform.tx}, localX:${t.x})`;t.renderGroup&&(a+=" (RenderGroup)"),t.filters&&(a+="(*filters)"),console.log(a,`color:${r.color}; font-weight:bold;`),e++;for(let n=0;n<t.children.length;n++){const o=t.children[n];CK(o,e,{...r})}}function wK(t,e=0,r={index:0,color:"#000000"}){let i="";for(let a=0;a<e;a++)i+="    ";const s=`%c ${i}- ${r.index}: ${t.root.label} worldX:${t.worldTransform.tx}`;console.log(s,`color:${r.color}; font-weight:bold;`),e++;for(let a=0;a<t.renderGroupChildren.length;a++){const n=t.renderGroupChildren[a];wK(n,e,{...r,index:a})}}br.add(E8,y8);const yme=Object.freeze(Object.defineProperty({__proto__:null,AbstractBitmapFont:DA,AbstractRenderer:nf,AbstractSplitText:y2,AbstractText:$p,AccessibilitySystem:$fe,AlphaFilter:Kpe,AlphaMask:vA,AlphaMaskPipe:fS,AnimatedSprite:zc,Application:OA,ApplicationInitHook:BA,Assets:na,AssetsClass:UF,BLEND_TO_NPM:d6,BUFFER_TYPE:xc,BackgroundLoader:pF,BackgroundSystem:D9,Batch:m6,BatchGeometry:y6,BatchTextureArray:g6,BatchableGraphics:Mp,BatchableHTMLText:cK,BatchableMesh:Zp,BatchableSprite:hf,BatchableText:AK,Batcher:v6,BatcherPipe:cS,BigPool:gn,BindGroup:ws,BindGroupSystem:n2,BitmapFont:WA,BitmapFontManager:nl,BitmapText:iS,BitmapTextGraphics:oK,BitmapTextPipe:uK,BlendModeFilter:Zr,BlendModePipe:zS,BlurFilter:qu,BlurFilterPass:jh,Bounds:un,BrowserAdapter:e5,Buffer:ri,BufferImageSource:_p,BufferResource:zp,BufferUsage:nr,CLEAR:Jn,Cache:yr,CanvasPool:ca,CanvasPoolClass:uF,CanvasSource:Cs,CanvasTextGenerator:Xu,CanvasTextMetrics:Bn,CanvasTextPipe:SK,CanvasTextSystem:RK,Circle:Cp,Color:qt,ColorBlend:O5,ColorBurnBlend:D5,ColorDodgeBlend:k5,ColorMask:EA,ColorMaskPipe:hS,ColorMatrixFilter:dG,CompressedSource:lf,Container:Ir,Culler:YF,CullerPlugin:ZF,CustomRenderPipe:GS,D3D10_RESOURCE_DIMENSION:eS,D3DFMT:Zn,DATA_URI:dhe,DDS:Ut,DEG_TO_RAD:S8,DEPRECATED_SCALE_MODES:Cd,DEPRECATED_WRAP_MODES:Rd,DOMAdapter:Qt,DOMContainer:wpe,DOMPipe:QF,DRAW_MODES:$ge,DXGI_FORMAT:JA,DXGI_TO_TEXTURE_FORMAT:Qn,DarkenBlend:U5,DefaultBatcher:Up,DefaultShader:D6,DifferenceBlend:M5,DisplacementFilter:Hpe,DivideBlend:N5,DynamicBitmapFont:d1,Ellipse:wp,EventBoundary:eG,EventEmitter:ui,EventSystem:tG,EventsTicker:ra,ExclusionBlend:F5,ExtensionType:pe,ExtractSystem:U9,FOURCC_TO_TEXTURE_FORMAT:v1,FederatedContainer:Gpe,FederatedEvent:ll,FederatedMouseEvent:Xc,FederatedPointerEvent:Ni,FederatedWheelEvent:Ko,FillGradient:Is,FillPattern:of,Filter:ii,FilterEffect:Dc,FilterPipe:xG,FilterSystem:EG,FontStylePromiseCache:nc,GAUSSIAN_VALUES:rS,GL_FORMATS:yd,GL_INTERNAL_FORMAT:$F,GL_TARGETS:_S,GL_TYPES:ar,GL_WRAP_MODES:WG,GenerateTextureSystem:jS,Geometry:qo,GlBackBufferSystem:ZG,GlBatchAdaptor:oS,GlBuffer:qG,GlBufferSystem:pS,GlColorMaskSystem:vS,GlContextSystem:zG,GlEncoderSystem:ES,GlGeometrySystem:bS,GlGraphicsAdaptor:NS,GlLimitsSystem:yS,GlMeshAdaptor:FS,GlParticleContainerAdaptor:L7,GlParticleContainerPipe:U7,GlProgram:_n,GlProgramData:l9,GlRenderTarget:QG,GlRenderTargetAdaptor:n9,GlRenderTargetSystem:BS,GlShaderSystem:DS,GlStateSystem:E9,GlStencilSystem:TS,GlTexture:y9,GlTextureSystem:MS,GlUboSystem:wS,GlUniformGroupSystem:kS,GlobalUniformSystem:YS,GpuBatchAdaptor:uS,GpuBlendModesToPixi:Hn,GpuBufferSystem:i2,GpuColorMaskSystem:s2,GpuDeviceSystem:jp,GpuEncoderSystem:a2,GpuGraphicsAdaptor:b2,GpuGraphicsContext:j6,GpuLimitsSystem:o2,GpuMeshAdapter:x2,GpuMipmapGenerator:s7,GpuParticleContainerAdaptor:I7,GpuParticleContainerPipe:M7,GpuProgram:bn,GpuRenderTarget:e7,GpuRenderTargetAdaptor:t7,GpuRenderTargetSystem:h2,GpuShaderSystem:d2,GpuStateSystem:p2,GpuStencilModesToPixi:da,GpuStencilSystem:u2,GpuTextureSystem:_2,GpuUboSystem:l2,GpuUniformBatchPipe:c2,Graphics:Vi,GraphicsContext:Gn,GraphicsContextRenderData:Y6,GraphicsContextSystem:VA,GraphicsGpuData:c7,GraphicsPath:la,GraphicsPipe:f7,HTMLText:NG,HTMLTextPipe:fK,HTMLTextRenderData:sS,HTMLTextStyle:ff,HTMLTextSystem:xK,HardLightBlend:G5,HardMixBlend:K5,HelloSystem:Wp,IGLUniformData:uge,ImageSource:Va,InstructionSet:xA,KTX:Wr,LightenBlend:V5,LinearBurnBlend:$5,LinearDodgeBlend:H5,LinearLightBlend:q5,Loader:yF,LoaderParserPriority:Ai,LuminosityBlend:X5,MaskEffectManager:gd,MaskEffectManagerClass:G8,MaskFilter:AG,Matrix:Et,Mesh:pl,MeshGeometry:zo,MeshGpuData:O1,MeshPipe:w7,MeshPlane:ome,MeshRope:ume,MeshSimple:lme,NOOP:dA,NegationBlend:z5,NineSliceGeometry:Oa,NineSlicePlane:dme,NineSliceSprite:H7,NineSliceSpriteGpuData:q7,NineSliceSpritePipe:X7,NoiseFilter:qpe,ObservablePoint:Mr,OverlayBlend:W5,PI_2:T8,Particle:M1,ParticleBuffer:P7,ParticleContainer:G1,ParticleContainerPipe:v2,ParticleShader:k7,PerspectiveMesh:ame,PerspectivePlaneGeometry:v7,PinLightBlend:j5,PipelineSystem:f2,PlaneGeometry:Yp,Point:_r,Polygon:Gu,Pool:bp,PoolGroupClass:U8,PrepareBase:CG,PrepareQueue:DG,PrepareSystem:GG,PrepareUpload:FG,QuadGeometry:Y7,RAD_TO_DEG:A8,Rectangle:lr,RenderContainer:jge,RenderGroup:Q8,RenderGroupPipe:KS,RenderGroupSystem:HS,RenderLayer:eme,RenderTarget:Td,RenderTargetSystem:IS,RenderTexture:Ma,RenderableGCSystem:K9,RendererInitHook:PA,RendererType:ni,ResizePlugin:l6,Resolver:Ja,RopeGeometry:S7,RoundedRectangle:Lp,SCALE_MODES:qge,STENCIL_MODES:jr,SVGParser:iF,SaturationBlend:Y5,SchedulerSystem:ZS,ScissorMask:nge,SdfShader:aK,Shader:Si,ShaderStage:Su,ShapePath:rF,SharedRenderPipes:r2,SharedSystems:t2,SoftLightBlend:Z5,SplitBitmapText:gme,SplitText:bme,Sprite:An,SpritePipe:qS,Spritesheet:Nc,State:yi,StencilMask:yA,StencilMaskPipe:dS,SubtractBlend:Q5,SystemRunner:IA,TEXTURE_FORMAT_BLOCK_SIZE:KF,Text:qp,TextStyle:si,Texture:ct,TextureGCSystem:$9,TextureMatrix:pA,TexturePool:Or,TexturePoolClass:Z8,TextureSource:Hr,TextureStyle:Hi,TextureUvs:Xge,Ticker:Sn,TickerListener:Xh,TickerPlugin:c6,TilingSprite:PG,TilingSpriteGpuData:eK,TilingSpritePipe:tK,TilingSpriteShader:j7,Transform:IG,Triangle:nS,UNIFORM_TO_ARRAY_SETTERS:_9,UNIFORM_TO_SINGLE_SETTERS:m9,UNIFORM_TYPES_MAP:A5,UNIFORM_TYPES_VALUES:CA,UPDATE_BLEND:Ep,UPDATE_COLOR:Uc,UPDATE_PRIORITY:oa,UPDATE_TRANSFORM:Cfe,UPDATE_VISIBLE:Fu,UboBatch:Y9,UboSystem:AS,UniformGroup:rn,VERSION:Vc,VideoSource:mc,ViewContainer:Bs,ViewSystem:q9,ViewableBuffer:Po,VividLightBlend:J5,WGSL_ALIGN_SIZE_DATA:Ec,WGSL_TO_STD40_SIZE:SS,WRAP_MODES:Hge,WebGLRenderer:j9,WebGPURenderer:l7,WebWorkerAdapter:Dpe,WorkerManager:_1,accessibilityTarget:Hfe,addBits:n1,addMaskBounds:yp,addMaskLocalBounds:Tp,addProgramDefines:p5,alphaFrag:rG,alphaWgsl:T1,applyMatrix:Q7,applyProjectiveTransformationToPlane:m7,applyStyleParams:P1,assignWithIgnore:md,autoDetectEnvironment:jfe,autoDetectRenderer:o6,autoDetectSource:Ife,basisTranscoderUrls:xd,bgr2rgb:Nu,bitmapFontCachePlugin:hF,bitmapFontTextParser:Wh,bitmapFontXMLParser:p1,bitmapFontXMLStringParser:g1,bitmapTextSplit:lK,blendTemplateFrag:I5,blendTemplateVert:B5,blendTemplateWgsl:P5,blockDataMap:g2,blurTemplateWgsl:uG,boundsPool:Rs,browserExt:E8,buildAdaptiveBezier:$A,buildAdaptiveQuadratic:Z6,buildArc:HA,buildArcTo:Q6,buildArcToSvg:J6,buildCircle:rl,buildContextBatches:W6,buildEllipse:F6,buildLine:V6,buildPixelLine:$6,buildPolygon:H6,buildRectangle:q6,buildRoundedRectangle:G6,buildSimpleUvs:N6,buildTriangle:X6,buildUvs:M6,cacheAsTextureMixin:M8,cacheTextureArray:gF,calculateProjection:i9,canvasTextSplit:yK,checkChildrenDidChange:bA,checkDataUrl:Xo,checkExtension:Xi,checkMaxIfStatementsInShader:UA,childrenHelperMixin:N8,cleanArray:F9,cleanHash:N9,clearList:Sd,closePointEps:FA,collectAllRenderables:Yge,collectRenderablesMixin:F8,color32BitToUniform:gl,colorBit:Bp,colorBitGl:Pp,colorMatrixFilterFrag:hG,colorMatrixFilterWgsl:A1,colorToUniform:wge,compareModeToGlCompare:C9,compileHighShader:A6,compileHighShaderGl:S6,compileHighShaderGlProgram:fl,compileHighShaderGpuProgram:cl,compileHooks:i1,compileInputs:s1,compileOutputs:T6,compileShader:L1,compute2DProjection:x7,convertFormatIfRequired:_pe,convertToList:Fi,copySearchParams:_d,createIdFromString:Ju,createIndicesForQuads:D1,createLevelBuffers:$de,createLevelBuffersFromKTX:bpe,createStringVariations:a5,createTexture:eo,createUboElementsSTD40:JG,createUboElementsWGSL:Z9,createUboSyncFunction:RS,createUboSyncFunctionSTD40:r9,createUboSyncFunctionWGSL:J9,crossOrigin:BF,cullingMixin:k8,curveEps:o1,defaultFilterVert:Vp,defaultValue:PS,definedProps:cs,deprecation:vt,detectAvif:mF,detectBasis:Nde,detectCompressed:Spe,detectDefaults:_F,detectMp4:bF,detectOgv:xF,detectVideoAlphaMode:TA,detectWebm:vF,detectWebp:EF,determineCrossOrigin:OF,displacementFrag:pG,displacementVert:gG,displacementWgsl:S1,earcut:i6,effectsMixin:K8,ensureAttributes:mS,ensureIsBuffer:MA,ensurePrecision:g5,ensureTextOptions:Hp,executeInstructions:Ad,extensions:br,extractAttributesFromGlProgram:f9,extractAttributesFromGpuProgram:v5,extractFontFamilies:dK,extractStructAndGroups:zh,extractSvgUrlId:f1,fastCopy:bd,findMixin:V8,fontStringFromTextStyle:$c,formatShader:ege,fragmentGPUTemplate:L6,fragmentGlTemplate:B6,generateArraySyncSTD40:t9,generateArraySyncWGSL:Q9,generateBlurFragSource:sG,generateBlurGlProgram:oG,generateBlurProgram:lG,generateBlurVertSource:aG,generateGPULayout:Qpe,generateGpuLayoutGroups:E5,generateLayout:Jpe,generateLayoutHash:y5,generateParticleUpdateFunction:B7,generateProgram:g9,generateShaderSyncCode:u9,generateTextStyleKey:aF,generateTextureBatchBit:Op,generateTextureBatchBitGl:Dp,generateTextureMatrix:z6,generateUniformsSync:b9,getAdjustedBlendModeBlend:tl,getAttributeInfoFromFormat:ua,getBatchSamplersUniformGroup:kp,getBitmapTextLayout:Np,getCanvasBoundingBox:OG,getCanvasFillStyle:qc,getCanvasTexture:LS,getDefaultUniformValue:S5,getFastGlobalBounds:Wge,getFastGlobalBoundsMixin:$8,getFontCss:gK,getFontFamilyName:SF,getGeometryBounds:E6,getGlTypeFromFormat:jG,getGlobalBounds:rf,getGlobalMixin:q8,getGlobalRenderableBounds:vG,getLocalBounds:vp,getMaxFragmentPrecision:d5,getMaxTexturesPerBatch:p6,getOrientationOfPoints:K6,getPo2TextureFromSource:E2,getResolutionOfUrl:Gp,getSVGUrl:mK,getSupportedCompressedTextureFormats:QA,getSupportedGPUCompressedTextureFormats:x1,getSupportedGlCompressedTextureFormats:b1,getSupportedTextureFormats:cf,getTemporaryCanvasFromImage:_K,getTestContext:RA,getTextureBatchBindGroup:Ip,getTextureDefaultMatrix:cme,getTextureFormatFromKTXTexture:Epe,getUboData:h9,getUniformData:d9,getUrlExtension:o5,glFormatToGPUFormat:WF,glUploadBufferImageResource:T9,glUploadCompressedTextureResource:A9,glUploadImageResource:US,glUploadVideoResource:S9,globalUniformsBit:P6,globalUniformsBitGl:O6,globalUniformsUBOBitGl:Phe,gpuFormatToBasisTranscoderFormat:qde,gpuFormatToKTXBasisTranscoderFormat:Tpe,gpuUploadBufferImageResource:r7,gpuUploadCompressedTextureResource:n7,gpuUploadImageResource:m2,gpuUploadVideoResource:i7,groupD8:Yt,hasCachedCanvasTexture:oge,hslWgsl:Wpe,hslgl:Sp,hslgpu:Rp,injectBits:a1,insertVersion:m5,isMobile:f5,isPow2:Hy,isRenderingToScreen:s9,isSafari:hK,isSingleItem:Mc,isWebGLSupported:sf,isWebGPUSupported:af,ktxTranscoderUrls:vd,loadBasis:Vde,loadBasisOnWorker:GF,loadBitmapFont:dF,loadDDS:Qde,loadEnvironmentExtensions:wA,loadFontAsBase64:pK,loadFontCSS:K1,loadImageBitmap:LF,loadJson:TF,loadKTX:hpe,loadKTX2:mpe,loadKTX2onWorker:zF,loadSVGImage:bK,loadSvg:CF,loadTextures:YA,loadTxt:AF,loadVideoTextures:DF,loadWebFont:RF,localUniformBit:zu,localUniformBitGl:Xp,localUniformBitGroup2:VG,localUniformMSDFBit:rK,localUniformMSDFBitGl:nK,log2:hfe,logDebugTexture:xme,logProgramError:p9,logRenderGroupScene:wK,logScene:CK,mSDFBit:iK,mSDFBitGl:sK,mapFormatToGlFormat:w9,mapFormatToGlInternalFormat:L9,mapFormatToGlType:I9,mapGlToVertexFormat:c9,mapSize:hge,mapType:OS,mapWebGLBlendModesToPixi:x9,maskFrag:yG,maskVert:TG,maskWgsl:C1,matrixPool:Pn,measureHtmlText:aS,measureMixin:z8,migrateFragmentFromV7toV8:cge,mipmapScaleModeToGlFilter:R9,multiplyColors:kc,multiplyHexColors:_A,nextPow2:Fo,noiseFrag:mG,noiseWgsl:R1,nonCompressedFormats:MF,normalizeExtensionPriority:Jl,onRenderMixin:W8,parseDDS:VF,parseFunctionBody:zge,parseKTX:HF,parseSVGDefinitions:nF,parseSVGFloatAttribute:Kr,parseSVGPath:f6,parseSVGStyle:qA,particleData:N1,particlesFrag:O7,particlesVert:D7,particlesWgsl:k1,path:ti,pointInTriangle:w1,preloadVideo:PF,removeItems:mA,removeStructAndGroupDuplicates:T5,resetUids:ffe,resolveCharacters:fF,resolveCompressedTextureUrl:Ape,resolveJsonUrl:kF,resolveTextureUrl:ZA,resourceToTexture:n5,roundPixelsBit:hl,roundPixelsBitGl:dl,roundedShapeArc:eF,roundedShapeQuadraticCurve:tF,sayHello:M9,scaleModeToGlFilter:B1,setBasisTranscoderPath:Gde,setKTXTranscoderPath:ppe,setPositions:Z7,setProgramName:_5,setUvs:J7,shapeBuilders:uf,sortMixin:j8,spritesheetAsset:c5,squaredDistanceToLineSegment:_c,stripVersion:b5,styleAttributes:h1,testImageFormat:jA,testVideoFormat:Fp,textStyleToCSS:kG,textureBit:$G,textureBitGl:HG,textureFrom:i5,tilingBit:z7,tilingBitGl:W7,toFillStyle:ka,toLocalGlobalMixin:Y8,toStrokeStyle:Hc,transformVertices:NA,triangulateWithHoles:GA,uboSyncFunctionsSTD40:CS,uboSyncFunctionsWGSL:e9,uid:Lr,uniformParsers:Ua,unpremultiplyAlpha:vge,unsafeEvalSupported:LA,updateLocalTransform:Zge,updateQuadBounds:gA,updateRenderGroupTransform:B9,updateRenderGroupTransforms:VS,updateTextBounds:wd,updateTransformAndChildren:$S,updateTransformBackwards:xp,updateWorldTransform:Qge,v8_0_0:Gt,v8_3_4:C8,validFormats:Ed,validateRenderables:P9,vertexGPUTemplate:w6,vertexGlTemplate:I6,vkFormatToGPUFormat:jF,warn:Rt,webworkerExt:y8,wrapModeToGlAddress:Zh},Symbol.toStringTag,{value:"Module"}));var iy={exports:{}},sy={},_U;function to(){return _U||(_U=1,function(t){var e=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function r(a,n){return Object.prototype.hasOwnProperty.call(a,n)}t.assign=function(a){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var o=n.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var u in o)r(o,u)&&(a[u]=o[u])}}return a},t.shrinkBuf=function(a,n){return a.length===n?a:a.subarray?a.subarray(0,n):(a.length=n,a)};var i={arraySet:function(a,n,o,u,c){if(n.subarray&&a.subarray){a.set(n.subarray(o,o+u),c);return}for(var f=0;f<u;f++)a[c+f]=n[o+f]},flattenChunks:function(a){var n,o,u,c,f,h;for(u=0,n=0,o=a.length;n<o;n++)u+=a[n].length;for(h=new Uint8Array(u),c=0,n=0,o=a.length;n<o;n++)f=a[n],h.set(f,c),c+=f.length;return h}},s={arraySet:function(a,n,o,u,c){for(var f=0;f<u;f++)a[c+f]=n[o+f]},flattenChunks:function(a){return[].concat.apply([],a)}};t.setTyped=function(a){a?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,i)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(e)}(sy)),sy}var _u={},rs={},Eo={},bU;function Tme(){if(bU)return Eo;bU=1;var t=to(),e=4,r=0,i=1,s=2;function a(U){for(var K=U.length;--K>=0;)U[K]=0}var n=0,o=1,u=2,c=3,f=258,h=29,p=256,g=p+1+h,m=30,T=19,x=2*g+1,v=15,y=16,R=7,A=256,k=16,b=17,C=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=512,Z=new Array((g+2)*2);a(Z);var ce=new Array(m*2);a(ce);var Y=new Array(G);a(Y);var J=new Array(f-c+1);a(J);var ie=new Array(h);a(ie);var le=new Array(m);a(le);function Te(U,K,te,ge,re){this.static_tree=U,this.extra_bits=K,this.extra_base=te,this.elems=ge,this.max_length=re,this.has_stree=U&&U.length}var Me,Ee,se;function me(U,K){this.dyn_tree=U,this.max_code=0,this.stat_desc=K}function Xe(U){return U<256?Y[U]:Y[256+(U>>>7)]}function nt(U,K){U.pending_buf[U.pending++]=K&255,U.pending_buf[U.pending++]=K>>>8&255}function ot(U,K,te){U.bi_valid>y-te?(U.bi_buf|=K<<U.bi_valid&65535,nt(U,U.bi_buf),U.bi_buf=K>>y-U.bi_valid,U.bi_valid+=te-y):(U.bi_buf|=K<<U.bi_valid&65535,U.bi_valid+=te)}function pt(U,K,te){ot(U,te[K*2],te[K*2+1])}function qe(U,K){var te=0;do te|=U&1,U>>>=1,te<<=1;while(--K>0);return te>>>1}function Ye(U){U.bi_valid===16?(nt(U,U.bi_buf),U.bi_buf=0,U.bi_valid=0):U.bi_valid>=8&&(U.pending_buf[U.pending++]=U.bi_buf&255,U.bi_buf>>=8,U.bi_valid-=8)}function at(U,K){var te=K.dyn_tree,ge=K.max_code,re=K.stat_desc.static_tree,H=K.stat_desc.has_stree,P=K.stat_desc.extra_bits,Ae=K.stat_desc.extra_base,Ne=K.stat_desc.max_length,S,D,N,I,q,fe,ze=0;for(I=0;I<=v;I++)U.bl_count[I]=0;for(te[U.heap[U.heap_max]*2+1]=0,S=U.heap_max+1;S<x;S++)D=U.heap[S],I=te[te[D*2+1]*2+1]+1,I>Ne&&(I=Ne,ze++),te[D*2+1]=I,!(D>ge)&&(U.bl_count[I]++,q=0,D>=Ae&&(q=P[D-Ae]),fe=te[D*2],U.opt_len+=fe*(I+q),H&&(U.static_len+=fe*(re[D*2+1]+q)));if(ze!==0){do{for(I=Ne-1;U.bl_count[I]===0;)I--;U.bl_count[I]--,U.bl_count[I+1]+=2,U.bl_count[Ne]--,ze-=2}while(ze>0);for(I=Ne;I!==0;I--)for(D=U.bl_count[I];D!==0;)N=U.heap[--S],!(N>ge)&&(te[N*2+1]!==I&&(U.opt_len+=(I-te[N*2+1])*te[N*2],te[N*2+1]=I),D--)}}function lt(U,K,te){var ge=new Array(v+1),re=0,H,P;for(H=1;H<=v;H++)ge[H]=re=re+te[H-1]<<1;for(P=0;P<=K;P++){var Ae=U[P*2+1];Ae!==0&&(U[P*2]=qe(ge[Ae]++,Ae))}}function j(){var U,K,te,ge,re,H=new Array(v+1);for(te=0,ge=0;ge<h-1;ge++)for(ie[ge]=te,U=0;U<1<<w[ge];U++)J[te++]=ge;for(J[te-1]=ge,re=0,ge=0;ge<16;ge++)for(le[ge]=re,U=0;U<1<<O[ge];U++)Y[re++]=ge;for(re>>=7;ge<m;ge++)for(le[ge]=re<<7,U=0;U<1<<O[ge]-7;U++)Y[256+re++]=ge;for(K=0;K<=v;K++)H[K]=0;for(U=0;U<=143;)Z[U*2+1]=8,U++,H[8]++;for(;U<=255;)Z[U*2+1]=9,U++,H[9]++;for(;U<=279;)Z[U*2+1]=7,U++,H[7]++;for(;U<=287;)Z[U*2+1]=8,U++,H[8]++;for(lt(Z,g+1,H),U=0;U<m;U++)ce[U*2+1]=5,ce[U*2]=qe(U,5);Me=new Te(Z,w,p+1,g,v),Ee=new Te(ce,O,0,m,v),se=new Te(new Array(0),M,0,T,R)}function ue(U){var K;for(K=0;K<g;K++)U.dyn_ltree[K*2]=0;for(K=0;K<m;K++)U.dyn_dtree[K*2]=0;for(K=0;K<T;K++)U.bl_tree[K*2]=0;U.dyn_ltree[A*2]=1,U.opt_len=U.static_len=0,U.last_lit=U.matches=0}function oe(U){U.bi_valid>8?nt(U,U.bi_buf):U.bi_valid>0&&(U.pending_buf[U.pending++]=U.bi_buf),U.bi_buf=0,U.bi_valid=0}function be(U,K,te,ge){oe(U),nt(U,te),nt(U,~te),t.arraySet(U.pending_buf,U.window,K,te,U.pending),U.pending+=te}function Le(U,K,te,ge){var re=K*2,H=te*2;return U[re]<U[H]||U[re]===U[H]&&ge[K]<=ge[te]}function ye(U,K,te){for(var ge=U.heap[te],re=te<<1;re<=U.heap_len&&(re<U.heap_len&&Le(K,U.heap[re+1],U.heap[re],U.depth)&&re++,!Le(K,ge,U.heap[re],U.depth));)U.heap[te]=U.heap[re],te=re,re<<=1;U.heap[te]=ge}function De(U,K,te){var ge,re,H=0,P,Ae;if(U.last_lit!==0)do ge=U.pending_buf[U.d_buf+H*2]<<8|U.pending_buf[U.d_buf+H*2+1],re=U.pending_buf[U.l_buf+H],H++,ge===0?pt(U,re,K):(P=J[re],pt(U,P+p+1,K),Ae=w[P],Ae!==0&&(re-=ie[P],ot(U,re,Ae)),ge--,P=Xe(ge),pt(U,P,te),Ae=O[P],Ae!==0&&(ge-=le[P],ot(U,ge,Ae)));while(H<U.last_lit);pt(U,A,K)}function ke(U,K){var te=K.dyn_tree,ge=K.stat_desc.static_tree,re=K.stat_desc.has_stree,H=K.stat_desc.elems,P,Ae,Ne=-1,S;for(U.heap_len=0,U.heap_max=x,P=0;P<H;P++)te[P*2]!==0?(U.heap[++U.heap_len]=Ne=P,U.depth[P]=0):te[P*2+1]=0;for(;U.heap_len<2;)S=U.heap[++U.heap_len]=Ne<2?++Ne:0,te[S*2]=1,U.depth[S]=0,U.opt_len--,re&&(U.static_len-=ge[S*2+1]);for(K.max_code=Ne,P=U.heap_len>>1;P>=1;P--)ye(U,te,P);S=H;do P=U.heap[1],U.heap[1]=U.heap[U.heap_len--],ye(U,te,1),Ae=U.heap[1],U.heap[--U.heap_max]=P,U.heap[--U.heap_max]=Ae,te[S*2]=te[P*2]+te[Ae*2],U.depth[S]=(U.depth[P]>=U.depth[Ae]?U.depth[P]:U.depth[Ae])+1,te[P*2+1]=te[Ae*2+1]=S,U.heap[1]=S++,ye(U,te,1);while(U.heap_len>=2);U.heap[--U.heap_max]=U.heap[1],at(U,K),lt(te,Ne,U.bl_count)}function z(U,K,te){var ge,re=-1,H,P=K[0*2+1],Ae=0,Ne=7,S=4;for(P===0&&(Ne=138,S=3),K[(te+1)*2+1]=65535,ge=0;ge<=te;ge++)H=P,P=K[(ge+1)*2+1],!(++Ae<Ne&&H===P)&&(Ae<S?U.bl_tree[H*2]+=Ae:H!==0?(H!==re&&U.bl_tree[H*2]++,U.bl_tree[k*2]++):Ae<=10?U.bl_tree[b*2]++:U.bl_tree[C*2]++,Ae=0,re=H,P===0?(Ne=138,S=3):H===P?(Ne=6,S=3):(Ne=7,S=4))}function X(U,K,te){var ge,re=-1,H,P=K[0*2+1],Ae=0,Ne=7,S=4;for(P===0&&(Ne=138,S=3),ge=0;ge<=te;ge++)if(H=P,P=K[(ge+1)*2+1],!(++Ae<Ne&&H===P)){if(Ae<S)do pt(U,H,U.bl_tree);while(--Ae!==0);else H!==0?(H!==re&&(pt(U,H,U.bl_tree),Ae--),pt(U,k,U.bl_tree),ot(U,Ae-3,2)):Ae<=10?(pt(U,b,U.bl_tree),ot(U,Ae-3,3)):(pt(U,C,U.bl_tree),ot(U,Ae-11,7));Ae=0,re=H,P===0?(Ne=138,S=3):H===P?(Ne=6,S=3):(Ne=7,S=4)}}function _e(U){var K;for(z(U,U.dyn_ltree,U.l_desc.max_code),z(U,U.dyn_dtree,U.d_desc.max_code),ke(U,U.bl_desc),K=T-1;K>=3&&U.bl_tree[$[K]*2+1]===0;K--);return U.opt_len+=3*(K+1)+5+5+4,K}function Ie(U,K,te,ge){var re;for(ot(U,K-257,5),ot(U,te-1,5),ot(U,ge-4,4),re=0;re<ge;re++)ot(U,U.bl_tree[$[re]*2+1],3);X(U,U.dyn_ltree,K-1),X(U,U.dyn_dtree,te-1)}function Ze(U){var K=4093624447,te;for(te=0;te<=31;te++,K>>>=1)if(K&1&&U.dyn_ltree[te*2]!==0)return r;if(U.dyn_ltree[9*2]!==0||U.dyn_ltree[10*2]!==0||U.dyn_ltree[13*2]!==0)return i;for(te=32;te<p;te++)if(U.dyn_ltree[te*2]!==0)return i;return r}var Ve=!1;function Ce(U){Ve||(j(),Ve=!0),U.l_desc=new me(U.dyn_ltree,Me),U.d_desc=new me(U.dyn_dtree,Ee),U.bl_desc=new me(U.bl_tree,se),U.bi_buf=0,U.bi_valid=0,ue(U)}function Oe(U,K,te,ge){ot(U,(n<<1)+(ge?1:0),3),be(U,K,te)}function st(U){ot(U,o<<1,3),pt(U,A,Z),Ye(U)}function ae(U,K,te,ge){var re,H,P=0;U.level>0?(U.strm.data_type===s&&(U.strm.data_type=Ze(U)),ke(U,U.l_desc),ke(U,U.d_desc),P=_e(U),re=U.opt_len+3+7>>>3,H=U.static_len+3+7>>>3,H<=re&&(re=H)):re=H=te+5,te+4<=re&&K!==-1?Oe(U,K,te,ge):U.strategy===e||H===re?(ot(U,(o<<1)+(ge?1:0),3),De(U,Z,ce)):(ot(U,(u<<1)+(ge?1:0),3),Ie(U,U.l_desc.max_code+1,U.d_desc.max_code+1,P+1),De(U,U.dyn_ltree,U.dyn_dtree)),ue(U),ge&&oe(U)}function ne(U,K,te){return U.pending_buf[U.d_buf+U.last_lit*2]=K>>>8&255,U.pending_buf[U.d_buf+U.last_lit*2+1]=K&255,U.pending_buf[U.l_buf+U.last_lit]=te&255,U.last_lit++,K===0?U.dyn_ltree[te*2]++:(U.matches++,K--,U.dyn_ltree[(J[te]+p+1)*2]++,U.dyn_dtree[Xe(K)*2]++),U.last_lit===U.lit_bufsize-1}return Eo._tr_init=Ce,Eo._tr_stored_block=Oe,Eo._tr_flush_block=ae,Eo._tr_tally=ne,Eo._tr_align=st,Eo}var ay,xU;function LK(){if(xU)return ay;xU=1;function t(e,r,i,s){for(var a=e&65535|0,n=e>>>16&65535|0,o=0;i!==0;){o=i>2e3?2e3:i,i-=o;do a=a+r[s++]|0,n=n+a|0;while(--o);a%=65521,n%=65521}return a|n<<16|0}return ay=t,ay}var oy,vU;function IK(){if(vU)return oy;vU=1;function t(){for(var i,s=[],a=0;a<256;a++){i=a;for(var n=0;n<8;n++)i=i&1?3988292384^i>>>1:i>>>1;s[a]=i}return s}var e=t();function r(i,s,a,n){var o=e,u=n+a;i^=-1;for(var c=n;c<u;c++)i=i>>>8^o[(i^s[c])&255];return i^-1}return oy=r,oy}var uy,EU;function T2(){return EU||(EU=1,uy={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),uy}var yU;function Ame(){if(yU)return rs;yU=1;var t=to(),e=Tme(),r=LK(),i=IK(),s=T2(),a=0,n=1,o=3,u=4,c=5,f=0,h=1,p=-2,g=-3,m=-5,T=-1,x=1,v=2,y=3,R=4,A=0,k=2,b=8,C=9,w=15,O=8,M=29,$=256,G=$+1+M,Z=30,ce=19,Y=2*G+1,J=15,ie=3,le=258,Te=le+ie+1,Me=32,Ee=42,se=69,me=73,Xe=91,nt=103,ot=113,pt=666,qe=1,Ye=2,at=3,lt=4,j=3;function ue(S,D){return S.msg=s[D],D}function oe(S){return(S<<1)-(S>4?9:0)}function be(S){for(var D=S.length;--D>=0;)S[D]=0}function Le(S){var D=S.state,N=D.pending;N>S.avail_out&&(N=S.avail_out),N!==0&&(t.arraySet(S.output,D.pending_buf,D.pending_out,N,S.next_out),S.next_out+=N,D.pending_out+=N,S.total_out+=N,S.avail_out-=N,D.pending-=N,D.pending===0&&(D.pending_out=0))}function ye(S,D){e._tr_flush_block(S,S.block_start>=0?S.block_start:-1,S.strstart-S.block_start,D),S.block_start=S.strstart,Le(S.strm)}function De(S,D){S.pending_buf[S.pending++]=D}function ke(S,D){S.pending_buf[S.pending++]=D>>>8&255,S.pending_buf[S.pending++]=D&255}function z(S,D,N,I){var q=S.avail_in;return q>I&&(q=I),q===0?0:(S.avail_in-=q,t.arraySet(D,S.input,S.next_in,q,N),S.state.wrap===1?S.adler=r(S.adler,D,q,N):S.state.wrap===2&&(S.adler=i(S.adler,D,q,N)),S.next_in+=q,S.total_in+=q,q)}function X(S,D){var N=S.max_chain_length,I=S.strstart,q,fe,ze=S.prev_length,Qe=S.nice_match,it=S.strstart>S.w_size-Te?S.strstart-(S.w_size-Te):0,At=S.window,Br=S.w_mask,ft=S.prev,Ct=S.strstart+le,wt=At[I+ze-1],ir=At[I+ze];S.prev_length>=S.good_match&&(N>>=2),Qe>S.lookahead&&(Qe=S.lookahead);do if(q=D,!(At[q+ze]!==ir||At[q+ze-1]!==wt||At[q]!==At[I]||At[++q]!==At[I+1])){I+=2,q++;do;while(At[++I]===At[++q]&&At[++I]===At[++q]&&At[++I]===At[++q]&&At[++I]===At[++q]&&At[++I]===At[++q]&&At[++I]===At[++q]&&At[++I]===At[++q]&&At[++I]===At[++q]&&I<Ct);if(fe=le-(Ct-I),I=Ct-le,fe>ze){if(S.match_start=D,ze=fe,fe>=Qe)break;wt=At[I+ze-1],ir=At[I+ze]}}while((D=ft[D&Br])>it&&--N!==0);return ze<=S.lookahead?ze:S.lookahead}function _e(S){var D=S.w_size,N,I,q,fe,ze;do{if(fe=S.window_size-S.lookahead-S.strstart,S.strstart>=D+(D-Te)){t.arraySet(S.window,S.window,D,D,0),S.match_start-=D,S.strstart-=D,S.block_start-=D,I=S.hash_size,N=I;do q=S.head[--N],S.head[N]=q>=D?q-D:0;while(--I);I=D,N=I;do q=S.prev[--N],S.prev[N]=q>=D?q-D:0;while(--I);fe+=D}if(S.strm.avail_in===0)break;if(I=z(S.strm,S.window,S.strstart+S.lookahead,fe),S.lookahead+=I,S.lookahead+S.insert>=ie)for(ze=S.strstart-S.insert,S.ins_h=S.window[ze],S.ins_h=(S.ins_h<<S.hash_shift^S.window[ze+1])&S.hash_mask;S.insert&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[ze+ie-1])&S.hash_mask,S.prev[ze&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=ze,ze++,S.insert--,!(S.lookahead+S.insert<ie)););}while(S.lookahead<Te&&S.strm.avail_in!==0)}function Ie(S,D){var N=65535;for(N>S.pending_buf_size-5&&(N=S.pending_buf_size-5);;){if(S.lookahead<=1){if(_e(S),S.lookahead===0&&D===a)return qe;if(S.lookahead===0)break}S.strstart+=S.lookahead,S.lookahead=0;var I=S.block_start+N;if((S.strstart===0||S.strstart>=I)&&(S.lookahead=S.strstart-I,S.strstart=I,ye(S,!1),S.strm.avail_out===0)||S.strstart-S.block_start>=S.w_size-Te&&(ye(S,!1),S.strm.avail_out===0))return qe}return S.insert=0,D===u?(ye(S,!0),S.strm.avail_out===0?at:lt):(S.strstart>S.block_start&&(ye(S,!1),S.strm.avail_out===0),qe)}function Ze(S,D){for(var N,I;;){if(S.lookahead<Te){if(_e(S),S.lookahead<Te&&D===a)return qe;if(S.lookahead===0)break}if(N=0,S.lookahead>=ie&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+ie-1])&S.hash_mask,N=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),N!==0&&S.strstart-N<=S.w_size-Te&&(S.match_length=X(S,N)),S.match_length>=ie)if(I=e._tr_tally(S,S.strstart-S.match_start,S.match_length-ie),S.lookahead-=S.match_length,S.match_length<=S.max_lazy_match&&S.lookahead>=ie){S.match_length--;do S.strstart++,S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+ie-1])&S.hash_mask,N=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart;while(--S.match_length!==0);S.strstart++}else S.strstart+=S.match_length,S.match_length=0,S.ins_h=S.window[S.strstart],S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+1])&S.hash_mask;else I=e._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++;if(I&&(ye(S,!1),S.strm.avail_out===0))return qe}return S.insert=S.strstart<ie-1?S.strstart:ie-1,D===u?(ye(S,!0),S.strm.avail_out===0?at:lt):S.last_lit&&(ye(S,!1),S.strm.avail_out===0)?qe:Ye}function Ve(S,D){for(var N,I,q;;){if(S.lookahead<Te){if(_e(S),S.lookahead<Te&&D===a)return qe;if(S.lookahead===0)break}if(N=0,S.lookahead>=ie&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+ie-1])&S.hash_mask,N=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),S.prev_length=S.match_length,S.prev_match=S.match_start,S.match_length=ie-1,N!==0&&S.prev_length<S.max_lazy_match&&S.strstart-N<=S.w_size-Te&&(S.match_length=X(S,N),S.match_length<=5&&(S.strategy===x||S.match_length===ie&&S.strstart-S.match_start>4096)&&(S.match_length=ie-1)),S.prev_length>=ie&&S.match_length<=S.prev_length){q=S.strstart+S.lookahead-ie,I=e._tr_tally(S,S.strstart-1-S.prev_match,S.prev_length-ie),S.lookahead-=S.prev_length-1,S.prev_length-=2;do++S.strstart<=q&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+ie-1])&S.hash_mask,N=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart);while(--S.prev_length!==0);if(S.match_available=0,S.match_length=ie-1,S.strstart++,I&&(ye(S,!1),S.strm.avail_out===0))return qe}else if(S.match_available){if(I=e._tr_tally(S,0,S.window[S.strstart-1]),I&&ye(S,!1),S.strstart++,S.lookahead--,S.strm.avail_out===0)return qe}else S.match_available=1,S.strstart++,S.lookahead--}return S.match_available&&(I=e._tr_tally(S,0,S.window[S.strstart-1]),S.match_available=0),S.insert=S.strstart<ie-1?S.strstart:ie-1,D===u?(ye(S,!0),S.strm.avail_out===0?at:lt):S.last_lit&&(ye(S,!1),S.strm.avail_out===0)?qe:Ye}function Ce(S,D){for(var N,I,q,fe,ze=S.window;;){if(S.lookahead<=le){if(_e(S),S.lookahead<=le&&D===a)return qe;if(S.lookahead===0)break}if(S.match_length=0,S.lookahead>=ie&&S.strstart>0&&(q=S.strstart-1,I=ze[q],I===ze[++q]&&I===ze[++q]&&I===ze[++q])){fe=S.strstart+le;do;while(I===ze[++q]&&I===ze[++q]&&I===ze[++q]&&I===ze[++q]&&I===ze[++q]&&I===ze[++q]&&I===ze[++q]&&I===ze[++q]&&q<fe);S.match_length=le-(fe-q),S.match_length>S.lookahead&&(S.match_length=S.lookahead)}if(S.match_length>=ie?(N=e._tr_tally(S,1,S.match_length-ie),S.lookahead-=S.match_length,S.strstart+=S.match_length,S.match_length=0):(N=e._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++),N&&(ye(S,!1),S.strm.avail_out===0))return qe}return S.insert=0,D===u?(ye(S,!0),S.strm.avail_out===0?at:lt):S.last_lit&&(ye(S,!1),S.strm.avail_out===0)?qe:Ye}function Oe(S,D){for(var N;;){if(S.lookahead===0&&(_e(S),S.lookahead===0)){if(D===a)return qe;break}if(S.match_length=0,N=e._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++,N&&(ye(S,!1),S.strm.avail_out===0))return qe}return S.insert=0,D===u?(ye(S,!0),S.strm.avail_out===0?at:lt):S.last_lit&&(ye(S,!1),S.strm.avail_out===0)?qe:Ye}function st(S,D,N,I,q){this.good_length=S,this.max_lazy=D,this.nice_length=N,this.max_chain=I,this.func=q}var ae;ae=[new st(0,0,0,0,Ie),new st(4,4,8,4,Ze),new st(4,5,16,8,Ze),new st(4,6,32,32,Ze),new st(4,4,16,16,Ve),new st(8,16,32,32,Ve),new st(8,16,128,128,Ve),new st(8,32,128,256,Ve),new st(32,128,258,1024,Ve),new st(32,258,258,4096,Ve)];function ne(S){S.window_size=2*S.w_size,be(S.head),S.max_lazy_match=ae[S.level].max_lazy,S.good_match=ae[S.level].good_length,S.nice_match=ae[S.level].nice_length,S.max_chain_length=ae[S.level].max_chain,S.strstart=0,S.block_start=0,S.lookahead=0,S.insert=0,S.match_length=S.prev_length=ie-1,S.match_available=0,S.ins_h=0}function U(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16(Y*2),this.dyn_dtree=new t.Buf16((2*Z+1)*2),this.bl_tree=new t.Buf16((2*ce+1)*2),be(this.dyn_ltree),be(this.dyn_dtree),be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(J+1),this.heap=new t.Buf16(2*G+1),be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*G+1),be(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function K(S){var D;return!S||!S.state?ue(S,p):(S.total_in=S.total_out=0,S.data_type=k,D=S.state,D.pending=0,D.pending_out=0,D.wrap<0&&(D.wrap=-D.wrap),D.status=D.wrap?Ee:ot,S.adler=D.wrap===2?0:1,D.last_flush=a,e._tr_init(D),f)}function te(S){var D=K(S);return D===f&&ne(S.state),D}function ge(S,D){return!S||!S.state||S.state.wrap!==2?p:(S.state.gzhead=D,f)}function re(S,D,N,I,q,fe){if(!S)return p;var ze=1;if(D===T&&(D=6),I<0?(ze=0,I=-I):I>15&&(ze=2,I-=16),q<1||q>C||N!==b||I<8||I>15||D<0||D>9||fe<0||fe>R)return ue(S,p);I===8&&(I=9);var Qe=new U;return S.state=Qe,Qe.strm=S,Qe.wrap=ze,Qe.gzhead=null,Qe.w_bits=I,Qe.w_size=1<<Qe.w_bits,Qe.w_mask=Qe.w_size-1,Qe.hash_bits=q+7,Qe.hash_size=1<<Qe.hash_bits,Qe.hash_mask=Qe.hash_size-1,Qe.hash_shift=~~((Qe.hash_bits+ie-1)/ie),Qe.window=new t.Buf8(Qe.w_size*2),Qe.head=new t.Buf16(Qe.hash_size),Qe.prev=new t.Buf16(Qe.w_size),Qe.lit_bufsize=1<<q+6,Qe.pending_buf_size=Qe.lit_bufsize*4,Qe.pending_buf=new t.Buf8(Qe.pending_buf_size),Qe.d_buf=1*Qe.lit_bufsize,Qe.l_buf=3*Qe.lit_bufsize,Qe.level=D,Qe.strategy=fe,Qe.method=N,te(S)}function H(S,D){return re(S,D,b,w,O,A)}function P(S,D){var N,I,q,fe;if(!S||!S.state||D>c||D<0)return S?ue(S,p):p;if(I=S.state,!S.output||!S.input&&S.avail_in!==0||I.status===pt&&D!==u)return ue(S,S.avail_out===0?m:p);if(I.strm=S,N=I.last_flush,I.last_flush=D,I.status===Ee)if(I.wrap===2)S.adler=0,De(I,31),De(I,139),De(I,8),I.gzhead?(De(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),De(I,I.gzhead.time&255),De(I,I.gzhead.time>>8&255),De(I,I.gzhead.time>>16&255),De(I,I.gzhead.time>>24&255),De(I,I.level===9?2:I.strategy>=v||I.level<2?4:0),De(I,I.gzhead.os&255),I.gzhead.extra&&I.gzhead.extra.length&&(De(I,I.gzhead.extra.length&255),De(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(S.adler=i(S.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=se):(De(I,0),De(I,0),De(I,0),De(I,0),De(I,0),De(I,I.level===9?2:I.strategy>=v||I.level<2?4:0),De(I,j),I.status=ot);else{var ze=b+(I.w_bits-8<<4)<<8,Qe=-1;I.strategy>=v||I.level<2?Qe=0:I.level<6?Qe=1:I.level===6?Qe=2:Qe=3,ze|=Qe<<6,I.strstart!==0&&(ze|=Me),ze+=31-ze%31,I.status=ot,ke(I,ze),I.strstart!==0&&(ke(I,S.adler>>>16),ke(I,S.adler&65535)),S.adler=1}if(I.status===se)if(I.gzhead.extra){for(q=I.pending;I.gzindex<(I.gzhead.extra.length&65535)&&!(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>q&&(S.adler=i(S.adler,I.pending_buf,I.pending-q,q)),Le(S),q=I.pending,I.pending===I.pending_buf_size));)De(I,I.gzhead.extra[I.gzindex]&255),I.gzindex++;I.gzhead.hcrc&&I.pending>q&&(S.adler=i(S.adler,I.pending_buf,I.pending-q,q)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=me)}else I.status=me;if(I.status===me)if(I.gzhead.name){q=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>q&&(S.adler=i(S.adler,I.pending_buf,I.pending-q,q)),Le(S),q=I.pending,I.pending===I.pending_buf_size)){fe=1;break}I.gzindex<I.gzhead.name.length?fe=I.gzhead.name.charCodeAt(I.gzindex++)&255:fe=0,De(I,fe)}while(fe!==0);I.gzhead.hcrc&&I.pending>q&&(S.adler=i(S.adler,I.pending_buf,I.pending-q,q)),fe===0&&(I.gzindex=0,I.status=Xe)}else I.status=Xe;if(I.status===Xe)if(I.gzhead.comment){q=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>q&&(S.adler=i(S.adler,I.pending_buf,I.pending-q,q)),Le(S),q=I.pending,I.pending===I.pending_buf_size)){fe=1;break}I.gzindex<I.gzhead.comment.length?fe=I.gzhead.comment.charCodeAt(I.gzindex++)&255:fe=0,De(I,fe)}while(fe!==0);I.gzhead.hcrc&&I.pending>q&&(S.adler=i(S.adler,I.pending_buf,I.pending-q,q)),fe===0&&(I.status=nt)}else I.status=nt;if(I.status===nt&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&Le(S),I.pending+2<=I.pending_buf_size&&(De(I,S.adler&255),De(I,S.adler>>8&255),S.adler=0,I.status=ot)):I.status=ot),I.pending!==0){if(Le(S),S.avail_out===0)return I.last_flush=-1,f}else if(S.avail_in===0&&oe(D)<=oe(N)&&D!==u)return ue(S,m);if(I.status===pt&&S.avail_in!==0)return ue(S,m);if(S.avail_in!==0||I.lookahead!==0||D!==a&&I.status!==pt){var it=I.strategy===v?Oe(I,D):I.strategy===y?Ce(I,D):ae[I.level].func(I,D);if((it===at||it===lt)&&(I.status=pt),it===qe||it===at)return S.avail_out===0&&(I.last_flush=-1),f;if(it===Ye&&(D===n?e._tr_align(I):D!==c&&(e._tr_stored_block(I,0,0,!1),D===o&&(be(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),Le(S),S.avail_out===0))return I.last_flush=-1,f}return D!==u?f:I.wrap<=0?h:(I.wrap===2?(De(I,S.adler&255),De(I,S.adler>>8&255),De(I,S.adler>>16&255),De(I,S.adler>>24&255),De(I,S.total_in&255),De(I,S.total_in>>8&255),De(I,S.total_in>>16&255),De(I,S.total_in>>24&255)):(ke(I,S.adler>>>16),ke(I,S.adler&65535)),Le(S),I.wrap>0&&(I.wrap=-I.wrap),I.pending!==0?f:h)}function Ae(S){var D;return!S||!S.state?p:(D=S.state.status,D!==Ee&&D!==se&&D!==me&&D!==Xe&&D!==nt&&D!==ot&&D!==pt?ue(S,p):(S.state=null,D===ot?ue(S,g):f))}function Ne(S,D){var N=D.length,I,q,fe,ze,Qe,it,At,Br;if(!S||!S.state||(I=S.state,ze=I.wrap,ze===2||ze===1&&I.status!==Ee||I.lookahead))return p;for(ze===1&&(S.adler=r(S.adler,D,N,0)),I.wrap=0,N>=I.w_size&&(ze===0&&(be(I.head),I.strstart=0,I.block_start=0,I.insert=0),Br=new t.Buf8(I.w_size),t.arraySet(Br,D,N-I.w_size,I.w_size,0),D=Br,N=I.w_size),Qe=S.avail_in,it=S.next_in,At=S.input,S.avail_in=N,S.next_in=0,S.input=D,_e(I);I.lookahead>=ie;){q=I.strstart,fe=I.lookahead-(ie-1);do I.ins_h=(I.ins_h<<I.hash_shift^I.window[q+ie-1])&I.hash_mask,I.prev[q&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=q,q++;while(--fe);I.strstart=q,I.lookahead=ie-1,_e(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=ie-1,I.match_available=0,S.next_in=it,S.input=At,S.avail_in=Qe,I.wrap=ze,f}return rs.deflateInit=H,rs.deflateInit2=re,rs.deflateReset=te,rs.deflateResetKeep=K,rs.deflateSetHeader=ge,rs.deflate=P,rs.deflateEnd=Ae,rs.deflateSetDictionary=Ne,rs.deflateInfo="pako deflate (from Nodeca project)",rs}var yo={},TU;function BK(){if(TU)return yo;TU=1;var t=to(),e=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var i=new t.Buf8(256),s=0;s<256;s++)i[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;i[254]=i[254]=1,yo.string2buf=function(n){var o,u,c,f,h,p=n.length,g=0;for(f=0;f<p;f++)u=n.charCodeAt(f),(u&64512)===55296&&f+1<p&&(c=n.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(o=new t.Buf8(g),h=0,f=0;h<g;f++)u=n.charCodeAt(f),(u&64512)===55296&&f+1<p&&(c=n.charCodeAt(f+1),(c&64512)===56320&&(u=65536+(u-55296<<10)+(c-56320),f++)),u<128?o[h++]=u:u<2048?(o[h++]=192|u>>>6,o[h++]=128|u&63):u<65536?(o[h++]=224|u>>>12,o[h++]=128|u>>>6&63,o[h++]=128|u&63):(o[h++]=240|u>>>18,o[h++]=128|u>>>12&63,o[h++]=128|u>>>6&63,o[h++]=128|u&63);return o};function a(n,o){if(o<65534&&(n.subarray&&r||!n.subarray&&e))return String.fromCharCode.apply(null,t.shrinkBuf(n,o));for(var u="",c=0;c<o;c++)u+=String.fromCharCode(n[c]);return u}return yo.buf2binstring=function(n){return a(n,n.length)},yo.binstring2buf=function(n){for(var o=new t.Buf8(n.length),u=0,c=o.length;u<c;u++)o[u]=n.charCodeAt(u);return o},yo.buf2string=function(n,o){var u,c,f,h,p=o||n.length,g=new Array(p*2);for(c=0,u=0;u<p;){if(f=n[u++],f<128){g[c++]=f;continue}if(h=i[f],h>4){g[c++]=65533,u+=h-1;continue}for(f&=h===2?31:h===3?15:7;h>1&&u<p;)f=f<<6|n[u++]&63,h--;if(h>1){g[c++]=65533;continue}f<65536?g[c++]=f:(f-=65536,g[c++]=55296|f>>10&1023,g[c++]=56320|f&1023)}return a(g,c)},yo.utf8border=function(n,o){var u;for(o=o||n.length,o>n.length&&(o=n.length),u=o-1;u>=0&&(n[u]&192)===128;)u--;return u<0||u===0?o:u+i[n[u]]>o?u:o},yo}var ly,AU;function PK(){if(AU)return ly;AU=1;function t(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return ly=t,ly}var SU;function Sme(){if(SU)return _u;SU=1;var t=Ame(),e=to(),r=BK(),i=T2(),s=PK(),a=Object.prototype.toString,n=0,o=4,u=0,c=1,f=2,h=-1,p=0,g=8;function m(y){if(!(this instanceof m))return new m(y);this.options=e.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},y||{});var R=this.options;R.raw&&R.windowBits>0?R.windowBits=-R.windowBits:R.gzip&&R.windowBits>0&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var A=t.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(A!==u)throw new Error(i[A]);if(R.header&&t.deflateSetHeader(this.strm,R.header),R.dictionary){var k;if(typeof R.dictionary=="string"?k=r.string2buf(R.dictionary):a.call(R.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(R.dictionary):k=R.dictionary,A=t.deflateSetDictionary(this.strm,k),A!==u)throw new Error(i[A]);this._dict_set=!0}}m.prototype.push=function(y,R){var A=this.strm,k=this.options.chunkSize,b,C;if(this.ended)return!1;C=R===~~R?R:R===!0?o:n,typeof y=="string"?A.input=r.string2buf(y):a.call(y)==="[object ArrayBuffer]"?A.input=new Uint8Array(y):A.input=y,A.next_in=0,A.avail_in=A.input.length;do{if(A.avail_out===0&&(A.output=new e.Buf8(k),A.next_out=0,A.avail_out=k),b=t.deflate(A,C),b!==c&&b!==u)return this.onEnd(b),this.ended=!0,!1;(A.avail_out===0||A.avail_in===0&&(C===o||C===f))&&(this.options.to==="string"?this.onData(r.buf2binstring(e.shrinkBuf(A.output,A.next_out))):this.onData(e.shrinkBuf(A.output,A.next_out)))}while((A.avail_in>0||A.avail_out===0)&&b!==c);return C===o?(b=t.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===u):(C===f&&(this.onEnd(u),A.avail_out=0),!0)},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg};function T(y,R){var A=new m(R);if(A.push(y,!0),A.err)throw A.msg||i[A.err];return A.result}function x(y,R){return R=R||{},R.raw=!0,T(y,R)}function v(y,R){return R=R||{},R.gzip=!0,T(y,R)}return _u.Deflate=m,_u.deflate=T,_u.deflateRaw=x,_u.gzip=v,_u}var bu={},Mi={},cy,RU;function Rme(){if(RU)return cy;RU=1;var t=30,e=12;return cy=function(i,s){var a,n,o,u,c,f,h,p,g,m,T,x,v,y,R,A,k,b,C,w,O,M,$,G,Z;a=i.state,n=i.next_in,G=i.input,o=n+(i.avail_in-5),u=i.next_out,Z=i.output,c=u-(s-i.avail_out),f=u+(i.avail_out-257),h=a.dmax,p=a.wsize,g=a.whave,m=a.wnext,T=a.window,x=a.hold,v=a.bits,y=a.lencode,R=a.distcode,A=(1<<a.lenbits)-1,k=(1<<a.distbits)-1;e:do{v<15&&(x+=G[n++]<<v,v+=8,x+=G[n++]<<v,v+=8),b=y[x&A];t:for(;;){if(C=b>>>24,x>>>=C,v-=C,C=b>>>16&255,C===0)Z[u++]=b&65535;else if(C&16){w=b&65535,C&=15,C&&(v<C&&(x+=G[n++]<<v,v+=8),w+=x&(1<<C)-1,x>>>=C,v-=C),v<15&&(x+=G[n++]<<v,v+=8,x+=G[n++]<<v,v+=8),b=R[x&k];r:for(;;){if(C=b>>>24,x>>>=C,v-=C,C=b>>>16&255,C&16){if(O=b&65535,C&=15,v<C&&(x+=G[n++]<<v,v+=8,v<C&&(x+=G[n++]<<v,v+=8)),O+=x&(1<<C)-1,O>h){i.msg="invalid distance too far back",a.mode=t;break e}if(x>>>=C,v-=C,C=u-c,O>C){if(C=O-C,C>g&&a.sane){i.msg="invalid distance too far back",a.mode=t;break e}if(M=0,$=T,m===0){if(M+=p-C,C<w){w-=C;do Z[u++]=T[M++];while(--C);M=u-O,$=Z}}else if(m<C){if(M+=p+m-C,C-=m,C<w){w-=C;do Z[u++]=T[M++];while(--C);if(M=0,m<w){C=m,w-=C;do Z[u++]=T[M++];while(--C);M=u-O,$=Z}}}else if(M+=m-C,C<w){w-=C;do Z[u++]=T[M++];while(--C);M=u-O,$=Z}for(;w>2;)Z[u++]=$[M++],Z[u++]=$[M++],Z[u++]=$[M++],w-=3;w&&(Z[u++]=$[M++],w>1&&(Z[u++]=$[M++]))}else{M=u-O;do Z[u++]=Z[M++],Z[u++]=Z[M++],Z[u++]=Z[M++],w-=3;while(w>2);w&&(Z[u++]=Z[M++],w>1&&(Z[u++]=Z[M++]))}}else if((C&64)===0){b=R[(b&65535)+(x&(1<<C)-1)];continue r}else{i.msg="invalid distance code",a.mode=t;break e}break}}else if((C&64)===0){b=y[(b&65535)+(x&(1<<C)-1)];continue t}else if(C&32){a.mode=e;break e}else{i.msg="invalid literal/length code",a.mode=t;break e}break}}while(n<o&&u<f);w=v>>3,n-=w,v-=w<<3,x&=(1<<v)-1,i.next_in=n,i.next_out=u,i.avail_in=n<o?5+(o-n):5-(n-o),i.avail_out=u<f?257+(f-u):257-(u-f),a.hold=x,a.bits=v},cy}var fy,CU;function Cme(){if(CU)return fy;CU=1;var t=to(),e=15,r=852,i=592,s=0,a=1,n=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return fy=function(p,g,m,T,x,v,y,R){var A=R.bits,k=0,b=0,C=0,w=0,O=0,M=0,$=0,G=0,Z=0,ce=0,Y,J,ie,le,Te,Me=null,Ee=0,se,me=new t.Buf16(e+1),Xe=new t.Buf16(e+1),nt=null,ot=0,pt,qe,Ye;for(k=0;k<=e;k++)me[k]=0;for(b=0;b<T;b++)me[g[m+b]]++;for(O=A,w=e;w>=1&&me[w]===0;w--);if(O>w&&(O=w),w===0)return x[v++]=1<<24|64<<16|0,x[v++]=1<<24|64<<16|0,R.bits=1,0;for(C=1;C<w&&me[C]===0;C++);for(O<C&&(O=C),G=1,k=1;k<=e;k++)if(G<<=1,G-=me[k],G<0)return-1;if(G>0&&(p===s||w!==1))return-1;for(Xe[1]=0,k=1;k<e;k++)Xe[k+1]=Xe[k]+me[k];for(b=0;b<T;b++)g[m+b]!==0&&(y[Xe[g[m+b]]++]=b);if(p===s?(Me=nt=y,se=19):p===a?(Me=o,Ee-=257,nt=u,ot-=257,se=256):(Me=c,nt=f,se=-1),ce=0,b=0,k=C,Te=v,M=O,$=0,ie=-1,Z=1<<O,le=Z-1,p===a&&Z>r||p===n&&Z>i)return 1;for(;;){pt=k-$,y[b]<se?(qe=0,Ye=y[b]):y[b]>se?(qe=nt[ot+y[b]],Ye=Me[Ee+y[b]]):(qe=96,Ye=0),Y=1<<k-$,J=1<<M,C=J;do J-=Y,x[Te+(ce>>$)+J]=pt<<24|qe<<16|Ye|0;while(J!==0);for(Y=1<<k-1;ce&Y;)Y>>=1;if(Y!==0?(ce&=Y-1,ce+=Y):ce=0,b++,--me[k]===0){if(k===w)break;k=g[m+y[b]]}if(k>O&&(ce&le)!==ie){for($===0&&($=O),Te+=C,M=k-$,G=1<<M;M+$<w&&(G-=me[M+$],!(G<=0));)M++,G<<=1;if(Z+=1<<M,p===a&&Z>r||p===n&&Z>i)return 1;ie=ce&le,x[ie]=O<<24|M<<16|Te-v|0}}return ce!==0&&(x[Te+ce]=k-$<<24|64<<16|0),R.bits=O,0},fy}var wU;function wme(){if(wU)return Mi;wU=1;var t=to(),e=LK(),r=IK(),i=Rme(),s=Cme(),a=0,n=1,o=2,u=4,c=5,f=6,h=0,p=1,g=2,m=-2,T=-3,x=-4,v=-5,y=8,R=1,A=2,k=3,b=4,C=5,w=6,O=7,M=8,$=9,G=10,Z=11,ce=12,Y=13,J=14,ie=15,le=16,Te=17,Me=18,Ee=19,se=20,me=21,Xe=22,nt=23,ot=24,pt=25,qe=26,Ye=27,at=28,lt=29,j=30,ue=31,oe=32,be=852,Le=592,ye=15,De=ye;function ke(re){return(re>>>24&255)+(re>>>8&65280)+((re&65280)<<8)+((re&255)<<24)}function z(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function X(re){var H;return!re||!re.state?m:(H=re.state,re.total_in=re.total_out=H.total=0,re.msg="",H.wrap&&(re.adler=H.wrap&1),H.mode=R,H.last=0,H.havedict=0,H.dmax=32768,H.head=null,H.hold=0,H.bits=0,H.lencode=H.lendyn=new t.Buf32(be),H.distcode=H.distdyn=new t.Buf32(Le),H.sane=1,H.back=-1,h)}function _e(re){var H;return!re||!re.state?m:(H=re.state,H.wsize=0,H.whave=0,H.wnext=0,X(re))}function Ie(re,H){var P,Ae;return!re||!re.state||(Ae=re.state,H<0?(P=0,H=-H):(P=(H>>4)+1,H<48&&(H&=15)),H&&(H<8||H>15))?m:(Ae.window!==null&&Ae.wbits!==H&&(Ae.window=null),Ae.wrap=P,Ae.wbits=H,_e(re))}function Ze(re,H){var P,Ae;return re?(Ae=new z,re.state=Ae,Ae.window=null,P=Ie(re,H),P!==h&&(re.state=null),P):m}function Ve(re){return Ze(re,De)}var Ce=!0,Oe,st;function ae(re){if(Ce){var H;for(Oe=new t.Buf32(512),st=new t.Buf32(32),H=0;H<144;)re.lens[H++]=8;for(;H<256;)re.lens[H++]=9;for(;H<280;)re.lens[H++]=7;for(;H<288;)re.lens[H++]=8;for(s(n,re.lens,0,288,Oe,0,re.work,{bits:9}),H=0;H<32;)re.lens[H++]=5;s(o,re.lens,0,32,st,0,re.work,{bits:5}),Ce=!1}re.lencode=Oe,re.lenbits=9,re.distcode=st,re.distbits=5}function ne(re,H,P,Ae){var Ne,S=re.state;return S.window===null&&(S.wsize=1<<S.wbits,S.wnext=0,S.whave=0,S.window=new t.Buf8(S.wsize)),Ae>=S.wsize?(t.arraySet(S.window,H,P-S.wsize,S.wsize,0),S.wnext=0,S.whave=S.wsize):(Ne=S.wsize-S.wnext,Ne>Ae&&(Ne=Ae),t.arraySet(S.window,H,P-Ae,Ne,S.wnext),Ae-=Ne,Ae?(t.arraySet(S.window,H,P-Ae,Ae,0),S.wnext=Ae,S.whave=S.wsize):(S.wnext+=Ne,S.wnext===S.wsize&&(S.wnext=0),S.whave<S.wsize&&(S.whave+=Ne))),0}function U(re,H){var P,Ae,Ne,S,D,N,I,q,fe,ze,Qe,it,At,Br,ft=0,Ct,wt,ir,sr,nn,Qr,St,kr,cr=new t.Buf8(4),Xr,Nr,Os=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!re||!re.state||!re.output||!re.input&&re.avail_in!==0)return m;P=re.state,P.mode===ce&&(P.mode=Y),D=re.next_out,Ne=re.output,I=re.avail_out,S=re.next_in,Ae=re.input,N=re.avail_in,q=P.hold,fe=P.bits,ze=N,Qe=I,kr=h;e:for(;;)switch(P.mode){case R:if(P.wrap===0){P.mode=Y;break}for(;fe<16;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if(P.wrap&2&&q===35615){P.check=0,cr[0]=q&255,cr[1]=q>>>8&255,P.check=r(P.check,cr,2,0),q=0,fe=0,P.mode=A;break}if(P.flags=0,P.head&&(P.head.done=!1),!(P.wrap&1)||(((q&255)<<8)+(q>>8))%31){re.msg="incorrect header check",P.mode=j;break}if((q&15)!==y){re.msg="unknown compression method",P.mode=j;break}if(q>>>=4,fe-=4,St=(q&15)+8,P.wbits===0)P.wbits=St;else if(St>P.wbits){re.msg="invalid window size",P.mode=j;break}P.dmax=1<<St,re.adler=P.check=1,P.mode=q&512?G:ce,q=0,fe=0;break;case A:for(;fe<16;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if(P.flags=q,(P.flags&255)!==y){re.msg="unknown compression method",P.mode=j;break}if(P.flags&57344){re.msg="unknown header flags set",P.mode=j;break}P.head&&(P.head.text=q>>8&1),P.flags&512&&(cr[0]=q&255,cr[1]=q>>>8&255,P.check=r(P.check,cr,2,0)),q=0,fe=0,P.mode=k;case k:for(;fe<32;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}P.head&&(P.head.time=q),P.flags&512&&(cr[0]=q&255,cr[1]=q>>>8&255,cr[2]=q>>>16&255,cr[3]=q>>>24&255,P.check=r(P.check,cr,4,0)),q=0,fe=0,P.mode=b;case b:for(;fe<16;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}P.head&&(P.head.xflags=q&255,P.head.os=q>>8),P.flags&512&&(cr[0]=q&255,cr[1]=q>>>8&255,P.check=r(P.check,cr,2,0)),q=0,fe=0,P.mode=C;case C:if(P.flags&1024){for(;fe<16;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}P.length=q,P.head&&(P.head.extra_len=q),P.flags&512&&(cr[0]=q&255,cr[1]=q>>>8&255,P.check=r(P.check,cr,2,0)),q=0,fe=0}else P.head&&(P.head.extra=null);P.mode=w;case w:if(P.flags&1024&&(it=P.length,it>N&&(it=N),it&&(P.head&&(St=P.head.extra_len-P.length,P.head.extra||(P.head.extra=new Array(P.head.extra_len)),t.arraySet(P.head.extra,Ae,S,it,St)),P.flags&512&&(P.check=r(P.check,Ae,it,S)),N-=it,S+=it,P.length-=it),P.length))break e;P.length=0,P.mode=O;case O:if(P.flags&2048){if(N===0)break e;it=0;do St=Ae[S+it++],P.head&&St&&P.length<65536&&(P.head.name+=String.fromCharCode(St));while(St&&it<N);if(P.flags&512&&(P.check=r(P.check,Ae,it,S)),N-=it,S+=it,St)break e}else P.head&&(P.head.name=null);P.length=0,P.mode=M;case M:if(P.flags&4096){if(N===0)break e;it=0;do St=Ae[S+it++],P.head&&St&&P.length<65536&&(P.head.comment+=String.fromCharCode(St));while(St&&it<N);if(P.flags&512&&(P.check=r(P.check,Ae,it,S)),N-=it,S+=it,St)break e}else P.head&&(P.head.comment=null);P.mode=$;case $:if(P.flags&512){for(;fe<16;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if(q!==(P.check&65535)){re.msg="header crc mismatch",P.mode=j;break}q=0,fe=0}P.head&&(P.head.hcrc=P.flags>>9&1,P.head.done=!0),re.adler=P.check=0,P.mode=ce;break;case G:for(;fe<32;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}re.adler=P.check=ke(q),q=0,fe=0,P.mode=Z;case Z:if(P.havedict===0)return re.next_out=D,re.avail_out=I,re.next_in=S,re.avail_in=N,P.hold=q,P.bits=fe,g;re.adler=P.check=1,P.mode=ce;case ce:if(H===c||H===f)break e;case Y:if(P.last){q>>>=fe&7,fe-=fe&7,P.mode=Ye;break}for(;fe<3;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}switch(P.last=q&1,q>>>=1,fe-=1,q&3){case 0:P.mode=J;break;case 1:if(ae(P),P.mode=se,H===f){q>>>=2,fe-=2;break e}break;case 2:P.mode=Te;break;case 3:re.msg="invalid block type",P.mode=j}q>>>=2,fe-=2;break;case J:for(q>>>=fe&7,fe-=fe&7;fe<32;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if((q&65535)!==(q>>>16^65535)){re.msg="invalid stored block lengths",P.mode=j;break}if(P.length=q&65535,q=0,fe=0,P.mode=ie,H===f)break e;case ie:P.mode=le;case le:if(it=P.length,it){if(it>N&&(it=N),it>I&&(it=I),it===0)break e;t.arraySet(Ne,Ae,S,it,D),N-=it,S+=it,I-=it,D+=it,P.length-=it;break}P.mode=ce;break;case Te:for(;fe<14;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if(P.nlen=(q&31)+257,q>>>=5,fe-=5,P.ndist=(q&31)+1,q>>>=5,fe-=5,P.ncode=(q&15)+4,q>>>=4,fe-=4,P.nlen>286||P.ndist>30){re.msg="too many length or distance symbols",P.mode=j;break}P.have=0,P.mode=Me;case Me:for(;P.have<P.ncode;){for(;fe<3;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}P.lens[Os[P.have++]]=q&7,q>>>=3,fe-=3}for(;P.have<19;)P.lens[Os[P.have++]]=0;if(P.lencode=P.lendyn,P.lenbits=7,Xr={bits:P.lenbits},kr=s(a,P.lens,0,19,P.lencode,0,P.work,Xr),P.lenbits=Xr.bits,kr){re.msg="invalid code lengths set",P.mode=j;break}P.have=0,P.mode=Ee;case Ee:for(;P.have<P.nlen+P.ndist;){for(;ft=P.lencode[q&(1<<P.lenbits)-1],Ct=ft>>>24,wt=ft>>>16&255,ir=ft&65535,!(Ct<=fe);){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if(ir<16)q>>>=Ct,fe-=Ct,P.lens[P.have++]=ir;else{if(ir===16){for(Nr=Ct+2;fe<Nr;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if(q>>>=Ct,fe-=Ct,P.have===0){re.msg="invalid bit length repeat",P.mode=j;break}St=P.lens[P.have-1],it=3+(q&3),q>>>=2,fe-=2}else if(ir===17){for(Nr=Ct+3;fe<Nr;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}q>>>=Ct,fe-=Ct,St=0,it=3+(q&7),q>>>=3,fe-=3}else{for(Nr=Ct+7;fe<Nr;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}q>>>=Ct,fe-=Ct,St=0,it=11+(q&127),q>>>=7,fe-=7}if(P.have+it>P.nlen+P.ndist){re.msg="invalid bit length repeat",P.mode=j;break}for(;it--;)P.lens[P.have++]=St}}if(P.mode===j)break;if(P.lens[256]===0){re.msg="invalid code -- missing end-of-block",P.mode=j;break}if(P.lenbits=9,Xr={bits:P.lenbits},kr=s(n,P.lens,0,P.nlen,P.lencode,0,P.work,Xr),P.lenbits=Xr.bits,kr){re.msg="invalid literal/lengths set",P.mode=j;break}if(P.distbits=6,P.distcode=P.distdyn,Xr={bits:P.distbits},kr=s(o,P.lens,P.nlen,P.ndist,P.distcode,0,P.work,Xr),P.distbits=Xr.bits,kr){re.msg="invalid distances set",P.mode=j;break}if(P.mode=se,H===f)break e;case se:P.mode=me;case me:if(N>=6&&I>=258){re.next_out=D,re.avail_out=I,re.next_in=S,re.avail_in=N,P.hold=q,P.bits=fe,i(re,Qe),D=re.next_out,Ne=re.output,I=re.avail_out,S=re.next_in,Ae=re.input,N=re.avail_in,q=P.hold,fe=P.bits,P.mode===ce&&(P.back=-1);break}for(P.back=0;ft=P.lencode[q&(1<<P.lenbits)-1],Ct=ft>>>24,wt=ft>>>16&255,ir=ft&65535,!(Ct<=fe);){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if(wt&&(wt&240)===0){for(sr=Ct,nn=wt,Qr=ir;ft=P.lencode[Qr+((q&(1<<sr+nn)-1)>>sr)],Ct=ft>>>24,wt=ft>>>16&255,ir=ft&65535,!(sr+Ct<=fe);){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}q>>>=sr,fe-=sr,P.back+=sr}if(q>>>=Ct,fe-=Ct,P.back+=Ct,P.length=ir,wt===0){P.mode=qe;break}if(wt&32){P.back=-1,P.mode=ce;break}if(wt&64){re.msg="invalid literal/length code",P.mode=j;break}P.extra=wt&15,P.mode=Xe;case Xe:if(P.extra){for(Nr=P.extra;fe<Nr;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}P.length+=q&(1<<P.extra)-1,q>>>=P.extra,fe-=P.extra,P.back+=P.extra}P.was=P.length,P.mode=nt;case nt:for(;ft=P.distcode[q&(1<<P.distbits)-1],Ct=ft>>>24,wt=ft>>>16&255,ir=ft&65535,!(Ct<=fe);){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if((wt&240)===0){for(sr=Ct,nn=wt,Qr=ir;ft=P.distcode[Qr+((q&(1<<sr+nn)-1)>>sr)],Ct=ft>>>24,wt=ft>>>16&255,ir=ft&65535,!(sr+Ct<=fe);){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}q>>>=sr,fe-=sr,P.back+=sr}if(q>>>=Ct,fe-=Ct,P.back+=Ct,wt&64){re.msg="invalid distance code",P.mode=j;break}P.offset=ir,P.extra=wt&15,P.mode=ot;case ot:if(P.extra){for(Nr=P.extra;fe<Nr;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}P.offset+=q&(1<<P.extra)-1,q>>>=P.extra,fe-=P.extra,P.back+=P.extra}if(P.offset>P.dmax){re.msg="invalid distance too far back",P.mode=j;break}P.mode=pt;case pt:if(I===0)break e;if(it=Qe-I,P.offset>it){if(it=P.offset-it,it>P.whave&&P.sane){re.msg="invalid distance too far back",P.mode=j;break}it>P.wnext?(it-=P.wnext,At=P.wsize-it):At=P.wnext-it,it>P.length&&(it=P.length),Br=P.window}else Br=Ne,At=D-P.offset,it=P.length;it>I&&(it=I),I-=it,P.length-=it;do Ne[D++]=Br[At++];while(--it);P.length===0&&(P.mode=me);break;case qe:if(I===0)break e;Ne[D++]=P.length,I--,P.mode=me;break;case Ye:if(P.wrap){for(;fe<32;){if(N===0)break e;N--,q|=Ae[S++]<<fe,fe+=8}if(Qe-=I,re.total_out+=Qe,P.total+=Qe,Qe&&(re.adler=P.check=P.flags?r(P.check,Ne,Qe,D-Qe):e(P.check,Ne,Qe,D-Qe)),Qe=I,(P.flags?q:ke(q))!==P.check){re.msg="incorrect data check",P.mode=j;break}q=0,fe=0}P.mode=at;case at:if(P.wrap&&P.flags){for(;fe<32;){if(N===0)break e;N--,q+=Ae[S++]<<fe,fe+=8}if(q!==(P.total&4294967295)){re.msg="incorrect length check",P.mode=j;break}q=0,fe=0}P.mode=lt;case lt:kr=p;break e;case j:kr=T;break e;case ue:return x;case oe:default:return m}return re.next_out=D,re.avail_out=I,re.next_in=S,re.avail_in=N,P.hold=q,P.bits=fe,(P.wsize||Qe!==re.avail_out&&P.mode<j&&(P.mode<Ye||H!==u))&&ne(re,re.output,re.next_out,Qe-re.avail_out),ze-=re.avail_in,Qe-=re.avail_out,re.total_in+=ze,re.total_out+=Qe,P.total+=Qe,P.wrap&&Qe&&(re.adler=P.check=P.flags?r(P.check,Ne,Qe,re.next_out-Qe):e(P.check,Ne,Qe,re.next_out-Qe)),re.data_type=P.bits+(P.last?64:0)+(P.mode===ce?128:0)+(P.mode===se||P.mode===ie?256:0),(ze===0&&Qe===0||H===u)&&kr===h&&(kr=v),kr}function K(re){if(!re||!re.state)return m;var H=re.state;return H.window&&(H.window=null),re.state=null,h}function te(re,H){var P;return!re||!re.state||(P=re.state,(P.wrap&2)===0)?m:(P.head=H,H.done=!1,h)}function ge(re,H){var P=H.length,Ae,Ne,S;return!re||!re.state||(Ae=re.state,Ae.wrap!==0&&Ae.mode!==Z)?m:Ae.mode===Z&&(Ne=1,Ne=e(Ne,H,P,0),Ne!==Ae.check)?T:(S=ne(re,H,P,P),S?(Ae.mode=ue,x):(Ae.havedict=1,h))}return Mi.inflateReset=_e,Mi.inflateReset2=Ie,Mi.inflateResetKeep=X,Mi.inflateInit=Ve,Mi.inflateInit2=Ze,Mi.inflate=U,Mi.inflateEnd=K,Mi.inflateGetHeader=te,Mi.inflateSetDictionary=ge,Mi.inflateInfo="pako inflate (from Nodeca project)",Mi}var hy,LU;function OK(){return LU||(LU=1,hy={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),hy}var dy,IU;function Lme(){if(IU)return dy;IU=1;function t(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return dy=t,dy}var BU;function Ime(){if(BU)return bu;BU=1;var t=wme(),e=to(),r=BK(),i=OK(),s=T2(),a=PK(),n=Lme(),o=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=e.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(h&&h.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15)===0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var g=t.inflateInit2(this.strm,p.windowBits);if(g!==i.Z_OK)throw new Error(s[g]);if(this.header=new n,t.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=r.string2buf(p.dictionary):o.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(g=t.inflateSetDictionary(this.strm,p.dictionary),g!==i.Z_OK)))throw new Error(s[g])}u.prototype.push=function(h,p){var g=this.strm,m=this.options.chunkSize,T=this.options.dictionary,x,v,y,R,A,k=!1;if(this.ended)return!1;v=p===~~p?p:p===!0?i.Z_FINISH:i.Z_NO_FLUSH,typeof h=="string"?g.input=r.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new e.Buf8(m),g.next_out=0,g.avail_out=m),x=t.inflate(g,i.Z_NO_FLUSH),x===i.Z_NEED_DICT&&T&&(x=t.inflateSetDictionary(this.strm,T)),x===i.Z_BUF_ERROR&&k===!0&&(x=i.Z_OK,k=!1),x!==i.Z_STREAM_END&&x!==i.Z_OK)return this.onEnd(x),this.ended=!0,!1;g.next_out&&(g.avail_out===0||x===i.Z_STREAM_END||g.avail_in===0&&(v===i.Z_FINISH||v===i.Z_SYNC_FLUSH))&&(this.options.to==="string"?(y=r.utf8border(g.output,g.next_out),R=g.next_out-y,A=r.buf2string(g.output,y),g.next_out=R,g.avail_out=m-R,R&&e.arraySet(g.output,g.output,y,R,0),this.onData(A)):this.onData(e.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&x!==i.Z_STREAM_END);return x===i.Z_STREAM_END&&(v=i.Z_FINISH),v===i.Z_FINISH?(x=t.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===i.Z_OK):(v===i.Z_SYNC_FLUSH&&(this.onEnd(i.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===i.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function c(h,p){var g=new u(p);if(g.push(h,!0),g.err)throw g.msg||s[g.err];return g.result}function f(h,p){return p=p||{},p.raw=!0,c(h,p)}return bu.Inflate=u,bu.inflate=c,bu.inflateRaw=f,bu.ungzip=c,bu}var py,PU;function Bme(){if(PU)return py;PU=1;var t=to().assign,e=Sme(),r=Ime(),i=OK(),s={};return t(s,e,r,i),py=s,py}var OU;function Pme(){return OU||(OU=1,function(t){(function(){var e={},r;t.exports=e,typeof O4=="function"?r=Bme():r=window.pako,function(i,s){i.toRGBA8=function(a){var n=a.width,o=a.height;if(a.tabs.acTL==null)return[i.toRGBA8.decodeImage(a.data,n,o,a).buffer];var u=[];a.frames[0].data==null&&(a.frames[0].data=a.data);for(var c,f=new Uint8Array(n*o*4),h=0;h<a.frames.length;h++){var p=a.frames[h],g=p.rect.x,m=p.rect.y,T=p.rect.width,x=p.rect.height,v=i.toRGBA8.decodeImage(p.data,T,x,a);if(h==0?c=v:p.blend==0?i._copyTile(v,T,x,c,n,o,g,m,0):p.blend==1&&i._copyTile(v,T,x,c,n,o,g,m,1),u.push(c.buffer),c=c.slice(0),p.dispose!=0){if(p.dispose==1)i._copyTile(f,T,x,c,n,o,g,m,0);else if(p.dispose==2){for(var y=h-1;a.frames[y].dispose==2;)y--;c=new Uint8Array(u[y]).slice(0)}}}return u},i.toRGBA8.decodeImage=function(a,n,o,u){var c=n*o,f=i.decode._getBPP(u),h=Math.ceil(n*f/8),p=new Uint8Array(c*4),g=new Uint32Array(p.buffer),m=u.ctype,T=u.depth,x=i._bin.readUshort;if(m==6){var v=c<<2;if(T==8)for(var y=0;y<v;y++)p[y]=a[y];if(T==16)for(var y=0;y<v;y++)p[y]=a[y<<1]}else if(m==2){var R=u.tabs.tRNS,A=-1,k=-1,b=-1;if(R&&(A=R[0],k=R[1],b=R[2]),T==8)for(var y=0;y<c;y++){var C=y<<2,w=y*3;p[C]=a[w],p[C+1]=a[w+1],p[C+2]=a[w+2],p[C+3]=255,A!=-1&&a[w]==A&&a[w+1]==k&&a[w+2]==b&&(p[C+3]=0)}if(T==16)for(var y=0;y<c;y++){var C=y<<2,w=y*6;p[C]=a[w],p[C+1]=a[w+2],p[C+2]=a[w+4],p[C+3]=255,A!=-1&&x(a,w)==A&&x(a,w+2)==k&&x(a,w+4)==b&&(p[C+3]=0)}}else if(m==3){var O=u.tabs.PLTE,M=u.tabs.tRNS,$=M?M.length:0;if(T==1)for(var G=0;G<o;G++)for(var Z=G*h,ce=G*n,y=0;y<n;y++){var C=ce+y<<2,Y=a[Z+(y>>3)]>>7-((y&7)<<0)&1,J=3*Y;p[C]=O[J],p[C+1]=O[J+1],p[C+2]=O[J+2],p[C+3]=Y<$?M[Y]:255}if(T==2)for(var G=0;G<o;G++)for(var Z=G*h,ce=G*n,y=0;y<n;y++){var C=ce+y<<2,Y=a[Z+(y>>2)]>>6-((y&3)<<1)&3,J=3*Y;p[C]=O[J],p[C+1]=O[J+1],p[C+2]=O[J+2],p[C+3]=Y<$?M[Y]:255}if(T==4)for(var G=0;G<o;G++)for(var Z=G*h,ce=G*n,y=0;y<n;y++){var C=ce+y<<2,Y=a[Z+(y>>1)]>>4-((y&1)<<2)&15,J=3*Y;p[C]=O[J],p[C+1]=O[J+1],p[C+2]=O[J+2],p[C+3]=Y<$?M[Y]:255}if(T==8)for(var y=0;y<c;y++){var C=y<<2,Y=a[y],J=3*Y;p[C]=O[J],p[C+1]=O[J+1],p[C+2]=O[J+2],p[C+3]=Y<$?M[Y]:255}}else if(m==4){if(T==8)for(var y=0;y<c;y++){var C=y<<2,ie=y<<1,le=a[ie];p[C]=le,p[C+1]=le,p[C+2]=le,p[C+3]=a[ie+1]}if(T==16)for(var y=0;y<c;y++){var C=y<<2,ie=y<<2,le=a[ie];p[C]=le,p[C+1]=le,p[C+2]=le,p[C+3]=a[ie+2]}}else if(m==0){var A=u.tabs.tRNS?u.tabs.tRNS:-1;if(T==1)for(var y=0;y<c;y++){var le=255*(a[y>>3]>>7-(y&7)&1),Te=le==A*255?0:255;g[y]=Te<<24|le<<16|le<<8|le}if(T==2)for(var y=0;y<c;y++){var le=85*(a[y>>2]>>6-((y&3)<<1)&3),Te=le==A*85?0:255;g[y]=Te<<24|le<<16|le<<8|le}if(T==4)for(var y=0;y<c;y++){var le=17*(a[y>>1]>>4-((y&1)<<2)&15),Te=le==A*17?0:255;g[y]=Te<<24|le<<16|le<<8|le}if(T==8)for(var y=0;y<c;y++){var le=a[y],Te=le==A?0:255;g[y]=Te<<24|le<<16|le<<8|le}if(T==16)for(var y=0;y<c;y++){var le=a[y<<1],Te=x(a,y<<1)==A?0:255;g[y]=Te<<24|le<<16|le<<8|le}}return p},i.decode=function(a){for(var n=new Uint8Array(a),o=8,u=i._bin,c=u.readUshort,f=u.readUint,h={tabs:{},frames:[]},p=new Uint8Array(n.length),g=0,m,T=0,x=[137,80,78,71,13,10,26,10],v=0;v<8;v++)if(n[v]!=x[v])throw"The input is not a PNG file!";for(;o<n.length;){var y=u.readUint(n,o);o+=4;var R=u.readASCII(n,o,4);if(o+=4,R=="IHDR")i.decode._IHDR(n,o,h);else if(R=="IDAT"){for(var v=0;v<y;v++)p[g+v]=n[o+v];g+=y}else if(R=="acTL")h.tabs[R]={num_frames:f(n,o),num_plays:f(n,o+4)},m=new Uint8Array(n.length);else if(R=="fcTL"){if(T!=0){var A=h.frames[h.frames.length-1];A.data=i.decode._decompress(h,m.slice(0,T),A.rect.width,A.rect.height),T=0}var k={x:f(n,o+12),y:f(n,o+16),width:f(n,o+4),height:f(n,o+8)},b=c(n,o+22);b=c(n,o+20)/(b==0?100:b);var C={rect:k,delay:Math.round(b*1e3),dispose:n[o+24],blend:n[o+25]};h.frames.push(C)}else if(R=="fdAT"){for(var v=0;v<y-4;v++)m[T+v]=n[o+v+4];T+=y-4}else if(R=="pHYs")h.tabs[R]=[u.readUint(n,o),u.readUint(n,o+4),n[o+8]];else if(R=="cHRM"){h.tabs[R]=[];for(var v=0;v<8;v++)h.tabs[R].push(u.readUint(n,o+v*4))}else if(R=="tEXt"){h.tabs[R]==null&&(h.tabs[R]={});var w=u.nextZero(n,o),O=u.readASCII(n,o,w-o),M=u.readASCII(n,w+1,o+y-w-1);h.tabs[R][O]=M}else if(R=="iTXt"){h.tabs[R]==null&&(h.tabs[R]={});var w=0,$=o;w=u.nextZero(n,$);var O=u.readASCII(n,$,w-$);$=w+1,n[$],n[$+1],$+=2,w=u.nextZero(n,$),u.readASCII(n,$,w-$),$=w+1,w=u.nextZero(n,$),u.readUTF8(n,$,w-$),$=w+1;var M=u.readUTF8(n,$,y-($-o));h.tabs[R][O]=M}else if(R=="PLTE")h.tabs[R]=u.readBytes(n,o,y);else if(R=="hIST"){var G=h.tabs.PLTE.length/3;h.tabs[R]=[];for(var v=0;v<G;v++)h.tabs[R].push(c(n,o+v*2))}else if(R=="tRNS")h.ctype==3?h.tabs[R]=u.readBytes(n,o,y):h.ctype==0?h.tabs[R]=c(n,o):h.ctype==2&&(h.tabs[R]=[c(n,o),c(n,o+2),c(n,o+4)]);else if(R=="gAMA")h.tabs[R]=u.readUint(n,o)/1e5;else if(R=="sRGB")h.tabs[R]=n[o];else if(R=="bKGD")h.ctype==0||h.ctype==4?h.tabs[R]=[c(n,o)]:h.ctype==2||h.ctype==6?h.tabs[R]=[c(n,o),c(n,o+2),c(n,o+4)]:h.ctype==3&&(h.tabs[R]=n[o]);else if(R=="IEND"){if(T!=0){var A=h.frames[h.frames.length-1];A.data=i.decode._decompress(h,m.slice(0,T),A.rect.width,A.rect.height),T=0}h.data=i.decode._decompress(h,p,h.width,h.height);break}o+=y,u.readUint(n,o),o+=4}return delete h.compress,delete h.interlace,delete h.filter,h},i.decode._decompress=function(a,n,o,u){return a.compress==0&&(n=i.decode._inflate(n)),a.interlace==0?n=i.decode._filterZero(n,a,0,o,u):a.interlace==1&&(n=i.decode._readInterlace(n,a)),n},i.decode._inflate=function(a){return s.inflate(a)},i.decode._readInterlace=function(a,n){for(var o=n.width,u=n.height,c=i.decode._getBPP(n),f=c>>3,h=Math.ceil(o*c/8),p=new Uint8Array(u*h),g=0,m=[0,0,4,0,2,0,1],T=[0,4,0,2,0,1,0],x=[8,8,8,4,4,2,2],v=[8,8,4,4,2,2,1],y=0;y<7;){for(var R=x[y],A=v[y],k=0,b=0,C=m[y];C<u;)C+=R,b++;for(var w=T[y];w<o;)w+=A,k++;var O=Math.ceil(k*c/8);i.decode._filterZero(a,n,g,k,b);for(var M=0,$=m[y];$<u;){for(var G=T[y],Z=g+M*O<<3;G<o;){if(c==1){var ce=a[Z>>3];ce=ce>>7-(Z&7)&1,p[$*h+(G>>3)]|=ce<<7-((G&3)<<0)}if(c==2){var ce=a[Z>>3];ce=ce>>6-(Z&7)&3,p[$*h+(G>>2)]|=ce<<6-((G&3)<<1)}if(c==4){var ce=a[Z>>3];ce=ce>>4-(Z&7)&15,p[$*h+(G>>1)]|=ce<<4-((G&1)<<2)}if(c>=8)for(var Y=$*h+G*f,J=0;J<f;J++)p[Y+J]=a[(Z>>3)+J];Z+=c,G+=A}M++,$+=R}k*b!=0&&(g+=b*(1+O)),y=y+1}return p},i.decode._getBPP=function(a){var n=[1,null,3,1,2,null,4][a.ctype];return n*a.depth},i.decode._filterZero=function(a,n,o,u,c){var f=i.decode._getBPP(n),h=Math.ceil(u*f/8),p=i.decode._paeth;f=Math.ceil(f/8);for(var g=0;g<c;g++){var m=o+g*h,T=m+g+1,x=a[T-1];if(x==0)for(var v=0;v<h;v++)a[m+v]=a[T+v];else if(x==1){for(var v=0;v<f;v++)a[m+v]=a[T+v];for(var v=f;v<h;v++)a[m+v]=a[T+v]+a[m+v-f]&255}else if(g==0){for(var v=0;v<f;v++)a[m+v]=a[T+v];if(x==2)for(var v=f;v<h;v++)a[m+v]=a[T+v]&255;if(x==3)for(var v=f;v<h;v++)a[m+v]=a[T+v]+(a[m+v-f]>>1)&255;if(x==4)for(var v=f;v<h;v++)a[m+v]=a[T+v]+p(a[m+v-f],0,0)&255}else{if(x==2)for(var v=0;v<h;v++)a[m+v]=a[T+v]+a[m+v-h]&255;if(x==3){for(var v=0;v<f;v++)a[m+v]=a[T+v]+(a[m+v-h]>>1)&255;for(var v=f;v<h;v++)a[m+v]=a[T+v]+(a[m+v-h]+a[m+v-f]>>1)&255}if(x==4){for(var v=0;v<f;v++)a[m+v]=a[T+v]+p(0,a[m+v-h],0)&255;for(var v=f;v<h;v++)a[m+v]=a[T+v]+p(a[m+v-f],a[m+v-h],a[m+v-f-h])&255}}}return a},i.decode._paeth=function(a,n,o){var u=a+n-o,c=Math.abs(u-a),f=Math.abs(u-n),h=Math.abs(u-o);return c<=f&&c<=h?a:f<=h?n:o},i.decode._IHDR=function(a,n,o){var u=i._bin;o.width=u.readUint(a,n),n+=4,o.height=u.readUint(a,n),n+=4,o.depth=a[n],n++,o.ctype=a[n],n++,o.compress=a[n],n++,o.filter=a[n],n++,o.interlace=a[n],n++},i._bin={nextZero:function(a,n){for(;a[n]!=0;)n++;return n},readUshort:function(a,n){return a[n]<<8|a[n+1]},writeUshort:function(a,n,o){a[n]=o>>8&255,a[n+1]=o&255},readUint:function(a,n){return a[n]*(256*256*256)+(a[n+1]<<16|a[n+2]<<8|a[n+3])},writeUint:function(a,n,o){a[n]=o>>24&255,a[n+1]=o>>16&255,a[n+2]=o>>8&255,a[n+3]=o&255},readASCII:function(a,n,o){for(var u="",c=0;c<o;c++)u+=String.fromCharCode(a[n+c]);return u},writeASCII:function(a,n,o){for(var u=0;u<o.length;u++)a[n+u]=o.charCodeAt(u)},readBytes:function(a,n,o){for(var u=[],c=0;c<o;c++)u.push(a[n+c]);return u},pad:function(a){return a.length<2?"0"+a:a},readUTF8:function(a,n,o){for(var u="",c,f=0;f<o;f++)u+="%"+i._bin.pad(a[n+f].toString(16));try{c=decodeURIComponent(u)}catch{return i._bin.readASCII(a,n,o)}return c}},i._copyTile=function(a,n,o,u,c,f,h,p,g){for(var m=Math.min(n,c),T=Math.min(o,f),x=0,v=0,y=0;y<T;y++)for(var R=0;R<m;R++)if(h>=0&&p>=0?(x=y*n+R<<2,v=(p+y)*c+h+R<<2):(x=(-p+y)*n-h+R<<2,v=y*c+R<<2),g==0)u[v]=a[x],u[v+1]=a[x+1],u[v+2]=a[x+2],u[v+3]=a[x+3];else if(g==1){var A=a[x+3]*.00392156862745098,k=a[x]*A,b=a[x+1]*A,C=a[x+2]*A,w=u[v+3]*(1/255),O=u[v]*w,M=u[v+1]*w,$=u[v+2]*w,G=1-A,Z=A+w*G,ce=Z==0?0:1/Z;u[v+3]=255*Z,u[v+0]=(k+O*G)*ce,u[v+1]=(b+M*G)*ce,u[v+2]=(C+$*G)*ce}else if(g==2){var A=a[x+3],k=a[x],b=a[x+1],C=a[x+2],w=u[v+3],O=u[v],M=u[v+1],$=u[v+2];A==w&&k==O&&b==M&&C==$?(u[v]=0,u[v+1]=0,u[v+2]=0,u[v+3]=0):(u[v]=k,u[v+1]=b,u[v+2]=C,u[v+3]=A)}else if(g==3){var A=a[x+3],k=a[x],b=a[x+1],C=a[x+2],w=u[v+3],O=u[v],M=u[v+1],$=u[v+2];if(A==w&&k==O&&b==M&&C==$)continue;if(A<220&&w>20)return!1}return!0},i.encode=function(a,n,o,u,c,f){u==null&&(u=0),f==null&&(f=!1);for(var h=new Uint8Array(a[0].byteLength*a.length+100),p=[137,80,78,71,13,10,26,10],g=0;g<8;g++)h[g]=p[g];var m=8,T=i._bin,x=i.crc.crc,v=T.writeUint,y=T.writeUshort,R=T.writeASCII,A=i.encode.compressPNG(a,n,o,u,f);v(h,m,13),m+=4,R(h,m,"IHDR"),m+=4,v(h,m,n),m+=4,v(h,m,o),m+=4,h[m]=A.depth,m++,h[m]=A.ctype,m++,h[m]=0,m++,h[m]=0,m++,h[m]=0,m++,v(h,m,x(h,m-17,17)),m+=4,v(h,m,1),m+=4,R(h,m,"sRGB"),m+=4,h[m]=1,m++,v(h,m,x(h,m-5,5)),m+=4;var k=a.length>1;if(k&&(v(h,m,8),m+=4,R(h,m,"acTL"),m+=4,v(h,m,a.length),m+=4,v(h,m,0),m+=4,v(h,m,x(h,m-12,12)),m+=4),A.ctype==3){var b=A.plte.length;v(h,m,b*3),m+=4,R(h,m,"PLTE"),m+=4;for(var g=0;g<b;g++){var C=g*3,w=A.plte[g],O=w&255,M=w>>8&255,$=w>>16&255;h[m+C+0]=O,h[m+C+1]=M,h[m+C+2]=$}if(m+=b*3,v(h,m,x(h,m-b*3-4,b*3+4)),m+=4,A.gotAlpha){v(h,m,b),m+=4,R(h,m,"tRNS"),m+=4;for(var g=0;g<b;g++)h[m+g]=A.plte[g]>>24&255;m+=b,v(h,m,x(h,m-b-4,b+4)),m+=4}}for(var G=0,Z=0;Z<A.frames.length;Z++){var ce=A.frames[Z];k&&(v(h,m,26),m+=4,R(h,m,"fcTL"),m+=4,v(h,m,G++),m+=4,v(h,m,ce.rect.width),m+=4,v(h,m,ce.rect.height),m+=4,v(h,m,ce.rect.x),m+=4,v(h,m,ce.rect.y),m+=4,y(h,m,c[Z]),m+=2,y(h,m,1e3),m+=2,h[m]=ce.dispose,m++,h[m]=ce.blend,m++,v(h,m,x(h,m-30,30)),m+=4);var Y=ce.cimg,b=Y.length;v(h,m,b+(Z==0?0:4)),m+=4;var J=m;R(h,m,Z==0?"IDAT":"fdAT"),m+=4,Z!=0&&(v(h,m,G++),m+=4);for(var g=0;g<b;g++)h[m+g]=Y[g];m+=b,v(h,m,x(h,J,m-J)),m+=4}return v(h,m,0),m+=4,R(h,m,"IEND"),m+=4,v(h,m,x(h,m-4,4)),m+=4,h.buffer.slice(0,m)},i.encode.compressPNG=function(a,n,o,u,c){for(var f=i.encode.compress(a,n,o,u,!1,c),h=0;h<a.length;h++){var p=f.frames[h];p.rect.width;var g=p.rect.height,m=p.bpl,T=p.bpp,x=new Uint8Array(g*m+g);p.cimg=i.encode._filterZero(p.img,g,T,m,x)}return f},i.encode.compress=function(a,n,o,u,c,f){f==null&&(f=!1);for(var h=6,p=8,g=4,m=255,T=0;T<a.length;T++)for(var x=new Uint8Array(a[T]),v=x.length,y=0;y<v;y+=4)m&=x[y+3];var R=m!=255,A={},k=[];if(a.length!=0&&(A[0]=0,k.push(0),u!=0&&u--),u!=0){var b=i.quantize(a,u,c);a=b.bufs;for(var y=0;y<b.plte.length;y++){var C=b.plte[y].est.rgba;A[C]==null&&(A[C]=k.length,k.push(C))}}else for(var T=0;T<a.length;T++)for(var w=new Uint32Array(a[T]),v=w.length,y=0;y<v;y++){var C=w[y];if((y<n||C!=w[y-1]&&C!=w[y-n])&&A[C]==null&&(A[C]=k.length,k.push(C),k.length>=300))break}var O=R?c:!1,M=k.length;M<=256&&f==!1&&(M<=2?p=1:M<=4?p=2:M<=16?p=4:p=8,c&&(p=8),R=!0);for(var $=[],T=0;T<a.length;T++){var G=new Uint8Array(a[T]),Z=new Uint32Array(G.buffer),ce=0,Y=0,J=n,ie=o,le=0;if(T!=0&&!O){for(var Te=c||T==1||$[$.length-2].dispose==2?1:2,Me=0,Ee=1e9,se=0;se<Te;se++){for(var lt=new Uint8Array(a[T-1-se]),me=new Uint32Array(a[T-1-se]),Xe=n,nt=o,ot=-1,pt=-1,qe=0;qe<o;qe++)for(var Ye=0;Ye<n;Ye++){var y=qe*n+Ye;Z[y]!=me[y]&&(Ye<Xe&&(Xe=Ye),Ye>ot&&(ot=Ye),qe<nt&&(nt=qe),qe>pt&&(pt=qe))}var at=ot==-1?1:(ot-Xe+1)*(pt-nt+1);at<Ee&&(Ee=at,Me=se,ot==-1?(ce=Y=0,J=ie=1):(ce=Xe,Y=nt,J=ot-Xe+1,ie=pt-nt+1))}var lt=new Uint8Array(a[T-1-Me]);Me==1&&($[$.length-1].dispose=2);var j=new Uint8Array(J*ie*4);new Uint32Array(j.buffer),i._copyTile(lt,n,o,j,J,ie,-ce,-Y,0),i._copyTile(G,n,o,j,J,ie,-ce,-Y,3)?(i._copyTile(G,n,o,j,J,ie,-ce,-Y,2),le=1):(i._copyTile(G,n,o,j,J,ie,-ce,-Y,0),le=0),G=j,Z=new Uint32Array(G.buffer)}var ue=4*J;if(M<=256&&f==!1){ue=Math.ceil(p*J/8);for(var j=new Uint8Array(ue*ie),qe=0;qe<ie;qe++){var y=qe*ue,oe=qe*J;if(p==8)for(var Ye=0;Ye<J;Ye++)j[y+Ye]=A[Z[oe+Ye]];else if(p==4)for(var Ye=0;Ye<J;Ye++)j[y+(Ye>>1)]|=A[Z[oe+Ye]]<<4-(Ye&1)*4;else if(p==2)for(var Ye=0;Ye<J;Ye++)j[y+(Ye>>2)]|=A[Z[oe+Ye]]<<6-(Ye&3)*2;else if(p==1)for(var Ye=0;Ye<J;Ye++)j[y+(Ye>>3)]|=A[Z[oe+Ye]]<<7-(Ye&7)*1}G=j,h=3,g=1}else if(R==!1&&a.length==1){for(var j=new Uint8Array(J*ie*3),be=J*ie,y=0;y<be;y++){var Le=y*3,ye=y*4;j[Le]=G[ye],j[Le+1]=G[ye+1],j[Le+2]=G[ye+2]}G=j,h=2,g=3,ue=3*J}$.push({rect:{x:ce,y:Y,width:J,height:ie},img:G,bpl:ue,bpp:g,blend:le,dispose:O?1:0})}return{ctype:h,depth:p,plte:k,gotAlpha:R,frames:$}},i.encode._filterZero=function(a,n,o,u,c){for(var f=[],h=0;h<5;h++)if(!(n*u>5e5&&(h==2||h==3||h==4))){for(var p=0;p<n;p++)i.encode._filterLine(c,a,p,u,o,h);if(f.push(s.deflate(c)),o==1)break}for(var g,m=1e9,T=0;T<f.length;T++)f[T].length<m&&(g=T,m=f[T].length);return f[g]},i.encode._filterLine=function(a,n,o,u,c,f){var h=o*u,p=h+o,g=i.decode._paeth;if(a[p]=f,p++,f==0)for(var m=0;m<u;m++)a[p+m]=n[h+m];else if(f==1){for(var m=0;m<c;m++)a[p+m]=n[h+m];for(var m=c;m<u;m++)a[p+m]=n[h+m]-n[h+m-c]+256&255}else if(o==0){for(var m=0;m<c;m++)a[p+m]=n[h+m];if(f==2)for(var m=c;m<u;m++)a[p+m]=n[h+m];if(f==3)for(var m=c;m<u;m++)a[p+m]=n[h+m]-(n[h+m-c]>>1)+256&255;if(f==4)for(var m=c;m<u;m++)a[p+m]=n[h+m]-g(n[h+m-c],0,0)+256&255}else{if(f==2)for(var m=0;m<u;m++)a[p+m]=n[h+m]+256-n[h+m-u]&255;if(f==3){for(var m=0;m<c;m++)a[p+m]=n[h+m]+256-(n[h+m-u]>>1)&255;for(var m=c;m<u;m++)a[p+m]=n[h+m]+256-(n[h+m-u]+n[h+m-c]>>1)&255}if(f==4){for(var m=0;m<c;m++)a[p+m]=n[h+m]+256-g(0,n[h+m-u],0)&255;for(var m=c;m<u;m++)a[p+m]=n[h+m]+256-g(n[h+m-c],n[h+m-u],n[h+m-c-u])&255}}},i.crc={table:function(){for(var a=new Uint32Array(256),n=0;n<256;n++){for(var o=n,u=0;u<8;u++)o&1?o=3988292384^o>>>1:o=o>>>1;a[n]=o}return a}(),update:function(a,n,o,u){for(var c=0;c<u;c++)a=i.crc.table[(a^n[o+c])&255]^a>>>8;return a},crc:function(a,n,o){return i.crc.update(4294967295,a,n,o)^4294967295}},i.quantize=function(a,n,o){for(var u=[],c=0,f=0;f<a.length;f++)u.push(i.encode.alphaMul(new Uint8Array(a[f]),o)),c+=a[f].byteLength;for(var h=new Uint8Array(c),p=new Uint32Array(h.buffer),g=0,f=0;f<u.length;f++){for(var m=u[f],T=m.length,x=0;x<T;x++)h[g+x]=m[x];g+=T}var v={i0:0,i1:h.length,bst:null,est:null,tdst:0,left:null,right:null};v.bst=i.quantize.stats(h,v.i0,v.i1),v.est=i.quantize.estats(v.bst);for(var y=[v];y.length<n;){for(var R=0,A=0,f=0;f<y.length;f++)y[f].est.L>R&&(R=y[f].est.L,A=f);if(R<.001)break;var k=y[A],b=i.quantize.splitPixels(h,p,k.i0,k.i1,k.est.e,k.est.eMq255),C={i0:k.i0,i1:b,bst:null,est:null,tdst:0,left:null,right:null};C.bst=i.quantize.stats(h,C.i0,C.i1),C.est=i.quantize.estats(C.bst);var w={i0:b,i1:k.i1,bst:null,est:null,tdst:0,left:null,right:null};w.bst={R:[],m:[],N:k.bst.N-C.bst.N};for(var f=0;f<16;f++)w.bst.R[f]=k.bst.R[f]-C.bst.R[f];for(var f=0;f<4;f++)w.bst.m[f]=k.bst.m[f]-C.bst.m[f];w.est=i.quantize.estats(w.bst),k.left=C,k.right=w,y[A]=C,y.push(w)}y.sort(function(Te,Me){return Me.bst.N-Te.bst.N});for(var O=0;O<u.length;O++){for(var M=i.quantize.planeDst,$=new Uint8Array(u[O].buffer),G=new Uint32Array(u[O].buffer),Z=$.length,f=0;f<Z;f+=4){for(var ce=$[f]*.00392156862745098,Y=$[f+1]*(1/255),J=$[f+2]*(1/255),ie=$[f+3]*(1/255),le=v;le.left;)le=M(le.est,ce,Y,J,ie)<=0?le.left:le.right;G[f>>2]=le.est.rgba}u[O]=G.buffer}return{bufs:u,plte:y}},i.quantize.getNearest=function(a,n,o,u,c){if(a.left==null)return a.tdst=i.quantize.dist(a.est.q,n,o,u,c),a;var f=i.quantize.planeDst(a.est,n,o,u,c),h=a.left,p=a.right;f>0&&(h=a.right,p=a.left);var g=i.quantize.getNearest(h,n,o,u,c);if(g.tdst<=f*f)return g;var m=i.quantize.getNearest(p,n,o,u,c);return m.tdst<g.tdst?m:g},i.quantize.planeDst=function(a,n,o,u,c){var f=a.e;return f[0]*n+f[1]*o+f[2]*u+f[3]*c-a.eMq},i.quantize.dist=function(a,n,o,u,c){var f=n-a[0],h=o-a[1],p=u-a[2],g=c-a[3];return f*f+h*h+p*p+g*g},i.quantize.splitPixels=function(a,n,o,u,c,f){var h=i.quantize.vecDot;for(u-=4;o<u;){for(;h(a,o,c)<=f;)o+=4;for(;h(a,u,c)>f;)u-=4;if(o>=u)break;var p=n[o>>2];n[o>>2]=n[u>>2],n[u>>2]=p,o+=4,u-=4}for(;h(a,o,c)>f;)o-=4;return o+4},i.quantize.vecDot=function(a,n,o){return a[n]*o[0]+a[n+1]*o[1]+a[n+2]*o[2]+a[n+3]*o[3]},i.quantize.stats=function(a,n,o){for(var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=[0,0,0,0],f=o-n>>2,h=n;h<o;h+=4){var p=a[h]*.00392156862745098,g=a[h+1]*(1/255),m=a[h+2]*(1/255),T=a[h+3]*(1/255);c[0]+=p,c[1]+=g,c[2]+=m,c[3]+=T,u[0]+=p*p,u[1]+=p*g,u[2]+=p*m,u[3]+=p*T,u[5]+=g*g,u[6]+=g*m,u[7]+=g*T,u[10]+=m*m,u[11]+=m*T,u[15]+=T*T}return u[4]=u[1],u[8]=u[2],u[12]=u[3],u[9]=u[6],u[13]=u[7],u[14]=u[11],{R:u,m:c,N:f}},i.quantize.estats=function(a){var n=a.R,o=a.m,u=a.N,c=o[0],f=o[1],h=o[2],p=o[3],g=u==0?0:1/u,m=[n[0]-c*c*g,n[1]-c*f*g,n[2]-c*h*g,n[3]-c*p*g,n[4]-f*c*g,n[5]-f*f*g,n[6]-f*h*g,n[7]-f*p*g,n[8]-h*c*g,n[9]-h*f*g,n[10]-h*h*g,n[11]-h*p*g,n[12]-p*c*g,n[13]-p*f*g,n[14]-p*h*g,n[15]-p*p*g],T=m,x=i.M4,v=[.5,.5,.5,.5],y=0,R=0;if(u!=0)for(var A=0;A<10&&(v=x.multVec(T,v),R=Math.sqrt(x.dot(v,v)),v=x.sml(1/R,v),!(Math.abs(R-y)<1e-9));A++)y=R;var k=[c*g,f*g,h*g,p*g],b=x.dot(x.sml(255,k),v),C=k[3]<.001?0:1/k[3];return{Cov:m,q:k,e:v,L:y,eMq255:b,eMq:x.dot(v,k),rgba:(Math.round(255*k[3])<<24|Math.round(255*k[2]*C)<<16|Math.round(255*k[1]*C)<<8|Math.round(255*k[0]*C)<<0)>>>0}},i.M4={multVec:function(a,n){return[a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3],a[4]*n[0]+a[5]*n[1]+a[6]*n[2]+a[7]*n[3],a[8]*n[0]+a[9]*n[1]+a[10]*n[2]+a[11]*n[3],a[12]*n[0]+a[13]*n[1]+a[14]*n[2]+a[15]*n[3]]},dot:function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},sml:function(a,n){return[a*n[0],a*n[1],a*n[2],a*n[3]]}},i.encode.alphaMul=function(a,n){for(var o=new Uint8Array(a.length),u=a.length>>2,c=0;c<u;c++){var f=c<<2,h=a[f+3];n&&(h=h<128?0:255);var p=h*(1/255);o[f+0]=a[f+0]*p,o[f+1]=a[f+1]*p,o[f+2]=a[f+2]*p,o[f+3]=h}return o}}(e,r)})()}(iy)),iy.exports}var Ome=Pme();const Dme=fs(Ome);async function kme(t){var e;const r={importPixi:!1,...t};r.app&&(r.renderer=r.app.renderer,r.stage=r.app.stage),r.importPixi&&!r.pixi&&(r.pixi=await Oc(()=>Promise.resolve().then(()=>yme),void 0)),window.__PIXI_DEVTOOLS__={...window.__PIXI_DEVTOOLS__||{},app:r.app,stage:r.stage,renderer:r.renderer,extensions:[...((e=window.__PIXI_DEVTOOLS__)==null?void 0:e.extensions)||[],...r.extensions||[]],plugins:{}}}function Ume(t){const e={};return Object.keys(t).forEach(r=>{const i=t[r],s=i.extends?t[i.extends]??null:null,a={particlesPerPoint:i.particlesPerPoint??(s==null?void 0:s.particlesPerPoint)??1,frames:[]},n=i.frames??[];s!=null&&s.frames&&n.unshift(...s.frames),n.forEach(o=>{Array.isArray(o)&&(o={texture:o});const u={texture:o.texture,height:o.height??o.texture,scale:o.scale??i.scale??(s==null?void 0:s.scale)??1,spread:o.spread??i.spread??(s==null?void 0:s.spread)??0,tints:o.tints??i.tints??(s==null?void 0:s.tints)??!1};a.frames.push(u)}),e[r]=a}),e}function Mme(t){const e={size:{w:1600,h:2e3},scale:2},r={},i={},s=100,a={spriteSourceSize:{x:0,y:0,w:s,h:s},sourceSize:{w:s,h:s}};return Object.keys(t).forEach(n=>{t[n].frames.forEach((o,u)=>{const c={x:o.texture[0]*s,y:o.texture[1]*s,w:s,h:s},f={x:o.height[0]*s,y:o.height[1]*s,w:s,h:s};r[`${n}:${u}`]={...a,frame:c},i[`${n}:${u}`]={...a,frame:f}})}),{texture:{meta:e,frames:r},height:{meta:e,frames:i}}}function Nme(t,e){return!(!t||!e||t.brush!==e.brush||t.color!==e.color)}function Fme(t,e){return!(!t||!e||t.brush!==e.brush||t.color!==e.color||t.weight!==e.weight)}function Gme(t){const e=[];return t.forEach((r,i)=>{Nme(r,t[i-1])||e.push([]);const s=e[e.length-1];if(!Fme(r,t[i-1])){const a={color:r.color,weight:r.weight,lines:[]};r.brush&&(a.sprinkleType=r.brush),s.push(a)}s[s.length-1].lines.push(r.points)}),e}const Kme="./assets/yvWcKLcB.jpg",Vme="./assets/BKQbXc15.jpg",$me="./assets/BYWccQI-.jpg",Hme="./assets/3Lk0Elhq.jpg",qme="./assets/7xf5QunY.jpg",Xme="./assets/0eQTIKSy.jpg",zme="./assets/CY4aLLUL.jpg",Wme="./assets/dC1kbUz2.jpg";class jme{constructor(){Be(this,"area");Be(this,"container",new An)}async setup(e,r){return this.area=e,this.container.setSize(e),await this.setType(r),this.container}async setType(e,r){const i=new URL(Object.assign({"../../assets/black/texture.jpg":Kme,"../../assets/chocolate/texture.jpg":Vme,"../../assets/chocolatechip/texture.jpg":$me,"../../assets/gingerbread/texture.jpg":Hme,"../../assets/gray/texture.jpg":qme,"../../assets/nuggets/texture.jpg":Xme,"../../assets/redvelvet/texture.jpg":zme,"../../assets/sugar/texture.jpg":Wme})[`../../assets/${e}/texture.jpg`],import.meta.url).href,s=await na.load(i);this.container.texture=s,this.container.setSize(this.area),r==null||r()}}var Ld=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Id=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}`,Yme=`
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture(uTexture, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture(uTexture, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture(uTexture, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture(uTexture, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    finalColor = color;
}`,Zme=`struct KawaseBlurUniforms {
  uOffset:vec2<f32>,
};

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> kawaseBlurUniforms : KawaseBlurUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uOffset = kawaseBlurUniforms.uOffset;
  var color: vec4<f32> = vec4<f32>(0.0);

  // Sample top left pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x - uOffset.x, uv.y + uOffset.y));
  // Sample top right pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x + uOffset.x, uv.y + uOffset.y));
  // Sample bottom right pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x + uOffset.x, uv.y - uOffset.y));
  // Sample bottom left pixel
  color += textureSample(uTexture, uSampler, vec2<f32>(uv.x - uOffset.x, uv.y - uOffset.y));
  // Average
  color *= 0.25;

  return color;
}`,Qme=`
precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uOffset;

uniform vec4 uInputClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample top right pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample bottom right pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Sample bottom left pixel
    color += texture(uTexture, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), uInputClamp.xy, uInputClamp.zw));

    // Average
    color *= 0.25;

    finalColor = color;
}
`,Jme=`struct KawaseBlurUniforms {
  uOffset:vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> kawaseBlurUniforms : KawaseBlurUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uOffset = kawaseBlurUniforms.uOffset;
  var color: vec4<f32> = vec4(0.0);

  // Sample top left pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x - uOffset.x, uv.y + uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample top right pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x + uOffset.x, uv.y + uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample bottom right pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x + uOffset.x, uv.y - uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Sample bottom left pixel
  color += textureSample(uTexture, uSampler, clamp(vec2<f32>(uv.x - uOffset.x, uv.y - uOffset.y), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
  // Average
  color *= 0.25;
    
  return color;
}`,e0e=Object.defineProperty,t0e=(t,e,r)=>e in t?e0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wo=(t,e,r)=>(t0e(t,typeof e!="symbol"?e+"":e,r),r);const DK=class kK extends ii{constructor(...e){let r=e[0]??{};(typeof r=="number"||Array.isArray(r))&&(vt("6.0.0","KawaseBlurFilter constructor params are now options object. See params: { strength, quality, clamp, pixelSize }"),r={strength:r},e[1]!==void 0&&(r.quality=e[1]),e[2]!==void 0&&(r.clamp=e[2])),r={...kK.DEFAULT_OPTIONS,...r};const i=bn.from({vertex:{source:Id,entryPoint:"mainVertex"},fragment:{source:r!=null&&r.clamp?Jme:Zme,entryPoint:"mainFragment"}}),s=_n.from({vertex:Ld,fragment:r!=null&&r.clamp?Qme:Yme,name:"kawase-blur-filter"});super({gpuProgram:i,glProgram:s,resources:{kawaseBlurUniforms:{uOffset:{value:new Float32Array(2),type:"vec2<f32>"}}}}),wo(this,"uniforms"),wo(this,"_pixelSize",{x:0,y:0}),wo(this,"_clamp"),wo(this,"_kernels",[]),wo(this,"_blur"),wo(this,"_quality"),this.uniforms=this.resources.kawaseBlurUniforms.uniforms,this.pixelSize=r.pixelSize??{x:1,y:1},Array.isArray(r.strength)?this.kernels=r.strength:typeof r.strength=="number"&&(this._blur=r.strength,this.quality=r.quality??3),this._clamp=!!r.clamp}apply(e,r,i,s){const a=this.pixelSizeX/r.source.width,n=this.pixelSizeY/r.source.height;let o;if(this._quality===1||this._blur===0)o=this._kernels[0]+.5,this.uniforms.uOffset[0]=o*a,this.uniforms.uOffset[1]=o*n,e.applyFilter(this,r,i,s);else{const u=Or.getSameSizeTexture(r);let c=r,f=u,h;const p=this._quality-1;for(let g=0;g<p;g++)o=this._kernels[g]+.5,this.uniforms.uOffset[0]=o*a,this.uniforms.uOffset[1]=o*n,e.applyFilter(this,c,f,!0),h=c,c=f,f=h;o=this._kernels[p]+.5,this.uniforms.uOffset[0]=o*a,this.uniforms.uOffset[1]=o*n,e.applyFilter(this,c,i,s),Or.returnTexture(u)}}get strength(){return this._blur}set strength(e){this._blur=e,this._generateKernels()}get quality(){return this._quality}set quality(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()}get kernels(){return this._kernels}set kernels(e){Array.isArray(e)&&e.length>0?(this._kernels=e,this._quality=e.length,this._blur=Math.max(...e)):(this._kernels=[0],this._quality=1)}get pixelSize(){return this._pixelSize}set pixelSize(e){if(typeof e=="number"){this.pixelSizeX=this.pixelSizeY=e;return}if(Array.isArray(e)){this.pixelSizeX=e[0],this.pixelSizeY=e[1];return}this._pixelSize=e}get pixelSizeX(){return this.pixelSize.x}set pixelSizeX(e){this.pixelSize.x=e}get pixelSizeY(){return this.pixelSize.y}set pixelSizeY(e){this.pixelSize.y=e}get clamp(){return this._clamp}_updatePadding(){this.padding=Math.ceil(this._kernels.reduce((e,r)=>e+r+.5,0))}_generateKernels(){const e=this._blur,r=this._quality,i=[e];if(e>0){let s=e;const a=e/r;for(let n=1;n<r;n++)s-=a,i.push(s)}this._kernels=i,this._updatePadding()}};wo(DK,"DEFAULT_OPTIONS",{strength:4,quality:3,clamp:!1,pixelSize:{x:1,y:1}});let r0e=DK;var n0e=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uAlpha;
uniform vec3 uColor;
uniform vec2 uOffset;

uniform vec4 uInputSize;

void main(void){
    vec4 sample = texture(uTexture, vTextureCoord - uOffset * uInputSize.zw);

    // Premultiply alpha
    sample.rgb = uColor.rgb * sample.a;

    // alpha user alpha
    sample *= uAlpha;

    finalColor = sample;
}`,i0e=`struct DropShadowUniforms {
  uAlpha: f32,
  uColor: vec3<f32>,
  uOffset: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> dropShadowUniforms : DropShadowUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  var color: vec4<f32> = textureSample(uTexture, uSampler, uv - dropShadowUniforms.uOffset * gfu.uInputSize.zw);

  // Premultiply alpha
  color = vec4<f32>(vec3<f32>(dropShadowUniforms.uColor.rgb * color.a), color.a);
  // alpha user alpha
  color *= dropShadowUniforms.uAlpha;

  return color;
}`,s0e=Object.defineProperty,a0e=(t,e,r)=>e in t?s0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Tu=(t,e,r)=>(a0e(t,typeof e!="symbol"?e+"":e,r),r);const UK=class MK extends ii{constructor(e){e={...MK.DEFAULT_OPTIONS,...e};const r=bn.from({vertex:{source:Id,entryPoint:"mainVertex"},fragment:{source:i0e,entryPoint:"mainFragment"}}),i=_n.from({vertex:Ld,fragment:n0e,name:"drop-shadow-filter"});super({gpuProgram:r,glProgram:i,resources:{dropShadowUniforms:{uAlpha:{value:e.alpha,type:"f32"},uColor:{value:new Float32Array(3),type:"vec3<f32>"},uOffset:{value:e.offset,type:"vec2<f32>"}}},resolution:e.resolution}),Tu(this,"uniforms"),Tu(this,"shadowOnly",!1),Tu(this,"_color"),Tu(this,"_blurFilter"),Tu(this,"_basePass"),this.uniforms=this.resources.dropShadowUniforms.uniforms,this._color=new qt,this.color=e.color??0,this._blurFilter=new r0e({strength:e.kernels??e.blur,quality:e.kernels?void 0:e.quality}),this._basePass=new ii({gpuProgram:bn.from({vertex:{source:Id,entryPoint:"mainVertex"},fragment:{source:`
                    @group(0) @binding(1) var uTexture: texture_2d<f32>; 
                    @group(0) @binding(2) var uSampler: sampler;
                    @fragment
                    fn mainFragment(
                        @builtin(position) position: vec4<f32>,
                        @location(0) uv : vec2<f32>
                    ) -> @location(0) vec4<f32> {
                        return textureSample(uTexture, uSampler, uv);
                    }
                    `,entryPoint:"mainFragment"}}),glProgram:_n.from({vertex:Ld,fragment:`
                in vec2 vTextureCoord;
                out vec4 finalColor;
                uniform sampler2D uTexture;

                void main(void){
                    finalColor = texture(uTexture, vTextureCoord);
                }
                `,name:"drop-shadow-filter"}),resources:{}}),Object.assign(this,e)}apply(e,r,i,s){const a=Or.getSameSizeTexture(r);e.applyFilter(this,r,a,!0),this._blurFilter.apply(e,a,i,s),this.shadowOnly||e.applyFilter(this._basePass,r,i,!1),Or.returnTexture(a)}get offset(){return this.uniforms.uOffset}set offset(e){this.uniforms.uOffset=e,this._updatePadding()}get offsetX(){return this.offset.x}set offsetX(e){this.offset.x=e,this._updatePadding()}get offsetY(){return this.offset.y}set offsetY(e){this.offset.y=e,this._updatePadding()}get color(){return this._color.value}set color(e){this._color.setValue(e);const[r,i,s]=this._color.toArray();this.uniforms.uColor[0]=r,this.uniforms.uColor[1]=i,this.uniforms.uColor[2]=s}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}get blur(){return this._blurFilter.strength}set blur(e){this._blurFilter.strength=e,this._updatePadding()}get quality(){return this._blurFilter.quality}set quality(e){this._blurFilter.quality=e,this._updatePadding()}get kernels(){return this._blurFilter.kernels}set kernels(e){this._blurFilter.kernels=e}get pixelSize(){return this._blurFilter.pixelSize}set pixelSize(e){typeof e=="number"&&(e={x:e,y:e}),Array.isArray(e)&&(e={x:e[0],y:e[1]}),this._blurFilter.pixelSize=e}get pixelSizeX(){return this._blurFilter.pixelSizeX}set pixelSizeX(e){this._blurFilter.pixelSizeX=e}get pixelSizeY(){return this._blurFilter.pixelSizeY}set pixelSizeY(e){this._blurFilter.pixelSizeY=e}_updatePadding(){const e=Math.max(Math.abs(this.offsetX),Math.abs(this.offsetY));this.padding=e+this.blur*2+this.quality*4}};Tu(UK,"DEFAULT_OPTIONS",{offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:void 0,blur:2,quality:3,pixelSize:{x:1,y:1},resolution:1});let o0e=UK;var u0e=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uStrength;
uniform vec3 uColor;
uniform float uKnockout;
uniform float uAlpha;

uniform vec4 uInputSize;
uniform vec4 uInputClamp;

const float PI = 3.14159265358979323846264;

// Hard-assignment of DIST and ANGLE_STEP_SIZE instead of using uDistance and uQuality to allow them to be use on GLSL loop conditions
const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.);
const float ANGLE_STEP_NUM = ceil(PI * 2. / ANGLE_STEP_SIZE);
const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.) / 2.;

void main(void) {
    vec2 px = vec2(1.) / uInputSize.xy;

    float totalAlpha = 0.;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.; angle < PI * 2.; angle += ANGLE_STEP_SIZE) {
      direction = vec2(cos(angle), sin(angle)) * px;

      for (float curDistance = 0.; curDistance < DIST; curDistance++) {
          displaced = clamp(vTextureCoord + direction * (curDistance + 1.), uInputClamp.xy, uInputClamp.zw);
          curColor = texture(uTexture, displaced);
          totalAlpha += (DIST - curDistance) * curColor.a;
      }
    }
    
    curColor = texture(uTexture, vTextureCoord);

    vec4 glowColor = vec4(uColor, uAlpha);
    bool knockout = uKnockout > .5;
    float innerStrength = uStrength[0];
    float outerStrength = uStrength[1];

    float alphaRatio = totalAlpha / MAX_TOTAL_ALPHA;
    float innerGlowAlpha = (1. - alphaRatio) * innerStrength * curColor.a * uAlpha;
    float innerGlowStrength = min(1., innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);
    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a) * uAlpha;
    float outerGlowStrength = min(1. - innerColor.a, outerGlowAlpha);
    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;

    if (knockout) {
      float resultAlpha = outerGlowAlpha + innerGlowAlpha;
      finalColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      finalColor = innerColor + outerGlowColor;
    }
}
`,l0e=`struct GlowUniforms {
  uDistance: f32,
  uStrength: vec2<f32>,
  uColor: vec3<f32>,
  uAlpha: f32,
  uQuality: f32,
  uKnockout: f32,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> glowUniforms : GlowUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let quality = glowUniforms.uQuality;
  let distance = glowUniforms.uDistance;

  let dist: f32 = glowUniforms.uDistance;
  let angleStepSize: f32 = min(1. / quality / distance, PI * 2.0);
  let angleStepNum: f32 = ceil(PI * 2.0 / angleStepSize);

  let px: vec2<f32> = vec2<f32>(1.0 / gfu.uInputSize.xy);

  var totalAlpha: f32 = 0.0;

  var direction: vec2<f32>;
  var displaced: vec2<f32>;
  var curColor: vec4<f32>;

  for (var angle = 0.0; angle < PI * 2.0; angle += angleStepSize) {
    direction = vec2<f32>(cos(angle), sin(angle)) * px;
    for (var curDistance = 0.0; curDistance < dist; curDistance+=1) {
      displaced = vec2<f32>(clamp(uv + direction * (curDistance + 1.0), gfu.uInputClamp.xy, gfu.uInputClamp.zw));
      curColor = textureSample(uTexture, uSampler, displaced);
      totalAlpha += (dist - curDistance) * curColor.a;
    }
  }
    
  curColor = textureSample(uTexture, uSampler, uv);

  let glowColorRGB = glowUniforms.uColor;
  let glowAlpha = glowUniforms.uAlpha;
  let glowColor = vec4<f32>(glowColorRGB, glowAlpha);
  let knockout: bool = glowUniforms.uKnockout > 0.5;
  let innerStrength = glowUniforms.uStrength[0];
  let outerStrength = glowUniforms.uStrength[1];

  let alphaRatio: f32 = (totalAlpha / (angleStepNum * dist * (dist + 1.0) / 2.0));
  let innerGlowAlpha: f32 = (1.0 - alphaRatio) * innerStrength * curColor.a * glowAlpha;
  let innerGlowStrength: f32 = min(1.0, innerGlowAlpha);
  
  let innerColor: vec4<f32> = mix(curColor, glowColor, innerGlowStrength);
  let outerGlowAlpha: f32 = alphaRatio * outerStrength * (1. - curColor.a) * glowAlpha;
  let outerGlowStrength: f32 = min(1.0 - innerColor.a, outerGlowAlpha);
  let outerGlowColor: vec4<f32> = outerGlowStrength * glowColor.rgba;
  
  if (knockout) {
    let resultAlpha: f32 = outerGlowAlpha + innerGlowAlpha;
    return vec4<f32>(glowColor.rgb * resultAlpha, resultAlpha);
  }
  else {
    return innerColor + outerGlowColor;
  }
}

const PI: f32 = 3.14159265358979323846264;`,c0e=Object.defineProperty,f0e=(t,e,r)=>e in t?c0e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,V1=(t,e,r)=>(f0e(t,typeof e!="symbol"?e+"":e,r),r);const NK=class FK extends ii{constructor(e){e={...FK.DEFAULT_OPTIONS,...e};const r=e.distance??10,i=e.quality??.1,s=bn.from({vertex:{source:Id,entryPoint:"mainVertex"},fragment:{source:l0e,entryPoint:"mainFragment"}}),a=_n.from({vertex:Ld,fragment:u0e.replace(/__ANGLE_STEP_SIZE__/gi,`${(1/i/r).toFixed(7)}`).replace(/__DIST__/gi,`${r.toFixed(0)}.0`),name:"glow-filter"});super({gpuProgram:s,glProgram:a,resources:{glowUniforms:{uDistance:{value:r,type:"f32"},uStrength:{value:[e.innerStrength,e.outerStrength],type:"vec2<f32>"},uColor:{value:new Float32Array(3),type:"vec3<f32>"},uAlpha:{value:e.alpha,type:"f32"},uQuality:{value:i,type:"f32"},uKnockout:{value:(e==null?void 0:e.knockout)??!1?1:0,type:"f32"}}},padding:r}),V1(this,"uniforms"),V1(this,"_color"),this.uniforms=this.resources.glowUniforms.uniforms,this._color=new qt,this.color=e.color??16777215}get distance(){return this.uniforms.uDistance}set distance(e){this.uniforms.uDistance=this.padding=e}get innerStrength(){return this.uniforms.uStrength[0]}set innerStrength(e){this.uniforms.uStrength[0]=e}get outerStrength(){return this.uniforms.uStrength[1]}set outerStrength(e){this.uniforms.uStrength[1]=e}get color(){return this._color.value}set color(e){this._color.setValue(e);const[r,i,s]=this._color.toArray();this.uniforms.uColor[0]=r,this.uniforms.uColor[1]=i,this.uniforms.uColor[2]=s}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}get quality(){return this.uniforms.uQuality}set quality(e){this.uniforms.uQuality=e}get knockout(){return this.uniforms.uKnockout===1}set knockout(e){this.uniforms.uKnockout=e?1:0}};V1(NK,"DEFAULT_OPTIONS",{distance:10,outerStrength:4,innerStrength:0,color:16777215,alpha:1,quality:.1,knockout:!1});let h0e=NK;const d0e=`precision mediump float;

in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition(void) {
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0 * uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(void) {
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void) {
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}`,p0e=`precision mediump float;

in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uHeightMap;
uniform vec4 uInputSize;
uniform vec3 uLightPosition;
uniform vec3 uLightColor;
uniform vec3 uAmbientColor;
uniform float uLightIntensity;
uniform float uHeightScale;
uniform float uShininess;
uniform float uSpecularIntensity;
uniform mat3 uTransformMatrix;

// Smooth height sampling
float sampleHeight(vec2 coord) {
    // Apply transform to rotate the height map coordinates
    vec3 transformedCoord = uTransformMatrix * vec3(coord - 0.5, 1.0);
    vec2 rotatedCoord = transformedCoord.xy + 0.5;
    
    // Clamp to avoid sampling outside texture bounds
    rotatedCoord = clamp(rotatedCoord, 0.0, 1.0);
    
    return texture(uHeightMap, rotatedCoord).r * uHeightScale;
}

// Calculate normal from height map using Sobel operator
vec3 calculateNormal(vec2 coord) {
    vec2 texelSize = 1.0 / uInputSize.xy;
    
    // Sample heights in a 3x3 grid
    float tl = sampleHeight(coord + vec2(-texelSize.x, -texelSize.y));
    float tm = sampleHeight(coord + vec2(0.0, -texelSize.y));
    float tr = sampleHeight(coord + vec2(texelSize.x, -texelSize.y));
    float ml = sampleHeight(coord + vec2(-texelSize.x, 0.0));
    float mr = sampleHeight(coord + vec2(texelSize.x, 0.0));
    float bl = sampleHeight(coord + vec2(-texelSize.x, texelSize.y));
    float bm = sampleHeight(coord + vec2(0.0, texelSize.y));
    float br = sampleHeight(coord + vec2(texelSize.x, texelSize.y));
    
    // Sobel gradients
    float sobelX = (tr + 2.0 * mr + br) - (tl + 2.0 * ml + bl);
    float sobelY = (bl + 2.0 * bm + br) - (tl + 2.0 * tm + tr);
    
    // Calculate normal vector
    vec3 normal = normalize(vec3(-sobelX, -sobelY, 8.0));
    return normal;
}

float getHeightVariance(vec2 coord) {
    vec2 texelSize = 1.0 / uInputSize.xy;
    float center = sampleHeight(coord);
    float variance = 0.0;
    
    // Sample surrounding pixels to detect sharp transitions
    for(float x = -1.0; x <= 1.0; x += 1.0) {
        for(float y = -1.0; y <= 1.0; y += 1.0) {
            if(x == 0.0 && y == 0.0) continue;
            float height = sampleHeight(coord + vec2(x, y) * texelSize);
            variance += abs(height - center);
        }
    }
    
    return variance / 8.0;
}

void main(void) {
    vec4 originalColor = texture(uTexture, vTextureCoord);
    
    // Early exit for transparent pixels
    if (originalColor.a < 0.001) {
        finalColor = originalColor;
        return;
    }
    
    // Calculate normal from height map
    vec3 normal = calculateNormal(vTextureCoord);
    
    // ADD THIS LINE BACK - Calculate height variance for edge detection:
    float heightVariance = getHeightVariance(vTextureCoord);
    
    // World position
    vec3 worldPos = vec3(vTextureCoord * uInputSize.xy, sampleHeight(vTextureCoord));
    
    // Light direction
    vec3 lightDir = normalize(uLightPosition - worldPos);
    
    // View direction
    vec3 viewDir = normalize(vec3(0.0, 0.0, 1.0));
    
    // Ambient lighting
    vec3 ambient = uAmbientColor * originalColor.rgb;
    
    // Diffuse lighting
    float diffuseStrength = max(dot(normal, lightDir), 0.0);
    vec3 diffuse = diffuseStrength * uLightColor * originalColor.rgb;
    
    // Specular lighting
    vec3 halfwayDir = normalize(lightDir + viewDir);
    float specularStrength = pow(max(dot(normal, halfwayDir), 0.0), uShininess);
    
    // Enhanced edge and wetness factors
    float edgeFactor = 1.0 - smoothstep(5.0, 20.0, heightVariance);
    
    // Add fresnel effect (more specular at grazing angles)
    float viewingAngle = abs(dot(normal, viewDir));
    float fresnelFactor = pow(1.0 - viewingAngle, 1.5);
    
    // Add height-based factor (higher areas get more specular)
    float currentHeight = sampleHeight(vTextureCoord);
    float heightFactor = smoothstep(5.0, 20.0, currentHeight);
    
    // Combine factors for wet edge effect
    float wetnessFactor = max(edgeFactor, max(fresnelFactor * 0.8, heightFactor * 0.6));
    
    // Reduce base specular but enhance at wet areas
    float finalSpecularIntensity = mix(0.15, 1.0, wetnessFactor);
    
    specularStrength *= finalSpecularIntensity;
    vec3 specular = specularStrength * uSpecularIntensity * uLightColor;
    
    // Distance attenuation
    float distance = length(uLightPosition - worldPos);
    float attenuation = 1.0 / (1.0 + 0.01 * distance + 0.001 * distance * distance);
    
    // Combine lighting
    vec3 finalColorRGB = ambient + (diffuse + specular) * uLightIntensity * attenuation;
    
    finalColor = vec4(finalColorRGB, originalColor.a);
}`,Pd=class Pd extends ii{constructor(r={}){const i={...Pd.defaults,...r},s=_n.from({vertex:d0e,fragment:p0e,name:"lighting-filter"});super({glProgram:s,antialias:!0,resources:{uHeightMap:i.heightMap.source,lighting:{uLightPosition:{value:[0,0,0],type:"vec3<f32>"},uLightColor:{value:[0,0,0],type:"vec3<f32>"},uAmbientColor:{value:[0,0,0],type:"vec3<f32>"},uLightIntensity:{value:i.lightIntensity,type:"f32"},uHeightScale:{value:i.heightScale,type:"f32"},uShininess:{value:i.shininess,type:"f32"},uSpecularIntensity:{value:i.specularIntensity,type:"f32"},uTransformMatrix:{value:[1,0,0,0,1,0,0,0,1],type:"mat3x3<f32>"}}}});Be(this,"area");this.lightPosition=i.lightPosition,this.lightColor=i.lightColor,this.ambientColor=i.ambientColor}get heightMap(){return this.resources.uHeightMap}set heightMap(r){this.resources.uHeightMap=r.source}get lightPosition(){return{x:this.resources.lighting.uniforms.uLightPosition[0],y:this.resources.lighting.uniforms.uLightPosition[1],z:this.resources.lighting.uniforms.uLightPosition[2]}}set lightPosition(r){this.resources.lighting.uniforms.uLightPosition=[r.x,r.y,r.z]}get lightColor(){return new qt(this.resources.lighting.uniforms.uLightColor).toHex()}set lightColor(r){const i=new qt(r);this.resources.lighting.uniforms.uLightColor=[i.red,i.green,i.blue]}get ambientColor(){return new qt(this.resources.lighting.uniforms.uAmbientColor).toHex()}set ambientColor(r){const i=new qt(r);this.resources.lighting.uniforms.uAmbientColor=[i.red,i.green,i.blue]}get lightIntensity(){return this.resources.lighting.uniforms.uLightIntensity}set lightIntensity(r){this.resources.lighting.uniforms.uLightIntensity=r}get heightScale(){return this.resources.lighting.uniforms.uHeightScale}set heightScale(r){this.resources.lighting.uniforms.uHeightScale=r}get shininess(){return this.resources.lighting.uniforms.uShininess}set shininess(r){this.resources.lighting.uniforms.uShininess=r}get specularIntensity(){return this.resources.lighting.uniforms.uSpecularIntensity}set specularIntensity(r){this.resources.lighting.uniforms.uSpecularIntensity=r}apply(r,i,s,a){const n=r.renderer.globalUniforms.globalUniformData.worldTransformMatrix;this.resources.lighting.uniforms.uTransformMatrix=[n.a,n.c,n.tx,n.b,n.d,n.ty,0,0,1],super.apply(r,i,s,a)}};Be(Pd,"defaults",{heightMap:ct.WHITE,lightPosition:{x:100,y:100,z:100},lightColor:"#ffffff",ambientColor:"#333333",lightIntensity:1,heightScale:10,shininess:32,specularIntensity:.5});let $1=Pd;const Bd={sugar:{icon:[0,9],shadow:"#BA772A",highlight:"#FFDFA6",edge:"#845221"},gingerbread:{icon:[1,9],shadow:"#96642c",highlight:"#e4b58c",edge:"#5f3c18"},chocolateChip:{icon:[2,9],shadow:"#BA772A",highlight:"#FFDFA6",edge:"#845221"},chocolate:{icon:[3,9],shadow:"#553613",highlight:"#845335",edge:"#2f1b08"},redvelvet:{icon:[4,9],shadow:"#551713",highlight:"#843535",edge:"#2f0808"},black:{icon:[5,9],shadow:"#393939",highlight:"#696969",edge:"#171717"},nuggets:{icon:[6,9],shadow:"#BA772A",highlight:"#FFDFA6",edge:"#845221"},gray:{icon:[7,9],shadow:"#5e5e5e",highlight:"#868686",edge:"#2c2c2c"}},H1={rainbow:{icon:[0,0],particlesPerPoint:10,scale:.75,spread:50,frames:[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0],[9,0],[10,0],[11,0],[12,0],[13,0],[14,0],[15,0]],tints:["#f9f5e6","#037abd","#634a90","#f98300","#219a4f","#eddc67","#fc5189","#e11a29","#eae5e5","#f2e479","#fa4582","#26a250"]},nonpareils:{icon:[1,0],particlesPerPoint:20,spread:70,scale:.4,frames:[[0,1]],tints:["#028cf1","#005106","#ce0309","#ffe109","#0b0b87","#060b0c","#f60a5f","#f7fdfb"]},quins:{icon:[2,0],particlesPerPoint:7,spread:75,scale:1.25,frames:[[0,2],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[7,2],[8,2],[9,2],[10,2],[11,2],[12,2]],tints:["#e9d95a","#f487be","#61ad66","#f0ac5a","#65c0cf","#e3e3e5","#ae7cbf"]},sugar:{icon:[3,0],particlesPerPoint:10,spread:50,scale:.75,frames:[[0,3],[1,3],[2,3],[3,3],[4,3],[5,3],[6,3],[7,3],[8,3],[9,3],[10,3],[11,3],[12,3]]},dust:{icon:[-1,-1],particlesPerPoint:10,scale:.75,spread:50,frames:[[0,4],[1,4],[2,4],[3,4],[4,4],[5,4],[6,4],[7,4],[8,4],[9,4],[10,4],[11,4],[12,4]]},silverDust:{icon:[4,0],extends:"dust",tints:["#c0c0c0"]},goldDust:{icon:[5,0],extends:"dust",tints:["#EFBF04"]},candy:{icon:[6,0],scale:1.75,frames:[[0,5],[1,5],[2,5]],tints:["#ebde15","#ed5125","#4274b9","#371412","#ed2733","#1da848"]},eyes:{icon:[7,0],scale:1.75,frames:[[3,5],[4,5],[5,5],[6,5]]},emoji:{icon:[0,1],scale:1.5,frames:[[0,6],[1,6],[2,6],[3,6],[4,6],[5,6],[6,6],[7,6],[8,6],[9,6],[10,6],[11,6],[12,6],[13,6],[14,6],[15,6]]},quip:{icon:[1,1],scale:1.5,frames:[[0,8],[1,8],[2,8],[3,8],[4,8],[5,8],[6,8],[7,8],[8,8],[9,8],[10,8],[11,8],[12,8],[13,8]]},star:{icon:[-1,-1],scale:1.5,frames:[[1,1]]},chocolate:{icon:[6,7],extends:"rainbow",tints:["#743610","#804031","#6e2817"]},hearts:{icon:[7,7],particlesPerPoint:3,scale:1,spread:50,frames:[[2,1]]},heart:{icon:[1,8],scale:1.5,frames:[[0,9],[1,9],[2,9],[3,9],[4,9],[5,9],[6,9],[7,9],[8,9],[9,9],[10,9],[11,9],[12,9],[13,9],[14,9],[15,9]]},chip:{icon:[4,8],scale:1.5,frames:[[5,1]]},salt:{icon:[2,1],extends:"sugar",particlesPerPoint:20,scale:.5,spread:100,tints:["#edf1e8"]},pepper:{icon:[3,1],extends:"dust",particlesPerPoint:5,scale:1,tints:["#231e1c","#a79e55","#6b4927"]},bat:{icon:[4,1],scale:2.25,frames:[[7,5]]},spider:{icon:[5,1],scale:2.25,frames:[[8,5]]},catEyes:{icon:[6,1],scale:2,frames:[[9,5]]},gumDrop:{icon:[7,1],scale:1.5,frames:[[10,5],[11,5],[12,5]],tints:["#ea3f3f","#e97b28","#fddd0c","#12b014","#116ade","#ae11de"]},primaryRainbow:{icon:[0,2],extends:"rainbow",tints:["#ea3f3f","#e97b28","#fddd0c","#12b014","#116ade","#ae11de"]},primaryCandy:{icon:[1,2],extends:"candy",tints:["#ea3f3f","#e97b28","#fddd0c","#12b014","#116ade","#ae11de"]},primaryStar:{icon:[2,2],extends:"star",tints:["#ea3f3f","#e97b28","#fddd0c","#12b014","#116ade","#ae11de"]},raisin:{icon:[0,8],scale:1.5,frames:[[3,1]]},clown:{icon:[2,8],scale:2.5,frames:[[14,8]]},peanut:{icon:[3,8],scale:3,frames:[[4,1]]},cherry:{icon:[3,2],scale:2.5,frames:[[0,7]]},lemon:{icon:[4,2],scale:2.5,frames:[[1,7]]},cherrySugar:{icon:[5,2],extends:"sugar",tints:["#ec053d"]},lemonSugar:{icon:[6,2],extends:"sugar",tints:["#fed12e"]},cherryLemonRainbow:{icon:[7,2],extends:"rainbow",tints:["#ec053d","#910c2b","#fed12e","#c9971e","#eae5e5"]},broccoli:{icon:[0,3],scale:2.5,frames:[[2,7]]},mushroom:{icon:[1,3],scale:2.5,frames:[[3,7]]},broccoliSugar:{icon:[2,3],extends:"sugar",tints:["#c3e688"]},mushroomSugar:{icon:[3,3],extends:"sugar",tints:["#d7b496"]},broccoliMushroomRainbow:{icon:[4,3],extends:"rainbow",tints:["#d7b496","#c6742a","#c3e688","#309424","#eae5e5"]},tomato:{icon:[5,3],scale:2.5,frames:[[4,7]]},grape:{icon:[6,3],scale:2.5,frames:[[5,7]]},tomatoSugar:{icon:[7,3],extends:"sugar",tints:["#ff3a1a"]},grapeSugar:{icon:[0,4],extends:"sugar",tints:["#5f3ee5"]},tomatoGrapeRainbow:{icon:[1,4],extends:"rainbow",tints:["#5f3ee5","#2d109e","#ff3a1a","#ba0e02","#eae5e5"]},beet:{icon:[4,5],scale:2.5,frames:[[10,7]]},carrot:{icon:[3,4],scale:2.5,frames:[[7,7]]},beetSugar:{icon:[6,5],extends:"sugar",tints:["#a6356b"]},carrotSugar:{icon:[5,4],extends:"sugar",tints:["#ff861c"]},beetCarrotRainbow:{icon:[6,4],extends:"rainbow",tints:["#a6356b","#661c3d","#ff861c","#bd5800","#eae5e5"]},pineapple:{icon:[7,4],scale:2.5,frames:[[8,7]]},flower:{icon:[0,5],scale:2.5,frames:[[9,7]]},pineappleSugar:{icon:[1,5],extends:"sugar",tints:["#fed12e"]},flowerSugar:{icon:[2,5],extends:"sugar",tints:["#75a4ff"]},pineappleFlowerRainbow:{icon:[3,5],extends:"rainbow",tints:["#75a4ff","#517ccb","#fed12e","#9f5410","#eae5e5"]},potato:{icon:[2,4],scale:2.5,frames:[[6,7]]},avocado:{icon:[5,5],scale:2.5,frames:[[11,7]]},potatoSugar:{icon:[4,4],extends:"sugar",tints:["#c6742a"]},avocadoSugar:{icon:[7,5],extends:"sugar",tints:["#f2eb76"]},potatoAvocadoRainbow:{icon:[0,6],extends:"rainbow",tints:["#f2eb76","#bac73b","#c6742a","#6b3a0c","#eae5e5"]},blueberry:{icon:[1,6],scale:2.5,frames:[[12,7]]},orange:{icon:[2,6],scale:2.5,frames:[[13,7]]},blueberrySugar:{icon:[3,6],extends:"sugar",tints:["#517ccb"]},orangeSugar:{icon:[4,6],extends:"sugar",tints:["#faefb1"]},blueberryOrangeRainbow:{icon:[5,6],extends:"rainbow",tints:["#faefb1","#fd862a","#517ccb","#18428e","#eae5e5"]},watermelon:{icon:[6,6],scale:2.5,frames:[[14,7]]},pickle:{icon:[7,6],scale:2.5,frames:[[15,7]]},watermelonSugar:{icon:[0,7],extends:"sugar",tints:["#f43082"]},pickleSugar:{icon:[1,7],extends:"sugar",tints:["#54c721"]},watermelonPickleRainbow:{icon:[2,7],extends:"rainbow",tints:["#54c721","#267300","#f43082","#b22465","#eae5e5"]},pizza:{icon:[3,7],scale:2.5,frames:[[15,8]]},pizzaSugar:{icon:[4,7],extends:"sugar",tints:["#f74410"]},pizzaRainbow:{icon:[5,7],extends:"rainbow",tints:["#f7d200","#be8b00","#f74410","#ba2e0d","#eae5e5"]}},GK=Ume(H1),DU=Mme(GK);class g0e{constructor(){Be(this,"renderer");Be(this,"area");Be(this,"container",new Ir);Be(this,"rootContainer");Be(this,"rootSprite");Be(this,"rootTexture");Be(this,"sprinklesTextureSheet");Be(this,"sprinklesHeightSheet");Be(this,"spriteTransform");Be(this,"heightSprite");Be(this,"lightingFilter");Be(this,"whiteFilter");Be(this,"glowFilter");Be(this,"blurFilter");Be(this,"dropShadowFilter");Be(this,"heightTexture");Be(this,"heightActiveTexture");Be(this,"heightActiveSprite");Be(this,"heightCommittedTexture");Be(this,"heightCommittedSprite");Be(this,"activeIcing",new Vi);Be(this,"activeSprinkles",new G1);Be(this,"activeSprinklesHeight",new G1);Be(this,"settings",{debug:!1,container:{dropShadowFilter:{enabled:!0,antialias:"on",blendMode:"normal",resolution:2,options:{offset:{x:1,y:1},color:"#000000",alpha:.75,blur:.25,quality:4}}},rootContainer:{lightingFilter:{enabled:!0,antialias:"on",blendMode:"normal",resolution:2,options:{lightPosition:{x:0,y:0,z:100},lightColor:"#ffffff",ambientColor:"#dad5b9",lightIntensity:5,heightScale:32,shininess:8,specularIntensity:15}}},rootTexture:{antialias:!1,resolution:2},heightTexture:{antialias:!1,resolution:2},heightCommittedTexture:{antialias:!1,resolution:2},heightActiveTexture:{antialias:!0,alpha:.5,resolution:2,blurFilter:{enabled:!0,options:{antialias:!0,strength:.5,quality:4,kernelSize:5,blendMode:"normal",resolution:1}},whiteFilter:{enabled:!0,options:{antialias:!0,resolution:2,blendMode:"normal"}},glowFilter:{enabled:!0,antialias:"on",blendMode:"screen",resolution:2,options:{innerStrength:2,outerStrength:0,distance:8,quality:1,color:"#111111",knockout:!1}}}})}async setup(e,r,i,s){this.renderer=e,this.area=r,this.spriteTransform=new Et(this.area.width/1e3,0,0,this.area.height/1e3);const{texture:a,height:n}=await this.loadSprinkles();return this.sprinklesTextureSheet=a,this.sprinklesHeightSheet=n,this.setupRootContainer(),this.setupContainer(),this.setupMask(i),this.setupHeight(),this.setupActiveHeight(),s.forEach((o,u)=>{u&&this.commitLayer(),this.updateLayer(o,u)}),this.settings.debug&&this.setupDebug(),this.container}destroy(){}commitLayer(){this.commitHeight(),this.commitIcing(),this.commitSprinkles()}updateLayer(e,r){e[0].sprinkleType?this.updateSprinkles(e,r):this.updateIcing(e),this.updateHeight()}setupRootContainer(){const e=[];this.rootContainer=new Ir,this.rootContainer.filterArea=this.area,this.rootContainer.setSize(this.area),this.rootTexture=Ma.create({width:this.area.width,height:this.area.height,antialias:this.settings.rootTexture.antialias,resolution:this.settings.rootTexture.resolution}),this.rootSprite=new An(this.rootTexture),this.rootContainer.addChild(this.rootSprite),this.activeIcing.setSize(this.area),this.rootContainer.addChild(this.activeIcing),this.activeSprinkles.setSize(this.area),this.rootContainer.addChild(this.activeSprinkles),this.settings.rootContainer.lightingFilter.enabled&&(this.lightingFilter=new $1(this.settings.rootContainer.lightingFilter.options),this.lightingFilter.antialias=this.settings.rootContainer.lightingFilter.antialias,this.lightingFilter.blendMode=this.settings.rootContainer.lightingFilter.blendMode,this.lightingFilter.resolution=this.settings.rootContainer.lightingFilter.resolution,e.push(this.lightingFilter)),this.rootContainer.filters=e}setupContainer(){const e=[];this.container.filterArea=this.area,this.container.setSize(this.area),this.container.addChild(this.rootContainer),this.settings.container.dropShadowFilter.enabled&&(this.dropShadowFilter=new o0e(this.settings.container.dropShadowFilter.options),this.dropShadowFilter.antialias=this.settings.container.dropShadowFilter.antialias,this.dropShadowFilter.blendMode=this.settings.container.dropShadowFilter.blendMode,e.push(this.dropShadowFilter)),this.container.filters=e}setupMask(e){const r=new Vi;r.boundsArea=this.area,r.path(e),r.fill("#000000"),this.rootContainer.mask=r}paintSolidTexture(e,r){const i=new An(ct.WHITE);i.setSize(this.area),i.tint=r,this.renderer.render({target:e,container:i,clear:!0})}setupHeight(){this.heightTexture=Ma.create({width:this.area.width,height:this.area.height,antialias:this.settings.heightTexture.antialias,resolution:this.settings.heightTexture.resolution}),this.paintSolidTexture(this.heightTexture,"#000"),this.heightCommittedTexture=Ma.create({width:this.area.width,height:this.area.height,antialias:this.settings.heightCommittedTexture.antialias,resolution:this.settings.heightCommittedTexture.resolution}),this.heightCommittedSprite=new An(this.heightCommittedTexture),this.settings.rootContainer.lightingFilter.enabled&&(this.lightingFilter.heightMap=this.heightTexture)}setupActiveHeight(){const e=[];this.heightActiveTexture=Ma.create({width:this.area.width,height:this.area.height,antialias:this.settings.heightActiveTexture.antialias,resolution:this.settings.heightActiveTexture.resolution}),this.heightActiveSprite=new An(this.heightActiveTexture),this.heightActiveSprite.alpha=this.settings.heightActiveTexture.alpha,this.settings.heightActiveTexture.blurFilter.enabled&&(this.blurFilter=new qu(this.settings.heightActiveTexture.blurFilter.options),e.push(this.blurFilter)),this.settings.heightActiveTexture.whiteFilter.enabled&&(this.whiteFilter=new dG(this.settings.heightActiveTexture.whiteFilter.options),this.whiteFilter.matrix=[0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0],e.push(this.whiteFilter)),this.settings.heightActiveTexture.glowFilter.enabled&&(this.glowFilter=new h0e(this.settings.heightActiveTexture.glowFilter.options),this.glowFilter.antialias=this.settings.heightActiveTexture.glowFilter.antialias,this.glowFilter.blendMode=this.settings.heightActiveTexture.glowFilter.blendMode,this.glowFilter.resolution=this.settings.heightActiveTexture.glowFilter.resolution,e.push(this.glowFilter)),this.heightActiveSprite.filters=e}commitHeight(){this.renderer.render({target:this.heightCommittedTexture,container:this.heightActiveSprite,clear:!1}),this.renderer.render({target:this.heightTexture,container:this.heightCommittedSprite,clear:!0,clearColor:"#000"}),this.activeSprinklesHeight.particleChildren=[]}updateHeight(){this.renderer.render({target:this.heightTexture,container:this.heightCommittedSprite,clear:!0,clearColor:"#000"}),this.renderer.render({target:this.heightTexture,container:this.heightActiveSprite,clear:!1})}commitIcing(){this.renderer.render({target:this.rootTexture,container:this.activeIcing,clear:!1}),this.activeIcing.clear()}updateIcing(e){this.blurFilter&&(this.blurFilter.enabled=!0),this.glowFilter&&(this.glowFilter.enabled=!0),this.activeIcing.clear(),e.forEach(r=>{this.activeIcing.setStrokeStyle({width:r.weight,color:r.color,cap:"round",join:"round"}),r.lines.forEach(i=>{if(i.length===1){this.activeIcing.moveTo(i[0].x-.5,i[0].y-.5),this.activeIcing.lineTo(i[0].x+.5,i[0].y+.5);return}i.forEach(({x:s,y:a},n)=>{if(!n){this.activeIcing.moveTo(s,a);return}this.activeIcing.lineTo(s,a)})}),this.activeIcing.stroke()}),this.renderer.render({target:this.heightActiveTexture,container:this.activeIcing,clear:!0})}async loadSprinkles(){const e=new URL("./assets/Rssw5FBF.png",import.meta.url).href,r=await na.load(e),i=new Nc(r,DU.texture);await i.parse();const s=new URL("./assets/D7-_-GF3.png",import.meta.url).href,a=await na.load(s),n=new Nc(a,DU.height);return await n.parse(),{texture:i,height:n}}commitSprinkles(){this.renderer.render({target:this.rootTexture,container:this.activeSprinkles,clear:!1}),this.activeSprinkles.particleChildren=[]}updateSprinkles(e,r){this.blurFilter&&(this.blurFilter.enabled=!1),this.glowFilter&&(this.glowFilter.enabled=!1),this.activeSprinkles.particleChildren=[],this.activeSprinklesHeight.particleChildren=[],e.forEach((i,s)=>{i.lines.forEach((a,n)=>{const{texture:o,height:u}=this.getParticles(i,a,r,n);this.activeSprinkles.addParticle(...o),this.activeSprinklesHeight.addParticle(...u)})}),this.activeSprinkles.update(),this.activeSprinklesHeight.update(),this.renderer.render({target:this.heightActiveTexture,container:this.activeSprinklesHeight,clear:!0})}getParticles(e,r,i,s){const a=[],n=[];if(!e.sprinkleType)return{texture:a,height:n};if(!this.sprinklesTextureSheet)return{texture:a,height:n};if(!this.sprinklesHeightSheet)return{texture:a,height:n};const o=GK[e.sprinkleType];if(!o)return{texture:a,height:n};for(let u=0;u<o.particlesPerPoint;u++){const c=new k4(`${i}:${s}:${u}`),f=c.random(0,o.frames.length-1),h=o.frames[f],p=h.spread*h.scale*this.spriteTransform.a,g=c.random(-p,p),m=c.random(-p,p),T={anchorX:.5,anchorY:.5,texture:this.sprinklesHeightSheet.textures[`${e.sprinkleType}:${f}`],x:r[0].x+g,y:r[0].y+m,scaleX:h.scale*this.spriteTransform.a,scaleY:h.scale*this.spriteTransform.d,rotation:c.random(0,628)/100},x={...T,texture:this.sprinklesTextureSheet.textures[`${e.sprinkleType}:${f}`]};h.tints&&(x.tint=c.sample(h.tints)),n.push(new M1(T)),a.push(new M1(x))}return{texture:a,height:n}}setupDebug(){this.heightSprite=new An(this.heightTexture),this.container.addChild(this.heightSprite),this.heightSprite.setSize(this.area)}}class m0e{constructor(){Be(this,"area");Be(this,"container",new Ir);Be(this,"path");Be(this,"shadowGraphics",new Vi);Be(this,"highlightGraphics",new Vi);Be(this,"edgeGraphics",new Vi)}setup(e,r,i,s){this.area=e,this.container.setSize(e),this.path=r;const a=new qu({strength:25,quality:10,blendMode:"multiply"});this.shadowGraphics.filters=[a],this.container.addChild(this.shadowGraphics);const n=new qu({strength:25,quality:10,blendMode:"screen"});this.highlightGraphics.filters=[n],this.container.addChild(this.highlightGraphics);const o=new qu({strength:10,blendMode:"multiply"});return this.edgeGraphics.filters=[o],this.container.addChild(this.edgeGraphics),this.setType(i),this.rotate(s),this.container}setType(e){const r=this.area.width*.1,i=Bd[e]??Bd.sugar;this.shadowGraphics.clear(),this.shadowGraphics.rect(-r,-r,this.area.width+r*2,this.area.height+r*2),this.shadowGraphics.fill({color:i.shadow,alpha:1}),this.shadowGraphics.path(this.path),this.shadowGraphics.cut(),this.highlightGraphics.clear(),this.highlightGraphics.rect(-r,-r,this.area.width+r*2,this.area.height+r*2),this.highlightGraphics.fill({color:i.highlight,alpha:.75}),this.highlightGraphics.path(this.path),this.highlightGraphics.cut(),this.edgeGraphics.clear(),this.edgeGraphics.rect(-r,-r,this.area.width+r*2,this.area.height+r*2),this.edgeGraphics.fill({color:i.edge,alpha:.5}),this.edgeGraphics.path(this.path),this.edgeGraphics.cut()}rotate(e){const r=this.area.width*.03,i=Yr.rotatePointByRadians({x:-r,y:-r},{x:0,y:0},-e);this.shadowGraphics.position.x=i.x,this.shadowGraphics.position.y=i.y;const s=Yr.rotatePointByRadians({x:r,y:r},{x:0,y:0},-e);this.highlightGraphics.position.x=s.x,this.highlightGraphics.position.y=s.y}}class Qp{constructor(e,r){Be(this,"el");Be(this,"settings");Be(this,"layers");Be(this,"awaitingForReady",[]);Be(this,"isReady",!1);Be(this,"pixi",new OA);Be(this,"area");Be(this,"container",new Ir);Be(this,"cookie",new jme);Be(this,"decorations",new g0e);Be(this,"shading",new m0e);Be(this,"shapeTransform");Be(this,"render",hte.throttle(()=>{this.pixi.stage.rotation=this.settings.rotation,this.pixi.render()},33.3));this.el=e,this.area=new lr(0,0,r.size.width,r.size.height),this.layers=Gme(r.lines),this.shapeTransform=new Et(this.area.width/100,0,0,this.area.height/100),this.settings={cookieType:r.cookieType,rotation:r.rotation*(Math.PI/180)},this.setup(r)}get rotation(){return this.settings.rotation*(180/Math.PI)}set rotation(e){this.settings.rotation=e*(Math.PI/180),this.shading.rotate(this.settings.rotation),this.render()}get cookieType(){return this.settings.cookieType}set cookieType(e){this.settings.cookieType=e,this.shading.setType(e),this.cookie.setType(e,this.render.bind(this))}async setup(e){const r=new la(e.outerShape).transform(this.shapeTransform);r.checkForHoles=!0;const i=new la(e.innerShape).transform(this.shapeTransform);i.checkForHoles=!0,await this.setupPixi(),await kme({app:this.pixi}),this.setupOuterMask(r);const s=await this.cookie.setup(this.area,this.settings.cookieType);this.container.addChild(s);const a=await this.decorations.setup(this.pixi.renderer,this.area,i,this.layers);this.container.addChild(a);const n=this.shading.setup(this.area,r,this.settings.cookieType,this.settings.rotation);this.container.addChild(n),this.render(),this.isReady=!0,this.awaitingForReady.forEach(([o,u])=>o())}destroy(){try{this.decorations.destroy(),na.reset(),this.pixi.destroy(!0,!0)}catch{console.warn("unable to destroy pixi context")}}async ready(){return new Promise((e,r)=>{if(this.isReady){e();return}this.awaitingForReady.push([e,r])})}async setupPixi(){await this.pixi.init({sharedTicker:!1,eventMode:"none",eventFeatures:{move:!1,globalMove:!1,click:!1,wheel:!1},autoStart:!1,width:this.area.width,height:this.area.height,backgroundAlpha:0,antialias:!0,preference:"webgl"}),this.pixi.ticker.stop(),this.pixi.canvas.style.width="100%",this.pixi.canvas.style.height="100%",this.pixi.stage.boundsArea=this.area,this.pixi.stage.position.x=this.area.width/2,this.pixi.stage.position.y=this.area.height/2,this.pixi.stage.pivot.x=this.area.width/2,this.pixi.stage.pivot.y=this.area.height/2,this.container.setSize(this.area),this.pixi.stage.addChild(this.container),this.el.appendChild(this.pixi.canvas)}export(){this.pixi.renderer.render(this.pixi.stage);try{const e=document.createElement("canvas");e.width=this.pixi.renderer.canvas.width,e.height=this.pixi.renderer.canvas.height;const r=e.getContext("2d");r.drawImage(this.pixi.renderer.canvas,0,0);const i=r.getImageData(0,0,e.width,e.height),s=new Uint8Array(i.data),a=Dme.encode([s.buffer],e.width,e.height,64);return this.arrayBufferToBase64(a)}catch(e){return console.error("Export failed:",e),this.pixi.renderer.canvas.toDataURL("image/png").split(",")[1]}}arrayBufferToBase64(e){let r="";const i=new Uint8Array(e);for(let s=0;s<i.byteLength;s++)r+=String.fromCharCode(i[s]);return window.btoa(r)}setupOuterMask(e){const r=new Vi;r.boundsArea=this.area,r.path(e),r.fill("#000000"),this.container.mask=r}}class _0e extends Qp{constructor(r,i){super(r,i);Be(this,"precision",2);Be(this,"settings");Be(this,"isInteracting",!1);Be(this,"canUndo",!1);this.settings={color:i.color,cookieType:i.cookieType,rotation:i.rotation*(Math.PI/180),sprinkleType:i.sprinkleType,tool:i.tool,weight:i.weight}}get currentLayer(){return this.layers[this.layers.length-1]??null}get currentLineGroup(){const r=this.currentLayer;return r?r[r.length-1]??null:null}get currentLine(){const r=this.currentLineGroup;return r?r.lines[r.lines.length-1]??null:null}get color(){return this.settings.color}set color(r){this.tool==="icing"&&r===this.settings.color||(this.settings.tool="icing",this.settings.color=r,this.createNewLayer())}get weight(){return this.settings.weight}set weight(r){this.settings.weight=r,this.tool==="sprinkles"?(this.settings.tool="icing",this.createNewLayer()):(this.settings.tool="icing",this.createNewLineGroup())}get sprinkleType(){return this.settings.sprinkleType}set sprinkleType(r){this.settings.tool="sprinkles",this.settings.sprinkleType=r,this.createNewLayer()}get tool(){return this.settings.tool}async setup(r){await super.setup(r),this.createNewLayer()}createNewLayer(){this.layers.push([]),this.decorations.commitLayer(),this.createNewLineGroup(),this.canUndo=!1}createNewLineGroup(){if(!this.currentLayer)return;const r={color:this.color,weight:this.weight,lines:[]};this.tool==="sprinkles"&&(r.sprinkleType=this.sprinkleType),this.currentLayer.push(r)}normalizePoint(r){const i=Math.min(Math.max(.5*this.weight,r.x),this.area.width-.5*this.weight),s=Math.min(Math.max(.5*this.weight,r.y),this.area.height-.5*this.weight);return{x:Yr.toPrecision(i,this.precision),y:Yr.toPrecision(s,this.precision)}}onStart(r){if(!this.currentLayer||!this.currentLineGroup)return;this.isInteracting=!0;const i=this.normalizePoint(r);this.currentLineGroup.lines.push([i]),this.decorations.updateLayer(this.currentLayer,this.layers.length),this.render()}onMove(r){if(this.tool==="sprinkles"||!this.currentLine||!this.isInteracting)return;const i=this.normalizePoint(r),s=this.currentLine[this.currentLine.length-1];if(!s){this.currentLine.push(i);return}const a=.5*this.weight,n={x:i.x-s.x,y:i.y-s.y},o=Math.sqrt(n.x**2+n.y**2);if(o>a){const u=(o-a)/o,c={x:n.x*u,y:n.y*u},f={x:s.x+c.x,y:s.y+c.y};this.currentLine.push(f)}this.currentLine.push(i),this.decorations.updateLayer(this.currentLayer,this.layers.length),this.render()}onEnd(){if(!this.currentLine||!this.isInteracting)return null;this.isInteracting=!1;const r=this.currentLine.map(i=>({x:Yr.toPrecision(i.x,this.precision),y:Yr.toPrecision(i.y,this.precision)}));return this.decorations.updateLayer(this.currentLayer,this.layers.length),this.render(),this.canUndo=!0,r}onUndo(){this.currentLayer&&this.currentLineGroup&&(this.currentLineGroup.lines.pop(),this.decorations.updateLayer(this.currentLayer,this.layers.length),this.render(),this.canUndo=!1)}}const b0e=or({props:{hostIsPaused:{type:Boolean},player:{type:Object,required:!0}},emits:{didChooseCookie:t=>!0},data(){return{totalTicks:30,ticks:30,interval:window.setInterval(()=>this.onInterval(),1e3),cookies:this.getCookies(),canvases:[]}},computed:{barStyles(){return{transform:`scaleX(${this.ticks/this.totalTicks*100}%)`}},isRedraw(){return this.player.redoodles!==void 0},isWarning(){return this.ticks<10}},mounted(){this.createCanvases()},beforeUnmount(){this.canvases.forEach(t=>t.destroy()),this.interval&&(window.clearInterval(this.interval),this.interval=null)},methods:{getCookies(){const t=new k4(this.player.options.cookieTypes.join("")),e=t.shuffled(this.player.options.cookieTypes);return this.player.shapes.map((r,i)=>({shapeIndex:i,rotation:t.random(0,359),cookieType:e[i%e.length]}))},async createCanvases(){await this.$nextTick(),this.canvases.forEach(e=>e.destroy());const t=this.$refs.cookie;t!=null&&t.length&&t.forEach((e,r)=>{var s;const i={cookieType:this.cookies[r].cookieType,rotation:this.cookies[r].rotation,innerShape:this.player.shapes[r].inner,outerShape:this.player.shapes[r].outer,lines:[...this.player.doodle.lines],size:this.player.doodle.size??{width:512,height:512}};(s=this.player.redoodles)!=null&&s[r]&&i.lines.unshift(...this.player.redoodles[r].lines),this.canvases.push(new Qp(e,i))})},onInterval(){this.hostIsPaused||(this.ticks-=1,!this.ticks&&this.onShapeClick(Math.floor(this.cookies.length/2)))},onShapeClick(t){this.$emit("didChooseCookie",this.cookies[t])}}}),x0e={class:"constrain"},v0e={class:"prompt"},E0e={class:"choices"},y0e=["onClick"],T0e={class:"cookie"},A0e={key:0,class:"label"},S0e={key:0};function R0e(t,e,r,i,s,a){return Pe(),Ge("div",x0e,[Se("p",v0e,xt(t.$bb(t.player.prompt)),1),Se("p",{class:kt(["info",{warning:t.isWarning}])},xt(t.$t("DECORATE.CHOOSE")),3),Se("div",E0e,[(Pe(!0),Ge(Wt,null,Vn(t.player.shapes,(n,o)=>(Pe(),Ge("button",{key:o,class:"shape",onClick:u=>t.onShapeClick(o)},[Se("div",T0e,[Se("div",{ref_for:!0,ref:"cookie",class:"canvas-wrapper"},null,512)]),!t.isRedraw&&o<2?(Pe(),Ge("span",A0e,xt(t.$t("DECORATE.CHALLENGE")),1)):Ot("",!0)],8,y0e))),128))]),Se("div",{class:kt(["timer",{warning:t.isWarning}])},[Se("span",{class:"bar",style:ko(t.barStyles)},null,4),t.isWarning?(Pe(),Ge("p",S0e,xt(t.$t("DECORATE.HURRY")),1)):Ot("",!0)],2)])}const C0e=er(b0e,[["render",R0e],["__scopeId","data-v-79610f08"]]),w0e=or({components:{TextInput:Tte},props:{category:{type:String,required:!1},error:{type:String,required:!1},isDisabled:{type:Boolean,required:!0},isSending:{type:Boolean,required:!0},modal:{type:String,required:!0},modelValue:{type:String,required:!0},objectUrl:{type:String,required:!1},prompt:{type:String,required:!1}},emits:{"update:modelValue":t=>!0,didCancel:()=>!0,isReady:()=>!0,shouldSubmit:()=>!0},data(){return{maxLength:48,isReady:!1,value:""}},computed:{characterCount(){return this.maxLength-this.modelValue.length}},methods:{onInput(t){this.$emit("update:modelValue",t)},onCancelClick(){this.modal==="confirm"&&this.$emit("didCancel")},onReadyClick(){this.$emit("isReady")},onSubmitClick(){this.$emit("shouldSubmit")}}}),L0e={key:0,class:"form confim"},I0e={class:"title"},B0e={class:"info"},P0e=["src","alt"],O0e={class:"info"},D0e={key:1,class:"error"},k0e={class:"count"},U0e=["disabled"],M0e={key:0},N0e={key:1},F0e=["src"],G0e={class:"info"},K0e={key:1,class:"error"},V0e={class:"count"},$0e=["disabled"],H0e={key:0},q0e={key:1};function X0e(t,e,r,i,s,a){const n=wr("TextInput"),o=ls("bb");return Pe(),Ge("div",{class:"dialog",onClick:e[6]||(e[6]=Fa((...u)=>t.onCancelClick&&t.onCancelClick(...u),["self"])),onKeypress:e[7]||(e[7]=cT((...u)=>t.onCancelClick&&t.onCancelClick(...u),["escape"]))},[t.modal==="confirm"&&!t.isReady?(Pe(),Ge("div",L0e,[Se("p",I0e,xt(t.$t("DECORATE.ARE_YOU_SURE")),1),Se("p",B0e,xt(t.$t("DECORATE.WARNING")),1),Se("button",{class:"cookie-button primary",onClick:e[0]||(e[0]=(...u)=>t.onReadyClick&&t.onReadyClick(...u))},xt(t.$t("DECORATE.READY")),1),Se("button",{class:"cookie-button secondary",onClick:e[1]||(e[1]=(...u)=>t.onCancelClick&&t.onCancelClick(...u))},xt(t.$t("DECORATE.KEEP_GOING")),1)])):(t.modal==="name"||t.isReady)&&t.category==="blank"?(Pe(),Ge("form",{key:1,class:"form name",onSubmit:e[3]||(e[3]=Fa((...u)=>t.onSubmitClick&&t.onSubmitClick(...u),["prevent"]))},[t.objectUrl?(Pe(),Ge("img",{key:0,src:t.objectUrl,alt:t.$t("DECORATE.YOUR_COOKIE")},null,8,P0e)):Ot("",!0),gr(Se("p",O0e,null,512),[[o,t.prompt]]),t.error?(Pe(),Ge("p",D0e,xt(t.error),1)):Ot("",!0),Se("div",{class:kt(["group",{full:!t.characterCount}])},[Zt(n,{modelValue:t.value,"onUpdate:modelValue":[e[2]||(e[2]=u=>t.value=u),t.onInput],type:"text",sanitizers:["input","emoji","html"],enterkeyhint:"send",autocapitalize:"off",autocorrect:"off",maxlength:t.maxLength,placeholder:`${t.$t("DECORATE.FILL_IN_BLANK")}`},null,8,["modelValue","maxlength","placeholder","onUpdate:modelValue"]),Se("span",k0e,xt(t.characterCount),1)],2),Se("button",{class:"cookie-button primary",disabled:t.isDisabled},[t.isSending?(Pe(),Ge("span",M0e,xt(t.$t("DECORATE.SENDING")),1)):(Pe(),Ge("span",N0e,xt(t.$t("DECORATE.SUBMIT")),1))],8,U0e)],32)):t.modal==="name"||t.isReady?(Pe(),Ge("form",{key:2,class:"form name",onSubmit:e[5]||(e[5]=Fa((...u)=>t.onSubmitClick&&t.onSubmitClick(...u),["prevent"]))},[t.objectUrl?(Pe(),Ge("img",{key:0,src:t.objectUrl,alt:"your cookie"},null,8,F0e)):Ot("",!0),Se("p",G0e,xt(t.$t("DECORATE.WAIT")),1),t.error?(Pe(),Ge("p",K0e,xt(t.error),1)):Ot("",!0),Se("div",{class:kt(["group",{full:!t.characterCount}])},[Zt(n,{modelValue:t.value,"onUpdate:modelValue":[e[4]||(e[4]=u=>t.value=u),t.onInput],type:"text",sanitizers:["input","emoji","html"],enterkeyhint:"send",autocapitalize:"off",autocorrect:"off",maxlength:t.maxLength,placeholder:`${t.$t("DECORATE.NAME")}`},null,8,["modelValue","maxlength","placeholder","onUpdate:modelValue"]),Se("span",V0e,xt(t.characterCount),1)],2),Se("button",{class:"cookie-button primary",disabled:t.isDisabled},[t.isSending?(Pe(),Ge("span",H0e,xt(t.$t("DECORATE.SENDING")),1)):(Pe(),Ge("span",q0e,xt(t.$t("DECORATE.SUBMIT")),1))],8,$0e)],32)):Ot("",!0)],32)}const z0e=er(w0e,[["render",X0e],["__scopeId","data-v-dc6fdb21"]]),W0e=or({props:{canvas:{type:Object,required:!1},options:{type:Object,required:!0}},emits:{didClickUndo:()=>!0},data(){return{drawers:[{key:"color",label:this.options.cookieTypes.includes("nuggets")?"Condiments":"Colors",action:"icing",options:this.options.colors},{key:"weight",label:"Tips",options:this.options.weights},{key:"sprinkleType",label:"Sprinkles",action:"sprinkles",options:this.options.sprinkleTypes},{key:"cookieType",label:"Cookie",options:this.options.cookieTypes}],drawer:null}},computed:{tools(){return this.drawers.map(t=>{var c,f,h,p;const e=((c=this.canvas)==null?void 0:c[t.key])??"",r=[t.key.toLowerCase()],i=[],s={},a=Math.max(...this.options.weights),n=((f=this.canvas)==null?void 0:f.color)??"transparent",o=((h=this.canvas)==null?void 0:h.weight)??0;if(this.drawer===t.key&&r.push("open"),((p=this.canvas)==null?void 0:p.tool)===t.action&&r.push("active"),t.key==="color")s["--color"]=n;else if(t.key==="weight")s["--color"]=n,s["--scale"]=o/a;else{const g=t.key==="sprinkleType"?H1[e]:Bd[e];if(g){const m=g.icon[0]/7*100,T=g.icon[1]/9*100;s["--backgroundPosition"]=`${m}% ${T}%`}}const u=t.options.map(g=>{const m=[t.key.toLowerCase()],T={};if(g===e&&m.push("selected"),t.key==="color")T["--color"]=g;else if(t.key==="weight")T["--color"]=n,T["--scale"]=g/a;else{const x=t.key==="sprinkleType"?H1[g]:Bd[g];if(x){const v=x.icon[0]/7*100,y=x.icon[1]/9*100;T["--backgroundPosition"]=`${v}% ${y}%`}}return{value:g,classes:m,styles:T}});return{key:t.key,label:t.label,toolClasses:r,drawerClasses:i,toolStyles:s,disabled:u.length<=1,items:u}})}},beforeUnmount(){this.closeDrawer()},methods:{closeDrawer(){this.drawer=null,window.removeEventListener("pointerdown",this.onMouseDown)},onCloseClick(){this.drawer=null},onUndoClick(){this.$emit("didClickUndo")},onToolClick(t){if(this.drawer===t.key){this.closeDrawer();return}window.addEventListener("pointerdown",this.onMouseDown),this.drawer=t.key},onOptionClick(t,e){this.canvas&&(this.closeDrawer(),this.canvas[t.key]=e.value)},onMouseDown(t){const e=t.target,r=this.$refs.tools;r&&(t.target&&r.contains(e)||this.closeDrawer())}}}),j0e=["disabled","onClick"],Y0e=["disabled"],Z0e=["onClick"];function Q0e(t,e,r,i,s,a){var n;return Pe(),Ge("div",{ref:"tools",class:kt(["tools-box",{open:t.drawer!==null}])},[(Pe(!0),Ge(Wt,null,Vn(t.tools,o=>(Pe(),Ge("button",{key:o.key,class:kt(["tool",o.toolClasses]),style:ko(o.toolStyles),disabled:o.disabled,onClick:u=>t.onToolClick(o)},[e[1]||(e[1]=Se("span",{class:"icon"},null,-1)),e[2]||(e[2]=Se("br",null,null,-1)),ys(xt(o.label),1)],14,j0e))),128)),Se("button",{class:"undo",disabled:!((n=t.canvas)!=null&&n.canUndo),onClick:e[0]||(e[0]=(...o)=>t.onUndoClick&&t.onUndoClick(...o))},e[3]||(e[3]=[Se("span",null,"UNDO",-1)]),8,Y0e),(Pe(!0),Ge(Wt,null,Vn(t.tools,o=>(Pe(),Ge(Wt,{key:o.key},[t.drawer===o.key?(Pe(),Ge("div",{key:0,class:kt(["drawer",o.drawerClasses])},[(Pe(!0),Ge(Wt,null,Vn(o.items,(u,c)=>(Pe(),Ge("button",{key:c,class:kt(["option",u.classes]),style:ko(u.styles),onClick:f=>t.onOptionClick(o,u)},e[4]||(e[4]=[Se("span",{class:"icon"},null,-1)]),14,Z0e))),128))],2)):Ot("",!0)],64))),128))],2)}const J0e=er(W0e,[["render",Q0e],["__scopeId","data-v-d41a799d"]]),e_e=or({components:{ChooseCookie:C0e,NameModal:z0e,Tools:J0e},props:{player:{type:Object,required:!0},hostIsPaused:{type:Boolean},status:{type:Object,required:!1}},data(){return{isSubmittingCookie:!1,isSubmittingName:!1,error:null,name:"",hasShape:!1,canvas:null,objectUrl:null,syncProperties:nfe(this.rawSyncProperties.bind(this),1e3),modal:this.player.doodle.meta.locked?"name":!1}},computed:{canSubmitName(){return!(this.isSubmittingName||this.player.category==="avatar"||this.name.length<=0)},canSubmitCookie(){return!this.isSubmittingCookie},cta(){return this.player.category==="redraw"?this.$t("DECORATE.RENAME"):this.player.category==="blank"?this.$t("DECORATE.FILL_IN_BLANK"):this.$t("DECORATE.NAME")}},watch:{status:{handler(t,e){(e==null?void 0:e.status)!=="submit"&&t.status==="submit"&&this.autoSubmit()}}},mounted(){var e;const t=this.$ecastManager.keyForRef("player","responseKey");if(t&&((e=this.$debugRecorder)==null||e.setOutgoingIgnoredKeys([t])),this.player.properties.shapeIndex!==void 0){this.hasShape=!0,this.createCanvas(this.player.properties);return}this.player.shapes.length<=1&&this.onDidChooseCookie({...this.player.properties,shapeIndex:0})},beforeUnmount(){var t;(t=this.canvas)==null||t.destroy()},methods:{async onDidChooseCookie(t){this.hasShape=!0,await this.createCanvas(t),await this.syncProperties(t.shapeIndex)},async createCanvas(t){var i;await this.$nextTick(),this.canvas&&this.canvas.destroy();const e=this.$refs.cookie;if(!e)return;const r={cookieType:t.cookieType,rotation:t.rotation,innerShape:this.player.shapes[t.shapeIndex].inner,outerShape:this.player.shapes[t.shapeIndex].outer,shouldStroke:this.player.category!=="avatar",lines:[...this.player.doodle.lines],tool:"icing",size:this.player.doodle.size??{width:512,height:512},color:this.player.options.colors[0],sprinkleType:this.player.options.sprinkleTypes[0],weight:this.player.options.weights[Math.floor(this.player.options.weights.length/2)]};(i=this.player.redoodles)!=null&&i[t.shapeIndex]&&r.lines.unshift(...this.player.redoodles[t.shapeIndex].lines),this.canvas=new _0e(e,r)},onRotationUpdate(){this.syncProperties()},async rawSyncProperties(t){var r,i;if(!this.canvas||(t=t??this.player.properties.shapeIndex,t===void 0))return;const e=this.$ecastManager.keyForRef("player","properties");if(e)try{await this.$ecast.updateObject(e,{shapeIndex:t,rotation:(r=this.canvas)==null?void 0:r.rotation,cookieType:(i=this.canvas)==null?void 0:i.cookieType})}catch(s){this.$handleEcastError(s)}},onPointerBoxStart(t){if(!this.canvas||this.isSubmittingCookie)return;const e={x:t.detail.translations.doodleCanvas.x,y:t.detail.translations.doodleCanvas.y};this.canvas.onStart(e),this.canvas.tool==="sprinkles"&&(t.detail.cancel(),this.onPointerBoxEnd())},onPointerBoxMove(t){if(!this.canvas||this.isSubmittingCookie)return;const e={x:t.detail.translations.doodleCanvas.x,y:t.detail.translations.doodleCanvas.y};this.canvas.onMove(e)},async onPointerBoxEnd(){if(!this.canvas||this.isSubmittingCookie)return;const t=this.canvas.onEnd();if(t)try{const e={index:this.player.doodle.lines.length,color:this.canvas.color,weight:this.canvas.weight,points:t};this.canvas.tool==="sprinkles"&&(e.brush=this.canvas.sprinkleType),await this.$ecast.strokeDoodle(this.player.doodle.key,e)}catch(e){this.$handleEcastError(e)}},async onDidClickUndo(){if(this.canvas&&this.canvas.canUndo){this.canvas.onUndo();try{await this.$ecast.undoDoodle(this.player.doodle.key)}catch(t){this.$handleEcastError(t)}}},async autoSubmit(){await this.syncProperties(),await this.submitCookie(),await this.submitName()},async onSubmitCookieClick(){var t;if(this.player.category!=="avatar"){if(((t=this.status)==null?void 0:t.status)==="normal"&&!this.modal){this.modal="confirm";return}this.modal="name"}return this.submitCookie()},async onNameUpdate(){var e;this.error=null;const t=this.$ecastManager.keyForRef("player","name");if(!((e=this.$ecastManager.meta(t))!=null&&e.locked))try{await this.$ecast.updateText(t,this.name)}catch(r){r instanceof hc.EcastFilterError||this.$handleEcastError(r)}},onDidCancelName(){this.modal=!1},async onShouldSubmitName(){return this.submitName()},async submitCookie(){var r;if(!this.canSubmitCookie)return;this.isSubmittingCookie=!0;const t=(r=this.canvas)==null?void 0:r.export();if(!t)throw new Error("No base64");this.objectUrl=`data:image/png;base64,${t}`;const e=this.player.doodle.lines.some(i=>!i.brush);try{await this.syncProperties(),await this.$ecast.updateObject(this.player.responseKey,{onlyUsedSprinkles:!!this.player.doodle.lines.length&&!e,submit:!0,base64:t}),await this.$ecast.lock(this.player.doodle.key)}catch(i){this.isSubmittingCookie=!1,this.$handleEcastError(i)}},async submitName(){var e;const t=this.$ecastManager.keyForRef("player","name");if(this.error=null,!!this.canSubmitName&&!((e=this.$ecastManager.meta(t))!=null&&e.locked)){this.isSubmittingName=!0;try{await this.$ecast.updateText(t,this.name),await this.$ecast.lock(t)}catch(r){this.isSubmittingName=!1,r instanceof hc.EcastFilterError?(this.error=this.$t("ERROR.TEXT_NAUGHTY"),this.name=""):this.$handleEcastError(r)}}}}}),t_e={class:"decorate"},r_e={class:"cookie-box"},n_e={key:0,class:"sending-icon"},i_e={class:"canvas-container"},s_e={ref:"cookie",class:"canvas-wrapper"},a_e={key:0,class:"rotate-box"},o_e=["disabled"],u_e={class:"submit-box"},l_e=["disabled"],c_e={key:0},f_e={key:1},h_e=["disabled"];function d_e(t,e,r,i,s,a){var h,p,g,m;const n=wr("ChooseCookie"),o=wr("Tools"),u=wr("NameModal"),c=ls("pointerbox-translate"),f=ls("pointerbox");return Pe(),Ge("div",t_e,[t.hasShape?(Pe(),Ge("div",{key:1,class:kt(["constrain extended",{sending:t.isSubmittingCookie}])},[Zt(o,{canvas:t.canvas,options:t.player.options,onDidClickUndo:t.onDidClickUndo},null,8,["canvas","options","onDidClickUndo"]),Se("div",r_e,[t.isSubmittingCookie?(Pe(),Ge("div",n_e)):Ot("",!0),gr((Pe(),Ge("div",{class:"cookie-wrapper","onPointerbox:start":e[0]||(e[0]=(...T)=>t.onPointerBoxStart&&t.onPointerBoxStart(...T)),"onPointerbox:move":e[1]||(e[1]=(...T)=>t.onPointerBoxMove&&t.onPointerBoxMove(...T)),"onPointerbox:end":e[2]||(e[2]=(...T)=>t.onPointerBoxEnd&&t.onPointerBoxEnd(...T)),"onPointerbox:cancel":e[3]||(e[3]=(...T)=>t.onPointerBoxEnd&&t.onPointerBoxEnd(...T))},[gr((Pe(),Ge("div",i_e,[Se("div",s_e,null,512)])),[[c,{id:"doodleCanvas",width:((h=t.player.doodle.size)==null?void 0:h.width)??1e3,height:((p=t.player.doodle.size)==null?void 0:p.height)??1e3,rotation:((g=t.canvas)==null?void 0:g.rotation)??0}]])],32)),[[f,void 0,void 0,{restrict:!0}]])]),t.canvas?(Pe(),Ge("div",a_e,[e[9]||(e[9]=Se("span",null,"ROTATE",-1)),gr(Se("input",{id:"rotation","onUpdate:modelValue":e[4]||(e[4]=T=>t.canvas.rotation=T),name:"rotation",class:"rotate",type:"range",min:"0",max:"360",disabled:t.isSubmittingCookie,onInput:e[5]||(e[5]=(...T)=>t.onRotationUpdate&&t.onRotationUpdate(...T))},null,40,o_e),[[wy,t.canvas.rotation,void 0,{number:!0}]])])):Ot("",!0),Se("div",u_e,[t.player.category==="avatar"?(Pe(),Ge("button",{key:0,class:"cookie-button primary",disabled:!t.canSubmitCookie,onClick:e[6]||(e[6]=(...T)=>t.onSubmitCookieClick&&t.onSubmitCookieClick(...T))},[t.isSubmittingCookie?(Pe(),Ge("span",c_e,xt(t.$t("DECORATE.SENDING")),1)):(Pe(),Ge("span",f_e,xt(t.$t("DECORATE.SUBMIT_AVATAR")),1))],8,l_e)):(Pe(),Ge("button",{key:1,class:kt(["cookie-button primary",(m=t.status)==null?void 0:m.status]),disabled:!t.canSubmitCookie,onClick:e[7]||(e[7]=(...T)=>t.onSubmitCookieClick&&t.onSubmitCookieClick(...T))},xt(t.cta),11,h_e))])],2)):(Pe(),$n(n,{key:0,"host-is-paused":t.hostIsPaused,player:t.player,onDidChooseCookie:t.onDidChooseCookie},null,8,["host-is-paused","player","onDidChooseCookie"])),t.modal?(Pe(),$n(u,{key:2,modelValue:t.name,"onUpdate:modelValue":[e[8]||(e[8]=T=>t.name=T),t.onNameUpdate],modal:t.modal,"object-url":t.objectUrl,error:t.error,"is-disabled":!t.canSubmitName,"is-sending":t.isSubmittingName,prompt:t.player.prompt,category:t.player.category,onDidCancel:t.onDidCancelName,onIsReady:t.onSubmitCookieClick,onShouldSubmit:t.onShouldSubmitName},null,8,["modelValue","modal","object-url","error","is-disabled","is-sending","prompt","category","onUpdate:modelValue","onDidCancel","onIsReady","onShouldSubmit"])):Ot("",!0)])}const p_e=er(e_e,[["render",d_e],["__scopeId","data-v-c309e317"]]),g_e={},m_e={viewBox:"0 0 300 300"};function __e(t,e){return Pe(),Ge("svg",m_e,e[0]||(e[0]=[Xd('<path class="outer-stroke" d="M290.94,158.58c-1.36-2.77-3.41-6.96-3.41-8.58s2.05-5.81,3.41-8.58c3.33-6.81,7.48-15.29,5.31-24.79-2.22-9.76-9.79-15.68-15.86-20.45-2.18-1.71-5.83-4.57-6.49-5.86-.65-1.36-.63-6.12-.62-8.97.04-7.64.09-17.15-6.07-24.86-6.17-7.72-15.48-9.78-22.96-11.43-2.76-.61-7.39-1.63-8.54-2.55-1.14-.93-3.13-5.18-4.33-7.71-3.27-6.95-7.35-15.61-16.3-19.93-8.84-4.28-18.07-2.12-25.5-.38-2.97.7-7.48,1.75-8.98,1.4-1.39-.36-4.93-3.24-7.04-4.95-6.02-4.88-13.5-10.94-23.57-10.94s-17.55,6.07-23.57,10.94c-2.12,1.72-5.66,4.59-7.04,4.95-1.5.35-6.01-.7-8.99-1.4-7.42-1.73-16.66-3.89-25.49.38-8.95,4.32-13.03,12.98-16.3,19.93-1.19,2.54-3.19,6.78-4.33,7.71-1.16.92-5.78,1.94-8.55,2.55-7.48,1.65-16.78,3.71-22.96,11.44-6.15,7.7-6.1,17.21-6.06,24.85.01,2.85.04,7.62-.61,8.97-.66,1.3-4.31,4.16-6.49,5.86-6.08,4.76-13.64,10.68-15.86,20.44-2.17,9.5,1.98,17.98,5.31,24.79,1.36,2.77,3.41,6.96,3.41,8.58s-2.05,5.81-3.41,8.59c-3.33,6.81-7.48,15.29-5.31,24.78,2.22,9.76,9.79,15.68,15.86,20.44,2.18,1.71,5.83,4.57,6.49,5.86.65,1.35.63,6.12.62,8.97-.04,7.64-.09,17.15,6.07,24.86,6.17,7.72,15.48,9.78,22.96,11.43,2.76.61,7.39,1.63,8.55,2.55,1.14.93,3.14,5.17,4.33,7.71,3.27,6.95,7.35,15.61,16.29,19.93,8.84,4.27,18.08,2.11,25.5.38,2.98-.7,7.47-1.74,8.99-1.4,1.39.36,4.93,3.24,7.04,4.95,6.01,4.88,13.5,10.94,23.57,10.94s17.55-6.07,23.57-10.94c2.12-1.72,5.66-4.59,7.04-4.95,1.52-.34,6.01.7,8.99,1.4,7.43,1.74,16.66,3.89,25.5-.38,8.95-4.32,13.02-12.98,16.3-19.93,1.19-2.53,3.19-6.78,4.32-7.71,1.16-.92,5.79-1.94,8.55-2.55,7.48-1.65,16.78-3.71,22.96-11.44,6.15-7.7,6.1-17.21,6.06-24.86-.01-2.85-.04-7.62.61-8.97.66-1.3,4.31-4.16,6.49-5.87,6.08-4.76,13.64-10.68,15.86-20.43,2.17-9.5-1.98-17.98-5.31-24.79Z" data-v-431ec039></path><path class="outer-ribbon" d="M290.94,158.58c-1.36-2.77-3.41-6.96-3.41-8.58s2.05-5.81,3.41-8.58c3.33-6.81,7.48-15.29,5.31-24.79-2.22-9.76-9.79-15.68-15.86-20.45-2.18-1.71-5.83-4.57-6.49-5.86-.65-1.36-.63-6.12-.62-8.97.04-7.64.09-17.15-6.07-24.86-6.17-7.72-15.48-9.78-22.96-11.43-2.76-.61-7.39-1.63-8.54-2.55-1.14-.93-3.13-5.18-4.33-7.71-3.27-6.95-7.35-15.61-16.3-19.93-8.84-4.28-18.07-2.12-25.5-.38-2.97.7-7.48,1.75-8.98,1.4-1.39-.36-4.93-3.24-7.04-4.95-6.02-4.88-13.5-10.94-23.57-10.94s-17.55,6.07-23.57,10.94c-2.12,1.72-5.66,4.59-7.04,4.95-1.5.35-6.01-.7-8.99-1.4-7.42-1.73-16.66-3.89-25.49.38-8.95,4.32-13.03,12.98-16.3,19.93-1.19,2.54-3.19,6.78-4.33,7.71-1.16.92-5.78,1.94-8.55,2.55-7.48,1.65-16.78,3.71-22.96,11.44-6.15,7.7-6.1,17.21-6.06,24.85.01,2.85.04,7.62-.61,8.97-.66,1.3-4.31,4.16-6.49,5.86-6.08,4.76-13.64,10.68-15.86,20.44-2.17,9.5,1.98,17.98,5.31,24.79,1.36,2.77,3.41,6.96,3.41,8.58s-2.05,5.81-3.41,8.59c-3.33,6.81-7.48,15.29-5.31,24.78,2.22,9.76,9.79,15.68,15.86,20.44,2.18,1.71,5.83,4.57,6.49,5.86.65,1.35.63,6.12.62,8.97-.04,7.64-.09,17.15,6.07,24.86,6.17,7.72,15.48,9.78,22.96,11.43,2.76.61,7.39,1.63,8.55,2.55,1.14.93,3.14,5.17,4.33,7.71,3.27,6.95,7.35,15.61,16.29,19.93,8.84,4.27,18.08,2.11,25.5.38,2.98-.7,7.47-1.74,8.99-1.4,1.39.36,4.93,3.24,7.04,4.95,6.01,4.88,13.5,10.94,23.57,10.94s17.55-6.07,23.57-10.94c2.12-1.72,5.66-4.59,7.04-4.95,1.52-.34,6.01.7,8.99,1.4,7.43,1.74,16.66,3.89,25.5-.38,8.95-4.32,13.02-12.98,16.3-19.93,1.19-2.53,3.19-6.78,4.32-7.71,1.16-.92,5.79-1.94,8.55-2.55,7.48-1.65,16.78-3.71,22.96-11.44,6.15-7.7,6.1-17.21,6.06-24.86-.01-2.85-.04-7.62.61-8.97.66-1.3,4.31-4.16,6.49-5.87,6.08-4.76,13.64-10.68,15.86-20.43,2.17-9.5-1.98-17.98-5.31-24.79Z" data-v-431ec039></path><path class="inner-ribbon" d="M283.67,119.5c-2.2-9.67-17.17-14.83-21.38-23.55-4.28-8.86.94-23.77-5.15-31.39-6.11-7.65-21.83-5.85-29.48-11.96-7.61-6.09-9.32-21.82-18.18-26.1-8.72-4.22-22.08,4.19-31.75,1.99-9.37-2.14-17.73-15.57-27.73-15.57s-18.37,13.43-27.73,15.57c-9.66,2.2-23.02-6.2-31.74-1.99-8.86,4.28-10.57,20.02-18.19,26.1-7.65,6.11-23.36,4.31-29.48,11.96-6.09,7.61-.86,22.53-5.14,31.39-4.22,8.72-19.18,13.89-21.39,23.55-2.14,9.37,9.04,20.5,9.04,30.5s-11.18,21.14-9.04,30.5c2.2,9.67,17.17,14.83,21.38,23.55,4.28,8.86-.94,23.77,5.15,31.39,6.11,7.65,21.83,5.85,29.48,11.96,7.61,6.09,9.32,21.82,18.18,26.1,8.72,4.21,22.08-4.19,31.75-1.99,9.37,2.14,17.73,15.57,27.73,15.57s18.37-13.43,27.73-15.57c9.66-2.2,23.02,6.2,31.74,1.99,8.86-4.28,10.57-20.02,18.19-26.1,7.65-6.11,23.36-4.31,29.48-11.96,6.09-7.61.86-22.53,5.14-31.39,4.22-8.72,19.18-13.89,21.39-23.55,2.14-9.37-9.04-20.5-9.04-30.5s11.18-21.14,9.04-30.5" data-v-431ec039></path><path class="circle" d="M150,252.82c-56.69,0-102.82-46.13-102.82-102.82s46.13-102.82,102.82-102.82,102.82,46.13,102.82,102.82-46.13,102.82-102.82,102.82" data-v-431ec039></path><path class="hand" d="M86,148.18c-7.12-7.12.01-19.92,9.76-17.71-2.8-11,12.21-18.53,19.44-9.8.03-8.41,10.75-13.38,17.18-7.96,0,0,8.32,7.98,8.32,7.98,7.82-7.81,16.05.28,21.62,6.26,8.82-11.29,16.37,3.78,21.58,10.04,2.41-6.15,11.03-9.12,14.92-2.87,0,0,15.45,19.94,15.45,19.94,25.31,35.52-10.1,102.95-54.18,72.1-9.32.45-18.69-3.19-25.4-9.65,0,0-48.69-46.8-48.69-46.8-5.78-5.17-2.29-15.6,5.42-16.3l-5.42-5.22Z" data-v-431ec039></path><path class="hand-left" d="M120.48,125.77l1.21,1.16c4.4-4.3,11.98-3.75,15.96.84.06-1.4.34-2.88,1.04-4.14l-8.62-8.27c-6.46-5.12-15.24,4.27-9.59,10.4ZM101.24,133.44l7.21,6.93c2.46-2.55,6.24-3.66,9.78-2.91-.54-2.61-.16-5.47,1.24-7.77-1.09-1.1-6.51-6.27-7.74-7.46-7.13-6.43-17.38,4.48-10.5,11.21ZM182.63,141.08l-9.76-12.57c-2.03-3.39-6.23-2-8,.88l17.48,16.78c-.17-1.68-.04-3.4.28-5.09ZM99.16,155.97h0s9.03,8.67,9.03,8.67c1.42-1.99,3.8-3.25,6.22-3.56-4.83-4.28-12.03-10.6-7.99-17.76l-7.77-7.46c-.03-.11-.34-.36-.41-.45-4.25-3.79-11.77-.34-11.6,5.43-.85,4.54,10.21,12.17,12.52,15.14ZM106.11,170.71c-.02-.97.15-1.9.41-2.81l-9.78-9.38s0,0-.01,0h0c-2.26-2.27-6.28-2.18-8.44.19-2.28,2.25-2.21,6.28.16,8.45,0,0,48.69,46.8,48.69,46.8,5.1,4.93,11.93,8.01,18.99,8.6-2.2-3.56-53.39-47.36-50.01-51.84Z" data-v-431ec039></path><path class="hand-right" d="M160.19,221.57c40.54,32.62,75.04-31.94,51.19-65.51,0,0-15.44-19.93-15.44-19.93-3.45-4.85-8.8,0-9.71,4.73-.92,3.65-.33,7.76,1.49,10.49l15.8,15.13c1.65,1.55-.79,4.16-2.44,2.55-10.19-9.78-37.42-35.89-47.94-46.01-4.28-4.38-12.31-.83-11.96,5.26-1.58,4.2,26.18,26.97,28.24,30.02,1.67,1.55-.82,4.16-2.44,2.54-4.49-4.29-28.28-27.17-32.21-30.96-7.03-7.59-18.51,4.23-10.66,11.03h0c.06.08,32.16,30.92,32.26,31.01,1.65,1.55-.8,4.16-2.44,2.55-3.56-2.25-33.66-35.21-37.87-33.72-5.1-.18-8.86,5.7-6.44,10.25.56,1.77,11.26,11.11,12.58,12.67.17,1.26,25.76,22.02,21.96,23.51-1.22,3.93-23.26-20.96-24.41-20.97-3.6-3.74-10.4-.71-10.11,4.44-3.7,1.07,50.18,49.82,50.55,50.93Z" data-v-431ec039></path><path class="sparks" d="M190.2,95.47l-1.77,21.86,13.05-17.44-11.27-4.42ZM162.7,100.25l13.5,17.28-2.22-21.67-11.29,4.39ZM214.38,112.34l-15.23,15.78,21.15-5.22-5.92-10.56ZM116.1,102.15l3.07-21.56-12.01,1.54,8.94,20.03ZM85.34,99.52l20.14,8.67-12.35-17.94-7.79,9.27ZM130.7,106.46l16.04-14.73-10.27-6.42-5.77,21.16Z" data-v-431ec039></path>',8)]))}const b_e=er(g_e,[["render",__e],["__scopeId","data-v-431ec039"]]),x_e=or({components:{KudosIcon:b_e},props:{player:{type:Object,required:!0}},methods:{async onKudosClick(t){if(!this.player.choices[t].isKudosed)try{await this.$ecast.updateObject(this.player.responseKey,{kudos:t})}catch(e){this.$handleEcastError(e)}}}}),v_e={class:"kudosing"},E_e={class:"constrain"},y_e={class:"choices"},T_e=["disabled","onClick"];function A_e(t,e,r,i,s,a){const n=wr("KudosIcon");return Pe(),Ge("div",v_e,[Se("div",E_e,[e[0]||(e[0]=Xd('<div class="tip" data-v-9eb60027><p class="head" data-v-9eb60027>Send Kudos</p><p class="info" data-v-9eb60027>Send a <span class="callout" data-v-9eb60027>Kudos Bonus <span class="score" data-v-9eb60027>+50</span></span> to your opponent(s) and you also get the <span class="callout" data-v-9eb60027>Good Sport Bonus <span class="score" data-v-9eb60027>+10</span></span>.</p></div>',1)),Se("div",y_e,[(Pe(!0),Ge(Wt,null,Vn(t.player.choices,(o,u)=>(Pe(),Ge("div",{key:o.name,class:"choice"},[Se("button",{class:kt(["cookie-button",{selected:o.isKudosed}]),disabled:o.isKudosed,onClick:c=>t.onKudosClick(u)},[Zt(n),Se("span",null,xt(o.name),1)],10,T_e)]))),128))])])])}const S_e=er(x_e,[["render",A_e],["__scopeId","data-v-9eb60027"]]),R_e={},C_e={viewBox:"0 0 100 100"};function w_e(t,e){return Pe(),Ge("svg",C_e,e[0]||(e[0]=[Se("path",{d:"M50.01,33C54.31.22,101.45,7.25,99.97,38.37c-1.24,32.85-35.01,53.27-49.93,58.13C35.06,91.7,1.28,71.19.04,38.37-1.61,7.49,45.64.05,50.01,33"},null,-1)]))}const L_e=er(R_e,[["render",w_e]]),I_e=or({components:{LikeIcon:L_e,Kudosing:S_e},props:{player:{type:Object,required:!0}},data(){return{audienceVote:null}},computed:{hasVoted(){return this.audienceVote!==null?!0:this.player.choices.some(t=>t.isSelected)},isAudience(){return this.$ecast.role==="audience"},isKudos(){return this.isAudience?!1:!this.player.choices.some(t=>t.canVote)}},methods:{async onChoiceClick(t){if(this.player.responseKey)try{this.isAudience?(await this.$ecast.incrementCountGroupCounter(this.player.responseKey,`${t}`),this.audienceVote=t):await this.$ecast.updateObject(this.player.responseKey,{vote:t})}catch(e){console.error(e)}},async onLikeClick(t){if(!this.player.choices[t].isKudosed)try{await this.$ecast.updateObject(this.player.responseKey,{kudos:t})}catch(e){this.$handleEcastError(e)}}}}),B_e={key:1,class:"voting"},P_e={class:"constrain"},O_e={key:0,class:"prompt"},D_e={key:1,class:"prompt"},k_e=["disabled","onClick"],U_e=["disabled","onClick"];function M_e(t,e,r,i,s,a){const n=wr("Kudosing"),o=wr("LikeIcon");return t.isKudos?(Pe(),$n(n,{key:0,player:t.player},null,8,["player"])):(Pe(),Ge("div",B_e,[Se("div",P_e,[t.hasVoted?(Pe(),Ge("p",O_e,xt(t.$t("VOTING.THANK_YOU")),1)):(Pe(),Ge("p",D_e,xt(t.$t("VOTING.SELECT")),1)),Se("div",{class:kt(["choices",{likable:!t.isAudience}])},[(Pe(!0),Ge(Wt,null,Vn(t.player.choices,(u,c)=>(Pe(),Ge("div",{key:u.name,class:"choice"},[Se("button",{class:kt(["cookie-button vote",{selected:u.isSelected||t.audienceVote===c}]),disabled:t.hasVoted,onClick:f=>t.onChoiceClick(c)},[Se("span",null,xt(u.name),1)],10,k_e),t.isAudience?Ot("",!0):(Pe(),Ge("button",{key:0,class:kt(["like-button",{selected:u.isKudosed}]),disabled:u.isKudosed,onClick:f=>t.onLikeClick(c)},[Zt(o)],10,U_e))]))),128))],2)])]))}const N_e=er(I_e,[["render",M_e],["__scopeId","data-v-c45c92b6"]]),F_e=or({components:{LobbyActions:xte},props:{player:{type:Object,required:!0}},methods:{async shouldStart(){return!(!this.player.hasAllAvatars&&await this.$showModal("Options",{text:"Start before everyone's avatar cookies are ready?",options:[{text:"START ANYWAY",value:"confirm"},{text:"I'LL WAIT",value:"cancel"}]})!=="confirm")}}}),G_e={class:"lobby"},K_e={class:"constrain"};function V_e(t,e,r,i,s,a){const n=wr("LobbyActions");return Pe(),Ge("div",G_e,[Se("div",K_e,[Zt(n,{player:t.player,classes:{action:"cookie-button primary",message:"prompt"},"should-start":t.shouldStart},null,8,["player","should-start"])])])}const $_e=er(F_e,[["render",V_e]]),H_e=or({components:{Gallery:uN,EmbeddedPostGameActions:Qre},props:{artifact:{type:Object},player:{type:Object,required:!0}},data(){return{GalleryView:Bu(v8)}}});function q_e(t,e,r,i,s,a){var u,c;const n=wr("EmbeddedPostGameActions"),o=wr("Gallery");return Pe(),$n(o,{view:t.GalleryView,"artifact-id":(u=t.artifact)==null?void 0:u.artifactId,"category-id":(c=t.artifact)==null?void 0:c.categoryId,context:"postGame"},{default:Kd(()=>[Zt(n,{class:"constrain",player:t.player,classes:{action:["cookie-button"]}},null,8,["player"])]),_:1},8,["view","artifact-id","category-id"])}const X_e=er(H_e,[["render",q_e],["__scopeId","data-v-b47ad044"]]),kU=["SCORE_LIKE","SCORE_KUDOS","SCORE_GOOD_SPORT","SCORE_SWEEP","SCORE_WINNER","SCORE_TODAY","SCORE_SWEEP","SCORE_TIME","SCORE_DOUBLE_TIME","SCORE_DUO","SCORE_HARD_SHAPE"],z_e=or({props:{player:{type:Object,required:!0}},data(){return{checkNumber:this.getCheckNumber(),day:this.getDay()}},computed:{bonuses(){const t=[{},{},{},{},{},{},{}],e=[...this.player.allBonuses].sort((i,s)=>kU.indexOf(i.key)-kU.indexOf(s.key)),r=e.splice(6);return e.forEach((i,s)=>{t[s].label=i.count?this.$t(`BONUSES.${i.key}.CHECK_NAME`,{count:`x${i.count}`}):this.$t(`BONUSES.${i.key}.CHECK_NAME`);let a=i.key.replace("SCORE_","").replace("_","-").toLowerCase();i.count&&(a+=` count-${i.count}`),t[s].badgeClass=a,t[s].points=`+${i.points}`,t[s].score=i.points}),r.length&&(t[6].label="other things",t[6].score=r.reduce((i,s)=>i+s.points,0),t[6].points=`+${t[6].score}`),t},items(){return[this.votes,...this.bonuses]},votes(){if(!this.player.voters.length)return{label:this.$t("VOTES.NO_VOTES"),points:"",score:0};const t=Math.round(this.player.votePoints*this.player.voters.length);return{label:this.$t("VOTES.CHECK_NAME",{count:`x${this.player.voters.length}`}),points:`+${t}`,score:t}},note(){return"Thank you!"},total(){const t=this.votes.score??0,e=this.bonuses.reduce((r,i)=>r+(i.score??0),0);return t+e}},methods:{getDay(){return new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})},getCheckNumber(){const a=new Date,n=a.getTime(),o=new Date(2024,11,5,8,2).getTime(),u=n-o,c=Math.floor(u/31536e6).toString().padStart(2,"0"),f=Math.floor(u%31536e6/6048e5).toString().padStart(2,"0"),h=a.getDay(),p=a.getHours().toString().padStart(2,"0"),g=a.getMinutes().toString().padStart(2,"0");return`${c}${f}${h}${p}${g}`}}}),W_e="./assets/DnSozIZN.png",j_e={class:"scores"},Y_e={class:"constrain"},Z_e={class:"check"},Q_e={class:"top"},J_e={class:"info"},ebe={class:"date"},tbe={class:"writing"},rbe={class:"number"},nbe={class:"digits"},ibe={class:"bonuses"},sbe={class:"type"},abe={class:"bonus"},obe={key:0,class:"writing"},ube={class:"points"},lbe={key:0,class:"writing"},cbe={class:"bottom"},fbe={class:"note"},hbe={class:"writing"},dbe={class:"total"},pbe={class:"writing"};function gbe(t,e,r,i,s,a){return Pe(),Ge("div",j_e,[Se("div",Y_e,[Se("div",Z_e,[Se("div",Q_e,[e[3]||(e[3]=Se("img",{src:W_e,alt:"Your Score"},null,-1)),Se("div",J_e,[Se("div",ebe,[e[0]||(e[0]=Se("p",{class:"label"},"DATE",-1)),Se("p",tbe,xt(t.day),1)]),e[2]||(e[2]=Se("div",{class:"server"},[Se("p",{class:"label"},"SERVER"),Se("p",{class:"writing"},"Moonique")],-1)),Se("div",rbe,[e[1]||(e[1]=Se("p",{class:"label"},"CHECK",-1)),Se("p",nbe,xt(t.checkNumber),1)])])]),Se("div",ibe,[e[4]||(e[4]=Xd('<div class="head" data-v-8b69716a><div class="type" data-v-8b69716a></div><div class="bonus" data-v-8b69716a><p class="label" data-v-8b69716a>BONUS</p></div><div class="points" data-v-8b69716a><p class="label" data-v-8b69716a>POINTS</p></div></div>',1)),(Pe(!0),Ge(Wt,null,Vn(t.items,(n,o)=>(Pe(),Ge("div",{key:o,class:"row"},[Se("div",sbe,[n.badgeClass?(Pe(),Ge("span",{key:0,class:kt(["badge",n.badgeClass])},null,2)):Ot("",!0)]),Se("div",abe,[n.label?(Pe(),Ge("p",obe,xt(n.label),1)):Ot("",!0)]),Se("div",ube,[n.points?(Pe(),Ge("p",lbe,xt(n.points),1)):Ot("",!0)])]))),128))]),Se("div",cbe,[Se("div",fbe,[Se("p",hbe,xt(t.note),1)]),Se("div",dbe,[Se("p",pbe,xt(t.total),1)])])])])])}const mbe=er(z_e,[["render",gbe],["__scopeId","data-v-8b69716a"]]),UU=["SCORE_KUDOS","SCORE_GOOD_SPORT","SCORE_LIKE","SCORE_SWEEP","SCORE_KUDOS","SCORE_AUDIENCE","SCORE_WINNER","SCORE_GOOD_SPORT","SCORE_HARD_SHAPE","SCORE_DUO","SCORE_KUDOS","SCORE_TIME"],_be=or({props:{player:{type:Object,required:!0}},data(){return{index:null}},computed:{badgeClass(){return this.tip===null?"":this.tip.replace("SCORE_","").replace("_","-").toLowerCase()},tip(){return this.index===null?null:UU[this.index]}},mounted(){const t=parseInt(yn.get("tipIndex","tag")??"-1",10);this.index=t>=UU.length-1?0:t+1,yn.set("tipIndex",`${this.index}`,"tag")},methods:{async onSkipClick(){if(!(!this.player.canSkip||!this.player.responseKey))try{await this.$ecast.updateObject(this.player.responseKey,{skip:!0})}catch(t){this.$handleEcastError(t)}}}}),bbe={class:"waiting"},xbe={class:"constrain"},vbe={key:1,class:"tip"},Ebe={class:"top"},ybe={class:"title"},Tbe={class:"bottom"},Abe={class:"info"},Sbe={class:"score"};function Rbe(t,e,r,i,s,a){const n=ls("bb");return Pe(),Ge("div",bbe,[Se("div",xbe,[t.player.canSkip&&t.player.responseKey?(Pe(),Ge(Wt,{key:0},[e[1]||(e[1]=Se("p",{class:"prompt"},"Already know how to play?",-1)),Se("button",{class:"cookie-button primary",onClick:e[0]||(e[0]=(...o)=>t.onSkipClick&&t.onSkipClick(...o))}," Skip ")],64)):t.tip&&t.$ecast.role==="player"?(Pe(),Ge("div",vbe,[e[2]||(e[2]=Se("p",{class:"head"},"Tips on Bonuses",-1)),Se("div",Ebe,[Se("span",{class:kt(["badge",t.badgeClass])},null,2),gr(Se("p",ybe,null,512),[[n,t.$t(`BONUSES.${t.tip}.TIP_NAME`)]])]),Se("div",Tbe,[gr(Se("p",Abe,null,512),[[n,t.$t(`BONUSES.${t.tip}.DESCRIPTION`)]])]),gr(Se("p",Sbe,null,512),[[n,t.$t(`BONUSES.${t.tip}.TIP_SCORE`)]])])):Ot("",!0)])])}const Cbe=er(_be,[["render",Rbe],["__scopeId","data-v-97b48468"]]),wbe=or({ecastKeys:{cookieStatus:"cookieStatus",audiencePlayer:"audiencePlayer",player:{hasDeepRefs:!0,fn:({id:t})=>`player:${t}`}},ecastProviders:{artifact:t=>{if(t.artifact)return t.artifact;let e=0,r;for(;t[`artifact:${e}`];)r=t[`artifact:${e}`],e+=1;return r},hostIsPaused:t=>{var e;return((e=t.hostIsPaused)==null?void 0:e.hostIsPaused)??!1}},bb:{blank:()=>'<span class="blank"></span>',br:()=>"<br>",callout:(t,e)=>`<span class="callout">${e}</span>`,nowrap:(t,e)=>`<span class="nowrap">${e}</span>`},props:{artifact:{type:Object},audiencePlayer:{type:Object},cookieStatus:{type:Object},hostIsPaused:{type:Boolean},player:{type:Object}},themeColor:"#083744",computed:{headerClasses(){var t;return((t=this.player)==null?void 0:t.kind)!=="decorate"?[]:this.player.properties.shapeIndex!==void 0?["hidden"]:[]},isReady(){return!!(this.player||this.audiencePlayer)},kind(){var t,e;return((t=this.player)==null?void 0:t.kind)??((e=this.audiencePlayer)==null?void 0:e.kind)??null},name(){return this.$ecast.role==="audience"?"AUDIENCE":this.$ecast.name},screen(){const t=this.audiencePlayer??this.player;switch(t==null?void 0:t.kind){case"decorate":return[p_e,{player:t,hostIsPaused:this.hostIsPaused,status:this.cookieStatus}];case"voting":return[N_e,{player:t}];case"lobby":return[$_e,{player:t}];case"postGame":return[X_e,{player:this.player,artifact:this.artifact}];case"scoreboard":return[mbe,{player:this.player}];default:return[Cbe,{player:t}]}}}}),Lbe={key:0,class:"cookies"};function Ibe(t,e,r,i,s,a){return t.isReady?(Pe(),Ge("div",Lbe,[t.screen?(Pe(),$n(Hd(t.screen[0]),Zc({key:0,role:"main"},t.screen[1]),null,16)):Ot("",!0),t.kind!=="postGame"?(Pe(),Ge("div",{key:1,class:kt(["header",t.headerClasses])},xt(t.$ecast.name),3)):Ot("",!0)])):Ot("",!0)}const Bbe=er(wbe,[["render",Ibe]]),Pbe="./assets/CqGEHFrO.jpg",Obe="./assets/D7xs7CpB.jpg",Dbe="./assets/368axa5v.jpg",kbe="./assets/BuvvAepb.jpg";class Ube extends iA{constructor(){super(...arguments);Be(this,"canvas");Be(this,"ctx");Be(this,"roundIndex");Be(this,"cookieIndex");Be(this,"round");Be(this,"cookie");Be(this,"player");Be(this,"fonts",[{family:"Clarence",sources:new URL("./assets/P7Sz4gId.woff",import.meta.url).href}])}setup(){this.roundIndex=parseInt(this.params.roundIndex,10),this.cookieIndex=parseInt(this.params.cookieIndex,10),this.round=this.data.blob.rounds[this.roundIndex],this.cookie=this.round.cookies[this.cookieIndex],this.player=this.data.blob.players[this.cookie.player]}async render(){return this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.width=1024,this.canvas.height=1024,await this.drawBackground(),await this.drawCookie(),await this.drawFrame(),this.drawText(),{dataURL:this.canvas.toDataURL()}}async drawBackground(){const r=new URL(Object.assign({"../assets/share-bg0.jpg":Pbe,"../assets/share-bg1.jpg":Obe,"../assets/share-bg2.jpg":Dbe,"../assets/share-bg3.jpg":kbe})[`../assets/share-bg${this.roundIndex}.jpg`],import.meta.url).href;await this.drawAsyncImage(this.ctx,r,0,0,1024,1024)}async drawCookie(){let r=this.cookie.doodle.lines;this.cookie.redoodle&&(r=[...this.cookie.redoodle.lines,...this.cookie.doodle.lines]);const i=new Qp(document.createElement("canvas"),{cookieType:this.cookie.properties.cookieType,rotation:this.cookie.properties.rotation,innerShape:this.cookie.shape.inner,outerShape:this.cookie.shape.outer,lines:r,size:this.cookie.doodle.size});await i.ready();const s=i.export();this.ctx.save(),this.ctx.shadowColor="#00000033",this.ctx.shadowOffsetX=20,this.ctx.shadowOffsetY=20,await this.drawBase64Image(this.ctx,s,100,40,830,830),i.destroy(),this.ctx.restore()}async drawFrame(){const r=new URL("./assets/JWSXTI1R.png",import.meta.url).href;await this.drawAsyncImage(this.ctx,r,0,0,1024,1024)}drawText(){this.ctx.fillStyle="#000000",this.ctx.font='50px "Clarence"',this.ctx.textAlign="center",this.ctx.fillText(this.player.name,512,860),this.ctx.fillStyle="#ffffff";const r=document.createElement("textarea");r.innerHTML=this.cookie.name,this.fillMultilineText(this.ctx,decodeURI(r.value),512,910,680,120,{fontFamily:"Clarence",fontSize:60})}}class Mbe extends iA{constructor(){super(...arguments);Be(this,"roundIndex");Be(this,"cookieIndex");Be(this,"round");Be(this,"cookie");Be(this,"player")}setup(){this.roundIndex=parseInt(this.params.roundIndex,10),this.cookieIndex=parseInt(this.params.cookieIndex,10),this.round=this.data.blob.rounds[this.roundIndex],this.cookie=this.round.cookies[this.cookieIndex],this.player=this.data.blob.players[this.cookie.player]}async render(){let r=this.cookie.doodle.lines;this.cookie.redoodle&&(r=[...this.cookie.redoodle.lines,...this.cookie.doodle.lines]);const i=new Qp(document.createElement("canvas"),{cookieType:this.cookie.properties.cookieType,rotation:this.cookie.properties.rotation,innerShape:this.cookie.shape.inner,outerShape:this.cookie.shape.outer,lines:r,size:this.cookie.doodle.size});await i.ready();const s=i.export(),a=new URL("./assets/lKAPXhpE.png",import.meta.url).href,n=await this.loadImage(a),o=document.createElement("canvas"),u=o.getContext("2d");o.width=450,o.height=400,u.drawImage(n,0,0),u.globalCompositeOperation="source-in",await this.drawBase64Image(u,s,180,60,285,300),i.destroy();const c=document.createElement("canvas"),f=c.getContext("2d");return c.width=450,c.height=400,f.globalCompositeOperation="multiply",f.drawImage(n,0,0),f.drawImage(o,0,0),{dataURL:c.toDataURL()}}}sce({MainView:Bbe,GalleryView:v8,messages:hce,plugins:[xae],renderers:{mug:Mbe,shareable:Ube}});export{$fe as A,uK as B,Ir as C,QF as D,tG as E,Gpe as F,f7 as G,xK as H,w7 as M,X7 as N,l6 as R,c6 as T,Hfe as a,VA as b,U7 as c,M7 as d,br as e,RK as f,SK as g,fK as h,tK as i,EG as j,xG as k};
//# sourceMappingURL=CNppNTzb.js.map
